(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=i(l);fetch(l.href,d)}})();function Vf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Qh={exports:{}},cl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function Pb(){if(qy)return cl;qy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,l,d){var f=null;if(d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),"key"in l){d={};for(var y in l)y!=="key"&&(d[y]=l[y])}else d=l;return l=d.ref,{$$typeof:r,type:a,key:f,ref:l!==void 0?l:null,props:d}}return cl.Fragment=e,cl.jsx=i,cl.jsxs=i,cl}var Gy;function qb(){return Gy||(Gy=1,Qh.exports=Pb()),Qh.exports}var p=qb(),Yh={exports:{}},Ue={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function Gb(){if(Hy)return Ue;Hy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),D=Symbol.iterator;function P(C){return C===null||typeof C!="object"?null:(C=D&&C[D]||C["@@iterator"],typeof C=="function"?C:null)}var re={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},se=Object.assign,U={};function he(C,$,ye){this.props=C,this.context=$,this.refs=U,this.updater=ye||re}he.prototype.isReactComponent={},he.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},he.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ne(){}ne.prototype=he.prototype;function me(C,$,ye){this.props=C,this.context=$,this.refs=U,this.updater=ye||re}var ge=me.prototype=new ne;ge.constructor=me,se(ge,he.prototype),ge.isPureReactComponent=!0;var Ce=Array.isArray;function Ee(){}var M={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function I(C,$,ye){var Te=ye.ref;return{$$typeof:r,type:C,key:$,ref:Te!==void 0?Te:null,props:ye}}function V(C,$){return I(C.type,$,C.props)}function N(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function z(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(ye){return $[ye]})}var w=/\/+/g;function Oe(C,$){return typeof C=="object"&&C!==null&&C.key!=null?z(""+C.key):$.toString(36)}function tt(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Ee,Ee):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Q(C,$,ye,Te,Me){var ze=typeof C;(ze==="undefined"||ze==="boolean")&&(C=null);var He=!1;if(C===null)He=!0;else switch(ze){case"bigint":case"string":case"number":He=!0;break;case"object":switch(C.$$typeof){case r:case e:He=!0;break;case x:return He=C._init,Q(He(C._payload),$,ye,Te,Me)}}if(He)return Me=Me(C),He=Te===""?"."+Oe(C,0):Te,Ce(Me)?(ye="",He!=null&&(ye=He.replace(w,"$&/")+"/"),Q(Me,$,ye,"",function(ii){return ii})):Me!=null&&(N(Me)&&(Me=V(Me,ye+(Me.key==null||C&&C.key===Me.key?"":(""+Me.key).replace(w,"$&/")+"/")+He)),$.push(Me)),1;He=0;var wt=Te===""?".":Te+":";if(Ce(C))for(var lt=0;lt<C.length;lt++)Te=C[lt],ze=wt+Oe(Te,lt),He+=Q(Te,$,ye,ze,Me);else if(lt=P(C),typeof lt=="function")for(C=lt.call(C),lt=0;!(Te=C.next()).done;)Te=Te.value,ze=wt+Oe(Te,lt++),He+=Q(Te,$,ye,ze,Me);else if(ze==="object"){if(typeof C.then=="function")return Q(tt(C),$,ye,Te,Me);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return He}function ce(C,$,ye){if(C==null)return C;var Te=[],Me=0;return Q(C,Te,"","",function(ze){return $.call(ye,ze,Me++)}),Te}function we(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(ye){(C._status===0||C._status===-1)&&(C._status=1,C._result=ye)},function(ye){(C._status===0||C._status===-1)&&(C._status=2,C._result=ye)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var ue=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Ye={map:ce,forEach:function(C,$,ye){ce(C,function(){$.apply(this,arguments)},ye)},count:function(C){var $=0;return ce(C,function(){$++}),$},toArray:function(C){return ce(C,function($){return $})||[]},only:function(C){if(!N(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Ue.Activity=S,Ue.Children=Ye,Ue.Component=he,Ue.Fragment=i,Ue.Profiler=l,Ue.PureComponent=me,Ue.StrictMode=a,Ue.Suspense=b,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(C){return M.H.useMemoCache(C)}},Ue.cache=function(C){return function(){return C.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(C,$,ye){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var Te=se({},C.props),Me=C.key;if($!=null)for(ze in $.key!==void 0&&(Me=""+$.key),$)!R.call($,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&$.ref===void 0||(Te[ze]=$[ze]);var ze=arguments.length-2;if(ze===1)Te.children=ye;else if(1<ze){for(var He=Array(ze),wt=0;wt<ze;wt++)He[wt]=arguments[wt+2];Te.children=He}return I(C.type,Me,Te)},Ue.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:d,_context:C},C},Ue.createElement=function(C,$,ye){var Te,Me={},ze=null;if($!=null)for(Te in $.key!==void 0&&(ze=""+$.key),$)R.call($,Te)&&Te!=="key"&&Te!=="__self"&&Te!=="__source"&&(Me[Te]=$[Te]);var He=arguments.length-2;if(He===1)Me.children=ye;else if(1<He){for(var wt=Array(He),lt=0;lt<He;lt++)wt[lt]=arguments[lt+2];Me.children=wt}if(C&&C.defaultProps)for(Te in He=C.defaultProps,He)Me[Te]===void 0&&(Me[Te]=He[Te]);return I(C,ze,Me)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(C){return{$$typeof:y,render:C}},Ue.isValidElement=N,Ue.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:we}},Ue.memo=function(C,$){return{$$typeof:v,type:C,compare:$===void 0?null:$}},Ue.startTransition=function(C){var $=M.T,ye={};M.T=ye;try{var Te=C(),Me=M.S;Me!==null&&Me(ye,Te),typeof Te=="object"&&Te!==null&&typeof Te.then=="function"&&Te.then(Ee,ue)}catch(ze){ue(ze)}finally{$!==null&&ye.types!==null&&($.types=ye.types),M.T=$}},Ue.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Ue.use=function(C){return M.H.use(C)},Ue.useActionState=function(C,$,ye){return M.H.useActionState(C,$,ye)},Ue.useCallback=function(C,$){return M.H.useCallback(C,$)},Ue.useContext=function(C){return M.H.useContext(C)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(C,$){return M.H.useDeferredValue(C,$)},Ue.useEffect=function(C,$){return M.H.useEffect(C,$)},Ue.useEffectEvent=function(C){return M.H.useEffectEvent(C)},Ue.useId=function(){return M.H.useId()},Ue.useImperativeHandle=function(C,$,ye){return M.H.useImperativeHandle(C,$,ye)},Ue.useInsertionEffect=function(C,$){return M.H.useInsertionEffect(C,$)},Ue.useLayoutEffect=function(C,$){return M.H.useLayoutEffect(C,$)},Ue.useMemo=function(C,$){return M.H.useMemo(C,$)},Ue.useOptimistic=function(C,$){return M.H.useOptimistic(C,$)},Ue.useReducer=function(C,$,ye){return M.H.useReducer(C,$,ye)},Ue.useRef=function(C){return M.H.useRef(C)},Ue.useState=function(C){return M.H.useState(C)},Ue.useSyncExternalStore=function(C,$,ye){return M.H.useSyncExternalStore(C,$,ye)},Ue.useTransition=function(){return M.H.useTransition()},Ue.version="19.2.3",Ue}var Fy;function Of(){return Fy||(Fy=1,Yh.exports=Gb()),Yh.exports}var _e=Of();const vc=Vf(_e);var Kh={exports:{}},dl={},Xh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function Hb(){return Qy||(Qy=1,(function(r){function e(Q,ce){var we=Q.length;Q.push(ce);e:for(;0<we;){var ue=we-1>>>1,Ye=Q[ue];if(0<l(Ye,ce))Q[ue]=ce,Q[we]=Ye,we=ue;else break e}}function i(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var ce=Q[0],we=Q.pop();if(we!==ce){Q[0]=we;e:for(var ue=0,Ye=Q.length,C=Ye>>>1;ue<C;){var $=2*(ue+1)-1,ye=Q[$],Te=$+1,Me=Q[Te];if(0>l(ye,we))Te<Ye&&0>l(Me,ye)?(Q[ue]=Me,Q[Te]=we,ue=Te):(Q[ue]=ye,Q[$]=we,ue=$);else if(Te<Ye&&0>l(Me,we))Q[ue]=Me,Q[Te]=we,ue=Te;else break e}}return ce}function l(Q,ce){var we=Q.sortIndex-ce.sortIndex;return we!==0?we:Q.id-ce.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,y=f.now();r.unstable_now=function(){return f.now()-y}}var b=[],v=[],x=1,S=null,D=3,P=!1,re=!1,se=!1,U=!1,he=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ge(Q){for(var ce=i(v);ce!==null;){if(ce.callback===null)a(v);else if(ce.startTime<=Q)a(v),ce.sortIndex=ce.expirationTime,e(b,ce);else break;ce=i(v)}}function Ce(Q){if(se=!1,ge(Q),!re)if(i(b)!==null)re=!0,Ee||(Ee=!0,z());else{var ce=i(v);ce!==null&&tt(Ce,ce.startTime-Q)}}var Ee=!1,M=-1,R=5,I=-1;function V(){return U?!0:!(r.unstable_now()-I<R)}function N(){if(U=!1,Ee){var Q=r.unstable_now();I=Q;var ce=!0;try{e:{re=!1,se&&(se=!1,ne(M),M=-1),P=!0;var we=D;try{t:{for(ge(Q),S=i(b);S!==null&&!(S.expirationTime>Q&&V());){var ue=S.callback;if(typeof ue=="function"){S.callback=null,D=S.priorityLevel;var Ye=ue(S.expirationTime<=Q);if(Q=r.unstable_now(),typeof Ye=="function"){S.callback=Ye,ge(Q),ce=!0;break t}S===i(b)&&a(b),ge(Q)}else a(b);S=i(b)}if(S!==null)ce=!0;else{var C=i(v);C!==null&&tt(Ce,C.startTime-Q),ce=!1}}break e}finally{S=null,D=we,P=!1}ce=void 0}}finally{ce?z():Ee=!1}}}var z;if(typeof me=="function")z=function(){me(N)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,Oe=w.port2;w.port1.onmessage=N,z=function(){Oe.postMessage(null)}}else z=function(){he(N,0)};function tt(Q,ce){M=he(function(){Q(r.unstable_now())},ce)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(Q){switch(D){case 1:case 2:case 3:var ce=3;break;default:ce=D}var we=D;D=ce;try{return Q()}finally{D=we}},r.unstable_requestPaint=function(){U=!0},r.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var we=D;D=Q;try{return ce()}finally{D=we}},r.unstable_scheduleCallback=function(Q,ce,we){var ue=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?ue+we:ue):we=ue,Q){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=we+Ye,Q={id:x++,callback:ce,priorityLevel:Q,startTime:we,expirationTime:Ye,sortIndex:-1},we>ue?(Q.sortIndex=we,e(v,Q),i(b)===null&&Q===i(v)&&(se?(ne(M),M=-1):se=!0,tt(Ce,we-ue))):(Q.sortIndex=Ye,e(b,Q),re||P||(re=!0,Ee||(Ee=!0,z()))),Q},r.unstable_shouldYield=V,r.unstable_wrapCallback=function(Q){var ce=D;return function(){var we=D;D=ce;try{return Q.apply(this,arguments)}finally{D=we}}}})($h)),$h}var Yy;function Fb(){return Yy||(Yy=1,Xh.exports=Hb()),Xh.exports}var Wh={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function Qb(){if(Ky)return fn;Ky=1;var r=Of();function e(b){var v="https://react.dev/errors/"+b;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)v+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+b+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,v,x){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:S==null?null:""+S,children:b,containerInfo:v,implementation:x}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(b,v){if(b==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,fn.createPortal=function(b,v){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return d(b,v,null,x)},fn.flushSync=function(b){var v=f.T,x=a.p;try{if(f.T=null,a.p=2,b)return b()}finally{f.T=v,a.p=x,a.d.f()}},fn.preconnect=function(b,v){typeof b=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,a.d.C(b,v))},fn.prefetchDNS=function(b){typeof b=="string"&&a.d.D(b)},fn.preinit=function(b,v){if(typeof b=="string"&&v&&typeof v.as=="string"){var x=v.as,S=y(x,v.crossOrigin),D=typeof v.integrity=="string"?v.integrity:void 0,P=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;x==="style"?a.d.S(b,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:S,integrity:D,fetchPriority:P}):x==="script"&&a.d.X(b,{crossOrigin:S,integrity:D,fetchPriority:P,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},fn.preinitModule=function(b,v){if(typeof b=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var x=y(v.as,v.crossOrigin);a.d.M(b,{crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&a.d.M(b)},fn.preload=function(b,v){if(typeof b=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var x=v.as,S=y(x,v.crossOrigin);a.d.L(b,x,{crossOrigin:S,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},fn.preloadModule=function(b,v){if(typeof b=="string")if(v){var x=y(v.as,v.crossOrigin);a.d.m(b,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:x,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else a.d.m(b)},fn.requestFormReset=function(b){a.d.r(b)},fn.unstable_batchedUpdates=function(b,v){return b(v)},fn.useFormState=function(b,v,x){return f.H.useFormState(b,v,x)},fn.useFormStatus=function(){return f.H.useHostTransitionStatus()},fn.version="19.2.3",fn}var Xy;function Yb(){if(Xy)return Wh.exports;Xy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wh.exports=Qb(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function Kb(){if($y)return dl;$y=1;var r=Fb(),e=Of(),i=Yb();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function b(t){if(d(t)!==t)throw Error(a(188))}function v(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,o=n;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(o=c.return,o!==null){s=o;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return b(c),t;if(h===o)return b(c),n;h=h.sibling}throw Error(a(188))}if(s.return!==o.return)s=c,o=h;else{for(var _=!1,T=c.child;T;){if(T===s){_=!0,s=c,o=h;break}if(T===o){_=!0,o=c,s=h;break}T=T.sibling}if(!_){for(T=h.child;T;){if(T===s){_=!0,s=h,o=c;break}if(T===o){_=!0,o=h,s=c;break}T=T.sibling}if(!_)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function x(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=x(t),n!==null)return n;t=t.sibling}return null}var S=Object.assign,D=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),re=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),he=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),me=Symbol.for("react.context"),ge=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),Ee=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),V=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var w=Symbol.for("react.client.reference");function Oe(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===w?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case se:return"Fragment";case he:return"Profiler";case U:return"StrictMode";case Ce:return"Suspense";case Ee:return"SuspenseList";case I:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case re:return"Portal";case me:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case ge:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return n=t.displayName||null,n!==null?n:Oe(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return Oe(t(n))}catch{}}return null}var tt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},ue=[],Ye=-1;function C(t){return{current:t}}function $(t){0>Ye||(t.current=ue[Ye],ue[Ye]=null,Ye--)}function ye(t,n){Ye++,ue[Ye]=t.current,t.current=n}var Te=C(null),Me=C(null),ze=C(null),He=C(null);function wt(t,n){switch(ye(ze,n),ye(Me,t),ye(Te,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?dy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=dy(n),t=hy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(Te),ye(Te,t)}function lt(){$(Te),$(Me),$(ze)}function ii(t){t.memoizedState!==null&&ye(He,t);var n=Te.current,s=hy(n,t.type);n!==s&&(ye(Me,t),ye(Te,s))}function mr(t){Me.current===t&&($(Te),$(Me)),He.current===t&&($(He),al._currentValue=we)}var gr,pr;function Pn(t){if(gr===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);gr=n&&n[1]||"",pr=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+gr+t+pr}var hs=!1;function Gi(t,n){if(!t||hs)return"";hs=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(X){var F=X}Reflect.construct(t,[],J)}else{try{J.call()}catch(X){F=X}t.call(J.prototype)}}else{try{throw Error()}catch(X){F=X}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(X){if(X&&F&&typeof X.stack=="string")return[X.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),_=h[0],T=h[1];if(_&&T){var O=_.split(`
`),H=T.split(`
`);for(c=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;c<H.length&&!H[c].includes("DetermineComponentFrameRoot");)c++;if(o===O.length||c===H.length)for(o=O.length-1,c=H.length-1;1<=o&&0<=c&&O[o]!==H[c];)c--;for(;1<=o&&0<=c;o--,c--)if(O[o]!==H[c]){if(o!==1||c!==1)do if(o--,c--,0>c||O[o]!==H[c]){var W=`
`+O[o].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=o&&0<=c);break}}}finally{hs=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Pn(s):""}function fs(t,n){switch(t.tag){case 26:case 27:case 5:return Pn(t.type);case 16:return Pn("Lazy");case 13:return t.child!==n&&n!==null?Pn("Suspense Fallback"):Pn("Suspense");case 19:return Pn("SuspenseList");case 0:case 15:return Gi(t.type,!1);case 11:return Gi(t.type.render,!1);case 1:return Gi(t.type,!0);case 31:return Pn("Activity");default:return""}}function ms(t){try{var n="",s=null;do n+=fs(t,s),s=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Rt=Object.prototype.hasOwnProperty,Mt=r.unstable_scheduleCallback,vi=r.unstable_cancelCallback,ea=r.unstable_shouldYield,ta=r.unstable_requestPaint,nn=r.unstable_now,Hi=r.unstable_getCurrentPriorityLevel,gs=r.unstable_ImmediatePriority,ps=r.unstable_UserBlockingPriority,ri=r.unstable_NormalPriority,na=r.unstable_LowPriority,ys=r.unstable_IdlePriority,B=r.log,k=r.unstable_setDisableYieldValue,K=null,te=null;function pe(t){if(typeof B=="function"&&k(t),te&&typeof te.setStrictMode=="function")try{te.setStrictMode(K,t)}catch{}}var le=Math.clz32?Math.clz32:ae,de=Math.log,Le=Math.LN2;function ae(t){return t>>>=0,t===0?32:31-(de(t)/Le|0)|0}var je=256,yt=262144,Ae=4194304;function Fe(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function kt(t,n,s){var o=t.pendingLanes;if(o===0)return 0;var c=0,h=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~h,o!==0?c=Fe(o):(_&=T,_!==0?c=Fe(_):s||(s=T&~t,s!==0&&(c=Fe(s))))):(T=o&~h,T!==0?c=Fe(T):_!==0?c=Fe(_):s||(s=o&~t,s!==0&&(c=Fe(s)))),c===0?0:n!==0&&n!==c&&(n&h)===0&&(h=c&-c,s=n&-n,h>=s||h===32&&(s&4194048)!==0)?n:c}function hn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function vs(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yr(){var t=Ae;return Ae<<=1,(Ae&62914560)===0&&(Ae=4194304),t}function Qe(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Dt(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function si(t,n,s,o,c,h){var _=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,H=t.hiddenUpdates;for(s=_&~s;0<s;){var W=31-le(s),J=1<<W;T[W]=0,O[W]=-1;var F=H[W];if(F!==null)for(H[W]=null,W=0;W<F.length;W++){var X=F[W];X!==null&&(X.lane&=-536870913)}s&=~J}o!==0&&Nn(t,o,0),h!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=h&~(_&~n))}function Nn(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-le(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|s&261930}function Fi(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var o=31-le(s),c=1<<o;c&n|t[o]&n&&(t[o]|=n),s&=~c}}function vr(t,n){var s=n&-n;return s=(s&42)!==0?1:ai(s),(s&(t.suspendedLanes|n))!==0?0:s}function ai(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function _n(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function oi(){var t=ce.p;return t!==0?t:(t=window.event,t===void 0?32:jy(t.type))}function Yt(t,n){var s=ce.p;try{return ce.p=t,n()}finally{ce.p=s}}var In=Math.random().toString(36).slice(2),xt="__reactFiber$"+In,Kt="__reactProps$"+In,bn="__reactContainer$"+In,ia="__reactEvents$"+In,Zc="__reactListeners$"+In,Ll="__reactHandles$"+In,Ul="__reactResources$"+In,_i="__reactMarker$"+In;function ra(t){delete t[xt],delete t[Kt],delete t[ia],delete t[Zc],delete t[Ll]}function bi(t){var n=t[xt];if(n)return n;for(var s=t.parentNode;s;){if(n=s[bn]||s[xt]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=_y(t);t!==null;){if(s=t[xt])return s;t=_y(t)}return n}t=s,s=t.parentNode}return null}function qn(t){if(t=t[xt]||t[bn]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function Mn(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Ei(t){var n=t[Ul];return n||(n=t[Ul]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Lt(t){t[_i]=!0}var fo=new Set,mo={};function Ti(t,n){xi(t,n),xi(t+"Capture",n)}function xi(t,n){for(mo[t]=n,t=0;t<n.length;t++)fo.add(n[t])}var go=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),po={},yo={};function Bl(t){return Rt.call(yo,t)?!0:Rt.call(po,t)?!1:go.test(t)?yo[t]=!0:(po[t]=!0,!1)}function sa(t,n,s){if(Bl(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function Vn(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function Ut(t,n,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+o)}}function Jt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _r(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function vo(t,n,s){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,h=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(_){s=""+_,h.call(this,_)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(_){s=""+_},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ct(t){if(!t._valueTracker){var n=_r(t)?"checked":"value";t._valueTracker=vo(t,n,""+t[n])}}function _s(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return t&&(o=_r(t)?t.checked?"true":"false":t.value),t=o,t!==s?(n.setValue(t),!0):!1}function Ai(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var bs=/[\n"\\]/g;function En(t){return t.replace(bs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function aa(t,n,s,o,c,h,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),n!=null?_==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Jt(n)):t.value!==""+Jt(n)&&(t.value=""+Jt(n)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),n!=null?_o(t,_,Jt(n)):s!=null?_o(t,_,Jt(s)):o!=null&&t.removeAttribute("value"),c==null&&h!=null&&(t.defaultChecked=!!h),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Jt(T):t.removeAttribute("name")}function Pl(t,n,s,o,c,h,_,T){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),n!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){ct(t);return}s=s!=null?""+Jt(s):"",n=n!=null?""+Jt(n):s,T||n===t.value||(t.value=n),t.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),ct(t)}function _o(t,n,s){n==="number"&&Ai(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function br(t,n,s,o){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&o&&(t[s].defaultSelected=!0)}else{for(s=""+Jt(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,o&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function ql(t,n,s){if(n!=null&&(n=""+Jt(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+Jt(s):""}function Er(t,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(tt(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=Jt(n),t.defaultValue=s,o=t.textContent,o===s&&o!==""&&o!==null&&(t.value=o),ct(t)}function Tn(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Gl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bo(t,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,s):typeof s!="number"||s===0||Gl.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function Eo(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&s[c]!==o&&bo(t,c,o)}else for(var h in n)n.hasOwnProperty(h)&&bo(t,h,n[h])}function oa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(t){return Tr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function li(){}var To=null;function Gn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xr=null,Si=null;function Es(t){var n=qn(t);if(n&&(t=n.stateNode)){var s=t[Kt]||null;e:switch(t=n.stateNode,n.type){case"input":if(aa(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+En(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==t&&o.form===t.form){var c=o[Kt]||null;if(!c)throw Error(a(90));aa(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===t.form&&_s(o)}break e;case"textarea":ql(t,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&br(t,!!s.multiple,n,!1)}}}var ua=!1;function Ar(t,n,s){if(ua)return t(n,s);ua=!0;try{var o=t(n);return o}finally{if(ua=!1,(xr!==null||Si!==null)&&(ku(),xr&&(n=xr,t=Si,Si=xr=null,Es(n),t)))for(n=0;n<t.length;n++)Es(t[n])}}function ui(t,n){var s=t.stateNode;if(s===null)return null;var o=s[Kt]||null;if(o===null)return null;s=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ts=!1;if(Hn)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",ft,ft),window.removeEventListener("test",ft,ft)}catch{Ts=!1}var wi=null,xo=null,xs=null;function Ao(){if(xs)return xs;var t,n=xo,s=n.length,o,c="value"in wi?wi.value:wi.textContent,h=c.length;for(t=0;t<s&&n[t]===c[t];t++);var _=s-t;for(o=1;o<=_&&n[s-o]===c[h-o];o++);return xs=c.slice(t,1<o?1-o:void 0)}function As(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Qi(){return!0}function ci(){return!1}function rn(t){function n(s,o,c,h,_){this._reactName=s,this._targetInst=c,this.type=o,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(h):h[T]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Qi:ci,this.isPropagationStopped=ci,this}return S(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Qi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Qi)},persist:function(){},isPersistent:Qi}),n}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ci=rn(Yi),Sr=S({},Yi,{view:0,detail:0}),So=rn(Sr),wr,ca,Ri,da=S({},Sr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ri&&(Ri&&t.type==="mousemove"?(wr=t.screenX-Ri.screenX,ca=t.screenY-Ri.screenY):ca=wr=0,Ri=t),wr)},movementY:function(t){return"movementY"in t?t.movementY:ca}}),wo=rn(da),Ss=S({},da,{dataTransfer:0}),Fl=rn(Ss),Ql=S({},Sr,{relatedTarget:0}),ws=rn(Ql),Co=S({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),Yl=rn(Co),ha=S({},Yi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kl=rn(ha),Xl=S({},Yi,{data:0}),Di=rn(Xl),$l={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jl(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=Zl[t])?!!n[t]:!1}function Cr(){return Jl}var yn=S({},Sr,{key:function(t){if(t.key){var n=$l[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=As(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(t){return t.type==="keypress"?As(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?As(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eu=rn(yn),tu=S({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=rn(tu),u=S({},Sr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr}),g=rn(u),E=S({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=rn(E),q=S({},da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Y=rn(q),fe=S({},Yi,{newState:0,oldState:0}),Pe=rn(fe),Vt=[9,13,27,32],at=Hn&&"CompositionEvent"in window,At=null;Hn&&"documentMode"in document&&(At=document.documentMode);var Fn=Hn&&"TextEvent"in window&&!At,Ni=Hn&&(!at||At&&8<At&&11>=At),di=" ",hi=!1;function Cs(t,n){switch(t){case"keyup":return Vt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ma=!1;function d1(t,n){switch(t){case"compositionend":return fa(n);case"keypress":return n.which!==32?null:(hi=!0,di);case"textInput":return t=n.data,t===di&&hi?null:t;default:return null}}function h1(t,n){if(ma)return t==="compositionend"||!at&&Cs(t,n)?(t=Ao(),xs=xo=wi=null,ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Ni&&n.locale!=="ko"?null:n.data;default:return null}}var f1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!f1[t.type]:n==="textarea"}function xm(t,n,s,o){xr?Si?Si.push(o):Si=[o]:xr=o,n=Hu(n,"onChange"),0<n.length&&(s=new Ci("onChange","change",null,s,o),t.push({event:s,listeners:n}))}var Ro=null,Do=null;function m1(t){sy(t,0)}function nu(t){var n=Mn(t);if(_s(n))return t}function Am(t,n){if(t==="change")return n}var Sm=!1;if(Hn){var Jc;if(Hn){var ed="oninput"in document;if(!ed){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),ed=typeof wm.oninput=="function"}Jc=ed}else Jc=!1;Sm=Jc&&(!document.documentMode||9<document.documentMode)}function Cm(){Ro&&(Ro.detachEvent("onpropertychange",Rm),Do=Ro=null)}function Rm(t){if(t.propertyName==="value"&&nu(Do)){var n=[];xm(n,Do,t,Gn(t)),Ar(m1,n)}}function g1(t,n,s){t==="focusin"?(Cm(),Ro=n,Do=s,Ro.attachEvent("onpropertychange",Rm)):t==="focusout"&&Cm()}function p1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nu(Do)}function y1(t,n){if(t==="click")return nu(n)}function v1(t,n){if(t==="input"||t==="change")return nu(n)}function _1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var On=typeof Object.is=="function"?Object.is:_1;function No(t,n){if(On(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var c=s[o];if(!Rt.call(n,c)||!On(t[c],n[c]))return!1}return!0}function Dm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nm(t,n){var s=Dm(t);t=0;for(var o;s;){if(s.nodeType===3){if(o=t+s.textContent.length,t<=n&&o>=n)return{node:s,offset:n-t};t=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Dm(s)}}function Im(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Im(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Mm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ai(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Ai(t.document)}return n}function td(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var b1=Hn&&"documentMode"in document&&11>=document.documentMode,ga=null,nd=null,Io=null,id=!1;function Vm(t,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;id||ga==null||ga!==Ai(o)||(o=ga,"selectionStart"in o&&td(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Io&&No(Io,o)||(Io=o,o=Hu(nd,"onSelect"),0<o.length&&(n=new Ci("onSelect","select",null,n,s),t.push({event:n,listeners:o}),n.target=ga)))}function Rs(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var pa={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},rd={},Om={};Hn&&(Om=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Ds(t){if(rd[t])return rd[t];if(!pa[t])return t;var n=pa[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in Om)return rd[t]=n[s];return t}var jm=Ds("animationend"),zm=Ds("animationiteration"),km=Ds("animationstart"),E1=Ds("transitionrun"),T1=Ds("transitionstart"),x1=Ds("transitioncancel"),Lm=Ds("transitionend"),Um=new Map,sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sd.push("scrollEnd");function fi(t,n){Um.set(t,n),Ti(n,[t])}var iu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Qn=[],ya=0,ad=0;function ru(){for(var t=ya,n=ad=ya=0;n<t;){var s=Qn[n];Qn[n++]=null;var o=Qn[n];Qn[n++]=null;var c=Qn[n];Qn[n++]=null;var h=Qn[n];if(Qn[n++]=null,o!==null&&c!==null){var _=o.pending;_===null?c.next=c:(c.next=_.next,_.next=c),o.pending=c}h!==0&&Bm(s,c,h)}}function su(t,n,s,o){Qn[ya++]=t,Qn[ya++]=n,Qn[ya++]=s,Qn[ya++]=o,ad|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function od(t,n,s,o){return su(t,n,s,o),au(t)}function Ns(t,n){return su(t,null,null,n),au(t)}function Bm(t,n,s){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s);for(var c=!1,h=t.return;h!==null;)h.childLanes|=s,o=h.alternate,o!==null&&(o.childLanes|=s),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(c=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,c&&n!==null&&(c=31-le(s),t=h.hiddenUpdates,o=t[c],o===null?t[c]=[n]:o.push(n),n.lane=s|536870912),h):null}function au(t){if(50<Jo)throw Jo=0,ph=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var va={};function A1(t,n,s,o){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,n,s,o){return new A1(t,n,s,o)}function ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xi(t,n){var s=t.alternate;return s===null?(s=jn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Pm(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function ou(t,n,s,o,c,h){var _=0;if(o=t,typeof t=="function")ld(t)&&(_=1);else if(typeof t=="string")_=Db(t,s,Te.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case I:return t=jn(31,s,n,c),t.elementType=I,t.lanes=h,t;case se:return Is(s.children,c,h,n);case U:_=8,c|=24;break;case he:return t=jn(12,s,n,c|2),t.elementType=he,t.lanes=h,t;case Ce:return t=jn(13,s,n,c),t.elementType=Ce,t.lanes=h,t;case Ee:return t=jn(19,s,n,c),t.elementType=Ee,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:_=10;break e;case ne:_=9;break e;case ge:_=11;break e;case M:_=14;break e;case R:_=16,o=null;break e}_=29,s=Error(a(130,t===null?"null":typeof t,"")),o=null}return n=jn(_,s,n,c),n.elementType=t,n.type=o,n.lanes=h,n}function Is(t,n,s,o){return t=jn(7,t,o,n),t.lanes=s,t}function ud(t,n,s){return t=jn(6,t,null,n),t.lanes=s,t}function qm(t){var n=jn(18,null,null,0);return n.stateNode=t,n}function cd(t,n,s){return n=jn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Gm=new WeakMap;function Yn(t,n){if(typeof t=="object"&&t!==null){var s=Gm.get(t);return s!==void 0?s:(n={value:t,source:n,stack:ms(n)},Gm.set(t,n),n)}return{value:t,source:n,stack:ms(n)}}var _a=[],ba=0,lu=null,Mo=0,Kn=[],Xn=0,Rr=null,Ii=1,Mi="";function $i(t,n){_a[ba++]=Mo,_a[ba++]=lu,lu=t,Mo=n}function Hm(t,n,s){Kn[Xn++]=Ii,Kn[Xn++]=Mi,Kn[Xn++]=Rr,Rr=t;var o=Ii;t=Mi;var c=32-le(o)-1;o&=~(1<<c),s+=1;var h=32-le(n)+c;if(30<h){var _=c-c%5;h=(o&(1<<_)-1).toString(32),o>>=_,c-=_,Ii=1<<32-le(n)+c|s<<c|o,Mi=h+t}else Ii=1<<h|s<<c|o,Mi=t}function dd(t){t.return!==null&&($i(t,1),Hm(t,1,0))}function hd(t){for(;t===lu;)lu=_a[--ba],_a[ba]=null,Mo=_a[--ba],_a[ba]=null;for(;t===Rr;)Rr=Kn[--Xn],Kn[Xn]=null,Mi=Kn[--Xn],Kn[Xn]=null,Ii=Kn[--Xn],Kn[Xn]=null}function Fm(t,n){Kn[Xn++]=Ii,Kn[Xn++]=Mi,Kn[Xn++]=Rr,Ii=n.id,Mi=n.overflow,Rr=t}var sn=null,bt=null,et=!1,Dr=null,$n=!1,fd=Error(a(519));function Nr(t){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vo(Yn(n,t)),fd}function Qm(t){var n=t.stateNode,s=t.type,o=t.memoizedProps;switch(n[xt]=t,n[Kt]=o,s){case"dialog":Xe("cancel",n),Xe("close",n);break;case"iframe":case"object":case"embed":Xe("load",n);break;case"video":case"audio":for(s=0;s<tl.length;s++)Xe(tl[s],n);break;case"source":Xe("error",n);break;case"img":case"image":case"link":Xe("error",n),Xe("load",n);break;case"details":Xe("toggle",n);break;case"input":Xe("invalid",n),Pl(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Xe("invalid",n);break;case"textarea":Xe("invalid",n),Er(n,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||uy(n.textContent,s)?(o.popover!=null&&(Xe("beforetoggle",n),Xe("toggle",n)),o.onScroll!=null&&Xe("scroll",n),o.onScrollEnd!=null&&Xe("scrollend",n),o.onClick!=null&&(n.onclick=li),n=!0):n=!1,n||Nr(t,!0)}function Ym(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 31:case 13:$n=!1;return;case 27:case 3:$n=!0;return;default:sn=sn.return}}function Ea(t){if(t!==sn)return!1;if(!et)return Ym(t),et=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Ih(t.type,t.memoizedProps)),s=!s),s&&bt&&Nr(t),Ym(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));bt=vy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));bt=vy(t)}else n===27?(n=bt,Hr(t.type)?(t=zh,zh=null,bt=t):bt=n):bt=sn?Zn(t.stateNode.nextSibling):null;return!0}function Ms(){bt=sn=null,et=!1}function md(){var t=Dr;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),Dr=null),t}function Vo(t){Dr===null?Dr=[t]:Dr.push(t)}var gd=C(null),Vs=null,Wi=null;function Ir(t,n,s){ye(gd,n._currentValue),n._currentValue=s}function Zi(t){t._currentValue=gd.current,$(gd)}function pd(t,n,s){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===s)break;t=t.return}}function yd(t,n,s,o){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var h=c.dependencies;if(h!==null){var _=c.child;h=h.firstContext;e:for(;h!==null;){var T=h;h=c;for(var O=0;O<n.length;O++)if(T.context===n[O]){h.lanes|=s,T=h.alternate,T!==null&&(T.lanes|=s),pd(h.return,s,t),o||(_=null);break e}h=T.next}}else if(c.tag===18){if(_=c.return,_===null)throw Error(a(341));_.lanes|=s,h=_.alternate,h!==null&&(h.lanes|=s),pd(_,s,t),_=null}else _=c.child;if(_!==null)_.return=c;else for(_=c;_!==null;){if(_===t){_=null;break}if(c=_.sibling,c!==null){c.return=_.return,_=c;break}_=_.return}c=_}}function Ta(t,n,s,o){t=null;for(var c=n,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var _=c.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var T=c.type;On(c.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(c===He.current){if(_=c.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(al):t=[al])}c=c.return}t!==null&&yd(n,t,s,o),n.flags|=262144}function uu(t){for(t=t.firstContext;t!==null;){if(!On(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Os(t){Vs=t,Wi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return Km(Vs,t)}function cu(t,n){return Vs===null&&Os(t),Km(t,n)}function Km(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},Wi===null){if(t===null)throw Error(a(308));Wi=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else Wi=Wi.next=n;return s}var S1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},w1=r.unstable_scheduleCallback,C1=r.unstable_NormalPriority,Bt={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vd(){return{controller:new S1,data:new Map,refCount:0}}function Oo(t){t.refCount--,t.refCount===0&&w1(C1,function(){t.controller.abort()})}var jo=null,_d=0,xa=0,Aa=null;function R1(t,n){if(jo===null){var s=jo=[];_d=0,xa=Th(),Aa={status:"pending",value:void 0,then:function(o){s.push(o)}}}return _d++,n.then(Xm,Xm),n}function Xm(){if(--_d===0&&jo!==null){Aa!==null&&(Aa.status="fulfilled");var t=jo;jo=null,xa=0,Aa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function D1(t,n){var s=[],o={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<s.length;c++)(0,s[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),o}var $m=Q.S;Q.S=function(t,n){Vp=nn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&R1(t,n),$m!==null&&$m(t,n)};var js=C(null);function bd(){var t=js.current;return t!==null?t:vt.pooledCache}function du(t,n){n===null?ye(js,js.current):ye(js,n.pool)}function Wm(){var t=bd();return t===null?null:{parent:Bt._currentValue,pool:t}}var Sa=Error(a(460)),Ed=Error(a(474)),hu=Error(a(542)),fu={then:function(){}};function Zm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Jm(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(li,li),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,tg(t),t;default:if(typeof n.status=="string")n.then(li,li);else{if(t=vt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,tg(t),t}throw ks=n,Sa}}function zs(t){try{var n=t._init;return n(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ks=s,Sa):s}}var ks=null;function eg(){if(ks===null)throw Error(a(459));var t=ks;return ks=null,t}function tg(t){if(t===Sa||t===hu)throw Error(a(483))}var wa=null,zo=0;function mu(t){var n=zo;return zo+=1,wa===null&&(wa=[]),Jm(wa,t,n)}function ko(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function gu(t,n){throw n.$$typeof===D?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function ng(t){function n(L,j){if(t){var G=L.deletions;G===null?(L.deletions=[j],L.flags|=16):G.push(j)}}function s(L,j){if(!t)return null;for(;j!==null;)n(L,j),j=j.sibling;return null}function o(L){for(var j=new Map;L!==null;)L.key!==null?j.set(L.key,L):j.set(L.index,L),L=L.sibling;return j}function c(L,j){return L=Xi(L,j),L.index=0,L.sibling=null,L}function h(L,j,G){return L.index=G,t?(G=L.alternate,G!==null?(G=G.index,G<j?(L.flags|=67108866,j):G):(L.flags|=67108866,j)):(L.flags|=1048576,j)}function _(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function T(L,j,G,Z){return j===null||j.tag!==6?(j=ud(G,L.mode,Z),j.return=L,j):(j=c(j,G),j.return=L,j)}function O(L,j,G,Z){var De=G.type;return De===se?W(L,j,G.props.children,Z,G.key):j!==null&&(j.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===R&&zs(De)===j.type)?(j=c(j,G.props),ko(j,G),j.return=L,j):(j=ou(G.type,G.key,G.props,null,L.mode,Z),ko(j,G),j.return=L,j)}function H(L,j,G,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==G.containerInfo||j.stateNode.implementation!==G.implementation?(j=cd(G,L.mode,Z),j.return=L,j):(j=c(j,G.children||[]),j.return=L,j)}function W(L,j,G,Z,De){return j===null||j.tag!==7?(j=Is(G,L.mode,Z,De),j.return=L,j):(j=c(j,G),j.return=L,j)}function J(L,j,G){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=ud(""+j,L.mode,G),j.return=L,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case P:return G=ou(j.type,j.key,j.props,null,L.mode,G),ko(G,j),G.return=L,G;case re:return j=cd(j,L.mode,G),j.return=L,j;case R:return j=zs(j),J(L,j,G)}if(tt(j)||z(j))return j=Is(j,L.mode,G,null),j.return=L,j;if(typeof j.then=="function")return J(L,mu(j),G);if(j.$$typeof===me)return J(L,cu(L,j),G);gu(L,j)}return null}function F(L,j,G,Z){var De=j!==null?j.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return De!==null?null:T(L,j,""+G,Z);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case P:return G.key===De?O(L,j,G,Z):null;case re:return G.key===De?H(L,j,G,Z):null;case R:return G=zs(G),F(L,j,G,Z)}if(tt(G)||z(G))return De!==null?null:W(L,j,G,Z,null);if(typeof G.then=="function")return F(L,j,mu(G),Z);if(G.$$typeof===me)return F(L,j,cu(L,G),Z);gu(L,G)}return null}function X(L,j,G,Z,De){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(G)||null,T(j,L,""+Z,De);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return L=L.get(Z.key===null?G:Z.key)||null,O(j,L,Z,De);case re:return L=L.get(Z.key===null?G:Z.key)||null,H(j,L,Z,De);case R:return Z=zs(Z),X(L,j,G,Z,De)}if(tt(Z)||z(Z))return L=L.get(G)||null,W(j,L,Z,De,null);if(typeof Z.then=="function")return X(L,j,G,mu(Z),De);if(Z.$$typeof===me)return X(L,j,G,cu(j,Z),De);gu(j,Z)}return null}function Se(L,j,G,Z){for(var De=null,rt=null,Re=j,Ge=j=0,We=null;Re!==null&&Ge<G.length;Ge++){Re.index>Ge?(We=Re,Re=null):We=Re.sibling;var st=F(L,Re,G[Ge],Z);if(st===null){Re===null&&(Re=We);break}t&&Re&&st.alternate===null&&n(L,Re),j=h(st,j,Ge),rt===null?De=st:rt.sibling=st,rt=st,Re=We}if(Ge===G.length)return s(L,Re),et&&$i(L,Ge),De;if(Re===null){for(;Ge<G.length;Ge++)Re=J(L,G[Ge],Z),Re!==null&&(j=h(Re,j,Ge),rt===null?De=Re:rt.sibling=Re,rt=Re);return et&&$i(L,Ge),De}for(Re=o(Re);Ge<G.length;Ge++)We=X(Re,L,Ge,G[Ge],Z),We!==null&&(t&&We.alternate!==null&&Re.delete(We.key===null?Ge:We.key),j=h(We,j,Ge),rt===null?De=We:rt.sibling=We,rt=We);return t&&Re.forEach(function(Xr){return n(L,Xr)}),et&&$i(L,Ge),De}function Ie(L,j,G,Z){if(G==null)throw Error(a(151));for(var De=null,rt=null,Re=j,Ge=j=0,We=null,st=G.next();Re!==null&&!st.done;Ge++,st=G.next()){Re.index>Ge?(We=Re,Re=null):We=Re.sibling;var Xr=F(L,Re,st.value,Z);if(Xr===null){Re===null&&(Re=We);break}t&&Re&&Xr.alternate===null&&n(L,Re),j=h(Xr,j,Ge),rt===null?De=Xr:rt.sibling=Xr,rt=Xr,Re=We}if(st.done)return s(L,Re),et&&$i(L,Ge),De;if(Re===null){for(;!st.done;Ge++,st=G.next())st=J(L,st.value,Z),st!==null&&(j=h(st,j,Ge),rt===null?De=st:rt.sibling=st,rt=st);return et&&$i(L,Ge),De}for(Re=o(Re);!st.done;Ge++,st=G.next())st=X(Re,L,Ge,st.value,Z),st!==null&&(t&&st.alternate!==null&&Re.delete(st.key===null?Ge:st.key),j=h(st,j,Ge),rt===null?De=st:rt.sibling=st,rt=st);return t&&Re.forEach(function(Bb){return n(L,Bb)}),et&&$i(L,Ge),De}function pt(L,j,G,Z){if(typeof G=="object"&&G!==null&&G.type===se&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case P:e:{for(var De=G.key;j!==null;){if(j.key===De){if(De=G.type,De===se){if(j.tag===7){s(L,j.sibling),Z=c(j,G.props.children),Z.return=L,L=Z;break e}}else if(j.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===R&&zs(De)===j.type){s(L,j.sibling),Z=c(j,G.props),ko(Z,G),Z.return=L,L=Z;break e}s(L,j);break}else n(L,j);j=j.sibling}G.type===se?(Z=Is(G.props.children,L.mode,Z,G.key),Z.return=L,L=Z):(Z=ou(G.type,G.key,G.props,null,L.mode,Z),ko(Z,G),Z.return=L,L=Z)}return _(L);case re:e:{for(De=G.key;j!==null;){if(j.key===De)if(j.tag===4&&j.stateNode.containerInfo===G.containerInfo&&j.stateNode.implementation===G.implementation){s(L,j.sibling),Z=c(j,G.children||[]),Z.return=L,L=Z;break e}else{s(L,j);break}else n(L,j);j=j.sibling}Z=cd(G,L.mode,Z),Z.return=L,L=Z}return _(L);case R:return G=zs(G),pt(L,j,G,Z)}if(tt(G))return Se(L,j,G,Z);if(z(G)){if(De=z(G),typeof De!="function")throw Error(a(150));return G=De.call(G),Ie(L,j,G,Z)}if(typeof G.then=="function")return pt(L,j,mu(G),Z);if(G.$$typeof===me)return pt(L,j,cu(L,G),Z);gu(L,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,j!==null&&j.tag===6?(s(L,j.sibling),Z=c(j,G),Z.return=L,L=Z):(s(L,j),Z=ud(G,L.mode,Z),Z.return=L,L=Z),_(L)):s(L,j)}return function(L,j,G,Z){try{zo=0;var De=pt(L,j,G,Z);return wa=null,De}catch(Re){if(Re===Sa||Re===hu)throw Re;var rt=jn(29,Re,null,L.mode);return rt.lanes=Z,rt.return=L,rt}finally{}}}var Ls=ng(!0),ig=ng(!1),Mr=!1;function Td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Vr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Or(t,n,s){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ot&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=au(t),Bm(t,null,s),n}return su(t,o,n,s),au(t)}function Lo(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Fi(t,s)}}function Ad(t,n){var s=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var _={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?c=h=_:h=h.next=_,s=s.next}while(s!==null);h===null?c=h=n:h=h.next=n}else c=h=n;s={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var Sd=!1;function Uo(){if(Sd){var t=Aa;if(t!==null)throw t}}function Bo(t,n,s,o){Sd=!1;var c=t.updateQueue;Mr=!1;var h=c.firstBaseUpdate,_=c.lastBaseUpdate,T=c.shared.pending;if(T!==null){c.shared.pending=null;var O=T,H=O.next;O.next=null,_===null?h=H:_.next=H,_=O;var W=t.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==_&&(T===null?W.firstBaseUpdate=H:T.next=H,W.lastBaseUpdate=O))}if(h!==null){var J=c.baseState;_=0,W=H=O=null,T=h;do{var F=T.lane&-536870913,X=F!==T.lane;if(X?($e&F)===F:(o&F)===F){F!==0&&F===xa&&(Sd=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Se=t,Ie=T;F=n;var pt=s;switch(Ie.tag){case 1:if(Se=Ie.payload,typeof Se=="function"){J=Se.call(pt,J,F);break e}J=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ie.payload,F=typeof Se=="function"?Se.call(pt,J,F):Se,F==null)break e;J=S({},J,F);break e;case 2:Mr=!0}}F=T.callback,F!==null&&(t.flags|=64,X&&(t.flags|=8192),X=c.callbacks,X===null?c.callbacks=[F]:X.push(F))}else X={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(H=W=X,O=J):W=W.next=X,_|=F;if(T=T.next,T===null){if(T=c.shared.pending,T===null)break;X=T,T=X.next,X.next=null,c.lastBaseUpdate=X,c.shared.pending=null}}while(!0);W===null&&(O=J),c.baseState=O,c.firstBaseUpdate=H,c.lastBaseUpdate=W,h===null&&(c.shared.lanes=0),Ur|=_,t.lanes=_,t.memoizedState=J}}function rg(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function sg(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)rg(s[t],n)}var Ca=C(null),pu=C(0);function ag(t,n){t=or,ye(pu,t),ye(Ca,n),or=t|n.baseLanes}function wd(){ye(pu,or),ye(Ca,Ca.current)}function Cd(){or=pu.current,$(Ca),$(pu)}var zn=C(null),Wn=null;function jr(t){var n=t.alternate;ye(Ot,Ot.current&1),ye(zn,t),Wn===null&&(n===null||Ca.current!==null||n.memoizedState!==null)&&(Wn=t)}function Rd(t){ye(Ot,Ot.current),ye(zn,t),Wn===null&&(Wn=t)}function og(t){t.tag===22?(ye(Ot,Ot.current),ye(zn,t),Wn===null&&(Wn=t)):zr()}function zr(){ye(Ot,Ot.current),ye(zn,zn.current)}function kn(t){$(zn),Wn===t&&(Wn=null),$(Ot)}var Ot=C(0);function yu(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Oh(s)||jh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Ji=0,qe=null,mt=null,Pt=null,vu=!1,Ra=!1,Us=!1,_u=0,Po=0,Da=null,N1=0;function Nt(){throw Error(a(321))}function Dd(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!On(t[s],n[s]))return!1;return!0}function Nd(t,n,s,o,c,h){return Ji=h,qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Q.H=t===null||t.memoizedState===null?Hg:Fd,Us=!1,h=s(o,c),Us=!1,Ra&&(h=ug(n,s,o,c)),lg(t),h}function lg(t){Q.H=Ho;var n=mt!==null&&mt.next!==null;if(Ji=0,Pt=mt=qe=null,vu=!1,Po=0,Da=null,n)throw Error(a(300));t===null||qt||(t=t.dependencies,t!==null&&uu(t)&&(qt=!0))}function ug(t,n,s,o){qe=t;var c=0;do{if(Ra&&(Da=null),Po=0,Ra=!1,25<=c)throw Error(a(301));if(c+=1,Pt=mt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}Q.H=Fg,h=n(s,o)}while(Ra);return h}function I1(){var t=Q.H,n=t.useState()[0];return n=typeof n.then=="function"?qo(n):n,t=t.useState()[0],(mt!==null?mt.memoizedState:null)!==t&&(qe.flags|=1024),n}function Id(){var t=_u!==0;return _u=0,t}function Md(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Vd(t){if(vu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}vu=!1}Ji=0,Pt=mt=qe=null,Ra=!1,Po=_u=0,Da=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?qe.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function jt(){if(mt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var n=Pt===null?qe.memoizedState:Pt.next;if(n!==null)Pt=n,mt=t;else{if(t===null)throw qe.alternate===null?Error(a(467)):Error(a(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Pt===null?qe.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function qo(t){var n=Po;return Po+=1,Da===null&&(Da=[]),t=Jm(Da,t,n),n=qe,(Pt===null?n.memoizedState:Pt.next)===null&&(n=n.alternate,Q.H=n===null||n.memoizedState===null?Hg:Fd),t}function Eu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return qo(t);if(t.$$typeof===me)return an(t)}throw Error(a(438,String(t)))}function Od(t){var n=null,s=qe.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=qe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=bu(),qe.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),o=0;o<t;o++)s[o]=V;return n.index++,s}function er(t,n){return typeof n=="function"?n(t):n}function Tu(t){var n=jt();return jd(n,mt,t)}function jd(t,n,s){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var c=t.baseQueue,h=o.pending;if(h!==null){if(c!==null){var _=c.next;c.next=h.next,h.next=_}n.baseQueue=c=h,o.pending=null}if(h=t.baseState,c===null)t.memoizedState=h;else{n=c.next;var T=_=null,O=null,H=n,W=!1;do{var J=H.lane&-536870913;if(J!==H.lane?($e&J)===J:(Ji&J)===J){var F=H.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),J===xa&&(W=!0);else if((Ji&F)===F){H=H.next,F===xa&&(W=!0);continue}else J={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=J,_=h):O=O.next=J,qe.lanes|=F,Ur|=F;J=H.action,Us&&s(h,J),h=H.hasEagerState?H.eagerState:s(h,J)}else F={lane:J,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(T=O=F,_=h):O=O.next=F,qe.lanes|=J,Ur|=J;H=H.next}while(H!==null&&H!==n);if(O===null?_=h:O.next=T,!On(h,t.memoizedState)&&(qt=!0,W&&(s=Aa,s!==null)))throw s;t.memoizedState=h,t.baseState=_,t.baseQueue=O,o.lastRenderedState=h}return c===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function zd(t){var n=jt(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var o=s.dispatch,c=s.pending,h=n.memoizedState;if(c!==null){s.pending=null;var _=c=c.next;do h=t(h,_.action),_=_.next;while(_!==c);On(h,n.memoizedState)||(qt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),s.lastRenderedState=h}return[h,o]}function cg(t,n,s){var o=qe,c=jt(),h=et;if(h){if(s===void 0)throw Error(a(407));s=s()}else s=n();var _=!On((mt||c).memoizedState,s);if(_&&(c.memoizedState=s,qt=!0),c=c.queue,Ud(fg.bind(null,o,c,t),[t]),c.getSnapshot!==n||_||Pt!==null&&Pt.memoizedState.tag&1){if(o.flags|=2048,Na(9,{destroy:void 0},hg.bind(null,o,c,s,n),null),vt===null)throw Error(a(349));h||(Ji&127)!==0||dg(o,n,s)}return s}function dg(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=qe.updateQueue,n===null?(n=bu(),qe.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function hg(t,n,s,o){n.value=s,n.getSnapshot=o,mg(n)&&gg(t)}function fg(t,n,s){return s(function(){mg(n)&&gg(t)})}function mg(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!On(t,s)}catch{return!0}}function gg(t){var n=Ns(t,2);n!==null&&Cn(n,t,2)}function kd(t){var n=vn();if(typeof t=="function"){var s=t;if(t=s(),Us){pe(!0);try{s()}finally{pe(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:t},n}function pg(t,n,s,o){return t.baseState=s,jd(t,mt,typeof o=="function"?o:er)}function M1(t,n,s,o,c){if(Su(t))throw Error(a(485));if(t=n.action,t!==null){var h={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};Q.T!==null?s(!0):h.isTransition=!1,o(h),s=n.pending,s===null?(h.next=n.pending=h,yg(n,h)):(h.next=s.next,n.pending=s.next=h)}}function yg(t,n){var s=n.action,o=n.payload,c=t.state;if(n.isTransition){var h=Q.T,_={};Q.T=_;try{var T=s(c,o),O=Q.S;O!==null&&O(_,T),vg(t,n,T)}catch(H){Ld(t,n,H)}finally{h!==null&&_.types!==null&&(h.types=_.types),Q.T=h}}else try{h=s(c,o),vg(t,n,h)}catch(H){Ld(t,n,H)}}function vg(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){_g(t,n,o)},function(o){return Ld(t,n,o)}):_g(t,n,s)}function _g(t,n,s){n.status="fulfilled",n.value=s,bg(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,yg(t,s)))}function Ld(t,n,s){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,bg(n),n=n.next;while(n!==o)}t.action=null}function bg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Eg(t,n){return n}function Tg(t,n){if(et){var s=vt.formState;if(s!==null){e:{var o=qe;if(et){if(bt){t:{for(var c=bt,h=$n;c.nodeType!==8;){if(!h){c=null;break t}if(c=Zn(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){bt=Zn(c.nextSibling),o=c.data==="F!";break e}}Nr(o)}o=!1}o&&(n=s[0])}}return s=vn(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:n},s.queue=o,s=Pg.bind(null,qe,o),o.dispatch=s,o=kd(!1),h=Hd.bind(null,qe,!1,o.queue),o=vn(),c={state:n,dispatch:null,action:t,pending:null},o.queue=c,s=M1.bind(null,qe,c,h,s),c.dispatch=s,o.memoizedState=t,[n,s,!1]}function xg(t){var n=jt();return Ag(n,mt,t)}function Ag(t,n,s){if(n=jd(t,n,Eg)[0],t=Tu(er)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=qo(n)}catch(_){throw _===Sa?hu:_}else o=n;n=jt();var c=n.queue,h=c.dispatch;return s!==n.memoizedState&&(qe.flags|=2048,Na(9,{destroy:void 0},V1.bind(null,c,s),null)),[o,h,t]}function V1(t,n){t.action=n}function Sg(t){var n=jt(),s=mt;if(s!==null)return Ag(n,s,t);jt(),n=n.memoizedState,s=jt();var o=s.queue.dispatch;return s.memoizedState=t,[n,o,!1]}function Na(t,n,s,o){return t={tag:t,create:s,deps:o,inst:n,next:null},n=qe.updateQueue,n===null&&(n=bu(),qe.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(o=s.next,s.next=t,t.next=o,n.lastEffect=t),t}function wg(){return jt().memoizedState}function xu(t,n,s,o){var c=vn();qe.flags|=t,c.memoizedState=Na(1|n,{destroy:void 0},s,o===void 0?null:o)}function Au(t,n,s,o){var c=jt();o=o===void 0?null:o;var h=c.memoizedState.inst;mt!==null&&o!==null&&Dd(o,mt.memoizedState.deps)?c.memoizedState=Na(n,h,s,o):(qe.flags|=t,c.memoizedState=Na(1|n,h,s,o))}function Cg(t,n){xu(8390656,8,t,n)}function Ud(t,n){Au(2048,8,t,n)}function O1(t){qe.flags|=4;var n=qe.updateQueue;if(n===null)n=bu(),qe.updateQueue=n,n.events=[t];else{var s=n.events;s===null?n.events=[t]:s.push(t)}}function Rg(t){var n=jt().memoizedState;return O1({ref:n,nextImpl:t}),function(){if((ot&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function Dg(t,n){return Au(4,2,t,n)}function Ng(t,n){return Au(4,4,t,n)}function Ig(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Mg(t,n,s){s=s!=null?s.concat([t]):null,Au(4,4,Ig.bind(null,n,t),s)}function Bd(){}function Vg(t,n){var s=jt();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&Dd(n,o[1])?o[0]:(s.memoizedState=[t,n],t)}function Og(t,n){var s=jt();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&Dd(n,o[1]))return o[0];if(o=t(),Us){pe(!0);try{t()}finally{pe(!1)}}return s.memoizedState=[o,n],o}function Pd(t,n,s){return s===void 0||(Ji&1073741824)!==0&&($e&261930)===0?t.memoizedState=n:(t.memoizedState=s,t=jp(),qe.lanes|=t,Ur|=t,s)}function jg(t,n,s,o){return On(s,n)?s:Ca.current!==null?(t=Pd(t,s,o),On(t,n)||(qt=!0),t):(Ji&42)===0||(Ji&1073741824)!==0&&($e&261930)===0?(qt=!0,t.memoizedState=s):(t=jp(),qe.lanes|=t,Ur|=t,n)}function zg(t,n,s,o,c){var h=ce.p;ce.p=h!==0&&8>h?h:8;var _=Q.T,T={};Q.T=T,Hd(t,!1,n,s);try{var O=c(),H=Q.S;if(H!==null&&H(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var W=D1(O,o);Go(t,n,W,Bn(t))}else Go(t,n,o,Bn(t))}catch(J){Go(t,n,{then:function(){},status:"rejected",reason:J},Bn())}finally{ce.p=h,_!==null&&T.types!==null&&(_.types=T.types),Q.T=_}}function j1(){}function qd(t,n,s,o){if(t.tag!==5)throw Error(a(476));var c=kg(t).queue;zg(t,c,n,we,s===null?j1:function(){return Lg(t),s(o)})}function kg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:we},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Lg(t){var n=kg(t);n.next===null&&(n=t.alternate.memoizedState),Go(t,n.next.queue,{},Bn())}function Gd(){return an(al)}function Ug(){return jt().memoizedState}function Bg(){return jt().memoizedState}function z1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=Bn();t=Vr(s);var o=Or(n,t,s);o!==null&&(Cn(o,n,s),Lo(o,n,s)),n={cache:vd()},t.payload=n;return}n=n.return}}function k1(t,n,s){var o=Bn();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Su(t)?qg(n,s):(s=od(t,n,s,o),s!==null&&(Cn(s,t,o),Gg(s,n,o)))}function Pg(t,n,s){var o=Bn();Go(t,n,s,o)}function Go(t,n,s,o){var c={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Su(t))qg(n,c);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var _=n.lastRenderedState,T=h(_,s);if(c.hasEagerState=!0,c.eagerState=T,On(T,_))return su(t,n,c,0),vt===null&&ru(),!1}catch{}finally{}if(s=od(t,n,c,o),s!==null)return Cn(s,t,o),Gg(s,n,o),!0}return!1}function Hd(t,n,s,o){if(o={lane:2,revertLane:Th(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Su(t)){if(n)throw Error(a(479))}else n=od(t,s,o,2),n!==null&&Cn(n,t,2)}function Su(t){var n=t.alternate;return t===qe||n!==null&&n===qe}function qg(t,n){Ra=vu=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function Gg(t,n,s){if((s&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Fi(t,s)}}var Ho={readContext:an,use:Eu,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Ho.useEffectEvent=Nt;var Hg={readContext:an,use:Eu,useCallback:function(t,n){return vn().memoizedState=[t,n===void 0?null:n],t},useContext:an,useEffect:Cg,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,xu(4194308,4,Ig.bind(null,n,t),s)},useLayoutEffect:function(t,n){return xu(4194308,4,t,n)},useInsertionEffect:function(t,n){xu(4,2,t,n)},useMemo:function(t,n){var s=vn();n=n===void 0?null:n;var o=t();if(Us){pe(!0);try{t()}finally{pe(!1)}}return s.memoizedState=[o,n],o},useReducer:function(t,n,s){var o=vn();if(s!==void 0){var c=s(n);if(Us){pe(!0);try{s(n)}finally{pe(!1)}}}else c=n;return o.memoizedState=o.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},o.queue=t,t=t.dispatch=k1.bind(null,qe,t),[o.memoizedState,t]},useRef:function(t){var n=vn();return t={current:t},n.memoizedState=t},useState:function(t){t=kd(t);var n=t.queue,s=Pg.bind(null,qe,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Bd,useDeferredValue:function(t,n){var s=vn();return Pd(s,t,n)},useTransition:function(){var t=kd(!1);return t=zg.bind(null,qe,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var o=qe,c=vn();if(et){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),vt===null)throw Error(a(349));($e&127)!==0||dg(o,n,s)}c.memoizedState=s;var h={value:s,getSnapshot:n};return c.queue=h,Cg(fg.bind(null,o,h,t),[t]),o.flags|=2048,Na(9,{destroy:void 0},hg.bind(null,o,h,s,n),null),s},useId:function(){var t=vn(),n=vt.identifierPrefix;if(et){var s=Mi,o=Ii;s=(o&~(1<<32-le(o)-1)).toString(32)+s,n="_"+n+"R_"+s,s=_u++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=N1++,n="_"+n+"r_"+s.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Gd,useFormState:Tg,useActionState:Tg,useOptimistic:function(t){var n=vn();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Hd.bind(null,qe,!0,s),s.dispatch=n,[t,n]},useMemoCache:Od,useCacheRefresh:function(){return vn().memoizedState=z1.bind(null,qe)},useEffectEvent:function(t){var n=vn(),s={impl:t};return n.memoizedState=s,function(){if((ot&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},Fd={readContext:an,use:Eu,useCallback:Vg,useContext:an,useEffect:Ud,useImperativeHandle:Mg,useInsertionEffect:Dg,useLayoutEffect:Ng,useMemo:Og,useReducer:Tu,useRef:wg,useState:function(){return Tu(er)},useDebugValue:Bd,useDeferredValue:function(t,n){var s=jt();return jg(s,mt.memoizedState,t,n)},useTransition:function(){var t=Tu(er)[0],n=jt().memoizedState;return[typeof t=="boolean"?t:qo(t),n]},useSyncExternalStore:cg,useId:Ug,useHostTransitionStatus:Gd,useFormState:xg,useActionState:xg,useOptimistic:function(t,n){var s=jt();return pg(s,mt,t,n)},useMemoCache:Od,useCacheRefresh:Bg};Fd.useEffectEvent=Rg;var Fg={readContext:an,use:Eu,useCallback:Vg,useContext:an,useEffect:Ud,useImperativeHandle:Mg,useInsertionEffect:Dg,useLayoutEffect:Ng,useMemo:Og,useReducer:zd,useRef:wg,useState:function(){return zd(er)},useDebugValue:Bd,useDeferredValue:function(t,n){var s=jt();return mt===null?Pd(s,t,n):jg(s,mt.memoizedState,t,n)},useTransition:function(){var t=zd(er)[0],n=jt().memoizedState;return[typeof t=="boolean"?t:qo(t),n]},useSyncExternalStore:cg,useId:Ug,useHostTransitionStatus:Gd,useFormState:Sg,useActionState:Sg,useOptimistic:function(t,n){var s=jt();return mt!==null?pg(s,mt,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Od,useCacheRefresh:Bg};Fg.useEffectEvent=Rg;function Qd(t,n,s,o){n=t.memoizedState,s=s(o,n),s=s==null?n:S({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Yd={enqueueSetState:function(t,n,s){t=t._reactInternals;var o=Bn(),c=Vr(o);c.payload=n,s!=null&&(c.callback=s),n=Or(t,c,o),n!==null&&(Cn(n,t,o),Lo(n,t,o))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var o=Bn(),c=Vr(o);c.tag=1,c.payload=n,s!=null&&(c.callback=s),n=Or(t,c,o),n!==null&&(Cn(n,t,o),Lo(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=Bn(),o=Vr(s);o.tag=2,n!=null&&(o.callback=n),n=Or(t,o,s),n!==null&&(Cn(n,t,s),Lo(n,t,s))}};function Qg(t,n,s,o,c,h,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,_):n.prototype&&n.prototype.isPureReactComponent?!No(s,o)||!No(c,h):!0}function Yg(t,n,s,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==t&&Yd.enqueueReplaceState(n,n.state,null)}function Bs(t,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(t=t.defaultProps){s===n&&(s=S({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}function Kg(t){iu(t)}function Xg(t){console.error(t)}function $g(t){iu(t)}function wu(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Wg(t,n,s){try{var o=t.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Kd(t,n,s){return s=Vr(s),s.tag=3,s.payload={element:null},s.callback=function(){wu(t,n)},s}function Zg(t){return t=Vr(t),t.tag=3,t}function Jg(t,n,s,o){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var h=o.value;t.payload=function(){return c(h)},t.callback=function(){Wg(n,s,o)}}var _=s.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Wg(n,s,o),typeof c!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function L1(t,n,s,o,c){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&Ta(n,s,c,!0),s=zn.current,s!==null){switch(s.tag){case 31:case 13:return Wn===null?Lu():s.alternate===null&&It===0&&(It=3),s.flags&=-257,s.flags|=65536,s.lanes=c,o===fu?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),_h(t,o,c)),!1;case 22:return s.flags|=65536,o===fu?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),_h(t,o,c)),!1}throw Error(a(435,s.tag))}return _h(t,o,c),Lu(),!1}if(et)return n=zn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==fd&&(t=Error(a(422),{cause:o}),Vo(Yn(t,s)))):(o!==fd&&(n=Error(a(423),{cause:o}),Vo(Yn(n,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,o=Yn(o,s),c=Kd(t.stateNode,o,c),Ad(t,c),It!==4&&(It=2)),!1;var h=Error(a(520),{cause:o});if(h=Yn(h,s),Zo===null?Zo=[h]:Zo.push(h),It!==4&&(It=2),n===null)return!0;o=Yn(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=Kd(s.stateNode,o,t),Ad(s,t),!1;case 1:if(n=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Br===null||!Br.has(h))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Zg(c),Jg(c,t,s,o),Ad(s,c),!1}s=s.return}while(s!==null);return!1}var Xd=Error(a(461)),qt=!1;function on(t,n,s,o){n.child=t===null?ig(n,null,s,o):Ls(n,t.child,s,o)}function ep(t,n,s,o,c){s=s.render;var h=n.ref;if("ref"in o){var _={};for(var T in o)T!=="ref"&&(_[T]=o[T])}else _=o;return Os(n),o=Nd(t,n,s,_,h,c),T=Id(),t!==null&&!qt?(Md(t,n,c),tr(t,n,c)):(et&&T&&dd(n),n.flags|=1,on(t,n,o,c),n.child)}function tp(t,n,s,o,c){if(t===null){var h=s.type;return typeof h=="function"&&!ld(h)&&h.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=h,np(t,n,h,o,c)):(t=ou(s.type,null,o,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(h=t.child,!ih(t,c)){var _=h.memoizedProps;if(s=s.compare,s=s!==null?s:No,s(_,o)&&t.ref===n.ref)return tr(t,n,c)}return n.flags|=1,t=Xi(h,o),t.ref=n.ref,t.return=n,n.child=t}function np(t,n,s,o,c){if(t!==null){var h=t.memoizedProps;if(No(h,o)&&t.ref===n.ref)if(qt=!1,n.pendingProps=o=h,ih(t,c))(t.flags&131072)!==0&&(qt=!0);else return n.lanes=t.lanes,tr(t,n,c)}return $d(t,n,s,o,c)}function ip(t,n,s,o){var c=o.children,h=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,t!==null){for(o=n.child=t.child,c=0;o!==null;)c=c|o.lanes|o.childLanes,o=o.sibling;o=c&~h}else o=0,n.child=null;return rp(t,n,h,s,o)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&du(n,h!==null?h.cachePool:null),h!==null?ag(n,h):wd(),og(n);else return o=n.lanes=536870912,rp(t,n,h!==null?h.baseLanes|s:s,s,o)}else h!==null?(du(n,h.cachePool),ag(n,h),zr(),n.memoizedState=null):(t!==null&&du(n,null),wd(),zr());return on(t,n,c,s),n.child}function Fo(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function rp(t,n,s,o,c){var h=bd();return h=h===null?null:{parent:Bt._currentValue,pool:h},n.memoizedState={baseLanes:s,cachePool:h},t!==null&&du(n,null),wd(),og(n),t!==null&&Ta(t,n,o,!0),n.childLanes=c,null}function Cu(t,n){return n=Du({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function sp(t,n,s){return Ls(n,t.child,null,s),t=Cu(n,n.pendingProps),t.flags|=2,kn(n),n.memoizedState=null,t}function U1(t,n,s){var o=n.pendingProps,c=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(et){if(o.mode==="hidden")return t=Cu(n,o),n.lanes=536870912,Fo(null,t);if(Rd(n),(t=bt)?(t=yy(t,$n),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Rr!==null?{id:Ii,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},s=qm(t),s.return=n,n.child=s,sn=n,bt=null)):t=null,t===null)throw Nr(n);return n.lanes=536870912,null}return Cu(n,o)}var h=t.memoizedState;if(h!==null){var _=h.dehydrated;if(Rd(n),c)if(n.flags&256)n.flags&=-257,n=sp(t,n,s);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(a(558));else if(qt||Ta(t,n,s,!1),c=(s&t.childLanes)!==0,qt||c){if(o=vt,o!==null&&(_=vr(o,s),_!==0&&_!==h.retryLane))throw h.retryLane=_,Ns(t,_),Cn(o,t,_),Xd;Lu(),n=sp(t,n,s)}else t=h.treeContext,bt=Zn(_.nextSibling),sn=n,et=!0,Dr=null,$n=!1,t!==null&&Fm(n,t),n=Cu(n,o),n.flags|=4096;return n}return t=Xi(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Ru(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function $d(t,n,s,o,c){return Os(n),s=Nd(t,n,s,o,void 0,c),o=Id(),t!==null&&!qt?(Md(t,n,c),tr(t,n,c)):(et&&o&&dd(n),n.flags|=1,on(t,n,s,c),n.child)}function ap(t,n,s,o,c,h){return Os(n),n.updateQueue=null,s=ug(n,o,s,c),lg(t),o=Id(),t!==null&&!qt?(Md(t,n,h),tr(t,n,h)):(et&&o&&dd(n),n.flags|=1,on(t,n,s,h),n.child)}function op(t,n,s,o,c){if(Os(n),n.stateNode===null){var h=va,_=s.contextType;typeof _=="object"&&_!==null&&(h=an(_)),h=new s(o,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Yd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=o,h.state=n.memoizedState,h.refs={},Td(n),_=s.contextType,h.context=typeof _=="object"&&_!==null?an(_):va,h.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(Qd(n,s,_,o),h.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&Yd.enqueueReplaceState(h,h.state,null),Bo(n,o,h,c),Uo(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){h=n.stateNode;var T=n.memoizedProps,O=Bs(s,T);h.props=O;var H=h.context,W=s.contextType;_=va,typeof W=="object"&&W!==null&&(_=an(W));var J=s.getDerivedStateFromProps;W=typeof J=="function"||typeof h.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,W||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(T||H!==_)&&Yg(n,h,o,_),Mr=!1;var F=n.memoizedState;h.state=F,Bo(n,o,h,c),Uo(),H=n.memoizedState,T||F!==H||Mr?(typeof J=="function"&&(Qd(n,s,J,o),H=n.memoizedState),(O=Mr||Qg(n,s,O,o,F,H,_))?(W||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=H),h.props=o,h.state=H,h.context=_,o=O):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{h=n.stateNode,xd(t,n),_=n.memoizedProps,W=Bs(s,_),h.props=W,J=n.pendingProps,F=h.context,H=s.contextType,O=va,typeof H=="object"&&H!==null&&(O=an(H)),T=s.getDerivedStateFromProps,(H=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==J||F!==O)&&Yg(n,h,o,O),Mr=!1,F=n.memoizedState,h.state=F,Bo(n,o,h,c),Uo();var X=n.memoizedState;_!==J||F!==X||Mr||t!==null&&t.dependencies!==null&&uu(t.dependencies)?(typeof T=="function"&&(Qd(n,s,T,o),X=n.memoizedState),(W=Mr||Qg(n,s,W,o,F,X,O)||t!==null&&t.dependencies!==null&&uu(t.dependencies))?(H||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,X,O),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,X,O)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=X),h.props=o,h.state=X,h.context=O,o=W):(typeof h.componentDidUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&F===t.memoizedState||(n.flags|=1024),o=!1)}return h=o,Ru(t,n),o=(n.flags&128)!==0,h||o?(h=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,t!==null&&o?(n.child=Ls(n,t.child,null,c),n.child=Ls(n,null,s,c)):on(t,n,s,c),n.memoizedState=h.state,t=n.child):t=tr(t,n,c),t}function lp(t,n,s,o){return Ms(),n.flags|=256,on(t,n,s,o),n.child}var Wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zd(t){return{baseLanes:t,cachePool:Wm()}}function Jd(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=Un),t}function up(t,n,s){var o=n.pendingProps,c=!1,h=(n.flags&128)!==0,_;if((_=h)||(_=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),_&&(c=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,t===null){if(et){if(c?jr(n):zr(),(t=bt)?(t=yy(t,$n),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Rr!==null?{id:Ii,overflow:Mi}:null,retryLane:536870912,hydrationErrors:null},s=qm(t),s.return=n,n.child=s,sn=n,bt=null)):t=null,t===null)throw Nr(n);return jh(t)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,c?(zr(),c=n.mode,T=Du({mode:"hidden",children:T},c),o=Is(o,c,s,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=Zd(s),o.childLanes=Jd(t,_,s),n.memoizedState=Wd,Fo(null,o)):(jr(n),eh(n,T))}var O=t.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(h)n.flags&256?(jr(n),n.flags&=-257,n=th(t,n,s)):n.memoizedState!==null?(zr(),n.child=t.child,n.flags|=128,n=null):(zr(),T=o.fallback,c=n.mode,o=Du({mode:"visible",children:o.children},c),T=Is(T,c,s,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,Ls(n,t.child,null,s),o=n.child,o.memoizedState=Zd(s),o.childLanes=Jd(t,_,s),n.memoizedState=Wd,n=Fo(null,o));else if(jr(n),jh(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var H=_.dgst;_=H,o=Error(a(419)),o.stack="",o.digest=_,Vo({value:o,source:null,stack:null}),n=th(t,n,s)}else if(qt||Ta(t,n,s,!1),_=(s&t.childLanes)!==0,qt||_){if(_=vt,_!==null&&(o=vr(_,s),o!==0&&o!==O.retryLane))throw O.retryLane=o,Ns(t,o),Cn(_,t,o),Xd;Oh(T)||Lu(),n=th(t,n,s)}else Oh(T)?(n.flags|=192,n.child=t.child,n=null):(t=O.treeContext,bt=Zn(T.nextSibling),sn=n,et=!0,Dr=null,$n=!1,t!==null&&Fm(n,t),n=eh(n,o.children),n.flags|=4096);return n}return c?(zr(),T=o.fallback,c=n.mode,O=t.child,H=O.sibling,o=Xi(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,H!==null?T=Xi(H,T):(T=Is(T,c,s,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,Fo(null,o),o=n.child,T=t.child.memoizedState,T===null?T=Zd(s):(c=T.cachePool,c!==null?(O=Bt._currentValue,c=c.parent!==O?{parent:O,pool:O}:c):c=Wm(),T={baseLanes:T.baseLanes|s,cachePool:c}),o.memoizedState=T,o.childLanes=Jd(t,_,s),n.memoizedState=Wd,Fo(t.child,o)):(jr(n),s=t.child,t=s.sibling,s=Xi(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,t!==null&&(_=n.deletions,_===null?(n.deletions=[t],n.flags|=16):_.push(t)),n.child=s,n.memoizedState=null,s)}function eh(t,n){return n=Du({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Du(t,n){return t=jn(22,t,null,n),t.lanes=0,t}function th(t,n,s){return Ls(n,t.child,null,s),t=eh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function cp(t,n,s){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),pd(t.return,n,s)}function nh(t,n,s,o,c,h){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:c,treeForkCount:h}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=o,_.tail=s,_.tailMode=c,_.treeForkCount=h)}function dp(t,n,s){var o=n.pendingProps,c=o.revealOrder,h=o.tail;o=o.children;var _=Ot.current,T=(_&2)!==0;if(T?(_=_&1|2,n.flags|=128):_&=1,ye(Ot,_),on(t,n,o,s),o=et?Mo:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cp(t,s,n);else if(t.tag===19)cp(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&yu(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),nh(n,!1,c,s,h,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&yu(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}nh(n,!0,s,null,h,o);break;case"together":nh(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function tr(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Ur|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(Ta(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Xi(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Xi(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function ih(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&uu(t)))}function B1(t,n,s){switch(n.tag){case 3:wt(n,n.stateNode.containerInfo),Ir(n,Bt,t.memoizedState.cache),Ms();break;case 27:case 5:ii(n);break;case 4:wt(n,n.stateNode.containerInfo);break;case 10:Ir(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Rd(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(jr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?up(t,n,s):(jr(n),t=tr(t,n,s),t!==null?t.sibling:null);jr(n);break;case 19:var c=(t.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(Ta(t,n,s,!1),o=(s&n.childLanes)!==0),c){if(o)return dp(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),ye(Ot,Ot.current),o)break;return null;case 22:return n.lanes=0,ip(t,n,s,n.pendingProps);case 24:Ir(n,Bt,t.memoizedState.cache)}return tr(t,n,s)}function hp(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)qt=!0;else{if(!ih(t,s)&&(n.flags&128)===0)return qt=!1,B1(t,n,s);qt=(t.flags&131072)!==0}else qt=!1,et&&(n.flags&1048576)!==0&&Hm(n,Mo,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=zs(n.elementType),n.type=t,typeof t=="function")ld(t)?(o=Bs(t,o),n.tag=1,n=op(null,n,t,o,s)):(n.tag=0,n=$d(null,n,t,o,s));else{if(t!=null){var c=t.$$typeof;if(c===ge){n.tag=11,n=ep(null,n,t,o,s);break e}else if(c===M){n.tag=14,n=tp(null,n,t,o,s);break e}}throw n=Oe(t)||t,Error(a(306,n,""))}}return n;case 0:return $d(t,n,n.type,n.pendingProps,s);case 1:return o=n.type,c=Bs(o,n.pendingProps),op(t,n,o,c,s);case 3:e:{if(wt(n,n.stateNode.containerInfo),t===null)throw Error(a(387));o=n.pendingProps;var h=n.memoizedState;c=h.element,xd(t,n),Bo(n,o,null,s);var _=n.memoizedState;if(o=_.cache,Ir(n,Bt,o),o!==h.cache&&yd(n,[Bt],s,!0),Uo(),o=_.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=lp(t,n,o,s);break e}else if(o!==c){c=Yn(Error(a(424)),n),Vo(c),n=lp(t,n,o,s);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=Zn(t.firstChild),sn=n,et=!0,Dr=null,$n=!0,s=ig(n,null,o,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ms(),o===c){n=tr(t,n,s);break e}on(t,n,o,s)}n=n.child}return n;case 26:return Ru(t,n),t===null?(s=xy(n.type,null,n.pendingProps,null))?n.memoizedState=s:et||(s=n.type,t=n.pendingProps,o=Fu(ze.current).createElement(s),o[xt]=n,o[Kt]=t,ln(o,s,t),Lt(o),n.stateNode=o):n.memoizedState=xy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ii(n),t===null&&et&&(o=n.stateNode=by(n.type,n.pendingProps,ze.current),sn=n,$n=!0,c=bt,Hr(n.type)?(zh=c,bt=Zn(o.firstChild)):bt=c),on(t,n,n.pendingProps.children,s),Ru(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&et&&((c=o=bt)&&(o=pb(o,n.type,n.pendingProps,$n),o!==null?(n.stateNode=o,sn=n,bt=Zn(o.firstChild),$n=!1,c=!0):c=!1),c||Nr(n)),ii(n),c=n.type,h=n.pendingProps,_=t!==null?t.memoizedProps:null,o=h.children,Ih(c,h)?o=null:_!==null&&Ih(c,_)&&(n.flags|=32),n.memoizedState!==null&&(c=Nd(t,n,I1,null,null,s),al._currentValue=c),Ru(t,n),on(t,n,o,s),n.child;case 6:return t===null&&et&&((t=s=bt)&&(s=yb(s,n.pendingProps,$n),s!==null?(n.stateNode=s,sn=n,bt=null,t=!0):t=!1),t||Nr(n)),null;case 13:return up(t,n,s);case 4:return wt(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Ls(n,null,o,s):on(t,n,o,s),n.child;case 11:return ep(t,n,n.type,n.pendingProps,s);case 7:return on(t,n,n.pendingProps,s),n.child;case 8:return on(t,n,n.pendingProps.children,s),n.child;case 12:return on(t,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,Ir(n,n.type,o.value),on(t,n,o.children,s),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,Os(n),c=an(c),o=o(c),n.flags|=1,on(t,n,o,s),n.child;case 14:return tp(t,n,n.type,n.pendingProps,s);case 15:return np(t,n,n.type,n.pendingProps,s);case 19:return dp(t,n,s);case 31:return U1(t,n,s);case 22:return ip(t,n,s,n.pendingProps);case 24:return Os(n),o=an(Bt),t===null?(c=bd(),c===null&&(c=vt,h=vd(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=s),c=h),n.memoizedState={parent:o,cache:c},Td(n),Ir(n,Bt,c)):((t.lanes&s)!==0&&(xd(t,n),Bo(n,null,null,s),Uo()),c=t.memoizedState,h=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),Ir(n,Bt,o)):(o=h.cache,Ir(n,Bt,o),o!==c.cache&&yd(n,[Bt],s,!0))),on(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function nr(t){t.flags|=4}function rh(t,n,s,o,c){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(c&335544128)===c)if(t.stateNode.complete)t.flags|=8192;else if(Up())t.flags|=8192;else throw ks=fu,Ed}else t.flags&=-16777217}function fp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ry(n))if(Up())t.flags|=8192;else throw ks=fu,Ed}function Nu(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?yr():536870912,t.lanes|=n,Oa|=n)}function Qo(t,n){if(!et)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Et(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,o=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=o,t.childLanes=s,n}function P1(t,n,s){var o=n.pendingProps;switch(hd(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(n),null;case 1:return Et(n),null;case 3:return s=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),Zi(Bt),lt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ea(n)?nr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,md())),Et(n),null;case 26:var c=n.type,h=n.memoizedState;return t===null?(nr(n),h!==null?(Et(n),fp(n,h)):(Et(n),rh(n,c,null,o,s))):h?h!==t.memoizedState?(nr(n),Et(n),fp(n,h)):(Et(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&nr(n),Et(n),rh(n,c,t,o,s)),null;case 27:if(mr(n),s=ze.current,c=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&nr(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Et(n),null}t=Te.current,Ea(n)?Qm(n):(t=by(c,o,s),n.stateNode=t,nr(n))}return Et(n),null;case 5:if(mr(n),c=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&nr(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Et(n),null}if(h=Te.current,Ea(n))Qm(n);else{var _=Fu(ze.current);switch(h){case 1:h=_.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=_.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=_.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=_.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?_.createElement("select",{is:o.is}):_.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?_.createElement(c,{is:o.is}):_.createElement(c)}}h[xt]=n,h[Kt]=o;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)h.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=h;e:switch(ln(h,c,o),c){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&nr(n)}}return Et(n),rh(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,s),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&nr(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(t=ze.current,Ea(n)){if(t=n.stateNode,s=n.memoizedProps,o=null,c=sn,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}t[xt]=n,t=!!(t.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||uy(t.nodeValue,s)),t||Nr(n,!0)}else t=Fu(t).createTextNode(o),t[xt]=n,n.stateNode=t}return Et(n),null;case 31:if(s=n.memoizedState,t===null||t.memoizedState!==null){if(o=Ea(n),s!==null){if(t===null){if(!o)throw Error(a(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[xt]=n}else Ms(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Et(n),t=!1}else s=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return n.flags&256?(kn(n),n):(kn(n),null);if((n.flags&128)!==0)throw Error(a(558))}return Et(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=Ea(n),o!==null&&o.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[xt]=n}else Ms(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Et(n),c=!1}else c=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(kn(n),n):(kn(n),null)}return kn(n),(n.flags&128)!==0?(n.lanes=s,n):(s=o!==null,t=t!==null&&t.memoizedState!==null,s&&(o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048)),s!==t&&s&&(n.child.flags|=8192),Nu(n,n.updateQueue),Et(n),null);case 4:return lt(),t===null&&wh(n.stateNode.containerInfo),Et(n),null;case 10:return Zi(n.type),Et(n),null;case 19:if($(Ot),o=n.memoizedState,o===null)return Et(n),null;if(c=(n.flags&128)!==0,h=o.rendering,h===null)if(c)Qo(o,!1);else{if(It!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(h=yu(t),h!==null){for(n.flags|=128,Qo(o,!1),t=h.updateQueue,n.updateQueue=t,Nu(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)Pm(s,t),s=s.sibling;return ye(Ot,Ot.current&1|2),et&&$i(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&nn()>ju&&(n.flags|=128,c=!0,Qo(o,!1),n.lanes=4194304)}else{if(!c)if(t=yu(h),t!==null){if(n.flags|=128,c=!0,t=t.updateQueue,n.updateQueue=t,Nu(n,t),Qo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!et)return Et(n),null}else 2*nn()-o.renderingStartTime>ju&&s!==536870912&&(n.flags|=128,c=!0,Qo(o,!1),n.lanes=4194304);o.isBackwards?(h.sibling=n.child,n.child=h):(t=o.last,t!==null?t.sibling=h:n.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=nn(),t.sibling=null,s=Ot.current,ye(Ot,c?s&1|2:s&1),et&&$i(n,o.treeForkCount),t):(Et(n),null);case 22:case 23:return kn(n),Cd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&(Et(n),n.subtreeFlags&6&&(n.flags|=8192)):Et(n),s=n.updateQueue,s!==null&&Nu(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),t!==null&&$(js),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),Zi(Bt),Et(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function q1(t,n){switch(hd(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return Zi(Bt),lt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return mr(n),null;case 31:if(n.memoizedState!==null){if(kn(n),n.alternate===null)throw Error(a(340));Ms()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(kn(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Ms()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return $(Ot),null;case 4:return lt(),null;case 10:return Zi(n.type),null;case 22:case 23:return kn(n),Cd(),t!==null&&$(js),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return Zi(Bt),null;case 25:return null;default:return null}}function mp(t,n){switch(hd(n),n.tag){case 3:Zi(Bt),lt();break;case 26:case 27:case 5:mr(n);break;case 4:lt();break;case 31:n.memoizedState!==null&&kn(n);break;case 13:kn(n);break;case 19:$(Ot);break;case 10:Zi(n.type);break;case 22:case 23:kn(n),Cd(),t!==null&&$(js);break;case 24:Zi(Bt)}}function Yo(t,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var c=o.next;s=c;do{if((s.tag&t)===t){o=void 0;var h=s.create,_=s.inst;o=h(),_.destroy=o}s=s.next}while(s!==c)}}catch(T){ht(n,n.return,T)}}function kr(t,n,s){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&t)===t){var _=o.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,c=n;var O=s,H=T;try{H()}catch(W){ht(c,O,W)}}}o=o.next}while(o!==h)}}catch(W){ht(n,n.return,W)}}function gp(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{sg(n,s)}catch(o){ht(t,t.return,o)}}}function pp(t,n,s){s.props=Bs(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(o){ht(t,n,o)}}function Ko(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof s=="function"?t.refCleanup=s(o):s.current=o}}catch(c){ht(t,n,c)}}function Vi(t,n){var s=t.ref,o=t.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(c){ht(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){ht(t,n,c)}else s.current=null}function yp(t){var n=t.type,s=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(c){ht(t,t.return,c)}}function sh(t,n,s){try{var o=t.stateNode;cb(o,t.type,s,n),o[Kt]=n}catch(c){ht(t,t.return,c)}}function vp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hr(t.type)||t.tag===4}function ah(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oh(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=li));else if(o!==4&&(o===27&&Hr(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(oh(t,n,s),t=t.sibling;t!==null;)oh(t,n,s),t=t.sibling}function Iu(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(o!==4&&(o===27&&Hr(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Iu(t,n,s),t=t.sibling;t!==null;)Iu(t,n,s),t=t.sibling}function _p(t){var n=t.stateNode,s=t.memoizedProps;try{for(var o=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);ln(n,o,s),n[xt]=t,n[Kt]=s}catch(h){ht(t,t.return,h)}}var ir=!1,Gt=!1,lh=!1,bp=typeof WeakSet=="function"?WeakSet:Set,en=null;function G1(t,n){if(t=t.containerInfo,Dh=Zu,t=Mm(t),td(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var c=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var _=0,T=-1,O=-1,H=0,W=0,J=t,F=null;t:for(;;){for(var X;J!==s||c!==0&&J.nodeType!==3||(T=_+c),J!==h||o!==0&&J.nodeType!==3||(O=_+o),J.nodeType===3&&(_+=J.nodeValue.length),(X=J.firstChild)!==null;)F=J,J=X;for(;;){if(J===t)break t;if(F===s&&++H===c&&(T=_),F===h&&++W===o&&(O=_),(X=J.nextSibling)!==null)break;J=F,F=J.parentNode}J=X}s=T===-1||O===-1?null:{start:T,end:O}}else s=null}s=s||{start:0,end:0}}else s=null;for(Nh={focusedElem:t,selectionRange:s},Zu=!1,en=n;en!==null;)if(n=en,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,en=t;else for(;en!==null;){switch(n=en,h=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)c=t[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,s=n,c=h.memoizedProps,h=h.memoizedState,o=s.stateNode;try{var Se=Bs(s.type,c);t=o.getSnapshotBeforeUpdate(Se,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ie){ht(s,s.return,Ie)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Vh(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,en=t;break}en=n.return}}function Ep(t,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:sr(t,s),o&4&&Yo(5,s);break;case 1:if(sr(t,s),o&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(_){ht(s,s.return,_)}else{var c=Bs(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ht(s,s.return,_)}}o&64&&gp(s),o&512&&Ko(s,s.return);break;case 3:if(sr(t,s),o&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{sg(t,n)}catch(_){ht(s,s.return,_)}}break;case 27:n===null&&o&4&&_p(s);case 26:case 5:sr(t,s),n===null&&o&4&&yp(s),o&512&&Ko(s,s.return);break;case 12:sr(t,s);break;case 31:sr(t,s),o&4&&Ap(t,s);break;case 13:sr(t,s),o&4&&Sp(t,s),o&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Z1.bind(null,s),vb(t,s))));break;case 22:if(o=s.memoizedState!==null||ir,!o){n=n!==null&&n.memoizedState!==null||Gt,c=ir;var h=Gt;ir=o,(Gt=n)&&!h?ar(t,s,(s.subtreeFlags&8772)!==0):sr(t,s),ir=c,Gt=h}break;case 30:break;default:sr(t,s)}}function Tp(t){var n=t.alternate;n!==null&&(t.alternate=null,Tp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ra(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,xn=!1;function rr(t,n,s){for(s=s.child;s!==null;)xp(t,n,s),s=s.sibling}function xp(t,n,s){if(te&&typeof te.onCommitFiberUnmount=="function")try{te.onCommitFiberUnmount(K,s)}catch{}switch(s.tag){case 26:Gt||Vi(s,n),rr(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Gt||Vi(s,n);var o=St,c=xn;Hr(s.type)&&(St=s.stateNode,xn=!1),rr(t,n,s),il(s.stateNode),St=o,xn=c;break;case 5:Gt||Vi(s,n);case 6:if(o=St,c=xn,St=null,rr(t,n,s),St=o,xn=c,St!==null)if(xn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(s.stateNode)}catch(h){ht(s,n,h)}else try{St.removeChild(s.stateNode)}catch(h){ht(s,n,h)}break;case 18:St!==null&&(xn?(t=St,gy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),qa(t)):gy(St,s.stateNode));break;case 4:o=St,c=xn,St=s.stateNode.containerInfo,xn=!0,rr(t,n,s),St=o,xn=c;break;case 0:case 11:case 14:case 15:kr(2,s,n),Gt||kr(4,s,n),rr(t,n,s);break;case 1:Gt||(Vi(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&pp(s,n,o)),rr(t,n,s);break;case 21:rr(t,n,s);break;case 22:Gt=(o=Gt)||s.memoizedState!==null,rr(t,n,s),Gt=o;break;default:rr(t,n,s)}}function Ap(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{qa(t)}catch(s){ht(n,n.return,s)}}}function Sp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{qa(t)}catch(s){ht(n,n.return,s)}}function H1(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new bp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new bp),n;default:throw Error(a(435,t.tag))}}function Mu(t,n){var s=H1(t);n.forEach(function(o){if(!s.has(o)){s.add(o);var c=J1.bind(null,t,o);o.then(c,c)}})}function An(t,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var c=s[o],h=t,_=n,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(Hr(T.type)){St=T.stateNode,xn=!1;break e}break;case 5:St=T.stateNode,xn=!1;break e;case 3:case 4:St=T.stateNode.containerInfo,xn=!0;break e}T=T.return}if(St===null)throw Error(a(160));xp(h,_,c),St=null,xn=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)wp(n,t),n=n.sibling}var mi=null;function wp(t,n){var s=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(n,t),Sn(t),o&4&&(kr(3,t,t.return),Yo(3,t),kr(5,t,t.return));break;case 1:An(n,t),Sn(t),o&512&&(Gt||s===null||Vi(s,s.return)),o&64&&ir&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var c=mi;if(An(n,t),Sn(t),o&512&&(Gt||s===null||Vi(s,s.return)),o&4){var h=s!==null?s.memoizedState:null;if(o=t.memoizedState,s===null)if(o===null)if(t.stateNode===null){e:{o=t.type,s=t.memoizedProps,c=c.ownerDocument||c;t:switch(o){case"title":h=c.getElementsByTagName("title")[0],(!h||h[_i]||h[xt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(o),c.head.insertBefore(h,c.querySelector("head > title"))),ln(h,o,s),h[xt]=t,Lt(h),o=h;break e;case"link":var _=wy("link","href",c).get(o+(s.href||""));if(_){for(var T=0;T<_.length;T++)if(h=_[T],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){_.splice(T,1);break t}}h=c.createElement(o),ln(h,o,s),c.head.appendChild(h);break;case"meta":if(_=wy("meta","content",c).get(o+(s.content||""))){for(T=0;T<_.length;T++)if(h=_[T],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){_.splice(T,1);break t}}h=c.createElement(o),ln(h,o,s),c.head.appendChild(h);break;default:throw Error(a(468,o))}h[xt]=t,Lt(h),o=h}t.stateNode=o}else Cy(c,t.type,t.stateNode);else t.stateNode=Sy(c,o,t.memoizedProps);else h!==o?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,o===null?Cy(c,t.type,t.stateNode):Sy(c,o,t.memoizedProps)):o===null&&t.stateNode!==null&&sh(t,t.memoizedProps,s.memoizedProps)}break;case 27:An(n,t),Sn(t),o&512&&(Gt||s===null||Vi(s,s.return)),s!==null&&o&4&&sh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(An(n,t),Sn(t),o&512&&(Gt||s===null||Vi(s,s.return)),t.flags&32){c=t.stateNode;try{Tn(c,"")}catch(Se){ht(t,t.return,Se)}}o&4&&t.stateNode!=null&&(c=t.memoizedProps,sh(t,c,s!==null?s.memoizedProps:c)),o&1024&&(lh=!0);break;case 6:if(An(n,t),Sn(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,s=t.stateNode;try{s.nodeValue=o}catch(Se){ht(t,t.return,Se)}}break;case 3:if(Ku=null,c=mi,mi=Qu(n.containerInfo),An(n,t),mi=c,Sn(t),o&4&&s!==null&&s.memoizedState.isDehydrated)try{qa(n.containerInfo)}catch(Se){ht(t,t.return,Se)}lh&&(lh=!1,Cp(t));break;case 4:o=mi,mi=Qu(t.stateNode.containerInfo),An(n,t),Sn(t),mi=o;break;case 12:An(n,t),Sn(t);break;case 31:An(n,t),Sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Mu(t,o)));break;case 13:An(n,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ou=nn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Mu(t,o)));break;case 22:c=t.memoizedState!==null;var O=s!==null&&s.memoizedState!==null,H=ir,W=Gt;if(ir=H||c,Gt=W||O,An(n,t),Gt=W,ir=H,Sn(t),o&8192)e:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(s===null||O||ir||Gt||Ps(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){O=s=n;try{if(h=O.stateNode,c)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=O.stateNode;var J=O.memoizedProps.style,F=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(Se){ht(O,O.return,Se)}}}else if(n.tag===6){if(s===null){O=n;try{O.stateNode.nodeValue=c?"":O.memoizedProps}catch(Se){ht(O,O.return,Se)}}}else if(n.tag===18){if(s===null){O=n;try{var X=O.stateNode;c?py(X,!0):py(O.stateNode,!1)}catch(Se){ht(O,O.return,Se)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Mu(t,s))));break;case 19:An(n,t),Sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Mu(t,o)));break;case 30:break;case 21:break;default:An(n,t),Sn(t)}}function Sn(t){var n=t.flags;if(n&2){try{for(var s,o=t.return;o!==null;){if(vp(o)){s=o;break}o=o.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var c=s.stateNode,h=ah(t);Iu(t,h,c);break;case 5:var _=s.stateNode;s.flags&32&&(Tn(_,""),s.flags&=-33);var T=ah(t);Iu(t,T,_);break;case 3:case 4:var O=s.stateNode.containerInfo,H=ah(t);oh(t,H,O);break;default:throw Error(a(161))}}catch(W){ht(t,t.return,W)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Cp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Cp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function sr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ep(t,n.alternate,n),n=n.sibling}function Ps(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:kr(4,n,n.return),Ps(n);break;case 1:Vi(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&pp(n,n.return,s),Ps(n);break;case 27:il(n.stateNode);case 26:case 5:Vi(n,n.return),Ps(n);break;case 22:n.memoizedState===null&&Ps(n);break;case 30:Ps(n);break;default:Ps(n)}t=t.sibling}}function ar(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=t,h=n,_=h.flags;switch(h.tag){case 0:case 11:case 15:ar(c,h,s),Yo(4,h);break;case 1:if(ar(c,h,s),o=h,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(H){ht(o,o.return,H)}if(o=h,c=o.updateQueue,c!==null){var T=o.stateNode;try{var O=c.shared.hiddenCallbacks;if(O!==null)for(c.shared.hiddenCallbacks=null,c=0;c<O.length;c++)rg(O[c],T)}catch(H){ht(o,o.return,H)}}s&&_&64&&gp(h),Ko(h,h.return);break;case 27:_p(h);case 26:case 5:ar(c,h,s),s&&o===null&&_&4&&yp(h),Ko(h,h.return);break;case 12:ar(c,h,s);break;case 31:ar(c,h,s),s&&_&4&&Ap(c,h);break;case 13:ar(c,h,s),s&&_&4&&Sp(c,h);break;case 22:h.memoizedState===null&&ar(c,h,s),Ko(h,h.return);break;case 30:break;default:ar(c,h,s)}n=n.sibling}}function uh(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Oo(s))}function ch(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Oo(t))}function gi(t,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rp(t,n,s,o),n=n.sibling}function Rp(t,n,s,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:gi(t,n,s,o),c&2048&&Yo(9,n);break;case 1:gi(t,n,s,o);break;case 3:gi(t,n,s,o),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Oo(t)));break;case 12:if(c&2048){gi(t,n,s,o),t=n.stateNode;try{var h=n.memoizedProps,_=h.id,T=h.onPostCommit;typeof T=="function"&&T(_,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){ht(n,n.return,O)}}else gi(t,n,s,o);break;case 31:gi(t,n,s,o);break;case 13:gi(t,n,s,o);break;case 23:break;case 22:h=n.stateNode,_=n.alternate,n.memoizedState!==null?h._visibility&2?gi(t,n,s,o):Xo(t,n):h._visibility&2?gi(t,n,s,o):(h._visibility|=2,Ia(t,n,s,o,(n.subtreeFlags&10256)!==0||!1)),c&2048&&uh(_,n);break;case 24:gi(t,n,s,o),c&2048&&ch(n.alternate,n);break;default:gi(t,n,s,o)}}function Ia(t,n,s,o,c){for(c=c&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=t,_=n,T=s,O=o,H=_.flags;switch(_.tag){case 0:case 11:case 15:Ia(h,_,T,O,c),Yo(8,_);break;case 23:break;case 22:var W=_.stateNode;_.memoizedState!==null?W._visibility&2?Ia(h,_,T,O,c):Xo(h,_):(W._visibility|=2,Ia(h,_,T,O,c)),c&&H&2048&&uh(_.alternate,_);break;case 24:Ia(h,_,T,O,c),c&&H&2048&&ch(_.alternate,_);break;default:Ia(h,_,T,O,c)}n=n.sibling}}function Xo(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,o=n,c=o.flags;switch(o.tag){case 22:Xo(s,o),c&2048&&uh(o.alternate,o);break;case 24:Xo(s,o),c&2048&&ch(o.alternate,o);break;default:Xo(s,o)}n=n.sibling}}var $o=8192;function Ma(t,n,s){if(t.subtreeFlags&$o)for(t=t.child;t!==null;)Dp(t,n,s),t=t.sibling}function Dp(t,n,s){switch(t.tag){case 26:Ma(t,n,s),t.flags&$o&&t.memoizedState!==null&&Nb(s,mi,t.memoizedState,t.memoizedProps);break;case 5:Ma(t,n,s);break;case 3:case 4:var o=mi;mi=Qu(t.stateNode.containerInfo),Ma(t,n,s),mi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=$o,$o=16777216,Ma(t,n,s),$o=o):Ma(t,n,s));break;default:Ma(t,n,s)}}function Np(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Wo(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];en=o,Mp(o,t)}Np(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ip(t),t=t.sibling}function Ip(t){switch(t.tag){case 0:case 11:case 15:Wo(t),t.flags&2048&&kr(9,t,t.return);break;case 3:Wo(t);break;case 12:Wo(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Vu(t)):Wo(t);break;default:Wo(t)}}function Vu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];en=o,Mp(o,t)}Np(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:kr(8,n,n.return),Vu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Vu(n));break;default:Vu(n)}t=t.sibling}}function Mp(t,n){for(;en!==null;){var s=en;switch(s.tag){case 0:case 11:case 15:kr(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Oo(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,en=o;else e:for(s=t;en!==null;){o=en;var c=o.sibling,h=o.return;if(Tp(o),o===s){en=null;break e}if(c!==null){c.return=h,en=c;break e}en=h}}}var F1={getCacheForType:function(t){var n=an(Bt),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s},cacheSignal:function(){return an(Bt).controller.signal}},Q1=typeof WeakMap=="function"?WeakMap:Map,ot=0,vt=null,Ke=null,$e=0,dt=0,Ln=null,Lr=!1,Va=!1,dh=!1,or=0,It=0,Ur=0,qs=0,hh=0,Un=0,Oa=0,Zo=null,wn=null,fh=!1,Ou=0,Vp=0,ju=1/0,zu=null,Br=null,Xt=0,Pr=null,ja=null,lr=0,mh=0,gh=null,Op=null,Jo=0,ph=null;function Bn(){return(ot&2)!==0&&$e!==0?$e&-$e:Q.T!==null?Th():oi()}function jp(){if(Un===0)if(($e&536870912)===0||et){var t=yt;yt<<=1,(yt&3932160)===0&&(yt=262144),Un=t}else Un=536870912;return t=zn.current,t!==null&&(t.flags|=32),Un}function Cn(t,n,s){(t===vt&&(dt===2||dt===9)||t.cancelPendingCommit!==null)&&(za(t,0),qr(t,$e,Un,!1)),Dt(t,s),((ot&2)===0||t!==vt)&&(t===vt&&((ot&2)===0&&(qs|=s),It===4&&qr(t,$e,Un,!1)),Oi(t))}function zp(t,n,s){if((ot&6)!==0)throw Error(a(327));var o=!s&&(n&127)===0&&(n&t.expiredLanes)===0||hn(t,n),c=o?X1(t,n):vh(t,n,!0),h=o;do{if(c===0){Va&&!o&&qr(t,n,0,!1);break}else{if(s=t.current.alternate,h&&!Y1(s)){c=vh(t,n,!1),h=!1;continue}if(c===2){if(h=n,t.errorRecoveryDisabledLanes&h)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var T=t;c=Zo;var O=T.current.memoizedState.isDehydrated;if(O&&(za(T,_).flags|=256),_=vh(T,_,!1),_!==2){if(dh&&!O){T.errorRecoveryDisabledLanes|=h,qs|=h,c=4;break e}h=wn,wn=c,h!==null&&(wn===null?wn=h:wn.push.apply(wn,h))}c=_}if(h=!1,c!==2)continue}}if(c===1){za(t,0),qr(t,n,0,!0);break}e:{switch(o=t,h=c,h){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:qr(o,n,Un,!Lr);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=Ou+300-nn(),10<c)){if(qr(o,n,Un,!Lr),kt(o,0,!0)!==0)break e;lr=n,o.timeoutHandle=fy(kp.bind(null,o,s,wn,zu,fh,n,Un,qs,Oa,Lr,h,"Throttled",-0,0),c);break e}kp(o,s,wn,zu,fh,n,Un,qs,Oa,Lr,h,null,-0,0)}}break}while(!0);Oi(t)}function kp(t,n,s,o,c,h,_,T,O,H,W,J,F,X){if(t.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Dp(n,h,J);var Se=(h&62914560)===h?Ou-nn():(h&4194048)===h?Vp-nn():0;if(Se=Ib(J,Se),Se!==null){lr=h,t.cancelPendingCommit=Se(Fp.bind(null,t,n,h,s,o,c,_,T,O,W,J,null,F,X)),qr(t,h,_,!H);return}}Fp(t,n,h,s,o,c,_,T,O)}function Y1(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var c=s[o],h=c.getSnapshot;c=c.value;try{if(!On(h(),c))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function qr(t,n,s,o){n&=~hh,n&=~qs,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var c=n;0<c;){var h=31-le(c),_=1<<h;o[h]=-1,c&=~_}s!==0&&Nn(t,s,n)}function ku(){return(ot&6)===0?(el(0),!1):!0}function yh(){if(Ke!==null){if(dt===0)var t=Ke.return;else t=Ke,Wi=Vs=null,Vd(t),wa=null,zo=0,t=Ke;for(;t!==null;)mp(t.alternate,t),t=t.return;Ke=null}}function za(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,fb(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),lr=0,yh(),vt=t,Ke=s=Xi(t.current,null),$e=n,dt=0,Ln=null,Lr=!1,Va=hn(t,n),dh=!1,Oa=Un=hh=qs=Ur=It=0,wn=Zo=null,fh=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var c=31-le(o),h=1<<c;n|=t[c],o&=~h}return or=n,ru(),s}function Lp(t,n){qe=null,Q.H=Ho,n===Sa||n===hu?(n=eg(),dt=3):n===Ed?(n=eg(),dt=4):dt=n===Xd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ln=n,Ke===null&&(It=1,wu(t,Yn(n,t.current)))}function Up(){var t=zn.current;return t===null?!0:($e&4194048)===$e?Wn===null:($e&62914560)===$e||($e&536870912)!==0?t===Wn:!1}function Bp(){var t=Q.H;return Q.H=Ho,t===null?Ho:t}function Pp(){var t=Q.A;return Q.A=F1,t}function Lu(){It=4,Lr||($e&4194048)!==$e&&zn.current!==null||(Va=!0),(Ur&134217727)===0&&(qs&134217727)===0||vt===null||qr(vt,$e,Un,!1)}function vh(t,n,s){var o=ot;ot|=2;var c=Bp(),h=Pp();(vt!==t||$e!==n)&&(zu=null,za(t,n)),n=!1;var _=It;e:do try{if(dt!==0&&Ke!==null){var T=Ke,O=Ln;switch(dt){case 8:yh(),_=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(n=!0);var H=dt;if(dt=0,Ln=null,ka(t,T,O,H),s&&Va){_=0;break e}break;default:H=dt,dt=0,Ln=null,ka(t,T,O,H)}}K1(),_=It;break}catch(W){Lp(t,W)}while(!0);return n&&t.shellSuspendCounter++,Wi=Vs=null,ot=o,Q.H=c,Q.A=h,Ke===null&&(vt=null,$e=0,ru()),_}function K1(){for(;Ke!==null;)qp(Ke)}function X1(t,n){var s=ot;ot|=2;var o=Bp(),c=Pp();vt!==t||$e!==n?(zu=null,ju=nn()+500,za(t,n)):Va=hn(t,n);e:do try{if(dt!==0&&Ke!==null){n=Ke;var h=Ln;t:switch(dt){case 1:dt=0,Ln=null,ka(t,n,h,1);break;case 2:case 9:if(Zm(h)){dt=0,Ln=null,Gp(n);break}n=function(){dt!==2&&dt!==9||vt!==t||(dt=7),Oi(t)},h.then(n,n);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Zm(h)?(dt=0,Ln=null,Gp(n)):(dt=0,Ln=null,ka(t,n,h,7));break;case 5:var _=null;switch(Ke.tag){case 26:_=Ke.memoizedState;case 5:case 27:var T=Ke;if(_?Ry(_):T.stateNode.complete){dt=0,Ln=null;var O=T.sibling;if(O!==null)Ke=O;else{var H=T.return;H!==null?(Ke=H,Uu(H)):Ke=null}break t}}dt=0,Ln=null,ka(t,n,h,5);break;case 6:dt=0,Ln=null,ka(t,n,h,6);break;case 8:yh(),It=6;break e;default:throw Error(a(462))}}$1();break}catch(W){Lp(t,W)}while(!0);return Wi=Vs=null,Q.H=o,Q.A=c,ot=s,Ke!==null?0:(vt=null,$e=0,ru(),It)}function $1(){for(;Ke!==null&&!ea();)qp(Ke)}function qp(t){var n=hp(t.alternate,t,or);t.memoizedProps=t.pendingProps,n===null?Uu(t):Ke=n}function Gp(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=ap(s,n,n.pendingProps,n.type,void 0,$e);break;case 11:n=ap(s,n,n.pendingProps,n.type.render,n.ref,$e);break;case 5:Vd(n);default:mp(s,n),n=Ke=Pm(n,or),n=hp(s,n,or)}t.memoizedProps=t.pendingProps,n===null?Uu(t):Ke=n}function ka(t,n,s,o){Wi=Vs=null,Vd(n),wa=null,zo=0;var c=n.return;try{if(L1(t,c,n,s,$e)){It=1,wu(t,Yn(s,t.current)),Ke=null;return}}catch(h){if(c!==null)throw Ke=c,h;It=1,wu(t,Yn(s,t.current)),Ke=null;return}n.flags&32768?(et||o===1?t=!0:Va||($e&536870912)!==0?t=!1:(Lr=t=!0,(o===2||o===9||o===3||o===6)&&(o=zn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Hp(n,t)):Uu(n)}function Uu(t){var n=t;do{if((n.flags&32768)!==0){Hp(n,Lr);return}t=n.return;var s=P1(n.alternate,n,or);if(s!==null){Ke=s;return}if(n=n.sibling,n!==null){Ke=n;return}Ke=n=t}while(n!==null);It===0&&(It=5)}function Hp(t,n){do{var s=q1(t.alternate,t);if(s!==null){s.flags&=32767,Ke=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){Ke=t;return}Ke=t=s}while(t!==null);It=6,Ke=null}function Fp(t,n,s,o,c,h,_,T,O){t.cancelPendingCommit=null;do Bu();while(Xt!==0);if((ot&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(h=n.lanes|n.childLanes,h|=ad,si(t,s,h,_,T,O),t===vt&&(Ke=vt=null,$e=0),ja=n,Pr=t,lr=s,mh=h,gh=c,Op=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,eb(ri,function(){return $p(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=Q.T,Q.T=null,c=ce.p,ce.p=2,_=ot,ot|=4;try{G1(t,n,s)}finally{ot=_,ce.p=c,Q.T=o}}Xt=1,Qp(),Yp(),Kp()}}function Qp(){if(Xt===1){Xt=0;var t=Pr,n=ja,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=Q.T,Q.T=null;var o=ce.p;ce.p=2;var c=ot;ot|=4;try{wp(n,t);var h=Nh,_=Mm(t.containerInfo),T=h.focusedElem,O=h.selectionRange;if(_!==T&&T&&T.ownerDocument&&Im(T.ownerDocument.documentElement,T)){if(O!==null&&td(T)){var H=O.start,W=O.end;if(W===void 0&&(W=H),"selectionStart"in T)T.selectionStart=H,T.selectionEnd=Math.min(W,T.value.length);else{var J=T.ownerDocument||document,F=J&&J.defaultView||window;if(F.getSelection){var X=F.getSelection(),Se=T.textContent.length,Ie=Math.min(O.start,Se),pt=O.end===void 0?Ie:Math.min(O.end,Se);!X.extend&&Ie>pt&&(_=pt,pt=Ie,Ie=_);var L=Nm(T,Ie),j=Nm(T,pt);if(L&&j&&(X.rangeCount!==1||X.anchorNode!==L.node||X.anchorOffset!==L.offset||X.focusNode!==j.node||X.focusOffset!==j.offset)){var G=J.createRange();G.setStart(L.node,L.offset),X.removeAllRanges(),Ie>pt?(X.addRange(G),X.extend(j.node,j.offset)):(G.setEnd(j.node,j.offset),X.addRange(G))}}}}for(J=[],X=T;X=X.parentNode;)X.nodeType===1&&J.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var Z=J[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Zu=!!Dh,Nh=Dh=null}finally{ot=c,ce.p=o,Q.T=s}}t.current=n,Xt=2}}function Yp(){if(Xt===2){Xt=0;var t=Pr,n=ja,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=Q.T,Q.T=null;var o=ce.p;ce.p=2;var c=ot;ot|=4;try{Ep(t,n.alternate,n)}finally{ot=c,ce.p=o,Q.T=s}}Xt=3}}function Kp(){if(Xt===4||Xt===3){Xt=0,ta();var t=Pr,n=ja,s=lr,o=Op;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Xt=5:(Xt=0,ja=Pr=null,Xp(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(Br=null),_n(s),n=n.stateNode,te&&typeof te.onCommitFiberRoot=="function")try{te.onCommitFiberRoot(K,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=Q.T,c=ce.p,ce.p=2,Q.T=null;try{for(var h=t.onRecoverableError,_=0;_<o.length;_++){var T=o[_];h(T.value,{componentStack:T.stack})}}finally{Q.T=n,ce.p=c}}(lr&3)!==0&&Bu(),Oi(t),c=t.pendingLanes,(s&261930)!==0&&(c&42)!==0?t===ph?Jo++:(Jo=0,ph=t):Jo=0,el(0)}}function Xp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Oo(n)))}function Bu(){return Qp(),Yp(),Kp(),$p()}function $p(){if(Xt!==5)return!1;var t=Pr,n=mh;mh=0;var s=_n(lr),o=Q.T,c=ce.p;try{ce.p=32>s?32:s,Q.T=null,s=gh,gh=null;var h=Pr,_=lr;if(Xt=0,ja=Pr=null,lr=0,(ot&6)!==0)throw Error(a(331));var T=ot;if(ot|=4,Ip(h.current),Rp(h,h.current,_,s),ot=T,el(0,!1),te&&typeof te.onPostCommitFiberRoot=="function")try{te.onPostCommitFiberRoot(K,h)}catch{}return!0}finally{ce.p=c,Q.T=o,Xp(t,n)}}function Wp(t,n,s){n=Yn(s,n),n=Kd(t.stateNode,n,2),t=Or(t,n,2),t!==null&&(Dt(t,2),Oi(t))}function ht(t,n,s){if(t.tag===3)Wp(t,t,s);else for(;n!==null;){if(n.tag===3){Wp(n,t,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Br===null||!Br.has(o))){t=Yn(s,t),s=Zg(2),o=Or(n,s,2),o!==null&&(Jg(s,o,n,t),Dt(o,2),Oi(o));break}}n=n.return}}function _h(t,n,s){var o=t.pingCache;if(o===null){o=t.pingCache=new Q1;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(s)||(dh=!0,c.add(s),t=W1.bind(null,t,n,s),n.then(t,t))}function W1(t,n,s){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,vt===t&&($e&s)===s&&(It===4||It===3&&($e&62914560)===$e&&300>nn()-Ou?(ot&2)===0&&za(t,0):hh|=s,Oa===$e&&(Oa=0)),Oi(t)}function Zp(t,n){n===0&&(n=yr()),t=Ns(t,n),t!==null&&(Dt(t,n),Oi(t))}function Z1(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Zp(t,s)}function J1(t,n){var s=0;switch(t.tag){case 31:case 13:var o=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),Zp(t,s)}function eb(t,n){return Mt(t,n)}var Pu=null,La=null,bh=!1,qu=!1,Eh=!1,Gr=0;function Oi(t){t!==La&&t.next===null&&(La===null?Pu=La=t:La=La.next=t),qu=!0,bh||(bh=!0,nb())}function el(t,n){if(!Eh&&qu){Eh=!0;do for(var s=!1,o=Pu;o!==null;){if(t!==0){var c=o.pendingLanes;if(c===0)var h=0;else{var _=o.suspendedLanes,T=o.pingedLanes;h=(1<<31-le(42|t)+1)-1,h&=c&~(_&~T),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,ny(o,h))}else h=$e,h=kt(o,o===vt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||hn(o,h)||(s=!0,ny(o,h));o=o.next}while(s);Eh=!1}}function tb(){Jp()}function Jp(){qu=bh=!1;var t=0;Gr!==0&&hb()&&(t=Gr);for(var n=nn(),s=null,o=Pu;o!==null;){var c=o.next,h=ey(o,n);h===0?(o.next=null,s===null?Pu=c:s.next=c,c===null&&(La=s)):(s=o,(t!==0||(h&3)!==0)&&(qu=!0)),o=c}Xt!==0&&Xt!==5||el(t),Gr!==0&&(Gr=0)}function ey(t,n){for(var s=t.suspendedLanes,o=t.pingedLanes,c=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var _=31-le(h),T=1<<_,O=c[_];O===-1?((T&s)===0||(T&o)!==0)&&(c[_]=vs(T,n)):O<=n&&(t.expiredLanes|=T),h&=~T}if(n=vt,s=$e,s=kt(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,s===0||t===n&&(dt===2||dt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&vi(o),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||hn(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(o!==null&&vi(o),_n(s)){case 2:case 8:s=ps;break;case 32:s=ri;break;case 268435456:s=ys;break;default:s=ri}return o=ty.bind(null,t),s=Mt(s,o),t.callbackPriority=n,t.callbackNode=s,n}return o!==null&&o!==null&&vi(o),t.callbackPriority=2,t.callbackNode=null,2}function ty(t,n){if(Xt!==0&&Xt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Bu()&&t.callbackNode!==s)return null;var o=$e;return o=kt(t,t===vt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(zp(t,o,n),ey(t,nn()),t.callbackNode!=null&&t.callbackNode===s?ty.bind(null,t):null)}function ny(t,n){if(Bu())return null;zp(t,n,!0)}function nb(){mb(function(){(ot&6)!==0?Mt(gs,tb):Jp()})}function Th(){if(Gr===0){var t=xa;t===0&&(t=je,je<<=1,(je&261888)===0&&(je=256)),Gr=t}return Gr}function iy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:la(""+t)}function ry(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function ib(t,n,s,o,c){if(n==="submit"&&s&&s.stateNode===c){var h=iy((c[Kt]||null).action),_=o.submitter;_&&(n=(n=_[Kt]||null)?iy(n.formAction):_.getAttribute("formAction"),n!==null&&(h=n,_=null));var T=new Ci("action","action",null,o,c);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Gr!==0){var O=_?ry(c,_):new FormData(c);qd(s,{pending:!0,data:O,method:c.method,action:h},null,O)}}else typeof h=="function"&&(T.preventDefault(),O=_?ry(c,_):new FormData(c),qd(s,{pending:!0,data:O,method:c.method,action:h},h,O))},currentTarget:c}]})}}for(var xh=0;xh<sd.length;xh++){var Ah=sd[xh],rb=Ah.toLowerCase(),sb=Ah[0].toUpperCase()+Ah.slice(1);fi(rb,"on"+sb)}fi(jm,"onAnimationEnd"),fi(zm,"onAnimationIteration"),fi(km,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(E1,"onTransitionRun"),fi(T1,"onTransitionStart"),fi(x1,"onTransitionCancel"),fi(Lm,"onTransitionEnd"),xi("onMouseEnter",["mouseout","mouseover"]),xi("onMouseLeave",["mouseout","mouseover"]),xi("onPointerEnter",["pointerout","pointerover"]),xi("onPointerLeave",["pointerout","pointerover"]),Ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ab=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tl));function sy(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var o=t[s],c=o.event;o=o.listeners;e:{var h=void 0;if(n)for(var _=o.length-1;0<=_;_--){var T=o[_],O=T.instance,H=T.currentTarget;if(T=T.listener,O!==h&&c.isPropagationStopped())break e;h=T,c.currentTarget=H;try{h(c)}catch(W){iu(W)}c.currentTarget=null,h=O}else for(_=0;_<o.length;_++){if(T=o[_],O=T.instance,H=T.currentTarget,T=T.listener,O!==h&&c.isPropagationStopped())break e;h=T,c.currentTarget=H;try{h(c)}catch(W){iu(W)}c.currentTarget=null,h=O}}}}function Xe(t,n){var s=n[ia];s===void 0&&(s=n[ia]=new Set);var o=t+"__bubble";s.has(o)||(ay(n,t,2,!1),s.add(o))}function Sh(t,n,s){var o=0;n&&(o|=4),ay(s,t,o,n)}var Gu="_reactListening"+Math.random().toString(36).slice(2);function wh(t){if(!t[Gu]){t[Gu]=!0,fo.forEach(function(s){s!=="selectionchange"&&(ab.has(s)||Sh(s,!1,t),Sh(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Gu]||(n[Gu]=!0,Sh("selectionchange",!1,n))}}function ay(t,n,s,o){switch(jy(n)){case 2:var c=Ob;break;case 8:c=jb;break;default:c=Ph}s=c.bind(null,n,s,t),c=void 0,!Ts||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function Ch(t,n,s,o,c){var h=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var _=o.tag;if(_===3||_===4){var T=o.stateNode.containerInfo;if(T===c)break;if(_===4)for(_=o.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===c)return;_=_.return}for(;T!==null;){if(_=bi(T),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){o=h=_;continue e}T=T.parentNode}}o=o.return}Ar(function(){var H=h,W=Gn(s),J=[];e:{var F=Um.get(t);if(F!==void 0){var X=Ci,Se=t;switch(t){case"keypress":if(As(s)===0)break e;case"keydown":case"keyup":X=eu;break;case"focusin":Se="focus",X=ws;break;case"focusout":Se="blur",X=ws;break;case"beforeblur":case"afterblur":X=ws;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=wo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=g;break;case jm:case zm:case km:X=Yl;break;case Lm:X=A;break;case"scroll":case"scrollend":X=So;break;case"wheel":X=Y;break;case"copy":case"cut":case"paste":X=Kl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=Ki;break;case"toggle":case"beforetoggle":X=Pe}var Ie=(n&4)!==0,pt=!Ie&&(t==="scroll"||t==="scrollend"),L=Ie?F!==null?F+"Capture":null:F;Ie=[];for(var j=H,G;j!==null;){var Z=j;if(G=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||G===null||L===null||(Z=ui(j,L),Z!=null&&Ie.push(nl(j,Z,G))),pt)break;j=j.return}0<Ie.length&&(F=new X(F,Se,null,s,W),J.push({event:F,listeners:Ie}))}}if((n&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",F&&s!==To&&(Se=s.relatedTarget||s.fromElement)&&(bi(Se)||Se[bn]))break e;if((X||F)&&(F=W.window===W?W:(F=W.ownerDocument)?F.defaultView||F.parentWindow:window,X?(Se=s.relatedTarget||s.toElement,X=H,Se=Se?bi(Se):null,Se!==null&&(pt=d(Se),Ie=Se.tag,Se!==pt||Ie!==5&&Ie!==27&&Ie!==6)&&(Se=null)):(X=null,Se=H),X!==Se)){if(Ie=wo,Z="onMouseLeave",L="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=Ki,Z="onPointerLeave",L="onPointerEnter",j="pointer"),pt=X==null?F:Mn(X),G=Se==null?F:Mn(Se),F=new Ie(Z,j+"leave",X,s,W),F.target=pt,F.relatedTarget=G,Z=null,bi(W)===H&&(Ie=new Ie(L,j+"enter",Se,s,W),Ie.target=G,Ie.relatedTarget=pt,Z=Ie),pt=Z,X&&Se)t:{for(Ie=ob,L=X,j=Se,G=0,Z=L;Z;Z=Ie(Z))G++;Z=0;for(var De=j;De;De=Ie(De))Z++;for(;0<G-Z;)L=Ie(L),G--;for(;0<Z-G;)j=Ie(j),Z--;for(;G--;){if(L===j||j!==null&&L===j.alternate){Ie=L;break t}L=Ie(L),j=Ie(j)}Ie=null}else Ie=null;X!==null&&oy(J,F,X,Ie,!1),Se!==null&&pt!==null&&oy(J,pt,Se,Ie,!0)}}e:{if(F=H?Mn(H):window,X=F.nodeName&&F.nodeName.toLowerCase(),X==="select"||X==="input"&&F.type==="file")var rt=Am;else if(Tm(F))if(Sm)rt=v1;else{rt=p1;var Re=g1}else X=F.nodeName,!X||X.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&oa(H.elementType)&&(rt=Am):rt=y1;if(rt&&(rt=rt(t,H))){xm(J,rt,s,W);break e}Re&&Re(t,F,H),t==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&_o(F,"number",F.value)}switch(Re=H?Mn(H):window,t){case"focusin":(Tm(Re)||Re.contentEditable==="true")&&(ga=Re,nd=H,Io=null);break;case"focusout":Io=nd=ga=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Vm(J,s,W);break;case"selectionchange":if(b1)break;case"keydown":case"keyup":Vm(J,s,W)}var Ge;if(at)e:{switch(t){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else ma?Cs(t,s)&&(We="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(We="onCompositionStart");We&&(Ni&&s.locale!=="ko"&&(ma||We!=="onCompositionStart"?We==="onCompositionEnd"&&ma&&(Ge=Ao()):(wi=W,xo="value"in wi?wi.value:wi.textContent,ma=!0)),Re=Hu(H,We),0<Re.length&&(We=new Di(We,t,null,s,W),J.push({event:We,listeners:Re}),Ge?We.data=Ge:(Ge=fa(s),Ge!==null&&(We.data=Ge)))),(Ge=Fn?d1(t,s):h1(t,s))&&(We=Hu(H,"onBeforeInput"),0<We.length&&(Re=new Di("onBeforeInput","beforeinput",null,s,W),J.push({event:Re,listeners:We}),Re.data=Ge)),ib(J,t,H,s,W)}sy(J,n)})}function nl(t,n,s){return{instance:t,listener:n,currentTarget:s}}function Hu(t,n){for(var s=n+"Capture",o=[];t!==null;){var c=t,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=ui(t,s),c!=null&&o.unshift(nl(t,c,h)),c=ui(t,n),c!=null&&o.push(nl(t,c,h))),t.tag===3)return o;t=t.return}return[]}function ob(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function oy(t,n,s,o,c){for(var h=n._reactName,_=[];s!==null&&s!==o;){var T=s,O=T.alternate,H=T.stateNode;if(T=T.tag,O!==null&&O===o)break;T!==5&&T!==26&&T!==27||H===null||(O=H,c?(H=ui(s,h),H!=null&&_.unshift(nl(s,H,O))):c||(H=ui(s,h),H!=null&&_.push(nl(s,H,O)))),s=s.return}_.length!==0&&t.push({event:n,listeners:_})}var lb=/\r\n?/g,ub=/\u0000|\uFFFD/g;function ly(t){return(typeof t=="string"?t:""+t).replace(lb,`
`).replace(ub,"")}function uy(t,n){return n=ly(n),ly(t)===n}function gt(t,n,s,o,c,h){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||Tn(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&Tn(t,""+o);break;case"className":Vn(t,"class",o);break;case"tabIndex":Vn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Vn(t,s,o);break;case"style":Eo(t,o,h);break;case"data":if(n!=="object"){Vn(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=la(""+o),t.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(n!=="input"&&gt(t,n,"name",c.name,c,null),gt(t,n,"formEncType",c.formEncType,c,null),gt(t,n,"formMethod",c.formMethod,c,null),gt(t,n,"formTarget",c.formTarget,c,null)):(gt(t,n,"encType",c.encType,c,null),gt(t,n,"method",c.method,c,null),gt(t,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=la(""+o),t.setAttribute(s,o);break;case"onClick":o!=null&&(t.onclick=li);break;case"onScroll":o!=null&&Xe("scroll",t);break;case"onScrollEnd":o!=null&&Xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}s=la(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""+o):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":o===!0?t.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,o):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(s,o):t.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(s):t.setAttribute(s,o);break;case"popover":Xe("beforetoggle",t),Xe("toggle",t),sa(t,"popover",o);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":sa(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=Hl.get(s)||s,sa(t,s,o))}}function Rh(t,n,s,o,c,h){switch(s){case"style":Eo(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof o=="string"?Tn(t,o):(typeof o=="number"||typeof o=="bigint")&&Tn(t,""+o);break;case"onScroll":o!=null&&Xe("scroll",t);break;case"onScrollEnd":o!=null&&Xe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),n=s.slice(2,c?s.length-7:void 0),h=t[Kt]||null,h=h!=null?h[s]:null,typeof h=="function"&&t.removeEventListener(n,h,c),typeof o=="function")){typeof h!="function"&&h!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,o,c);break e}s in t?t[s]=o:o===!0?t.setAttribute(s,""):sa(t,s,o)}}}function ln(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",t),Xe("load",t);var o=!1,c=!1,h;for(h in s)if(s.hasOwnProperty(h)){var _=s[h];if(_!=null)switch(h){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:gt(t,n,h,_,s,null)}}c&&gt(t,n,"srcSet",s.srcSet,s,null),o&&gt(t,n,"src",s.src,s,null);return;case"input":Xe("invalid",t);var T=h=_=c=null,O=null,H=null;for(o in s)if(s.hasOwnProperty(o)){var W=s[o];if(W!=null)switch(o){case"name":c=W;break;case"type":_=W;break;case"checked":O=W;break;case"defaultChecked":H=W;break;case"value":h=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,n));break;default:gt(t,n,o,W,s,null)}}Pl(t,h,T,O,H,_,c,!1);return;case"select":Xe("invalid",t),o=_=h=null;for(c in s)if(s.hasOwnProperty(c)&&(T=s[c],T!=null))switch(c){case"value":h=T;break;case"defaultValue":_=T;break;case"multiple":o=T;default:gt(t,n,c,T,s,null)}n=h,s=_,t.multiple=!!o,n!=null?br(t,!!o,n,!1):s!=null&&br(t,!!o,s,!0);return;case"textarea":Xe("invalid",t),h=c=o=null;for(_ in s)if(s.hasOwnProperty(_)&&(T=s[_],T!=null))switch(_){case"value":o=T;break;case"defaultValue":c=T;break;case"children":h=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:gt(t,n,_,T,s,null)}Er(t,o,c,h);return;case"option":for(O in s)if(s.hasOwnProperty(O)&&(o=s[O],o!=null))switch(O){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:gt(t,n,O,o,s,null)}return;case"dialog":Xe("beforetoggle",t),Xe("toggle",t),Xe("cancel",t),Xe("close",t);break;case"iframe":case"object":Xe("load",t);break;case"video":case"audio":for(o=0;o<tl.length;o++)Xe(tl[o],t);break;case"image":Xe("error",t),Xe("load",t);break;case"details":Xe("toggle",t);break;case"embed":case"source":case"link":Xe("error",t),Xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in s)if(s.hasOwnProperty(H)&&(o=s[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:gt(t,n,H,o,s,null)}return;default:if(oa(n)){for(W in s)s.hasOwnProperty(W)&&(o=s[W],o!==void 0&&Rh(t,n,W,o,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(o=s[T],o!=null&&gt(t,n,T,o,s,null))}function cb(t,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,_=null,T=null,O=null,H=null,W=null;for(X in s){var J=s[X];if(s.hasOwnProperty(X)&&J!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=J;default:o.hasOwnProperty(X)||gt(t,n,X,null,o,J)}}for(var F in o){var X=o[F];if(J=s[F],o.hasOwnProperty(F)&&(X!=null||J!=null))switch(F){case"type":h=X;break;case"name":c=X;break;case"checked":H=X;break;case"defaultChecked":W=X;break;case"value":_=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,n));break;default:X!==J&&gt(t,n,F,X,o,J)}}aa(t,_,T,O,H,W,h,c);return;case"select":X=_=T=F=null;for(h in s)if(O=s[h],s.hasOwnProperty(h)&&O!=null)switch(h){case"value":break;case"multiple":X=O;default:o.hasOwnProperty(h)||gt(t,n,h,null,o,O)}for(c in o)if(h=o[c],O=s[c],o.hasOwnProperty(c)&&(h!=null||O!=null))switch(c){case"value":F=h;break;case"defaultValue":T=h;break;case"multiple":_=h;default:h!==O&&gt(t,n,c,h,o,O)}n=T,s=_,o=X,F!=null?br(t,!!s,F,!1):!!o!=!!s&&(n!=null?br(t,!!s,n,!0):br(t,!!s,s?[]:"",!1));return;case"textarea":X=F=null;for(T in s)if(c=s[T],s.hasOwnProperty(T)&&c!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:gt(t,n,T,null,o,c)}for(_ in o)if(c=o[_],h=s[_],o.hasOwnProperty(_)&&(c!=null||h!=null))switch(_){case"value":F=c;break;case"defaultValue":X=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==h&&gt(t,n,_,c,o,h)}ql(t,F,X);return;case"option":for(var Se in s)if(F=s[Se],s.hasOwnProperty(Se)&&F!=null&&!o.hasOwnProperty(Se))switch(Se){case"selected":t.selected=!1;break;default:gt(t,n,Se,null,o,F)}for(O in o)if(F=o[O],X=s[O],o.hasOwnProperty(O)&&F!==X&&(F!=null||X!=null))switch(O){case"selected":t.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:gt(t,n,O,F,o,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in s)F=s[Ie],s.hasOwnProperty(Ie)&&F!=null&&!o.hasOwnProperty(Ie)&&gt(t,n,Ie,null,o,F);for(H in o)if(F=o[H],X=s[H],o.hasOwnProperty(H)&&F!==X&&(F!=null||X!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(a(137,n));break;default:gt(t,n,H,F,o,X)}return;default:if(oa(n)){for(var pt in s)F=s[pt],s.hasOwnProperty(pt)&&F!==void 0&&!o.hasOwnProperty(pt)&&Rh(t,n,pt,void 0,o,F);for(W in o)F=o[W],X=s[W],!o.hasOwnProperty(W)||F===X||F===void 0&&X===void 0||Rh(t,n,W,F,o,X);return}}for(var L in s)F=s[L],s.hasOwnProperty(L)&&F!=null&&!o.hasOwnProperty(L)&&gt(t,n,L,null,o,F);for(J in o)F=o[J],X=s[J],!o.hasOwnProperty(J)||F===X||F==null&&X==null||gt(t,n,J,F,o,X)}function cy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function db(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var c=s[o],h=c.transferSize,_=c.initiatorType,T=c.duration;if(h&&T&&cy(_)){for(_=0,T=c.responseEnd,o+=1;o<s.length;o++){var O=s[o],H=O.startTime;if(H>T)break;var W=O.transferSize,J=O.initiatorType;W&&cy(J)&&(O=O.responseEnd,_+=W*(O<T?1:(T-H)/(O-H)))}if(--o,n+=8*(h+_)/(c.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Dh=null,Nh=null;function Fu(t){return t.nodeType===9?t:t.ownerDocument}function dy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ih(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Mh=null;function hb(){var t=window.event;return t&&t.type==="popstate"?t===Mh?!1:(Mh=t,!0):(Mh=null,!1)}var fy=typeof setTimeout=="function"?setTimeout:void 0,fb=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(t){return my.resolve(null).then(t).catch(gb)}:fy;function gb(t){setTimeout(function(){throw t})}function Hr(t){return t==="head"}function gy(t,n){var s=n,o=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(o===0){t.removeChild(c),qa(n);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")il(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,il(s);for(var h=s.firstChild;h;){var _=h.nextSibling,T=h.nodeName;h[_i]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=_}}else s==="body"&&il(t.ownerDocument.body);s=c}while(s);qa(n)}function py(t,n){var s=t;t=0;do{var o=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=o}while(s)}function Vh(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Vh(s),ra(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function pb(t,n,s,o){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[_i])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=Zn(t.nextSibling),t===null)break}return null}function yb(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Zn(t.nextSibling),t===null))return null;return t}function yy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Zn(t.nextSibling),t===null))return null;return t}function Oh(t){return t.data==="$?"||t.data==="$~"}function jh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function vb(t,n){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||s.readyState!=="loading")n();else{var o=function(){n(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Zn(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var zh=null;function vy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(n===0)return Zn(t.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}t=t.nextSibling}return null}function _y(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return t;n--}else s!=="/$"&&s!=="/&"||n++}t=t.previousSibling}return null}function by(t,n,s){switch(n=Fu(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function il(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ra(t)}var Jn=new Map,Ey=new Set;function Qu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ur=ce.d;ce.d={f:_b,r:bb,D:Eb,C:Tb,L:xb,m:Ab,X:wb,S:Sb,M:Cb};function _b(){var t=ur.f(),n=ku();return t||n}function bb(t){var n=qn(t);n!==null&&n.tag===5&&n.type==="form"?Lg(n):ur.r(t)}var Ua=typeof document>"u"?null:document;function Ty(t,n,s){var o=Ua;if(o&&typeof n=="string"&&n){var c=En(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Ey.has(c)||(Ey.add(c),t={rel:t,crossOrigin:s,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),ln(n,"link",t),Lt(n),o.head.appendChild(n)))}}function Eb(t){ur.D(t),Ty("dns-prefetch",t,null)}function Tb(t,n){ur.C(t,n),Ty("preconnect",t,n)}function xb(t,n,s){ur.L(t,n,s);var o=Ua;if(o&&t&&n){var c='link[rel="preload"][as="'+En(n)+'"]';n==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+En(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+En(s.imageSizes)+'"]')):c+='[href="'+En(t)+'"]';var h=c;switch(n){case"style":h=Ba(t);break;case"script":h=Pa(t)}Jn.has(h)||(t=S({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),Jn.set(h,t),o.querySelector(c)!==null||n==="style"&&o.querySelector(rl(h))||n==="script"&&o.querySelector(sl(h))||(n=o.createElement("link"),ln(n,"link",t),Lt(n),o.head.appendChild(n)))}}function Ab(t,n){ur.m(t,n);var s=Ua;if(s&&t){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+En(o)+'"][href="'+En(t)+'"]',h=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Pa(t)}if(!Jn.has(h)&&(t=S({rel:"modulepreload",href:t},n),Jn.set(h,t),s.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(sl(h)))return}o=s.createElement("link"),ln(o,"link",t),Lt(o),s.head.appendChild(o)}}}function Sb(t,n,s){ur.S(t,n,s);var o=Ua;if(o&&t){var c=Ei(o).hoistableStyles,h=Ba(t);n=n||"default";var _=c.get(h);if(!_){var T={loading:0,preload:null};if(_=o.querySelector(rl(h)))T.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":n},s),(s=Jn.get(h))&&kh(t,s);var O=_=o.createElement("link");Lt(O),ln(O,"link",t),O._p=new Promise(function(H,W){O.onload=H,O.onerror=W}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Yu(_,n,o)}_={type:"stylesheet",instance:_,count:1,state:T},c.set(h,_)}}}function wb(t,n){ur.X(t,n);var s=Ua;if(s&&t){var o=Ei(s).hoistableScripts,c=Pa(t),h=o.get(c);h||(h=s.querySelector(sl(c)),h||(t=S({src:t,async:!0},n),(n=Jn.get(c))&&Lh(t,n),h=s.createElement("script"),Lt(h),ln(h,"link",t),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(c,h))}}function Cb(t,n){ur.M(t,n);var s=Ua;if(s&&t){var o=Ei(s).hoistableScripts,c=Pa(t),h=o.get(c);h||(h=s.querySelector(sl(c)),h||(t=S({src:t,async:!0,type:"module"},n),(n=Jn.get(c))&&Lh(t,n),h=s.createElement("script"),Lt(h),ln(h,"link",t),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(c,h))}}function xy(t,n,s,o){var c=(c=ze.current)?Qu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Ba(s.href),s=Ei(c).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ba(s.href);var h=Ei(c).hoistableStyles,_=h.get(t);if(_||(c=c.ownerDocument||c,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,_),(h=c.querySelector(rl(t)))&&!h._p&&(_.instance=h,_.state.loading=5),Jn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Jn.set(t,s),h||Rb(c,t,s,_.state))),n&&o===null)throw Error(a(528,""));return _}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Pa(s),s=Ei(c).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ba(t){return'href="'+En(t)+'"'}function rl(t){return'link[rel="stylesheet"]['+t+"]"}function Ay(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Rb(t,n,s,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),ln(n,"link",s),Lt(n),t.head.appendChild(n))}function Pa(t){return'[src="'+En(t)+'"]'}function sl(t){return"script[async]"+t}function Sy(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+En(s.href)+'"]');if(o)return n.instance=o,Lt(o),o;var c=S({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Lt(o),ln(o,"style",c),Yu(o,s.precedence,t),n.instance=o;case"stylesheet":c=Ba(s.href);var h=t.querySelector(rl(c));if(h)return n.state.loading|=4,n.instance=h,Lt(h),h;o=Ay(s),(c=Jn.get(c))&&kh(o,c),h=(t.ownerDocument||t).createElement("link"),Lt(h);var _=h;return _._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),ln(h,"link",o),n.state.loading|=4,Yu(h,s.precedence,t),n.instance=h;case"script":return h=Pa(s.src),(c=t.querySelector(sl(h)))?(n.instance=c,Lt(c),c):(o=s,(c=Jn.get(h))&&(o=S({},s),Lh(o,c)),t=t.ownerDocument||t,c=t.createElement("script"),Lt(c),ln(c,"link",o),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Yu(o,s.precedence,t));return n.instance}function Yu(t,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,h=c,_=0;_<o.length;_++){var T=o[_];if(T.dataset.precedence===n)h=T;else if(h!==c)break}h?h.parentNode.insertBefore(t,h.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function kh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Lh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Ku=null;function wy(t,n,s){if(Ku===null){var o=new Map,c=Ku=new Map;c.set(s,o)}else c=Ku,o=c.get(s),o||(o=new Map,c.set(s,o));if(o.has(t))return o;for(o.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var h=s[c];if(!(h[_i]||h[xt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(n)||"";_=t+_;var T=o.get(_);T?T.push(h):o.set(_,[h])}}return o}function Cy(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function Db(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ry(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Nb(t,n,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=Ba(o.href),h=n.querySelector(rl(c));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Xu.bind(t),n.then(t,t)),s.state.loading|=4,s.instance=h,Lt(h);return}h=n.ownerDocument||n,o=Ay(o),(c=Jn.get(c))&&kh(o,c),h=h.createElement("link"),Lt(h);var _=h;_._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),ln(h,"link",o),s.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Xu.bind(t),n.addEventListener("load",s),n.addEventListener("error",s))}}var Uh=0;function Ib(t,n){return t.stylesheets&&t.count===0&&Wu(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var o=setTimeout(function(){if(t.stylesheets&&Wu(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+n);0<t.imgBytes&&Uh===0&&(Uh=62500*db());var c=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Wu(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>Uh?50:800)+n);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(c)}}:null}function Xu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var $u=null;function Wu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,$u=new Map,n.forEach(Mb,t),$u=null,Xu.call(t))}function Mb(t,n){if(!(n.state.loading&4)){var s=$u.get(t);if(s)var o=s.get(null);else{s=new Map,$u.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var _=c[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(s.set(_.dataset.precedence,_),o=_)}o&&s.set(null,o)}c=n.instance,_=c.getAttribute("data-precedence"),h=s.get(_)||o,h===o&&s.set(null,c),s.set(_,c),this.count++,o=Xu.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),h?h.parentNode.insertBefore(c,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var al={$$typeof:me,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function Vb(t,n,s,o,c,h,_,T,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qe(0),this.hiddenUpdates=Qe(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Dy(t,n,s,o,c,h,_,T,O,H,W,J){return t=new Vb(t,n,s,_,O,H,W,J,T),n=1,h===!0&&(n|=24),h=jn(3,null,null,n),t.current=h,h.stateNode=t,n=vd(),n.refCount++,t.pooledCache=n,n.refCount++,h.memoizedState={element:o,isDehydrated:s,cache:n},Td(h),t}function Ny(t){return t?(t=va,t):va}function Iy(t,n,s,o,c,h){c=Ny(c),o.context===null?o.context=c:o.pendingContext=c,o=Vr(n),o.payload={element:s},h=h===void 0?null:h,h!==null&&(o.callback=h),s=Or(t,o,n),s!==null&&(Cn(s,t,n),Lo(s,t,n))}function My(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Bh(t,n){My(t,n),(t=t.alternate)&&My(t,n)}function Vy(t){if(t.tag===13||t.tag===31){var n=Ns(t,67108864);n!==null&&Cn(n,t,67108864),Bh(t,67108864)}}function Oy(t){if(t.tag===13||t.tag===31){var n=Bn();n=ai(n);var s=Ns(t,n);s!==null&&Cn(s,t,n),Bh(t,n)}}var Zu=!0;function Ob(t,n,s,o){var c=Q.T;Q.T=null;var h=ce.p;try{ce.p=2,Ph(t,n,s,o)}finally{ce.p=h,Q.T=c}}function jb(t,n,s,o){var c=Q.T;Q.T=null;var h=ce.p;try{ce.p=8,Ph(t,n,s,o)}finally{ce.p=h,Q.T=c}}function Ph(t,n,s,o){if(Zu){var c=qh(o);if(c===null)Ch(t,n,o,Ju,s),zy(t,o);else if(kb(c,t,n,s,o))o.stopPropagation();else if(zy(t,o),n&4&&-1<zb.indexOf(t)){for(;c!==null;){var h=qn(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=Fe(h.pendingLanes);if(_!==0){var T=h;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var O=1<<31-le(_);T.entanglements[1]|=O,_&=~O}Oi(h),(ot&6)===0&&(ju=nn()+500,el(0))}}break;case 31:case 13:T=Ns(h,2),T!==null&&Cn(T,h,2),ku(),Bh(h,2)}if(h=qh(o),h===null&&Ch(t,n,o,Ju,s),h===c)break;c=h}c!==null&&o.stopPropagation()}else Ch(t,n,o,null,s)}}function qh(t){return t=Gn(t),Gh(t)}var Ju=null;function Gh(t){if(Ju=null,t=bi(t),t!==null){var n=d(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=f(n),t!==null)return t;t=null}else if(s===31){if(t=y(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Ju=t,null}function jy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Hi()){case gs:return 2;case ps:return 8;case ri:case na:return 32;case ys:return 268435456;default:return 32}default:return 32}}var Hh=!1,Fr=null,Qr=null,Yr=null,ol=new Map,ll=new Map,Kr=[],zb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(t,n){switch(t){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":ol.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ll.delete(n.pointerId)}}function ul(t,n,s,o,c,h){return t===null||t.nativeEvent!==h?(t={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:h,targetContainers:[c]},n!==null&&(n=qn(n),n!==null&&Vy(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function kb(t,n,s,o,c){switch(n){case"focusin":return Fr=ul(Fr,t,n,s,o,c),!0;case"dragenter":return Qr=ul(Qr,t,n,s,o,c),!0;case"mouseover":return Yr=ul(Yr,t,n,s,o,c),!0;case"pointerover":var h=c.pointerId;return ol.set(h,ul(ol.get(h)||null,t,n,s,o,c)),!0;case"gotpointercapture":return h=c.pointerId,ll.set(h,ul(ll.get(h)||null,t,n,s,o,c)),!0}return!1}function ky(t){var n=bi(t.target);if(n!==null){var s=d(n);if(s!==null){if(n=s.tag,n===13){if(n=f(s),n!==null){t.blockedOn=n,Yt(t.priority,function(){Oy(s)});return}}else if(n===31){if(n=y(s),n!==null){t.blockedOn=n,Yt(t.priority,function(){Oy(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=qh(t.nativeEvent);if(s===null){s=t.nativeEvent;var o=new s.constructor(s.type,s);To=o,s.target.dispatchEvent(o),To=null}else return n=qn(s),n!==null&&Vy(n),t.blockedOn=s,!1;n.shift()}return!0}function Ly(t,n,s){ec(t)&&s.delete(n)}function Lb(){Hh=!1,Fr!==null&&ec(Fr)&&(Fr=null),Qr!==null&&ec(Qr)&&(Qr=null),Yr!==null&&ec(Yr)&&(Yr=null),ol.forEach(Ly),ll.forEach(Ly)}function tc(t,n){t.blockedOn===n&&(t.blockedOn=null,Hh||(Hh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Lb)))}var nc=null;function Uy(t){nc!==t&&(nc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nc===t&&(nc=null);for(var n=0;n<t.length;n+=3){var s=t[n],o=t[n+1],c=t[n+2];if(typeof o!="function"){if(Gh(o||s)===null)continue;break}var h=qn(s);h!==null&&(t.splice(n,3),n-=3,qd(h,{pending:!0,data:c,method:s.method,action:o},o,c))}}))}function qa(t){function n(O){return tc(O,t)}Fr!==null&&tc(Fr,t),Qr!==null&&tc(Qr,t),Yr!==null&&tc(Yr,t),ol.forEach(n),ll.forEach(n);for(var s=0;s<Kr.length;s++){var o=Kr[s];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Kr.length&&(s=Kr[0],s.blockedOn===null);)ky(s),s.blockedOn===null&&Kr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var c=s[o],h=s[o+1],_=c[Kt]||null;if(typeof h=="function")_||Uy(s);else if(_){var T=null;if(h&&h.hasAttribute("formAction")){if(c=h,_=h[Kt]||null)T=_.formAction;else if(Gh(c)!==null)continue}else T=_.action;typeof T=="function"?s[o+1]=T:(s.splice(o,3),o-=3),Uy(s)}}}function By(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(_){return c=_})},focusReset:"manual",scroll:"manual"})}function n(){c!==null&&(c(),c=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,c=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),c!==null&&(c(),c=null)}}}function Fh(t){this._internalRoot=t}ic.prototype.render=Fh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=Bn();Iy(s,o,t,n,null,null)},ic.prototype.unmount=Fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Iy(t.current,2,null,t,null,null),ku(),n[bn]=null}};function ic(t){this._internalRoot=t}ic.prototype.unstable_scheduleHydration=function(t){if(t){var n=oi();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Kr.length&&n!==0&&n<Kr[s].priority;s++);Kr.splice(s,0,t),s===0&&ky(t)}};var Py=e.version;if(Py!=="19.2.3")throw Error(a(527,Py,"19.2.3"));ce.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=v(n),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var Ub={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{K=rc.inject(Ub),te=rc}catch{}}return dl.createRoot=function(t,n){if(!l(t))throw Error(a(299));var s=!1,o="",c=Kg,h=Xg,_=$g;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=Dy(t,1,!1,null,null,s,o,null,c,h,_,By),t[bn]=n.current,wh(t),new Fh(n)},dl.hydrateRoot=function(t,n,s){if(!l(t))throw Error(a(299));var o=!1,c="",h=Kg,_=Xg,T=$g,O=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.formState!==void 0&&(O=s.formState)),n=Dy(t,1,!0,n,s??null,o,c,O,h,_,T,By),n.context=Ny(null),s=n.current,o=Bn(),o=ai(o),c=Vr(o),c.callback=null,Or(s,c,o),s=o,n.current.lanes=s,Dt(n,s),Oi(n),t[bn]=n.current,wh(t),new ic(n)},dl.version="19.2.3",dl}var Wy;function Xb(){if(Wy)return Kh.exports;Wy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kh.exports=Kb(),Kh.exports}var $b=Xb();const Wb=Vf($b);var Zh,Zy;function Zb(){return Zy||(Zy=1,Zh=function(r,e,i){if(r==null||e==null)return r;var a=String(r),l=typeof e=="number"?e:parseInt(e,10);if(isNaN(l)||!isFinite(l))return a;var d=a.length;if(d>=l)return a;var f=i==null?"":String(i);f===""&&(f=" ");for(var y=l-d;f.length<y;)f+=f;var b=f.length>y?f.substr(0,y):f;return a+b}),Zh}var Jb=Zb();const Jh=Vf(Jb);var ji=9e15,sc=(function(){for(var r=[],e=-323;e<=308;e++)r.push(+("1e"+e));return function(i){return r[i+323]}})(),oe=function(r){return r instanceof $t?r:new $t(r)},Rn=function(r,e){return new $t().fromMantissaExponent(r,e)},Fs=function(r,e){return new $t().fromMantissaExponent_noNormalize(r,e)};function eE(r,e,i,a){var l=e.mul(i.pow(a));return $t.floor(r.div(l).mul(i.sub(1)).add(1).log10()/i.log10())}function tE(r,e,i,a){return e.mul(i.pow(a)).mul($t.sub(1,i.pow(r))).div($t.sub(1,i))}var $t=(function(){function r(e){this.mantissa=NaN,this.exponent=NaN,e===void 0?(this.m=0,this.e=0):e instanceof r?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):this.fromString(e)}return Object.defineProperty(r.prototype,"m",{get:function(){return this.mantissa},set:function(e){this.mantissa=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"e",{get:function(){return this.exponent},set:function(e){this.exponent=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"s",{get:function(){return this.sign()},set:function(e){if(e===0)return this.e=0,void(this.m=0);this.sgn()!==e&&(this.m=-this.m)},enumerable:!1,configurable:!0}),r.fromMantissaExponent=function(e,i){return new r().fromMantissaExponent(e,i)},r.fromMantissaExponent_noNormalize=function(e,i){return new r().fromMantissaExponent_noNormalize(e,i)},r.fromDecimal=function(e){return new r().fromDecimal(e)},r.fromNumber=function(e){return new r().fromNumber(e)},r.fromString=function(e){return new r().fromString(e)},r.fromValue=function(e){return new r().fromValue(e)},r.fromValue_noAlloc=function(e){return e instanceof r?e:new r(e)},r.abs=function(e){return oe(e).abs()},r.neg=function(e){return oe(e).neg()},r.negate=function(e){return oe(e).neg()},r.negated=function(e){return oe(e).neg()},r.sign=function(e){return oe(e).sign()},r.sgn=function(e){return oe(e).sign()},r.round=function(e){return oe(e).round()},r.floor=function(e){return oe(e).floor()},r.ceil=function(e){return oe(e).ceil()},r.trunc=function(e){return oe(e).trunc()},r.add=function(e,i){return oe(e).add(i)},r.plus=function(e,i){return oe(e).add(i)},r.sub=function(e,i){return oe(e).sub(i)},r.subtract=function(e,i){return oe(e).sub(i)},r.minus=function(e,i){return oe(e).sub(i)},r.mul=function(e,i){return oe(e).mul(i)},r.multiply=function(e,i){return oe(e).mul(i)},r.times=function(e,i){return oe(e).mul(i)},r.div=function(e,i){return oe(e).div(i)},r.divide=function(e,i){return oe(e).div(i)},r.recip=function(e){return oe(e).recip()},r.reciprocal=function(e){return oe(e).recip()},r.reciprocate=function(e){return oe(e).reciprocate()},r.cmp=function(e,i){return oe(e).cmp(i)},r.compare=function(e,i){return oe(e).cmp(i)},r.eq=function(e,i){return oe(e).eq(i)},r.equals=function(e,i){return oe(e).eq(i)},r.neq=function(e,i){return oe(e).neq(i)},r.notEquals=function(e,i){return oe(e).notEquals(i)},r.lt=function(e,i){return oe(e).lt(i)},r.lte=function(e,i){return oe(e).lte(i)},r.gt=function(e,i){return oe(e).gt(i)},r.gte=function(e,i){return oe(e).gte(i)},r.max=function(e,i){return oe(e).max(i)},r.min=function(e,i){return oe(e).min(i)},r.clamp=function(e,i,a){return oe(e).clamp(i,a)},r.clampMin=function(e,i){return oe(e).clampMin(i)},r.clampMax=function(e,i){return oe(e).clampMax(i)},r.cmp_tolerance=function(e,i,a){return oe(e).cmp_tolerance(i,a)},r.compare_tolerance=function(e,i,a){return oe(e).cmp_tolerance(i,a)},r.eq_tolerance=function(e,i,a){return oe(e).eq_tolerance(i,a)},r.equals_tolerance=function(e,i,a){return oe(e).eq_tolerance(i,a)},r.neq_tolerance=function(e,i,a){return oe(e).neq_tolerance(i,a)},r.notEquals_tolerance=function(e,i,a){return oe(e).notEquals_tolerance(i,a)},r.lt_tolerance=function(e,i,a){return oe(e).lt_tolerance(i,a)},r.lte_tolerance=function(e,i,a){return oe(e).lte_tolerance(i,a)},r.gt_tolerance=function(e,i,a){return oe(e).gt_tolerance(i,a)},r.gte_tolerance=function(e,i,a){return oe(e).gte_tolerance(i,a)},r.log10=function(e){return oe(e).log10()},r.absLog10=function(e){return oe(e).absLog10()},r.pLog10=function(e){return oe(e).pLog10()},r.log=function(e,i){return oe(e).log(i)},r.log2=function(e){return oe(e).log2()},r.ln=function(e){return oe(e).ln()},r.logarithm=function(e,i){return oe(e).logarithm(i)},r.pow10=function(e){return Number.isInteger(e)?Fs(1,e):Rn(Math.pow(10,e%1),Math.trunc(e))},r.pow=function(e,i){return typeof e=="number"&&e===10&&typeof i=="number"&&Number.isInteger(i)?Fs(1,i):oe(e).pow(i)},r.exp=function(e){return oe(e).exp()},r.sqr=function(e){return oe(e).sqr()},r.sqrt=function(e){return oe(e).sqrt()},r.cube=function(e){return oe(e).cube()},r.cbrt=function(e){return oe(e).cbrt()},r.dp=function(e){return oe(e).dp()},r.decimalPlaces=function(e){return oe(e).dp()},r.affordGeometricSeries=function(e,i,a,l){return eE(oe(e),oe(i),oe(a),l)},r.sumGeometricSeries=function(e,i,a,l){return tE(e,oe(i),oe(a),l)},r.affordArithmeticSeries=function(e,i,a,l){return(function(d,f,y,b){var v=f.add(b.mul(y)).sub(y.div(2)),x=v.pow(2);return v.neg().add(x.add(y.mul(d).mul(2)).sqrt()).div(y).floor()})(oe(e),oe(i),oe(a),oe(l))},r.sumArithmeticSeries=function(e,i,a,l){return(function(d,f,y,b){var v=f.add(b.mul(y));return d.div(2).mul(v.mul(2).plus(d.sub(1).mul(y)))})(oe(e),oe(i),oe(a),oe(l))},r.efficiencyOfPurchase=function(e,i,a){return(function(l,d,f){return l.div(d).add(l.div(f))})(oe(e),oe(i),oe(a))},r.randomDecimalForTesting=function(e){if(20*Math.random()<1)return Fs(0,0);var i=10*Math.random();10*Math.random()<1&&(i=Math.round(i)),i*=Math.sign(2*Math.random()-1);var a=Math.floor(Math.random()*e*2)-e;return Rn(i,a)},r.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var e=Math.floor(Math.log10(Math.abs(this.m)));return this.m=e===-324?10*this.m/1e-323:this.m/sc(e),this.e+=e,this},r.prototype.fromMantissaExponent=function(e,i){return isFinite(e)&&isFinite(i)?(this.m=e,this.e=i,this.normalize(),this):(e=Number.NaN,i=Number.NaN,this)},r.prototype.fromMantissaExponent_noNormalize=function(e,i){return this.m=e,this.e=i,this},r.prototype.fromDecimal=function(e){return this.m=e.m,this.e=e.e,this},r.prototype.fromNumber=function(e){return isNaN(e)?(this.m=Number.NaN,this.e=Number.NaN):e===Number.POSITIVE_INFINITY?(this.m=1,this.e=ji):e===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=ji):e===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(e))),this.m=this.e===-324?10*e/1e-323:e/sc(this.e),this.normalize()),this},r.prototype.fromString=function(e){if(e.indexOf("e")!==-1){var i=e.split("e");this.m=parseFloat(i[0]),this.e=parseFloat(i[1]),this.normalize()}else if(e==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(e)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+e);return this},r.prototype.fromValue=function(e){return e instanceof r?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.m=0,this.e=0,this)},r.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var e=this.m*sc(this.e);if(!isFinite(e)||this.e<0)return e;var i=Math.round(e);return Math.abs(i-e)<1e-10?i:e},r.prototype.mantissaWithDecimalPlaces=function(e){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var i=e+1,a=Math.ceil(Math.log10(Math.abs(this.m))),l=Math.round(this.m*Math.pow(10,i-a))*Math.pow(10,a-i);return parseFloat(l.toFixed(Math.max(i-a,0)))},r.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=ji?this.m>0?"Infinity":"-Infinity":this.e<=-ji||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},r.prototype.toExponential=function(e){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=ji)return this.m>0?"Infinity":"-Infinity";if(this.e<=-ji||this.m===0)return"0"+(e>0?Jh(".",e+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(e);isFinite(e)||(e=17);var i=e+1,a=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,i-a))*Math.pow(10,a-i)).toFixed(Math.max(i-a,0))+"e"+(this.e>=0?"+":"")+this.e},r.prototype.toFixed=function(e){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=ji?this.m>0?"Infinity":"-Infinity":this.e<=-ji||this.m===0?"0"+(e>0?Jh(".",e+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(e>0?Jh(".",e+1,"0"):""):this.toNumber().toFixed(e)},r.prototype.toPrecision=function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.e-1):this.toExponential(e-1)},r.prototype.valueOf=function(){return this.toString()},r.prototype.toJSON=function(){return this.toString()},r.prototype.toStringWithDecimalPlaces=function(e){return this.toExponential(e)},r.prototype.abs=function(){return Fs(Math.abs(this.m),this.e)},r.prototype.neg=function(){return Fs(-this.m,this.e)},r.prototype.negate=function(){return this.neg()},r.prototype.negated=function(){return this.neg()},r.prototype.sign=function(){return Math.sign(this.m)},r.prototype.sgn=function(){return this.sign()},r.prototype.round=function(){return this.e<-1?new r(0):this.e<17?new r(Math.round(this.toNumber())):this},r.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new r(0):new r(-1):this.e<17?new r(Math.floor(this.toNumber())):this},r.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new r(1):new r(0):this.e<17?new r(Math.ceil(this.toNumber())):this},r.prototype.trunc=function(){return this.e<0?new r(0):this.e<17?new r(Math.trunc(this.toNumber())):this},r.prototype.add=function(e){var i,a,l=oe(e);if(this.m===0)return l;if(l.m===0)return this;if(this.e>=l.e?(i=this,a=l):(i=l,a=this),i.e-a.e>17)return i;var d=Math.round(1e14*i.m+1e14*a.m*sc(a.e-i.e));return Rn(d,i.e-14)},r.prototype.plus=function(e){return this.add(e)},r.prototype.sub=function(e){return this.add(oe(e).neg())},r.prototype.subtract=function(e){return this.sub(e)},r.prototype.minus=function(e){return this.sub(e)},r.prototype.mul=function(e){if(typeof e=="number")return e<1e307&&e>-1e307?Rn(this.m*e,this.e):Rn(1e-307*this.m*e,this.e+307);var i=typeof e=="string"?new r(e):e;return Rn(this.m*i.m,this.e+i.e)},r.prototype.multiply=function(e){return this.mul(e)},r.prototype.times=function(e){return this.mul(e)},r.prototype.div=function(e){return this.mul(oe(e).recip())},r.prototype.divide=function(e){return this.div(e)},r.prototype.divideBy=function(e){return this.div(e)},r.prototype.dividedBy=function(e){return this.div(e)},r.prototype.recip=function(){return Rn(1/this.m,-this.e)},r.prototype.reciprocal=function(){return this.recip()},r.prototype.reciprocate=function(){return this.recip()},r.prototype.cmp=function(e){var i=oe(e);if(this.m===0){if(i.m===0)return 0;if(i.m<0)return 1;if(i.m>0)return-1}if(i.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return i.m<0||this.e>i.e?1:this.e<i.e?-1:this.m>i.m?1:this.m<i.m?-1:0;if(this.m<0)return i.m>0||this.e>i.e?-1:this.e<i.e||this.m>i.m?1:this.m<i.m?-1:0;throw Error("Unreachable code")},r.prototype.compare=function(e){return this.cmp(e)},r.prototype.eq=function(e){var i=oe(e);return this.e===i.e&&this.m===i.m},r.prototype.equals=function(e){return this.eq(e)},r.prototype.neq=function(e){return!this.eq(e)},r.prototype.notEquals=function(e){return this.neq(e)},r.prototype.lt=function(e){var i=oe(e);return this.m===0?i.m>0:i.m===0?this.m<=0:this.e===i.e?this.m<i.m:this.m>0?i.m>0&&this.e<i.e:i.m>0||this.e>i.e},r.prototype.lte=function(e){return!this.gt(e)},r.prototype.gt=function(e){var i=oe(e);return this.m===0?i.m<0:i.m===0?this.m>0:this.e===i.e?this.m>i.m:this.m>0?i.m<0||this.e>i.e:i.m<0&&this.e<i.e},r.prototype.gte=function(e){return!this.lt(e)},r.prototype.max=function(e){var i=oe(e);return this.lt(i)?i:this},r.prototype.min=function(e){var i=oe(e);return this.gt(i)?i:this},r.prototype.clamp=function(e,i){return this.max(e).min(i)},r.prototype.clampMin=function(e){return this.max(e)},r.prototype.clampMax=function(e){return this.min(e)},r.prototype.cmp_tolerance=function(e,i){var a=oe(e);return this.eq_tolerance(a,i)?0:this.cmp(a)},r.prototype.compare_tolerance=function(e,i){return this.cmp_tolerance(e,i)},r.prototype.eq_tolerance=function(e,i){var a=oe(e);return r.lte(this.sub(a).abs(),r.max(this.abs(),a.abs()).mul(i))},r.prototype.equals_tolerance=function(e,i){return this.eq_tolerance(e,i)},r.prototype.neq_tolerance=function(e,i){return!this.eq_tolerance(e,i)},r.prototype.notEquals_tolerance=function(e,i){return this.neq_tolerance(e,i)},r.prototype.lt_tolerance=function(e,i){var a=oe(e);return!this.eq_tolerance(a,i)&&this.lt(a)},r.prototype.lte_tolerance=function(e,i){var a=oe(e);return this.eq_tolerance(a,i)||this.lt(a)},r.prototype.gt_tolerance=function(e,i){var a=oe(e);return!this.eq_tolerance(a,i)&&this.gt(a)},r.prototype.gte_tolerance=function(e,i){var a=oe(e);return this.eq_tolerance(a,i)||this.gt(a)},r.prototype.log10=function(){return this.e+Math.log10(this.m)},r.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},r.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},r.prototype.log=function(e){return Math.LN10/Math.log(e)*this.log10()},r.prototype.log2=function(){return 3.321928094887362*this.log10()},r.prototype.ln=function(){return 2.302585092994045*this.log10()},r.prototype.logarithm=function(e){return this.log(e)},r.prototype.pow=function(e){var i,a=e instanceof r?e.toNumber():e,l=this.e*a;if(Number.isSafeInteger(l)&&(i=Math.pow(this.m,a),isFinite(i)&&i!==0))return Rn(i,l);var d=Math.trunc(l),f=l-d;if(i=Math.pow(10,a*Math.log10(this.m)+f),isFinite(i)&&i!==0)return Rn(i,d);var y=r.pow10(a*this.absLog10());return this.sign()===-1?Math.abs(a%2)===1?y.neg():Math.abs(a%2)===0?y:new r(Number.NaN):y},r.prototype.pow_base=function(e){return oe(e).pow(this)},r.prototype.factorial=function(){var e=this.toNumber()+1;return r.pow(e/Math.E*Math.sqrt(e*Math.sinh(1/e)+1/(810*Math.pow(e,6))),e).mul(Math.sqrt(2*Math.PI/e))},r.prototype.exp=function(){var e=this.toNumber();return-706<e&&e<709?r.fromNumber(Math.exp(e)):r.pow(Math.E,e)},r.prototype.sqr=function(){return Rn(Math.pow(this.m,2),2*this.e)},r.prototype.sqrt=function(){return this.m<0?new r(Number.NaN):this.e%2!=0?Rn(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):Rn(Math.sqrt(this.m),Math.floor(this.e/2))},r.prototype.cube=function(){return Rn(Math.pow(this.m,3),3*this.e)},r.prototype.cbrt=function(){var e=1,i=this.m;i<0&&(e=-1,i=-i);var a=e*Math.pow(i,1/3),l=this.e%3;return Rn(l===1||l===-1?2.154434690031883*a:l!==0?4.641588833612778*a:a,Math.floor(this.e/3))},r.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},r.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},r.prototype.tanh=function(){return this.sinh().div(this.cosh())},r.prototype.asinh=function(){return r.ln(this.add(this.sqr().add(1).sqrt()))},r.prototype.acosh=function(){return r.ln(this.add(this.sqr().sub(1).sqrt()))},r.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:r.ln(this.add(1).div(new r(1).sub(this)))/2},r.prototype.ascensionPenalty=function(e){return e===0?this:this.pow(Math.pow(10,-e))},r.prototype.egg=function(){return this.add(9)},r.prototype.lessThanOrEqualTo=function(e){return this.cmp(e)<1},r.prototype.lessThan=function(e){return this.cmp(e)<0},r.prototype.greaterThanOrEqualTo=function(e){return this.cmp(e)>-1},r.prototype.greaterThan=function(e){return this.cmp(e)>0},r.prototype.decimalPlaces=function(){return this.dp()},r.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var e=this.mantissa,i=-this.exponent,a=1;Math.abs(Math.round(e*a)/a-e)>1e-10;)a*=10,i++;return i>0?i:0},Object.defineProperty(r,"MAX_VALUE",{get:function(){return nE},enumerable:!1,configurable:!0}),Object.defineProperty(r,"MIN_VALUE",{get:function(){return iE},enumerable:!1,configurable:!0}),Object.defineProperty(r,"NUMBER_MAX_VALUE",{get:function(){return rE},enumerable:!1,configurable:!0}),Object.defineProperty(r,"NUMBER_MIN_VALUE",{get:function(){return sE},enumerable:!1,configurable:!0}),r})(),nE=Fs(1,ji),iE=Fs(1,-ji),rE=oe(Number.MAX_VALUE),sE=oe(Number.MIN_VALUE);const m=r=>r instanceof $t?r:new $t(r),ei=m(2e3),Jy=[{version:"2.7.0",date:"Current",changes:["EMPIRE UPDATE: Wonders & Trade","Added 'Empire' menu (Unlocks with Castle).","Great Wonders: Build 3 massive multi-stage monuments for permanent bonuses.","Trade Routes: Invest gold and send caravans to distant lands.","New mechanics for spending excess Gold, Soldiers, and Elite Units."]},{version:"2.6.0",date:"Previous",changes:["ELITE ARMY UPDATE: Quality over Quantity","Added 'Royal Academy': Convert basic soldiers into Elite Units.","New Units: Knights, Paladins, and Void Sentinels.","Updated Crusades: High-level missions now require Elite Units to start.","Fixed 'Train 1M' button visibility."]},{version:"2.5.0",date:"Previous",changes:["WAR UPDATE: The Grand Army","New Crusades: toDecimal(5) new campaigns for massive armies (up to 1 Billion soldiers).","Replayability: Crusades can now be replayed for Gold rewards (Critical Success).","New Artifacts: Cosmic-tier relics providing up to x10,000 production.","Added 'Reality Defense' campaign for the ultimate challenge."]},{version:"2.4.0",date:"Previous",changes:["THE TRANSCENDENCE UPDATE","5 New God-Tier Buildings: Reaching up to 1e240 cost.","Renown Shop Expansion: Upgrades for the ultra-rich (up to 1e200 Renown).","New Advisor: The Time Keeper.","Achievement Extension: Gold and Renown tiers expanded significantly.","Endgame Balancing: New synergies for massive empires."]},{version:"2.3.0",date:"Previous",changes:["COSMIC EXPANSION: The Reality Engine","New Endgame Buildings: Chronosphere & Reality Engine.","Synergy Upgrades: Bonuses based on Achievements, Army, and Clicks.","New Renown Upgrades: Spend your prestige points on massive multipliers.","Progressive Unlocks: Buildings now appear only when you are ready.","Extended Achievement tiers for the ultimate tycoons."]},{version:"2.2.0",date:"Previous",changes:["ENDGAME EXPANSION: The Astral Age","New Building: Astral Rift. Harness the power of the void.","Renown Shop: Added powerful upgrades purchasable with Renown.","Quality of Life: 'Buy Amount' multiplier is now saved between sessions."]},{version:"2.1.0",date:"Previous",changes:["Advanced Design Studio: Customize every color!","Layout Control: Adjust the width of the 3 main columns.","Border Customization: Change border thickness and color.","Created the ultimate personalized experience."]},{version:"2.0.0",date:"Previous",changes:["Major Update: Full Interface Customization!","Added Interface settings for Font Size and Layout Density.","Added toggles for Animations, Floating Text, and Weather Widget.","Refined Settings menu organization."]},{version:"1.9.9",date:"Previous",changes:["Interface Update: Moved Statistics to a separate window.","Settings Update: Added ability to toggle 'Cinematic Idle Mode' on/off.","Settings Layout: Reorganized visual preferences."]},{version:"1.9.8",date:"Previous",changes:["Added Number Formatting Options.","Choose between 'Standard' (1k, 1M), 'Scientific' (1e6), or 'Plain' (1,000,000) notation.","Gold Per Second now displays with proper comma separators."]},{version:"1.9.7",date:"Previous",changes:["Added 'Cinematic Idle Mode'!","If you are inactive for 20 seconds, the UI clears away.","Enjoy procedural landscapes based on your kingdom's progress.","Weather effects are now fully visualized in Idle Mode.","Move your mouse to return to ruling."]},{version:"1.9.6",date:"Previous",changes:["Bug Fix: Click visual effect now shows correct gold amount.","The floating text now accounts for upgrades, renown, and decrees."]},{version:"1.9.5",date:"Previous",changes:["UI Update: Added dedicated 'Upgrades' tab.","Content: Added 6 new Upgrades to fill progression gaps.","Balance: Removed 'Divine Tithe' decree.","Upgrades are now sorted by cost."]},{version:"1.9.4",date:"Previous",changes:["Content Update: Added 2 new Click Upgrades.","Added 'Golden Gauntlet' (75k) and 'Hand of Midas' (3.5m).","Sorted all upgrades by price for better progression."]},{version:"1.9.3",date:"Previous",changes:["Army Update: Added bulk recruitment options.","You can now train 100 or 1,000 soldiers at once.","Improved war logistics for late-game empires."]},{version:"1.9.2",date:"Previous",changes:["UI Update: Detailed production stats.","Buildings now display both 'Per Unit' and 'Total' production.","Stats update in real-time with weather and buffs."]},{version:"1.9.1",date:"Previous",changes:["UI Update: Building stats now show REAL production per second.","Production display now accounts for Weather, Upgrades, Renown, and Artifacts.","Fixed descriptions to be more accurate."]},{version:"1.9.0",date:"Previous",changes:["Added Theme Support!","Choose between 'Royal Parchment', 'Dark Ages', and 'Midnight Realm' in Settings.","Improved visual comfort for different lighting conditions."]},{version:"1.8.1",date:"Previous",changes:["Balance Update: Decrees are no longer available immediately.","Added Unlock Conditions for all Decrees to prevent early-game exploits.","Added 'Emergency Draft' Decree (Unlock: toDecimal(100) Peasants).","Added 'Divine Tithe' Decree (Unlock: toDecimal(3) Cathedrals).","Royal Tax Audit now requires the Treasurer Advisor."]},{version:"1.8.0",date:"Previous",changes:["Added Bulk Buy Options: toDecimal(1)x, 10x, 100x, Max.","Expanded Conquest System: Crusades now have risk!","Risk Mechanics: Failure (Retreat), Success, and Critical Success.","Advisors Update: Warmaster now reduces Crusade risk."]},{version:"1.7.0",date:"Previous",changes:["Massive Achievement Update: Added 30 new achievements!","New Milestones: Early game, Prestige, Total Buildings, and Upgrades.","Can you reach 'Immortal Lineage' or build a 'Megalopolis'?"]},{version:"1.6.1",date:"Previous",changes:["Added 10 new hidden achievements.","Can you discover the requirements to unlock them?"]},{version:"1.6.0",date:"Previous",changes:["Added Dynamic Weather System!","Weather changes periodically, affecting production.","Sunny: Boosts Fields/Peasants.","Rainy: Boosts Mines/Alchemists.","Stormy: Major boost to Blacksmiths, penalty to Fields.","Windy: Speeds up Crusades and boosts Markets."]},{version:"1.5.0",date:"Previous",changes:["Added 'Royal Council' system.","Spend Renown to hire permanent Advisors.","4 Unique Advisors: Treasurer, Warmaster, Guildmaster, Alchemist.","Strategic choices for long-term kingdom planning."]},{version:"1.4.3",date:"Previous",changes:["Added 'Royal Tax Audit' decree.","Instantly collect 800s of production (10m cooldown)."]},{version:"1.4.2",date:"Previous",changes:["Added 10 new secret achievements.","Can you unlock them all?"]},{version:"1.4.1",date:"Previous",changes:["Removed sunburst/glow effect around the main button.","Cleaned up UI visual noise."]},{version:"1.4.0",date:"Previous",changes:["New Layout: Screen divided into 3 equal columns.","Left Column: Buildings & Decrees.","Middle Column: The Throne (Clicker & Stats).","Right Column: Army & Achievements.","Improved UI Organization."]},{version:"1.3.2",date:"Previous",changes:["Improved Auto-Save: Game now saves every 30 seconds.","Added Smart Save: Game immediately saves when tab is closed or refreshed.","Fixed issue where progress could be lost on quick exits."]},{version:"1.3.1",date:"Previous",changes:["Fixed Decree timer display: Now shows Active duration first, then Cooldown.","UI improvements for better timer readability."]},{version:"1.3.0",date:"Previous",changes:["Added 'Stables' building (35k cost)","Added 'Silver Mine' building (280k cost)","Made Prestige/Legacy button visible earlier (50k Gold)","Added explanation to Prestige menu"]},{version:"1.2.0",date:"Previous",changes:["Added Statistics tracking (Clicks, Dragon Kills, etc.)","Added 5 New Achievements","Added 'Updates' menu in Settings","Improved Save System stability"]},{version:"1.1.1",date:"Old",changes:["Added Grand Palace building","Added 'The Last Crusade' campaign","Added Notification System (Toasts)","Removed intrusive alerts"]},{version:"1.1.0",date:"Old",changes:["Added Market and Alchemist Guild buildings","Added Tavern Dice Game","Added Settings Menu","Added Hard Reset option"]},{version:"1.0.0",date:"Release",changes:["Initial Release","Basic Buildings & Upgrades","Prestige System","Day/Night Cycle"]}],ve=(r,e="standard")=>{let i;try{typeof r=="number"?i=m(r):typeof r=="string"?i=new $t(r):r&&typeof r=="object"&&typeof r.eq=="function"?i=r:i=m(0)}catch(f){return console.error("Error converting to Decimal in formatNumber:",f,"Input:",r),"0"}if(i.eq(m(0)))return"0";if(e==="scientific")return i.abs().lt(m(1e3))?i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1}):i.toExponential(2);if(e==="plain")return i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1});if(i.abs().lt(1e3))return i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1});const a=["","k","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc","Ud","Dd","Td","Qd","Qn","Sx","St","Oa","Nn","Vg"],l=Math.floor(i.log10()/3);return l===0?i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1}):l>=a.length?i.toExponential(2):i.dividedBy(m(10).pow(l*3)).toFixed(2)+a[l]},df={default:{id:"default",name:"Royal Parchment",colors:{"--bg-color":"#e8dcc5","--panel-bg":"#fdf6e3","--text-color":"#3e2723","--text-secondary":"#5d4037","--text-on-accent":"#ffffff","--accent-color":"#8d6e63","--accent-hover":"#6d4c41","--gold-color":"#bf9000","--border-color":"#a1887f","--success-color":"#2e7d32","--danger-color":"#c62828","--shadow":"4px 4px 0px rgba(62, 39, 35, 0.2)","--bg-image":`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d7c9a8' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/svg%3E")`}},dark:{id:"dark",name:"Dark Ages",colors:{"--bg-color":"#262626","--panel-bg":"#333333","--text-color":"#e0e0e0","--text-secondary":"#bdbdbd","--text-on-accent":"#ffffff","--accent-color":"#8d6e63","--accent-hover":"#795548","--gold-color":"#ffd700","--border-color":"#555555","--success-color":"#66bb6a","--danger-color":"#ef5350","--shadow":"4px 4px 0px rgba(0, 0, 0, 0.5)","--bg-image":"none"}},midnight:{id:"midnight",name:"Midnight Realm",colors:{"--bg-color":"#0d1b2a","--panel-bg":"#1b263b","--text-color":"#e0e1dd","--text-secondary":"#778da9","--text-on-accent":"#ffffff","--accent-color":"#415a77","--accent-hover":"#778da9","--gold-color":"#ffcc00","--border-color":"#415a77","--success-color":"#00e676","--danger-color":"#ff1744","--shadow":"4px 4px 0px rgba(0, 0, 0, 0.5)","--bg-image":"none"}}},gv={clear:{id:"clear",name:"Clear Skies",icon:"",description:"A calm day. No special effects.",color:"rgba(255, 243, 224, 0.5)"},sunny:{id:"sunny",name:"Bountiful Sun",icon:"",description:"+20% Production for Peasants and Wheat Fields.",color:"rgba(255, 236, 179, 0.5)"},rainy:{id:"rainy",name:"Heavy Rain",icon:"",description:"+20% Production for Silver Mines and Alchemists.",color:"rgba(227, 242, 253, 0.5)"},stormy:{id:"stormy",name:"Thunderstorm",icon:"",description:"+30% Blacksmith production (Energy), but -20% Wheat Fields.",color:"rgba(207, 216, 220, 0.5)"},windy:{id:"windy",name:"High Winds",icon:"",description:"Crusades are 20% faster. Markets produce +15% more.",color:"rgba(224, 242, 241, 0.5)"}},_c=[{id:"knight",name:"Royal Knight",description:"Heavily armored elite infantry.",icon:"",goldCost:m(25e3),soldierCost:m(100)},{id:"paladin",name:"Divine Paladin",description:"Blessed warriors who fear no darkness.",icon:"",goldCost:m(15e4),soldierCost:m(500)},{id:"void_sentinel",name:"Void Sentinel",description:"Infused with cosmic energy to fight reality itself.",icon:"",goldCost:m(5e6),soldierCost:m(2e3)}];m(10),m(1),m(5),m(25),m(2),m(5),m(50),m(3),m(5),m(100),m(5),m(5),m(250),m(10),m(5),m(500),m(20),m(5);const Ys=[{id:"peasant",name:"Peasant",baseCost:m(15),baseProduction:m(.1),description:"A loyal subject to work the fields.",icon:""},{id:"field",name:"Wheat Field",baseCost:m(60),baseProduction:m(.8),description:"Golden wheat to feed the kingdom.",icon:""},{id:"blacksmith",name:"Blacksmith",baseCost:m(250),baseProduction:m(5),description:"Forging tools and weapons.",icon:""},{id:"market",name:"Market",baseCost:m(1200),baseProduction:m(18),description:"Trade hub for exotic goods.",icon:""},{id:"tavern",name:"Tavern",baseCost:m(5e3),baseProduction:m(45),description:"Where gold flows as freely as ale.",icon:""},{id:"stable",name:"Stables",baseCost:m(18e3),baseProduction:m(120),description:"Horses for trade and war.",icon:""},{id:"castle",name:"Castle",baseCost:m(6e4),baseProduction:m(280),description:"The seat of your power.",icon:""},{id:"silver_mine",name:"Silver Mine",baseCost:m(2e5),baseProduction:m(650),description:"Deep shafts rich with precious metal.",icon:""},{id:"alchemist",name:"Alchemist Guild",baseCost:m(6e5),baseProduction:m(1200),description:"Transmuting lead into gold.",icon:""},{id:"cathedral",name:"Cathedral",baseCost:m(2e6),baseProduction:m(2800),description:"Divine blessings bring great fortune.",icon:""},{id:"palace",name:"Grand Palace",baseCost:m(8e6),baseProduction:m(15e3),description:"A wonder of the world to cement your legacy.",icon:""},{id:"void_portal",name:"Void Portal",baseCost:m(5e7),baseProduction:m(5e4),description:"Gateway to endless void energy.",icon:""},{id:"time_chamber",name:"Time Chamber",baseCost:m(2e8),baseProduction:m(2e5),description:"Manipulate time flow for infinite wealth.",icon:""},{id:"dimension_gate",name:"Dimension Gate",baseCost:m(8e8),baseProduction:m(8e5),description:"Open portals to parallel dimensions.",icon:""},{id:"astral_rift",name:"Astral Rift",baseCost:m(1e18),baseProduction:m(5e9),description:"Tear open reality to harvest void energy.",icon:""},{id:"chronosphere",name:"Chronosphere",baseCost:m(1e21),baseProduction:m(5e14),description:"Manipulate time to generate endless wealth.",icon:""},{id:"reality_engine",name:"Reality Engine",baseCost:m(1e24),baseProduction:m(1e17),description:"Rewrite the physical laws of the universe.",icon:""},{id:"quantum_computer",name:"Quantum Supercomputer",baseCost:m(1e45),baseProduction:m(1e40),description:"Simulate infinite universes for profit.",icon:""},{id:"multiverse_nexus",name:"Multiverse Nexus",baseCost:m(1e48),baseProduction:m(1e43),description:"Trade with parallel realities.",icon:""},{id:"dyson_sphere",name:"Dyson Sphere",baseCost:m(1e51),baseProduction:m(1e46),description:"Harness entire energy of a star.",icon:""},{id:"matter_replicator",name:"Matter Replicator",baseCost:m(1e54),baseProduction:m(1e49),description:"Convert energy directly into gold.",icon:""},{id:"architect_quill",name:"The Architect's Quill",baseCost:m(1e57),baseProduction:m(1e52),description:"Rewrite code of existence itself.",icon:""}],ki=[{id:"rusty_pitchfork",name:"Rusty Pitchforks",description:"Peasants work 2x harder.",cost:m(500),triggerId:"peasant",triggerCount:m(1),type:"building",targetId:"peasant",multiplier:m(2)},{id:"royal_scepter",name:"Royal Scepter",description:"Clicking is 2x more effective.",cost:m(1e3),type:"click",multiplier:m(2)},{id:"iron_plough",name:"Iron Plough",description:"Fields produce +50% more.",cost:m(2500),triggerId:"field",triggerCount:m(10),type:"building",targetId:"field",multiplier:m(1.5)},{id:"heavy_anvil",name:"Heavy Anvil",description:"Blacksmiths produce 2x gold.",cost:m(11e3),triggerId:"blacksmith",triggerCount:m(10),type:"building",targetId:"blacksmith",multiplier:m(2)},{id:"steel_plough",name:"Steel Plough",description:"Fields produce 2x gold.",cost:m(15e3),triggerId:"field",triggerCount:m(25),type:"building",targetId:"field",multiplier:m(2)},{id:"merchant_guild",name:"Merchant Guild",description:"Markets generate +50% profit.",cost:m(25e3),triggerId:"market",triggerCount:m(15),type:"building",targetId:"market",multiplier:m(1.5)},{id:"ale_yeast",name:"Imported Yeast",description:"Taverns produce +50% more.",cost:m(45e3),triggerId:"tavern",triggerCount:m(5),type:"building",targetId:"tavern",multiplier:m(1.5)},{id:"golden_gauntlet",name:"Golden Gauntlet",description:"Clicking is 2x more effective.",cost:m(75e3),type:"click",multiplier:m(2)},{id:"thoroughbreds",name:"Thoroughbreds",description:"Stables produce 2x gold.",cost:m(85e3),triggerId:"stable",triggerCount:m(10),type:"building",targetId:"stable",multiplier:m(2)},{id:"tax_collector",name:"Tax Collector",description:"Global production +20%.",cost:m(1e5),type:"global",multiplier:m(1.2)},{id:"guild_charters",name:"Guild Charters",description:"Markets produce 2x gold.",cost:m(12e4),triggerId:"market",triggerCount:m(25),type:"building",targetId:"market",multiplier:m(2)},{id:"standing_army",name:"Standing Army",description:"Global production +10% (Security).",cost:m(15e4),type:"global",multiplier:m(1.1)},{id:"war_horses",name:"War Horses",description:"Stables produce +50% more.",cost:m(18e4),triggerId:"stable",triggerCount:m(20),type:"building",targetId:"stable",multiplier:m(1.5)},{id:"mining_safety",name:"Mining Safety",description:"Silver Mines produce 2x gold.",cost:m(45e4),triggerId:"silver_mine",triggerCount:m(5),type:"building",targetId:"silver_mine",multiplier:m(2)},{id:"deep_shafts",name:"Deep Shafts",description:"Silver Mines produce +50% more.",cost:m(6e5),triggerId:"silver_mine",triggerCount:m(10),type:"building",targetId:"silver_mine",multiplier:m(1.5)},{id:"royal_banner",name:"Royal Banner",description:"Global production +15%.",cost:m(12e5),type:"global",multiplier:m(1.15)},{id:"elixir_life",name:"Elixir of Wealth",description:"Alchemists triple their output.",cost:m(2e6),triggerId:"alchemist",triggerCount:m(5),type:"building",targetId:"alchemist",multiplier:m(3)},{id:"stained_glass",name:"Stained Glass",description:"Cathedrals inspire 2x donations.",cost:m(3e6),triggerId:"cathedral",triggerCount:m(5),type:"building",targetId:"cathedral",multiplier:m(2)},{id:"hand_of_midas",name:"Hand of Midas",description:"Clicking is 3x more effective.",cost:m(35e5),type:"click",multiplier:m(3)},{id:"diamond_click",name:"Diamond Touch",description:"Clicking is 5x more effective.",cost:m(1e7),type:"click",multiplier:m(5)},{id:"royal_treasury",name:"Royal Treasury",description:"Grand Palaces produce 2x gold.",cost:m(5e7),triggerId:"palace",triggerCount:m(1),type:"building",targetId:"palace",multiplier:m(2)},{id:"obsidian_walls",name:"Obsidian Walls",description:"Castles produce 3x gold.",cost:m(2e6),triggerId:"castle",triggerCount:m(200),type:"building",targetId:"castle",multiplier:m(3)},{id:"philosopher_stone",name:"Philosopher's Stone",description:"Alchemists produce 5x gold.",cost:m(8e6),triggerId:"alchemist",triggerCount:m(200),type:"building",targetId:"alchemist",multiplier:m(5)},{id:"divine_intervention",name:"Divine Intervention",description:"Cathedrals produce 5x gold.",cost:m(5e7),triggerId:"cathedral",triggerCount:m(250),type:"building",targetId:"cathedral",multiplier:m(5)},{id:"empire_bureaucracy",name:"Imperial Bureaucracy",description:"Global Production x1.5.",cost:m(3e8),triggerId:"peasant",triggerCount:m(1500),type:"global",multiplier:m(1.5)},{id:"void_harvesting",name:"Void Harvesting",description:"Astral Rifts produce x5 energy.",cost:m(2e16),triggerId:"astral_rift",triggerCount:m(10),type:"building",targetId:"astral_rift",multiplier:m(5)},{id:"temporal_batteries",name:"Temporal Batteries",description:"Chronospheres produce x2 Gold.",cost:m(1e23),triggerId:"chronosphere",triggerCount:m(5),type:"building",targetId:"chronosphere",multiplier:m(2)},{id:"reality_weave",name:"Reality Weave",description:"Reality Engines produce x2 Gold.",cost:m(1e26),triggerId:"reality_engine",triggerCount:m(5),type:"building",targetId:"reality_engine",multiplier:m(2)},{id:"army_synergy",name:"Conqueror's Tithe",description:"Global Production +1% for every 1000 Soldiers.",cost:m(1e15),triggerId:"castle",triggerCount:m(100),type:"global",multiplier:m(1)},{id:"achievement_synergy",name:"Hall of Fame",description:"Global Production +5% per Achievement unlocked.",cost:m(1e18),triggerId:"peasant",triggerCount:m(2e3),type:"global",multiplier:m(1)},{id:"click_synergy",name:"Finger of God",description:"Global Production +0.01% per Manual Click (Lifetime).",cost:m(1e20),triggerId:"peasant",triggerCount:m(2500),type:"global",multiplier:m(1)},{id:"legacy_of_kings",name:"Legacy of Kings",description:"Global Production x5 (Permanent)",cost:m(5e3),currency:"renown",type:"global",multiplier:m(5)},{id:"divine_right",name:"Divine Right",description:"Global Production x10 (Permanent)",cost:m(5e4),currency:"renown",type:"global",multiplier:m(10)},{id:"time_dilation",name:"Time Dilation",description:"Global Production x50 (Permanent)",cost:m(5e5),currency:"renown",type:"global",multiplier:m(50)},{id:"omniscience",name:"Omniscience",description:"Global Production x200 (Permanent)",cost:m(5e6),currency:"renown",type:"global",multiplier:m(200)},{id:"reality_bending",name:"Reality Bending",description:"Global Production x1000 (Permanent)",cost:m(5e7),currency:"renown",type:"global",multiplier:m(1e3)},{id:"ascended_knowledge",name:"Ascended Knowledge",description:"Global Production x10,000 (Permanent)",cost:m(5e8),currency:"renown",type:"global",multiplier:m(1e4)},{id:"universal_truth",name:"Universal Truth",description:"Global Production x1,000,000 (Permanent)",cost:m(1e50),currency:"renown",type:"global",multiplier:m(1e6)},{id:"god_mode",name:"Divinity",description:"Global Production x1e9 (Permanent)",cost:m(1e100),currency:"renown",type:"global",multiplier:m(1e9)},{id:"developer_access",name:"Creative Mode",description:"Global Production x1e12 (Permanent)",cost:m(1e150),currency:"renown",type:"global",multiplier:m(1e12)},{id:"the_end",name:"The End",description:"Global Production x1e20 (Permanent)",cost:m(1e200),currency:"renown",type:"global",multiplier:m(1e20)}],aE=(r,e)=>{const i=m(1.15);return r.times(i.pow(e)).floor()},Ya=(r,e,i)=>{const a=m(1.15),l=r.times(a.pow(e)),d=a.pow(i).minus(m(1)),f=a.minus(m(1));return l.times(d).dividedBy(f).floor()},e0=(r,e,i)=>{const a=m(1.15),l=r.times(a.pow(e));if(i.lt(l))return m(0);let d=m(0),f=m(1);for(;Ya(r,e,f).lte(i)&&(f=f.times(m(2)),!f.gt(m(1e9))););for(;f.minus(d).gt(m(1));){const y=d.plus(f).dividedBy(m(2)).floor();Ya(r,e,y).lte(i)?d=y:f=y}return d},cs=(r,e,i,a,l,d)=>e.map(f=>({id:`${r}_${f}`,name:i(f),description:a(f),icon:l,condition:y=>d(y,f)})),oE=[1,10,25,50,100,150,200,300,400,500,750,1e3,1500,2e3,3e3,4e3,5e3],lE=Ys.flatMap(r=>cs(`build_${r.id}`,oE,e=>`${r.name} Owner ${e}`,e=>`Own ${e} ${r.name}s.`,r.icon,(e,i)=>(e.buildings[r.id]||m(0)).gte(m(i)))),uE=[10,50,100,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,25e5,5e6],cE=cs("clicks",uE,r=>`Finger Workout ${ve(r)}`,r=>`Click manually ${ve(r)} times.`,"",(r,e)=>r.stats.totalClicks.gte(m(e))),dE=()=>{const r=[];let e=m(1e3);for(let i=0;i<100;i++)r.push(e.toNumber()),e=e.times(i%2===0?m(5):m(2));return r},hE=cs("gold",dE(),r=>`Hoarder ${ve(r)}`,r=>`Amass a lifetime total of ${ve(r)} gold.`,"",(r,e)=>r.totalGold.gte(m(e))),fE=[10,25,50,100,200,300,400,500,750,1e3,1500,2e3,3e3,4e3,5e3,7500,1e4],mE=cs("total_builds",fE,r=>`Architect ${r}`,r=>`Own ${r} total buildings.`,"",(r,e)=>Object.values(r.buildings).reduce((i,a)=>i.plus(a),m(0)).gte(m(e))),gE=[10,50,100,500,1e3,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,25e5,5e6],pE=cs("soldiers",gE,r=>`Commander ${ve(r)}`,r=>`Train a standing army of ${ve(r)}.`,"",(r,e)=>r.soldiers.gte(m(e))),yE=[1,5,10,25,50,100,250,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,5e5,1e6,1e7,1e8,1e10,1e20,1e50,1e100,1e150,1e200,1e250],vE=cs("renown",yE,r=>`Legend ${ve(r)}`,r=>`Reach ${ve(r)} Renown (Prestige).`,"",(r,e)=>r.renown.gte(m(e))),_E=[1,5,10,20,50,100,200,300,400,500],bE=cs("dragons",_E,r=>`Slayer ${r}`,r=>`Defeat ${r} Dragons.`,"",(r,e)=>r.stats.dragonsKilled.gte(m(e))),EE=[1,10,25,50,100,250,500,1e3,2500,5e3],TE=cs("gambler",EE,r=>`High Roller ${r}`,r=>`Play ${r} games in the Tavern.`,"",(r,e)=>r.stats.tavernGamesPlayed.gte(m(e))),xE=[{id:"all_artifacts",name:"Museum Curator",description:"Collect all unique Artifacts.",icon:"",condition:r=>r.artifacts.length>=Za.length},{id:"first_artifact",name:"Artifact Collector",description:"Collect your first Artifact.",icon:"",condition:r=>r.artifacts.length>=1},{id:"half_artifacts",name:"Artifact Hunter",description:"Collect half of all Artifacts.",icon:"",condition:r=>r.artifacts.length>=Math.floor(Za.length/2)}],AE=[{id:"first_advisor",name:"Royal Advisor",description:"Hire your first Advisor.",icon:"",condition:r=>r.advisors.length>=1},{id:"all_advisors",name:"Royal Council",description:"Hire all basic Advisors.",icon:"",condition:r=>r.advisors.length>=8},{id:"advisor_upgrade",name:"Advisor Master",description:"Upgrade any Advisor to level 5.",icon:"",condition:r=>Object.values(r.advisorLevels||{}).some(e=>e.gte(m(5)))}],SE=[{id:"first_wonder",name:"Wonder Builder",description:"Complete first stage of any Wonder.",icon:"",condition:r=>Object.keys(r.wonders||{}).length>=1},{id:"complete_wonder",name:"Wonder Master",description:"Complete any Wonder.",icon:"",condition:r=>Object.keys(r.wonders||{}).length>=1&&Object.values(r.wonders||{}).some(e=>e>=3)},{id:"all_wonders",name:"Architect of Eternity",description:"Complete all Wonders.",icon:"",condition:r=>Object.keys(r.wonders||{}).length>=3&&Object.values(r.wonders||{}).every(e=>e>=3)}],wE=[{id:"first_trade",name:"Merchant",description:"Complete your first trade route.",icon:"",condition:r=>r.gold.gte(m(1e6))},{id:"trade_master",name:"Trade Master",description:"Complete 50 successful trades.",icon:"",condition:r=>r.gold.gte(m(1e8))}],CE=[{id:"speed_1m",name:"Quick Start",description:"Earn 1M gold.",icon:"",condition:r=>r.totalGold.gte(m(1e6))},{id:"speed_1b",name:"Golden Touch",description:"Earn 1B gold.",icon:"",condition:r=>r.totalGold.gte(m(1e9))},{id:"prestige_master",name:"Prestige Master",description:"Prestige 10 times.",icon:"",condition:r=>r.renown.gte(m(1e4))}],RE=[{id:"click_master",name:"Click Master",description:"Make 1000 manual clicks.",icon:"",condition:r=>{var e,i;return(i=(e=r.stats)==null?void 0:e.totalClicks)==null?void 0:i.gte(m(1e3))}},{id:"idle_master",name:"True Idle Master",description:"Play for 24 hours without clicking.",icon:"",condition:r=>{var e,i;return((i=(e=r.stats)==null?void 0:e.totalClicks)==null?void 0:i.lt(m(50)))&&r.totalGold.gte(m(1e9))}}],DE=[{id:"building_soldier_combo",name:"War Economy",description:"Have 500 buildings and 100,000 soldiers.",icon:"",condition:r=>Object.values(r.buildings).reduce((i,a)=>i.plus(a),m(0)).gte(m(500))&&r.soldiers.gte(m(1e5))},{id:"advisor_artifact_combo",name:"Royal Collector",description:"Have all advisors and all artifacts.",icon:"",condition:r=>r.advisors.length>=8&&r.artifacts.length>=Za.length}],bc=[...lE,...cE,...hE,...mE,...pE,...vE,...bE,...TE,...xE,...AE,...SE,...wE,...CE,...RE,...DE],pv=[{id:"royal_feast",name:"Royal Feast",description:"Production x2 for 30s.",duration:m(30),cooldown:m(300),icon:"",effectType:"production_mult",value:m(2),unlockCondition:r=>(r.buildings.tavern||m(0)).gte(m(1)),unlockDescription:"Build a Tavern"},{id:"call_to_arms",name:"Call to Arms",description:"Click Power x5 for 20s.",duration:m(20),cooldown:m(180),icon:"",effectType:"click_mult",value:m(5),unlockCondition:r=>(r.buildings.blacksmith||m(0)).gte(m(1)),unlockDescription:"Build a Blacksmith"},{id:"royal_tax_audit",name:"Royal Tax Audit",description:"Instantly collect 600s of production.",duration:m(0),cooldown:m(600),icon:"",effectType:"instant_gold",value:m(600),unlockCondition:r=>r.advisors.includes("treasurer"),unlockDescription:"Hire Treasurer Advisor"},{id:"emergency_draft",name:"Emergency Draft",description:"Recruit 50 Soldiers instantly.",duration:m(0),cooldown:m(300),icon:"",effectType:"add_soldiers",value:m(50),unlockCondition:r=>(r.buildings.peasant||m(0)).gte(m(100)),unlockDescription:"Own 100 Peasants"}],Za=[{id:"ancient_crown",name:"Ancient Crown",description:"Global Production +50%.",icon:"",globalMultiplier:m(1.5)},{id:"blessed_chalice",name:"Blessed Chalice",description:"Global Production +25%.",icon:"",globalMultiplier:m(1.25)},{id:"dragon_scale",name:"Dragon Scale Shield",description:"Global Production +35%.",icon:"",globalMultiplier:m(1.35)},{id:"lunar_stone",name:"Lunar Stone",description:"Global Production x5.",icon:"",globalMultiplier:m(5)},{id:"solar_flare",name:"Solar Core",description:"Global Production x25.",icon:"",globalMultiplier:m(25)},{id:"void_essence",name:"Void Essence",description:"Global Production x100.",icon:"",globalMultiplier:m(100)},{id:"galactic_map",name:"Galactic Map",description:"Global Production x500.",icon:"",globalMultiplier:m(500)},{id:"reality_shard",name:"Reality Shard",description:"Global Production x10,000.",icon:"",globalMultiplier:m(1e4)}],Ec=[{id:"goblin_lands",name:"Goblin Lands",description:"Raid goblin camps for treasure.",duration:m(60),soldierCost:m(200),rewardArtifactId:"ancient_crown",icon:"",baseRisk:m(.25)},{id:"orc_fortress",name:"Orc Fortress",description:"Assault the orc stronghold.",duration:m(300),soldierCost:m(1e3),rewardArtifactId:"blessed_chalice",icon:"",baseRisk:m(.35)},{id:"dragon_lair",name:"Dragon's Lair",description:"Slay the dragon for riches.",duration:m(1800),soldierCost:m(5e3),rewardArtifactId:"dragon_scale",icon:"",baseRisk:m(.45)},{id:"demon_portal",name:"Demon Portal",description:"Close the demonic invasion.",duration:m(7200),soldierCost:m(25e3),rewardArtifactId:"lunar_stone",icon:"",baseRisk:m(.55)},{id:"void_invasion",name:"Void Invasion",description:"Defend reality from void creatures.",duration:m(14400),soldierCost:m(1e5),rewardArtifactId:"solar_flare",icon:"",baseRisk:m(.65)},{id:"dimensional_war",name:"Dimensional War",description:"Fight enemies from parallel universes.",duration:m(43200),soldierCost:m(1e8),requiredUnits:{paladin:m(1e3),void_sentinel:m(20)},rewardArtifactId:"galactic_map",icon:"",baseRisk:m(.75)},{id:"reality_defense",name:"Reality Defense",description:"Protect fabric of existence itself.",duration:m(86400),soldierCost:m(2e9),requiredUnits:{void_sentinel:m(200)},rewardArtifactId:"reality_shard",icon:"",baseRisk:m(.85)}],yv=[{id:"treasurer",name:"Royal Treasurer",description:"Auto-clicks once every 5 seconds. Can be upgraded.",cost:m(12),icon:""},{id:"warmaster",name:"Warmaster",description:"Crusades are 25% faster and 30% safer. Can be upgraded.",cost:m(50),icon:""},{id:"guildmaster",name:"Guildmaster",description:"Buildings are 10% cheaper. Can be upgraded.",cost:m(125),icon:""},{id:"alchemist",name:"Court Alchemist",description:"Doubles chance of Random Events. Can be upgraded.",cost:m(250),icon:""},{id:"chronomancer",name:"Chronomancer",description:"Reduces decree cooldowns by 25%. Can be upgraded.",cost:m(2500),icon:""},{id:"void_scholar",name:"Void Scholar",description:"Increases Renown gain by 20%. Can be upgraded.",cost:m(25e3),icon:""},{id:"cosmic_mage",name:"Cosmic Mage",description:"All production bonuses increased by 15%. Can be upgraded.",cost:m(25e4),icon:""},{id:"time_keeper",name:"Time Keeper",description:"Decree cooldowns are 50% shorter. Can be upgraded.",cost:m(25e7),icon:""}],vv=(r,e)=>r.cost.times(m(2.5).pow(e)),$r=(r,e)=>{const a={treasurer:m(1),warmaster:m(.25),guildmaster:m(.1),alchemist:m(1),chronomancer:m(.25),void_scholar:m(.2),cosmic_mage:m(.15),time_keeper:m(.5)}[r]||m(1),l=r==="void_scholar"?m(1.2).pow(e):m(1.2).pow(e.minus(m(1)));return a.times(l)};m(10),m(25),m(50),m(100),m(250),m(500);const Tc=[{id:"local_villages",name:"Local Villages",description:"Safe, quick trade with neighbors.",baseDuration:m(300),risk:m(.25),maxInvestment:m(1e6),rewardMultiplier:m(1.5),icon:""},{id:"iron_dwarves",name:"Iron Mountain Dwarves",description:"High risk, high reward trade for precious metals.",baseDuration:m(1800),risk:m(.55),maxInvestment:m(1e9),rewardMultiplier:m(3),icon:""},{id:"high_elves",name:"High Elven Spires",description:"Long expeditions for magical artifacts.",baseDuration:m(7200),risk:m(.75),maxInvestment:m(1e18),rewardMultiplier:m(10),icon:""},{id:"void_traders",name:"Void Walkers",description:"Inter-dimensional trade. Extreme danger.",baseDuration:m(21600),risk:m(.95),maxInvestment:m(1e18),rewardMultiplier:m(100),icon:""}],_v=[{id:"great_pyramid",name:"The Golden Pyramid",description:"A monument to eternal wealth.",icon:"",bonusDescription:"Trade Routes are 50% safer and 2x faster.",stages:[{name:"Foundation",description:"Lay base of massive structure.",cost:[{type:"gold",amount:m(5e17)},{type:"soldiers",amount:m(25e3)}]},{name:"Structure",description:"Build limestone walls.",cost:[{type:"gold",amount:m(5e17)},{type:"soldiers",amount:m(1e5)},{type:"knight",amount:m(500)}]},{name:"Capstone",description:"Place golden capstone.",cost:[{type:"gold",amount:m(5e17)},{type:"paladin",amount:m(250)},{type:"renown",amount:m(500)}]}]},{id:"sky_citadel",name:"Sky Citadel",description:"A floating fortress to rule the skies.",icon:"",bonusDescription:"Global Production x100 (Permanent).",stages:[{name:"Anti-Gravity Base",description:"Enchant earth to float.",cost:[{type:"gold",amount:m(5e17)},{type:"soldiers",amount:m(5e17)}]},{name:"Cloud Towers",description:"Construct towers that pierce heavens.",cost:[{type:"gold",amount:m(5e17)},{type:"paladin",amount:m(2500)}]},{name:"Storm Core",description:"Harness lightning to power city.",cost:[{type:"gold",amount:m(5e17)},{type:"void_sentinel",amount:m(50)},{type:"renown",amount:m(5e17)}]}]},{id:"void_gate",name:"Gate of Oblivion",description:"A portal to the source of all magic.",icon:"",bonusDescription:"Offline Gains 100%.",stages:[{name:"Rift Stabilizer",description:"Prevent reality from collapsing.",cost:[{type:"gold",amount:m(5e17)},{type:"void_sentinel",amount:m(500)}]},{name:"Event Horizon",description:"Expand tear in space-time.",cost:[{type:"gold",amount:m(5e17)},{type:"renown",amount:m(5e17)}]},{name:"Void Anchor",description:"Bind void to your will.",cost:[{type:"gold",amount:m(5e17)},{type:"void_sentinel",amount:m(5e3)},{type:"renown",amount:m(5e17)}]}]}],ef=100,jf=(r,e=!1,i=!1,a=!1)=>({display:"flex",alignItems:"center",padding:"var(--panel-padding)",background:i?"rgba(0,0,0,0.05)":e?"rgba(46, 125, 50, 0.1)":a?"#f3e5f5":"var(--panel-bg)",border:"1px solid",borderColor:i?"rgba(0,0,0,0.2)":a?"#7b1fa2":r?"var(--border-color)":"rgba(0,0,0,0.1)",borderRadius:"2px",cursor:r&&!i?"pointer":"default",opacity:r&&!i||e?1:.7,transition:"all 0.2s",boxShadow:r&&!i?"2px 2px 0 rgba(0,0,0,0.1)":"none",position:"relative",userSelect:"none",marginBottom:"var(--gap-size)",filter:i?"grayscale(1)":"none"}),El={display:"flex",flexDirection:"column",gap:"var(--gap-size)",height:"100%",overflowY:"auto",padding:"var(--panel-padding)"},NE=({gameState:r,onBuyUpgrade:e})=>{const i=ki.filter(a=>!(r.upgrades.includes(a.id)||a.triggerId&&(r.buildings[a.triggerId]||m(0)).lt(a.triggerCount||m(0))||a.currency==="renown"&&r.renown.lt(a.cost.times(m(.1)))));return i.length===0?p.jsxs("div",{style:{...El,justifyContent:"center",alignItems:"center",color:"var(--text-secondary)"},children:[p.jsx("div",{children:"No upgrades available yet."}),p.jsx("div",{style:{fontSize:"0.8rem",marginTop:"5px"},children:"Build more structures to unlock new technologies!"})]}):(i.sort((a,l)=>a.currency==="renown"&&l.currency!=="renown"?-1:a.currency!=="renown"&&l.currency==="renown"?1:a.cost.cmp(l.cost)),p.jsx("div",{style:El,children:i.map(a=>{const l=a.currency==="renown",d=l?r.renown.gte(a.cost):r.gold.gte(a.cost);return p.jsxs("div",{style:jf(d,!1,!1,l),onClick:()=>d&&e(a.id),"data-tooltip":`${a.name}: ${a.description}`,children:[p.jsx("div",{style:{fontSize:"1.4rem",marginRight:"15px",width:"30px",textAlign:"center"},children:""}),p.jsxs("div",{style:{flex:1},children:[p.jsx("div",{style:{fontWeight:"bold",color:l?"#4a148c":"var(--text-color)"},children:a.name}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:a.description})]}),p.jsxs("div",{style:{textAlign:"right",fontWeight:"bold",color:d?l?"#4a148c":"var(--accent-color)":"var(--text-secondary)"},children:[ve(a.cost,r.numberFormat)," ",l?"":"G"]})]},a.id)})}))},IE=({gameState:r,onBuyBuilding:e,onSetBuyAmount:i})=>{var v;const a=r.advisors.includes("guildmaster"),l=m(a?.9:1),d=((v=r.interface)==null?void 0:v.lastBuyAmount)||m(1),[f,y]=_e.useState(1);_e.useEffect(()=>{const x=P=>{P.ctrlKey?y(10):P.shiftKey?y(100):y(1)},S=P=>x(P),D=P=>x(P);return window.addEventListener("keydown",S),window.addEventListener("keyup",D),()=>{window.removeEventListener("keydown",S),window.removeEventListener("keyup",D)}},[]);const b=(x,S)=>{var he;let D=S;const P=((he=r.weather)==null?void 0:he.current)||"clear";P==="sunny"&&(x==="peasant"||x==="field")||P==="rainy"&&(x==="silver_mine"||x==="alchemist")?D=D.times(m(1.2)):P==="stormy"?(x==="blacksmith"&&(D=D.times(m(1.3))),x==="field"&&(D=D.times(m(.8)))):P==="windy"&&x==="market"&&(D=D.times(m(1.15)));let re=m(0);ki.forEach(ne=>{r.upgrades.includes(ne.id)&&ne.type==="building"&&ne.targetId===x&&ne.multiplier&&(re=re.plus(S.times(ne.multiplier.minus(m(1)))))});let se=D.plus(re),U=m(1);return ki.forEach(ne=>{r.upgrades.includes(ne.id)&&ne.type==="global"&&ne.multiplier&&(U=U.times(ne.multiplier))}),r.artifacts.forEach(ne=>{const me=Za.find(ge=>ge.id===ne);me&&(U=U.times(me.globalMultiplier))}),U=U.times(m(1).plus(r.renown.times(m(.01)))),(r.activeDecrees.royal_feast||m(0)).gt(m(Date.now()))&&(U=U.times(m(2))),x==="astral_rift"&&(r.upgrades.includes("void_harvesting")&&(U=U.times(m(10))),r.upgrades.includes("singularity")&&(U=U.times(m(5)))),se.times(U)};return p.jsxs("div",{style:El,children:[p.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"10px",justifyContent:"center"},children:[m(1),m(10),m(100),m(500),m(1e3),m(-1)].map(x=>p.jsx("button",{onClick:()=>i(x),style:{padding:"5px 10px",border:"1px solid var(--accent-color)",background:d.equals(x)?"var(--accent-color)":"var(--panel-bg)",color:d.equals(x)?"var(--text-on-accent)":"var(--text-color)",cursor:"pointer",fontWeight:"bold",fontSize:"0.8rem"},children:x.equals(m(-1))?"Max":`${x.toString()}`},`amount-${x.toString()}`))}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center"},children:"Hold Ctrl: x10  Hold Shift: x100"}),p.jsxs("h3",{style:{fontSize:"1rem",color:"var(--text-secondary)",fontWeight:"bold",borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:["Estates ",a&&p.jsx("span",{style:{color:"var(--success-color)",fontSize:"0.8rem"},children:"(Guildmaster Discount Active)"})]}),Ys.map((x,S)=>{if(S>0){const Ce=Ys[S-1].id,Ee=r.buildings[Ce]||m(0),M=r.buildings[x.id]||m(0);if(Ee.lt(m(10))&&M.eq(m(0)))return null}const D=r.buildings[x.id]||m(0);let P=m(0),re=m(0);d.equals(m(-1))?(P=e0(x.baseCost,D,r.gold.div(l)),P.eq(m(0))?(P=m(1),re=aE(x.baseCost,D).times(l).floor()):re=Ya(x.baseCost,D,P).times(l).floor()):(P=d,re=Ya(x.baseCost,D,P).times(l).floor());const se=r.gold.gte(re),U=d.equals(m(-1))&&e0(x.baseCost,D,r.gold.div(l)).eq(m(0)),he=b(x.id,x.baseProduction);let ne=P,me=re,ge=se;return d.equals(m(-1))||(ne=P.times(f),me=Ya(x.baseCost,D,ne).times(l).floor(),ge=r.gold.gte(me)),p.jsxs("div",{style:jf(ge&&!U),onClick:()=>{if(!(ge&&!U))return;const Ce=d.equals(m(-1))?P:ne;e(x.id,Ce.toNumber())},"data-tooltip":`${x.name}: ${x.description}`,children:[p.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:x.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:x.name}),p.jsx("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--accent-color)"},children:ve(D,r.numberFormat)})]}),p.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--success-color)",marginTop:"2px",display:"flex",flexDirection:"column"},children:[p.jsxs("span",{children:["Each: ",ve(he,r.numberFormat),"/s"]}),D.gt(m(0))&&p.jsxs("span",{style:{fontSize:"0.75rem",opacity:.9,color:"var(--text-secondary)"},children:["Total: +",ve(he.times(D),r.numberFormat),"/s"]})]})]}),p.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[p.jsx("div",{style:{color:ge&&!U?"#b8860b":"var(--text-secondary)",fontWeight:"bold"},children:ve(d.equals(m(-1))?re:me,r.numberFormat)}),!d.equals(m(-1))&&p.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["for ",ve(ne,r.numberFormat)]})]})]},x.id)})]})},ME=({gameState:r,onActivateDecree:e})=>{const[i,a]=_e.useState(Date.now());return _e.useEffect(()=>{const l=setInterval(()=>a(Date.now()),1e3);return()=>clearInterval(l)},[]),p.jsxs("div",{style:El,children:[p.jsx("div",{style:{marginBottom:"10px",fontSize:"0.9rem",fontStyle:"italic",color:"var(--text-secondary)"},children:"Issue Royal Decrees to boost your kingdom."}),pv.map(l=>{const d=m(i),f=r.activeDecrees[l.id]||m(0),y=r.decreeCooldowns[l.id]||m(0),b=l.unlockCondition?!l.unlockCondition(r):!1,v=f.gt(d),x=y.gt(d),S=!v&&!x&&!b;let D="Ready";return b?D="LOCKED":v?D="Active: "+f.minus(d).dividedBy(m(1e3)).ceil().toString()+"s":x&&(D="Wait: "+y.minus(d).dividedBy(m(1e3)).ceil().toString()+"s"),p.jsxs("div",{style:jf(S,v,b),onClick:()=>S&&e(l.id),"data-tooltip":b?`LOCKED: ${l.unlockDescription}`:`${l.name}: ${l.description}`,children:[p.jsx("div",{style:{fontSize:"1.8rem",marginRight:"15px"},children:b?"":l.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsx("div",{style:{fontWeight:"bold",color:b?"var(--text-secondary)":"var(--text-color)"},children:l.name}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:l.description}),b&&p.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--danger-color)",marginTop:"2px",fontWeight:"bold"},children:["Requirement: ",l.unlockDescription]})]}),p.jsx("div",{style:{textAlign:"right",fontWeight:"bold",color:S?"var(--success-color)":v?"blue":b?"var(--text-secondary)":"var(--danger-color)",minWidth:"80px"},children:D})]},l.id)})]})},VE=({gameState:r,onTrainSoldier:e,onTrainElite:i})=>{const a=(r.buildings.castle||m(0)).gt(m(0)),[l,d]=_e.useState(1);return _e.useEffect(()=>{const f=v=>{v.ctrlKey?d(10):v.shiftKey?d(100):d(1)},y=v=>f(v),b=v=>f(v);return window.addEventListener("keydown",y),window.addEventListener("keyup",b),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",b)}},[]),p.jsxs("div",{style:El,children:[p.jsxs("div",{style:{padding:"15px",background:"#e0f2f1",borderRadius:"4px",marginBottom:"10px",border:"1px solid #b2dfdb"},children:[p.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"5px",color:"#004d40"},children:" Royal Army"}),p.jsx("div",{style:{fontSize:"2rem",color:"#004d40"},children:ve(r.soldiers,r.numberFormat)}),p.jsx("div",{style:{fontSize:"0.8rem",color:"#00695c"},children:"Basic Soldiers Ready"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"20px"},children:[p.jsxs("button",{className:"btn",disabled:r.gold.lt(ei.times(m(1*l))),onClick:()=>{e(1*l)},children:["Train 1 (",ve(ei.times(m(1*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",disabled:r.gold.lt(ei.times(m(10*l))),onClick:()=>{e(10*l)},children:["Train 10 (",ve(ei.times(m(10*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",disabled:r.gold.lt(ei.times(m(100*l))),onClick:()=>{e(100*l)},children:["Train 100 (",ve(ei.times(m(100*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",disabled:r.gold.lt(ei.times(m(1e3*l))),onClick:()=>{e(1e3*l)},children:["Train 1K (",ve(ei.times(m(1e3*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",style:{gridColumn:"1 / -1",background:"#e65100",borderColor:"#bf360c"},disabled:r.gold.lt(ei.times(m(1e6*l))),onClick:()=>{e(1e6*l)},children:["Train 1M (",ve(ei.times(m(1e6*l)),r.numberFormat)," G)"]})]}),p.jsxs("div",{style:{borderTop:"2px solid var(--border-color)",paddingTop:"15px"},children:[p.jsxs("h3",{style:{fontSize:"1rem",color:"#4a148c",fontWeight:"bold",marginBottom:"10px"},children:["Royal Academy ",p.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal",color:"var(--text-secondary)"},children:"(Convert Soldiers)"})]}),_c.map(f=>{const y=r.eliteUnits[f.id]||m(0),b=m(l),v=f.goldCost.times(b),x=f.soldierCost.times(b),S=r.gold.gte(v)&&r.soldiers.gte(x);return p.jsxs("div",{style:{marginBottom:"10px",padding:"10px",background:"#f3e5f5",border:"1px solid #7b1fa2",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px"},children:[p.jsx("div",{style:{fontSize:"2rem"},children:f.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsxs("div",{style:{fontWeight:"bold",color:"#4a148c",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p.jsxs("span",{children:[f.name," ",p.jsxs("span",{style:{color:"#000"},children:["x",ve(y,r.numberFormat)]})]}),p.jsxs("button",{className:"btn",style:{padding:"5px 10px",fontSize:"0.8rem",background:S?"#7b1fa2":"#999"},disabled:!S,onClick:()=>i(f.id,l),children:["Train ",l>1?`x${l}`:""]})]}),p.jsx("div",{style:{fontSize:"0.85rem",color:"#4a148c",marginTop:"4px"},children:f.description}),p.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"2px"},children:["Requires ",ve(v,r.numberFormat)," Gold and ",ve(x,r.numberFormat)," Soldiers"]})]})]},f.id)})]}),p.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:a?"#fff8e1":"#ffebee",border:`1px solid ${a?"#ffb300":"#ef5350"}`,borderRadius:"4px"},children:[p.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px",color:a?"#f57f17":"#c62828"},children:a?" Orders Received":" Requirements Missing"}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:a?"Send your army on Crusades via the 'Conquest' menu. Elite units are required for high-level dimensions.":"You have soldiers, but no headquarters! You must build a **Castle** to command your troops."})]})]})},OE=({gameState:r,gps:e,onClick:i,onEventInteract:a,onOpenConquest:l,onOpenTavern:d,onOpenPrestige:f,onOpenSettings:y,onOpenCouncil:b,onOpenStatistics:v,onOpenLeaderboard:x,onOpenEmpire:S,isIdle:D})=>{var M,R,I,V;const[P,re]=_e.useState([]),se=_e.useRef(null),U=r.interface||{showFloatingText:!0,showWeatherWidget:!0},he=N=>{var z;if(U.showFloatingText){const w=(z=se.current)==null?void 0:z.getBoundingClientRect();if(w){const Oe=N.clientX-w.left+(Math.random()*40-20),tt=N.clientY-w.top+(Math.random()*40-20);let Q=m(1);ki.filter(ue=>ue.type==="click"&&r.upgrades.includes(ue.id)).forEach(ue=>{ue.multiplier&&(Q=Q.times(ue.multiplier))}),(r.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(Q=Q.times(m(5))),Q=Q.times(m(1).plus(r.renown.times(m(.01))));const ce="+"+ve(Q,r.numberFormat),we={id:Date.now(),x:Oe,y:tt,val:ce};re(ue=>[...ue,we]),setTimeout(()=>{re(ue=>ue.filter(Ye=>Ye.id!==we.id))},1e3)}}i(N)},ne=gv[((M=r.weather)==null?void 0:M.current)||"clear"],me={transition:"all 0.8s ease-in-out"},ge=D?{position:"fixed",bottom:"120px",right:"30px",transform:"scale(0.8)",transformOrigin:"bottom right",textAlign:"right",zIndex:100,...me}:{transform:"scale(1)",marginBottom:"3rem",zIndex:10,textAlign:"center",...me},Ce=D?{width:"80px",height:"80px",fontSize:"2rem",position:"fixed",bottom:"30px",right:"30px",borderRadius:"50%",border:"4px solid #b8860b",background:"radial-gradient(circle, #ffd700 0%, #daa520 100%)",boxShadow:"0 0 0 2px #8b4513, 0 5px 10px rgba(0,0,0,0.3)",zIndex:100,transform:"rotate(-10deg)",...me}:{width:"260px",height:"260px",fontSize:"6rem",borderRadius:"50%",border:"8px solid #b8860b",background:"radial-gradient(circle, #ffd700 0%, #daa520 100%)",boxShadow:"0 0 0 4px #8b4513, 0 10px 20px rgba(0,0,0,0.3)",position:"relative",transform:"rotate(0deg)",zIndex:5,...me},Ee={opacity:D?0:1,transition:"opacity 0.5s ease-in-out",pointerEvents:D?"none":"auto"};return p.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--panel-padding)",height:"100%",overflow:"hidden"},children:[U.showWeatherWidget&&p.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:20,background:ne.color,padding:"8px 12px",borderRadius:"20px",border:"2px solid rgba(0,0,0,0.1)",boxShadow:"2px 2px 5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px",cursor:"help",...Ee},"data-tooltip":`${ne.name}: ${ne.description}`,children:[p.jsx("span",{style:{fontSize:"1.5rem"},children:ne.icon}),p.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#222"},children:ne.name}),p.jsxs("div",{style:{fontSize:"0.7rem",color:"#444"},children:[m(Number(((R=r.weather)==null?void 0:R.timeLeft)||0)).ceil().toString(),"s remaining"]})]})]}),p.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:20,display:"flex",gap:"5px",...Ee},children:[p.jsx("button",{onClick:x,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Leaderboard",children:""}),p.jsx("button",{onClick:v,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Statistics",children:""}),p.jsx("button",{onClick:y,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Kingdom Settings",children:""})]}),p.jsxs("div",{style:ge,children:[p.jsx("div",{style:{fontSize:"1rem",color:D?"var(--text-color)":"var(--text-secondary)",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"2px",textShadow:D?"1px 1px 2px #000":"none"},children:"Royal Treasury"}),p.jsx("div",{style:{fontSize:"3rem",fontFamily:"var(--font-main)",color:"var(--text-color)",textShadow:D?"2px 2px 4px #000":"2px 2px 0px rgba(255, 215, 0, 0.4)"},children:ve(r.gold,r.numberFormat)}),p.jsxs("div",{style:{marginTop:"5px",fontSize:"1.1rem",color:D?"#90ee90":"var(--success-color)",fontStyle:"italic",textShadow:D?"1px 1px 2px #000":"none"},children:["+",ve(e,r.numberFormat)," gold / sec"]}),p.jsxs("div",{style:{marginTop:"15px",padding:"5px 15px",background:D?"rgba(0,0,0,0.5)":"rgba(103, 58, 183, 0.1)",border:"1px solid rgba(103, 58, 183, 0.3)",borderRadius:"20px",display:"inline-block"},children:[p.jsxs("span",{style:{color:D?"#b39ddb":"#673ab7",fontWeight:"bold"},children:[" Renown: ",ve(r.renown,r.numberFormat)]}),!D&&p.jsxs("span",{style:{fontSize:"0.8rem",color:"#673ab7",marginLeft:"5px"},children:["(+",r.renown.times(m(1)).floor().toString(),"% Bonus)"]})]})]}),p.jsxs("div",{style:{position:"relative",marginBottom:D?0:"3rem"},children:[p.jsx("button",{ref:se,style:{...Ce,display:"flex",alignItems:"center",justifyContent:"center",outline:"none",color:"#5d4037",cursor:"pointer"},onClick:he,onMouseDown:N=>!D&&(N.currentTarget.style.transform="scale(0.96)"),onMouseUp:N=>!D&&(N.currentTarget.style.transform="scale(1)"),onMouseLeave:N=>!D&&(N.currentTarget.style.transform="scale(1)"),children:""}),!D&&P.map(N=>p.jsx("div",{className:"floating-text",style:{left:N.x,top:N.y},children:N.val},N.id))]}),p.jsxs("div",{style:{display:"flex",gap:"10px",zIndex:10,flexWrap:"wrap",justifyContent:"center",...Ee},children:[(((I=r.buildings.castle)==null?void 0:I.gt(m(0)))||r.soldiers.gt(m(0)))&&p.jsx("button",{className:"btn",onClick:l,children:" Conquest"}),r.buildings.castle&&r.buildings.castle.gt(m(0))&&p.jsx("button",{className:"btn",style:{background:"#3e2723",borderColor:"#ffd700"},onClick:S,children:" Empire"}),((V=r.buildings.tavern)==null?void 0:V.gt(m(0)))&&p.jsx("button",{className:"btn",onClick:d,children:" Tavern"}),(r.renown.gt(m(0))||r.gold.gt(m(1e5)))&&p.jsx("button",{className:"btn",style:{background:"#4a148c"},onClick:b,children:" Council"}),(r.totalGold.gt(m(5e5))||r.renown.gt(m(0)))&&p.jsx("button",{className:"btn",style:{background:"#673ab7"},onClick:f,children:" Legacy"})]}),!D&&r.event&&r.event.type==="dragon"&&p.jsx("div",{className:"dragon-event",onMouseDown:()=>a(r.event),style:{top:"20%"},children:""}),!D&&r.event&&r.event.type==="merchant"&&p.jsxs("div",{style:{position:"absolute",right:"20px",top:"100px",background:"#fff3e0",padding:"10px",border:"2px solid orange",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>a(r.event),children:[p.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:""}),p.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Merchant"}),p.jsx("small",{style:{color:"#444"},children:"Click for gift"})]}),!D&&r.event&&r.event.type==="jester"&&p.jsxs("div",{style:{position:"absolute",left:"20px",top:"100px",background:"#fce4ec",padding:"10px",border:"2px solid pink",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>a(r.event),children:[p.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:""}),p.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Jester"}),p.jsx("small",{style:{color:"#444"},children:"Risk it all?"})]})]})},jE=({gameState:r})=>{var y;const[e,i]=_e.useState("all"),a=()=>{const b=bc.sort((v,x)=>{const S=r.achievements.includes(v.id),D=r.achievements.includes(x.id);return S&&!D?-1:!S&&D?1:0});return e==="all"?b:b.filter(v=>e==="buildings"?v.id.startsWith("build_"):e==="clicks"?v.id.startsWith("clicks_"):e==="gold"?v.id.startsWith("gold_"):e==="soldiers"?v.id.startsWith("soldiers_"):e==="renown"?v.id.startsWith("renown_"):e==="wonders"?["first_wonder","complete_wonder","all_wonders"].includes(v.id):e==="artifacts"?["all_artifacts","first_artifact","half_artifacts"].includes(v.id):e==="advisors"?["first_advisor","all_advisors","advisor_upgrade"].includes(v.id):e==="trade"?["first_trade","trade_master"].includes(v.id):e==="secret"?["click_master","idle_master"].includes(v.id):e==="combo"?v.id.startsWith("build_")||["first_advisor","all_advisors","advisor_upgrade"].includes(v.id):!0)},l=[{id:"all",name:"All",icon:""},{id:"buildings",name:"Buildings",icon:""},{id:"clicks",name:"Clicks",icon:""},{id:"gold",name:"Gold",icon:""},{id:"soldiers",name:"Army",icon:""},{id:"renown",name:"Prestige",icon:""},{id:"wonders",name:"Wonders",icon:""},{id:"artifacts",name:"Artifacts",icon:""},{id:"advisors",name:"Advisors",icon:""},{id:"trade",name:"Trade",icon:""},{id:"secret",name:"Secret",icon:""},{id:"combo",name:"Combo",icon:""}],d={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:"10px",padding:"10px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px",marginTop:"10px"},f=b=>({width:"100%",aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:`2px solid ${b?"var(--gold-color)":"#ccc"}`,background:b?"#fff8e1":"#eee",borderRadius:"4px",opacity:b?1:.3,cursor:b?"help":"default",position:"relative"});return p.jsxs("div",{style:{marginTop:"auto",padding:"10px"},children:[p.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 5px 0"},children:"Royal Decree (Achievements)"}),p.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"5px",marginBottom:"10px",padding:"5px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px"},children:l.map(b=>p.jsxs("button",{onClick:()=>i(b.id),style:{padding:"4px 8px",fontSize:"0.75rem",border:`1px solid ${e===b.id?"var(--gold-color)":"var(--border-color)"}`,borderRadius:"3px",background:e===b.id?"#fff8e1":"var(--panel-bg)",cursor:"pointer",transition:"all 0.2s"},title:b.name,children:[p.jsx("span",{style:{marginRight:"2px"},children:b.icon}),p.jsx("span",{style:{display:e===b.id?"inline":"none"},children:b.name})]},b.id))}),p.jsx("div",{style:d,children:a().map(b=>{const v=r.achievements.includes(b.id);return p.jsx("div",{style:f(v),"data-tooltip":v?`${b.name}: ${b.description}`:"Locked",children:p.jsx("div",{style:{fontSize:"1.5rem",filter:v?"none":"grayscale(100%)",opacity:v?1:.2},children:v?b.icon:""})},b.id)})}),p.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"5px",textAlign:"center"},children:[r.achievements.length," / ",bc.length," Unlocked",e!=="all"&&p.jsxs("span",{children:[" | ",a().filter(b=>r.achievements.includes(b.id)).length," / ",a().length," in ",(y=l.find(b=>b.id===e))==null?void 0:y.name]})]})]})},zE=({gameState:r,onStartCrusade:e,onClose:i})=>{var se;const a=r.conquest.active?Ec.find(U=>U.id===r.conquest.crusadeId):null,l=r.advisors.includes("warmaster"),d=r.advisorLevels.warmaster||m(0),f=r.advisors.includes("warmaster")?d.toNumber()*.1:0;let y=1-f;r.weather.current==="windy"&&(y=y*.8);const[b,v]=_e.useState(0),[x,S]=_e.useState(0),D=a&&r.conquest.startTime&&r.conquest.active,P=D&&r.conquest.startTime?m(Date.now()-m(r.conquest.startTime).toNumber()).dividedBy(m(1e3)).gte(m(a.duration).times(m(y))):!1;console.log("Conquest Debug:",{conquestActive:r.conquest.active,crusadeId:r.conquest.crusadeId,startTime:(se=r.conquest.startTime)==null?void 0:se.toNumber(),activeCrusade:a==null?void 0:a.name,isCrusadeActuallyActive:D,isCrusadeExpired:P,speedMult:y,currentTime:Date.now(),elapsed:r.conquest.startTime?(Date.now()-r.conquest.startTime.toNumber())/1e3:"N/A"});const re=vc.useRef(i);return vc.useEffect(()=>{re.current=i},[i]),_e.useEffect(()=>{if(console.log("Timer useEffect:",{isCrusadeActuallyActive:D,isCrusadeExpired:P}),D&&!P){console.log("Setting up interval for:",a==null?void 0:a.name);const U=setInterval(()=>{const he=Date.now(),ne=m(r.conquest.startTime).toNumber(),me=m(he-ne).dividedBy(m(1e3)),ge=m(a.duration).times(m(y)),Ce=m(100).min(me.dividedBy(ge).times(m(100)));v(Ce.toNumber());const Ee=$t.max(m(0),ge.minus(me)).ceil();S(Ee.toNumber()),console.log("Timer update:",{elapsed:me.toNumber(),duration:ge.toNumber(),progress:Ce.toNumber(),remaining:Ee.toNumber()}),Ee.lte(0)&&Ce.gte(100)&&re.current()},1e3);return()=>clearInterval(U)}else v(0),S(0),console.log("Timer reset - no active crusade")},[D,P,a,r.conquest.startTime,y]),p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[p.jsx("h2",{children:"War Room"}),p.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[r.artifacts.map(U=>{const he=Za.find(ne=>ne.id===U);return p.jsx("div",{"data-tooltip":he==null?void 0:he.description,style:{fontSize:"2rem",width:"3.5rem",height:"3.5rem",display:"flex",justifyContent:"center",alignItems:"center",border:"2px solid gold",borderRadius:"50%",background:"rgba(255, 215, 0, 0.1)",flexShrink:0},children:he==null?void 0:he.icon},U)}),r.artifacts.length===0&&p.jsx("span",{style:{color:"var(--text-secondary)"},children:"No artifacts claimed yet."})]}),D&&!P?p.jsxs("div",{style:{textAlign:"center"},children:[p.jsxs("h3",{children:["Current Crusade: ",a.name]}),p.jsx("div",{style:{width:"100%",height:"20px",background:"#ccc",borderRadius:"10px",overflow:"hidden",margin:"20px 0"},children:p.jsx("div",{style:{width:`${b}%`,height:"100%",background:"var(--accent-color)",transition:"width 1s linear"}})}),l&&p.jsx("div",{style:{color:"var(--success-color)",fontSize:"0.8rem",marginBottom:"5px"},children:"Warmaster Active (Faster & Safer)"}),p.jsxs("div",{children:["Time remaining: ",x,"s"]})]}):p.jsx("div",{style:{textAlign:"center",padding:"20px"},children:p.jsx("div",{style:{color:"var(--text-secondary)",marginBottom:"20px"},children:r.conquest.active?"Previous crusade has completed.":"No active crusades at the moment."})}),(!D||P)&&p.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:Ec.map(U=>{var z;const he=r.artifacts.includes(U.rewardArtifactId);let ne=r.soldiers.gte(m(U.soldierCost)),me=[];if(U.requiredUnits){for(const[w,Oe]of Object.entries(U.requiredUnits))if((r.eliteUnits[w]||m(0)).lt(Oe)){ne=!1;const Q=((z=_c.find(ce=>ce.id===w))==null?void 0:z.name)||w;me.push(`${Oe} ${Q}`)}}const ge=m(U.duration).times(m(y)),Ce=U.baseRisk||m(0),Ee=f*2,M=Ce.minus(m(Ee)),R=m(1).minus(M).times(m(100)).floor();let I="var(--success-color)";M.gt(m(.1))&&(I="orange"),M.gt(m(.3))&&(I="var(--danger-color)");const V=he?"#f0f4c3":"transparent",N=he?"gold":"var(--border-color)";return p.jsxs("div",{style:{border:`1px solid ${N}`,background:V,padding:"10px",marginBottom:"10px",borderRadius:"4px",textAlign:"left",position:"relative"},children:[he&&p.jsx("div",{style:{position:"absolute",top:5,right:5,fontSize:"1.2rem"},children:""}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingRight:"30px"},children:[p.jsxs("strong",{children:[U.icon," ",U.name]}),p.jsxs("span",{children:[ge.gte(m(3600))?`${Math.floor(ge.toNumber()/3600)}h `:"",Math.floor(ge.toNumber()%3600/60),"m",ge.toNumber()%60>0&&` ${Math.floor(ge.toNumber()%60)}s`]})]}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:U.description}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",fontSize:"0.85rem"},children:[p.jsxs("div",{children:["Cost: ",p.jsxs("strong",{children:[ve(U.soldierCost,r.numberFormat)," Soldiers"]})]}),p.jsxs("div",{style:{color:I,fontWeight:"bold"},children:["Success Chance: ",R.toString(),"%"]})]}),U.requiredUnits&&p.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"5px",color:me.length>0?"var(--danger-color)":"var(--success-color)"},children:["Requires: ",Object.entries(U.requiredUnits).map(([w,Oe])=>{var ce;const tt=((ce=_c.find(we=>we.id===w))==null?void 0:ce.name)||w,Q=r.eliteUnits[w]||m(0);return`${tt} (${Q.toString()}/${Oe.toString()}) `})]}),M.gt(m(0))&&p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"2px"},children:"Failure refunds 50% soldiers."}),p.jsx("button",{className:"btn",style:{width:"100%",marginTop:"5px",background:he?"#827717":"var(--accent-color)"},disabled:!ne,onClick:()=>e(U.id),children:he?"Replay Mission (Critical Chance)":"Start Campaign"})]},U.id)})}),p.jsx("button",{className:"btn",onClick:i,style:{marginTop:"20px"},children:"Close"})]})})},kE=({gameState:r,onGamble:e,onClose:i})=>{const[a,l]=_e.useState("coin"),[d,f]=_e.useState(10),[y,b]=_e.useState(""),[v,x]=_e.useState(null),S=()=>{if(r.gold.lt(m(d))){b("Not enough gold!");return}const P=Math.random()>.5;e(d,P),b(P?`Heads! You DOUBLED your money! (+${ve(d,r.numberFormat)} Profit)`:`Tails... You lost ${ve(d,r.numberFormat)} gold.`),x(null)},D=()=>{if(r.gold.lt(m(d))){b("Not enough gold!");return}const P=Math.floor(Math.random()*6)+1,re=Math.floor(Math.random()*6)+1,se=P+re;x(se);let U=0;if(se===7)b(`Rolled ${se}. A draw! Gold returned.`),e(0,!0);else if(se>7){se>=10?U=2:U=1.5;const he=Math.floor(d*U);e(he,!0),b(`Rolled ${se}! You won ${ve(he,r.numberFormat)} gold!`)}else e(d,!1),b(`Rolled ${se}. You lost ${ve(d,r.numberFormat)} gold.`)};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{minHeight:"450px"},children:[p.jsx("h2",{style:{borderBottom:"none"},children:" The Rusty Tankard"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"center"},children:[p.jsx("button",{className:"btn ",style:{opacity:a==="coin"?1:.6},onClick:()=>l("coin"),children:"Coin Flip"}),p.jsx("button",{className:"btn ",style:{opacity:a==="dice"?1:.6},onClick:()=>l("dice"),children:"High Dice"})]}),p.jsxs("div",{style:{background:"#f9fbe7",padding:"20px",borderRadius:"8px",border:"1px solid #c0ca33"},children:[a==="coin"?p.jsxs("div",{style:{textAlign:"left",background:"rgba(255,255,255,0.5)",padding:"10px",borderRadius:"4px"},children:[p.jsx("strong",{children:"Rules:"}),p.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[p.jsx("li",{children:"50% Chance to Win."}),p.jsxs("li",{children:["Win: ",p.jsx("strong",{children:"+100% Profit"})," (Doubles your money)."]}),p.jsx("li",{children:"Lose: Lost the bet."})]})]}):p.jsxs("div",{style:{textAlign:"left",background:"rgba(255,255,255,0.5)",padding:"10px",borderRadius:"4px"},children:[p.jsx("strong",{children:"Dice Rules (Roll 2-12):"}),p.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[p.jsxs("li",{children:[p.jsx("strong",{children:"7:"})," Draw (Bet returned)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"8-9:"})," Win +50% Profit (1.5x)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"10-12:"})," Win +100% Profit (2x)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"2-6:"})," Loss"]})]})]}),p.jsxs("div",{style:{margin:"20px 0"},children:[p.jsx("label",{children:"Bet Amount: "}),p.jsx("input",{type:"number",value:d,onChange:P=>f(Math.max(1,parseInt(P.target.value)||0)),style:{padding:"8px",width:"120px",fontSize:"1rem",border:"1px solid #aaa"}})]}),a==="dice"&&v!==null&&p.jsxs("div",{style:{fontSize:"3rem",margin:"10px"},children:[" ",v]}),p.jsx("button",{className:"btn",style:{fontSize:"1.2rem",padding:"10px 30px"},onClick:a==="coin"?S:D,children:a==="coin"?"Flip Coin":"Roll Dice"}),y&&p.jsx("div",{style:{marginTop:"15px",fontWeight:"bold",fontSize:"1.1rem",color:y.includes("won")||y.includes("DOUBLED")||y.includes("draw")?"green":"red"},children:y})]}),p.jsx("div",{style:{marginTop:"30px"},children:p.jsx("button",{className:"btn",style:{backgroundColor:"#5d4037"},onClick:i,children:"Leave Tavern"})})]})})},LE=({gameState:r,onPrestige:e,onClose:i})=>{const a=r.advisorLevels.void_scholar||m(0),d=1+(r.advisors.includes("void_scholar")?a.toNumber()*.1:0),f=Math.floor(r.gold.toNumber()/1e9)*d,y=Math.max(0,Math.min(f,1e4));return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{border:"4px solid #673ab7"},children:[p.jsx("h2",{style:{color:"#673ab7"},children:" Abdication"}),p.jsx("p",{children:"Are you ready to pass the crown to your heir?"}),p.jsxs("div",{style:{textAlign:"left",margin:"20px 0",background:"rgba(243, 229, 245, 0.5)",padding:"15px",borderRadius:"4px"},children:[p.jsx("div",{children:p.jsx("strong",{children:"You will lose:"})}),p.jsxs("ul",{children:[p.jsx("li",{children:"All Gold"}),p.jsx("li",{children:"All Buildings"}),p.jsx("li",{children:"All Upgrades"}),p.jsx("li",{children:"Current Soldiers"})]}),p.jsx("div",{children:p.jsx("strong",{children:"You will keep:"})}),p.jsxs("ul",{children:[p.jsx("li",{children:"Achievements"}),p.jsx("li",{children:"Artifacts"}),p.jsxs("li",{children:["Current Renown (",ve(r.renown,r.numberFormat),")"]})]})]}),p.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:[p.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)",fontStyle:"italic"},children:["Requirement: 1 Renown per 1,000,000,000 Current Gold (",ve(r.gold,r.numberFormat),")"]}),"You will gain: ",p.jsxs("strong",{children:[ve(y,r.numberFormat)," Renown"]}),p.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["(New Total Bonus: +",ve((r.renown.toNumber()+y)*1,r.numberFormat),"%)"]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("button",{className:"btn",style:{background:"#666"},onClick:i,children:"Cancel"}),p.jsx("button",{className:"btn",style:{background:"#673ab7"},onClick:e,disabled:y<=0,children:y>0?"Abdicate":"Need more Gold"})]})]})})},UE=({gameState:r,onClose:e,onHardReset:i,onSave:a,onOpenChangelog:l,onSetTheme:d,onSetNumberFormat:f,onToggleIdleMode:y,onUpdateInterface:b})=>{var ce,we,ue,Ye;const[v,x]=vc.useState(!1),S=r.interface||{density:"normal",fontSize:"medium",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,layout:{left:1,center:1,right:1},borderWidth:4,customColors:{enabled:!1,bg:"",panel:"",text:"",accent:"",border:"",secondaryText:"",accentHover:"",gold:"",success:"",danger:""}},D=(ce=S.layout.left)!=null&&ce.toNumber?S.layout.left.toNumber():Number(S.layout.left),P=(we=S.layout.center)!=null&&we.toNumber?S.layout.center.toNumber():Number(S.layout.center),re=(ue=S.layout.right)!=null&&ue.toNumber?S.layout.right.toNumber():Number(S.layout.right),se=(Ye=S.borderWidth)!=null&&Ye.toNumber?S.borderWidth.toNumber():Number(S.borderWidth),U=S.customColors||{},he=String(U.bg||""),ne=String(U.panel||""),me=String(U.text||""),ge=String(U.secondaryText||""),Ce=String(U.accent||""),Ee=String(U.accentHover||""),M=String(U.gold||""),R=String(U.border||""),I=String(U.success||""),V=String(U.danger||""),N=()=>{v?i():x(!0)},z=(C,$)=>{b({layout:{...S.layout,[C]:$}})},w=(C,$)=>{b({customColors:{...S.customColors,[C]:$}})},Oe={display:"flex",gap:"5px",flexWrap:"wrap",justifyContent:"center"},tt={marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",background:"rgba(0,0,0,0.03)",borderRadius:"4px"},Q={width:"100%",marginBottom:"5px"};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h2",{children:" Royal Settings"}),r.playerProfile&&p.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"20px",textAlign:"center"},children:[p.jsxs("div",{style:{color:"var(--gold-color)",fontSize:"16px",fontWeight:"bold"},children:[" Your Ruler: ",r.playerProfile.rulerName," ",r.playerProfile.rulerId]}),p.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"5px"},children:"Registered in Leaderboard System"})]}),p.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",maxHeight:"60vh",overflowY:"auto",paddingRight:"5px"},children:[p.jsx("h3",{style:{marginBottom:"10px"},children:"Layout Configuration"}),p.jsxs("div",{style:{marginBottom:"15px",background:"rgba(0,0,0,0.03)",padding:"10px",borderRadius:"4px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Column Widths (Ratio)"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[p.jsx("span",{style:{fontSize:"0.8rem"},children:"Left"}),p.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:D,onChange:C=>z("left",parseFloat(C.target.value)),style:Q}),p.jsx("span",{style:{fontSize:"0.8rem"},children:D})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[p.jsx("span",{style:{fontSize:"0.8rem"},children:"Center"}),p.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:P,onChange:C=>z("center",parseFloat(C.target.value)),style:Q}),p.jsx("span",{style:{fontSize:"0.8rem"},children:P})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center"},children:[p.jsx("span",{style:{fontSize:"0.8rem"},children:"Right"}),p.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:re,onChange:C=>z("right",parseFloat(C.target.value)),style:Q}),p.jsx("span",{style:{fontSize:"0.8rem"},children:re})]})]}),p.jsx("h3",{style:{marginBottom:"10px"},children:"Design Studio"}),p.jsxs("div",{style:tt,children:[p.jsx("div",{children:p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Border Thickness"})}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[p.jsx("input",{type:"range",min:"1",max:"10",value:se,onChange:C=>b({borderWidth:parseInt(C.target.value)})}),p.jsxs("span",{children:[se,"px"]})]})]}),p.jsxs("div",{style:tt,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Enable Custom Colors"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Override theme colors."})]}),p.jsx("input",{type:"checkbox",checked:S.customColors.enabled,onChange:C=>w("enabled",C.target.checked),style:{transform:"scale(1.5)"}})]}),S.customColors.enabled&&p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"},children:[p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Background",p.jsx("input",{type:"color",value:he,onChange:C=>w("bg",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Panels",p.jsx("input",{type:"color",value:ne,onChange:C=>w("panel",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Borders",p.jsx("input",{type:"color",value:R,onChange:C=>w("border",C.target.value),style:{width:"100%"}})]}),p.jsx("div",{style:{gridColumn:"1 / -1",height:"1px",background:"#ccc",margin:"5px 0"}}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Primary Text",p.jsx("input",{type:"color",value:me,onChange:C=>w("text",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Secondary Text",p.jsx("input",{type:"color",value:ge,onChange:C=>w("secondaryText",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Gold/Value",p.jsx("input",{type:"color",value:M,onChange:C=>w("gold",C.target.value),style:{width:"100%"}})]}),p.jsx("div",{style:{gridColumn:"1 / -1",height:"1px",background:"#ccc",margin:"5px 0"}}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Accent/Buttons",p.jsx("input",{type:"color",value:Ce,onChange:C=>w("accent",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Button Hover",p.jsx("input",{type:"color",value:Ee,onChange:C=>w("accentHover",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Success/Green",p.jsx("input",{type:"color",value:I,onChange:C=>w("success",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Danger/Red",p.jsx("input",{type:"color",value:V,onChange:C=>w("danger",C.target.value),style:{width:"100%"}})]})]}),p.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),p.jsxs("div",{style:{marginBottom:"15px",opacity:S.customColors.enabled?.5:1,pointerEvents:S.customColors.enabled?"none":"auto"},children:[p.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:["Preset Themes ",S.customColors.enabled&&"(Disabled)"]}),p.jsx("div",{style:Oe,children:Object.values(df).map(C=>p.jsx("button",{className:"btn",style:{background:r.theme===C.id?"var(--accent-color)":"var(--panel-bg)",color:r.theme===C.id?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",padding:"5px 10px"},onClick:()=>d(C.id),children:C.name},C.id))})]}),p.jsxs("div",{style:{marginBottom:"15px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Font Size"}),p.jsx("div",{style:Oe,children:["small","medium","large"].map(C=>p.jsx("button",{className:"btn",style:{background:S.fontSize===C?"var(--accent-color)":"var(--panel-bg)",color:S.fontSize===C?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",textTransform:"capitalize"},onClick:()=>b({fontSize:C}),children:C},C))})]}),p.jsxs("div",{style:{marginBottom:"15px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Layout Density"}),p.jsx("div",{style:Oe,children:["compact","normal","spacious"].map(C=>p.jsx("button",{className:"btn",style:{background:S.density===C?"var(--accent-color)":"var(--panel-bg)",color:S.density===C?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",textTransform:"capitalize"},onClick:()=>b({density:C}),children:C},C))})]}),p.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),p.jsxs("div",{style:tt,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Cinematic Idle Mode"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show landscape when inactive."})]}),p.jsx("button",{className:"btn",style:{background:r.idleModeEnabled?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:y,children:r.idleModeEnabled?"ON":"OFF"})]}),p.jsxs("div",{style:tt,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Click Text"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show floating numbers on click."})]}),p.jsx("button",{className:"btn",style:{background:S.showFloatingText?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>b({showFloatingText:!S.showFloatingText}),children:S.showFloatingText?"ON":"OFF"})]}),p.jsxs("div",{style:tt,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Weather Widget"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show weather info in top left."})]}),p.jsx("button",{className:"btn",style:{background:S.showWeatherWidget?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>b({showWeatherWidget:!S.showWeatherWidget}),children:S.showWeatherWidget?"ON":"OFF"})]}),p.jsxs("div",{style:tt,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Reduce Motion"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Disable animations."})]}),p.jsx("button",{className:"btn",style:{background:S.reduceMotion?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>b({reduceMotion:!S.reduceMotion}),children:S.reduceMotion?"ON":"OFF"})]}),p.jsxs("div",{style:{marginTop:"15px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Number Format"}),p.jsx("div",{style:Oe,children:["standard","scientific","plain"].map(C=>p.jsx("button",{className:"btn",style:{background:r.numberFormat===C?"var(--accent-color)":"var(--panel-bg)",color:r.numberFormat===C?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",padding:"5px 10px",textTransform:"capitalize"},onClick:()=>f(C),children:C},C))})]})]}),p.jsxs("div",{style:{borderTop:"2px solid #ccc",paddingTop:"15px",marginTop:"15px"},children:[p.jsx("h3",{children:"System"}),p.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[p.jsx("button",{className:"btn",onClick:a,children:"Force Save"}),p.jsx("button",{className:"btn",style:{background:"#0288d1"},onClick:l,children:"Update Logs"}),p.jsx("button",{className:"btn",style:{backgroundColor:v?"red":"#d32f2f"},onClick:N,children:v?"CONFIRM WIPE?":"Hard Reset"})]}),v&&p.jsx("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"5px"},children:"Warning: This will delete all progress permanently!"})]}),p.jsx("button",{className:"btn",style:{marginTop:"20px",background:"#5d4037",width:"100%"},onClick:e,children:"Return to Game"}),p.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"10px"},children:"v2.3.0 - Kingdom Clicker"})]})})},BE=({onClose:r})=>p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[p.jsx("h2",{children:" Royal Chronicles"}),p.jsx("div",{style:{overflowY:"auto",textAlign:"left",padding:"0 20px",flex:1},children:Jy.map((e,i)=>p.jsxs("div",{style:{marginBottom:"20px",borderBottom:i<Jy.length-1?"1px dashed #ccc":"none",paddingBottom:"10px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[p.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"var(--accent-color)"},children:["v",e.version]}),p.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:e.date})]}),p.jsx("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:e.changes.map((a,l)=>p.jsx("li",{style:{marginBottom:"3px"},children:a},l))})]},e.version))}),p.jsx("button",{className:"btn",style:{marginTop:"20px",alignSelf:"center"},onClick:r,children:"Close Chronicles"})]})}),PE=({gameState:r,onHireAdvisor:e,onClose:i})=>p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{border:"4px double #4a148c",maxWidth:"900px"},children:[p.jsx("h2",{style:{color:"#4a148c",borderBottomColor:"#4a148c"},children:" Royal Council"}),p.jsxs("div",{style:{marginBottom:"15px",color:"var(--text-secondary)",fontStyle:"italic"},children:["Hire permanent advisors with Renown. ",p.jsx("br",{}),"These buffs persist across abdications. Advisors can be upgraded for better effects."]}),p.jsxs("div",{style:{background:"rgba(103, 58, 183, 0.1)",padding:"10px",borderRadius:"4px",marginBottom:"20px",fontWeight:"bold",color:"#4a148c"},children:["Available Renown: ",ve(r.renown,r.numberFormat)," "]}),p.jsxs("div",{style:{marginBottom:"30px"},children:[p.jsx("h3",{style:{color:"#4a148c",marginBottom:"10px"},children:" Royal Advisors"}),p.jsx("div",{style:{display:"grid",gap:"10px",maxHeight:"350px",overflowY:"auto"},children:yv.map(a=>{const l=r.advisors.includes(a.id),d=r.advisorLevels[a.id]||m(0),f=vv(a,d),y=!l&&r.renown.gte(a.cost),b=l&&r.renown.gte(f),v=$r(a.id,d);return p.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"15px",border:`2px solid ${l?"#4a148c":"var(--border-color)"}`,background:l?"rgba(237, 231, 246, 0.5)":"var(--panel-bg)",borderRadius:"8px",opacity:l||y?1:.6},children:[p.jsx("div",{style:{fontSize:"2.5rem",marginRight:"15px"},children:a.icon}),p.jsxs("div",{style:{flex:1,textAlign:"left"},children:[p.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:l?"#4a148c":"var(--text-color)"},children:[a.name," ",l&&`(Level ${ve(d,r.numberFormat)})`]}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:a.description}),l&&p.jsxs("div",{style:{fontSize:"0.8rem",color:"#4a148c",marginTop:"5px"},children:[a.id==="treasurer"&&`Auto-clicks every ${Math.max(1,5-d.toNumber())} seconds`,a.id==="warmaster"&&`Speed: +${ve(v.times(m(100)),r.numberFormat)}%, Safety: +${ve(v.times(m(100)),r.numberFormat)}%`,a.id==="guildmaster"&&`Discount: ${ve(v.times(m(100)),r.numberFormat)}%`,a.id==="alchemist"&&`Event chance: x${ve(v.plus(m(1)),r.numberFormat)}`,(a.id==="chronomancer"||a.id==="time_keeper")&&`Cooldown reduction: ${ve(v.times(m(100)),r.numberFormat)}%`,a.id==="void_scholar"&&`Renown bonus: +${ve(v.times(m(100)),r.numberFormat)}%`,a.id==="cosmic_mage"&&`Production bonus: +${ve(v.times(m(100)),r.numberFormat)}%`]})]}),p.jsx("div",{style:{minWidth:"120px",textAlign:"right"},children:l?p.jsxs("button",{className:"btn",style:{background:b?"#4a148c":"var(--text-secondary)",fontSize:"0.8rem"},disabled:!b,onClick:()=>e(a.id),children:["Upgrade: ",ve(f,r.numberFormat)," "]}):p.jsxs("button",{className:"btn",style:{background:y?"#4a148c":"var(--text-secondary)"},disabled:!y,onClick:()=>e(a.id),children:["Hire: ",ve(a.cost,r.numberFormat)," "]})})]},a.id)})})]}),p.jsx("button",{className:"btn",style:{marginTop:"20px",background:"#5d4037"},onClick:i,children:"Close Council"})]})}),qE=({gameState:r,currentGps:e,onClose:i})=>{var me;const a=Object.values(r.buildings).reduce((ge,Ce)=>ge.plus(Ce),m(0)),l=r.upgrades.length,d=ki.length,f=r.achievements.length,y=bc.length;let b="None",v="None",x=-1,S=m(0);Ys.forEach((ge,Ce)=>{const Ee=r.buildings[ge.id]||m(0);Ee.gt(m(0))&&Ce>x&&(x=Ce,b=ge.name),Ee.gt(S)&&(S=Ee,v=ge.name)});const P=(()=>{let ge=m(1);return ki.filter(Ce=>Ce.type==="click"&&r.upgrades.includes(Ce.id)).forEach(Ce=>{Ce.multiplier&&(ge=ge.times(Ce.multiplier))}),(r.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(ge=ge.times(m(5))),ge=ge.times(m(1).plus(r.renown.times(m(.01)))),ge})(),[re,se]=_e.useState("");_e.useEffect(()=>{const ge=()=>{const Ee=m(Date.now()).minus(r.startTime),M=Ee.dividedBy(m(1e3)),R=M.minus(M.dividedBy(m(60)).floor().times(m(60))).floor(),I=Ee.dividedBy(m(6e4)),V=I.minus(I.dividedBy(m(60)).floor().times(m(60))).floor(),N=Ee.dividedBy(m(36e5)),z=N.minus(N.dividedBy(m(24)).floor().times(m(24))).floor(),w=Ee.dividedBy(m(864e5)).floor();let Oe="";w.gt(m(0))&&(Oe+=`${w.toString()}d `),z.gt(m(0))&&(Oe+=`${z.toString()}h `),Oe+=`${V.toString()}m ${R.toString()}s`,se(Oe)};ge();const Ce=setInterval(ge,1e3);return()=>clearInterval(Ce)},[r.startTime]);const U={display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px dashed rgba(0,0,0,0.1)",fontSize:"0.9rem"},he={fontSize:"1rem",color:"var(--accent-color)",marginTop:"15px",borderBottom:"2px solid var(--border-color)",paddingBottom:"2px",marginBottom:"5px"},ne=((me=gv[r.weather.current])==null?void 0:me.name)||"Unknown";return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"500px"},children:[p.jsx("h2",{children:" Royal Records"}),p.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",maxHeight:"60vh",overflowY:"auto",paddingRight:"10px"},children:[p.jsx("h3",{style:he,children:" Current Status"}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Gold Per Second:"}),p.jsxs("strong",{style:{color:"var(--success-color)"},children:[ve(e,r.numberFormat)," / sec"]})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Click Power:"}),p.jsxs("strong",{style:{color:"var(--success-color)"},children:[ve(P,r.numberFormat)," / click"]})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Current Weather:"}),p.jsx("strong",{children:ne})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Renown Bonus:"}),p.jsxs("strong",{style:{color:"#673ab7"},children:["+",r.renown.times(m(1)).floor().toString(),"%"]})]}),p.jsx("h3",{style:he,children:" Time & Legacy"}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Time Played:"}),p.jsx("strong",{children:re})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Kingdom Founded:"}),p.jsx("span",{children:new Date(r.startTime.toNumber()).toLocaleDateString()})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Total Renown:"}),p.jsx("strong",{children:ve(r.renown,r.numberFormat)})]}),p.jsx("h3",{style:he,children:" Economy Summary"}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Current Gold:"}),p.jsx("strong",{children:ve(r.gold,r.numberFormat)})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Lifetime Gold:"}),p.jsx("strong",{children:ve(r.totalGold,r.numberFormat)})]}),p.jsx("h3",{style:he,children:" Dominion"}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Total Buildings:"}),p.jsx("strong",{children:ve(a,r.numberFormat)})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Highest Tech Building:"}),p.jsx("strong",{children:b})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Most Numerous:"}),p.jsxs("strong",{children:[v," (",ve(S,r.numberFormat),")"]})]}),p.jsx("h3",{style:he,children:" Completion"}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Achievements:"}),p.jsxs("span",{children:[f," / ",y," (",Math.floor(f/y*100),"%)"]})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Upgrades:"}),p.jsxs("span",{children:[l," / ",d," (",Math.floor(l/d*100),"%)"]})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Artifacts:"}),p.jsxs("span",{children:[r.artifacts.length," Found"]})]}),p.jsx("h3",{style:he,children:" Military & Court"}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Standing Army:"}),p.jsxs("strong",{children:[ve(r.soldiers,r.numberFormat)," Soldiers"]})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Royal Advisors:"}),p.jsxs("span",{children:[r.advisors.length," Hired"]})]}),p.jsx("h3",{style:he,children:" Player Stats"}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Manual Clicks:"}),p.jsx("span",{children:ve(r.stats.totalClicks,r.numberFormat)})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Dragons Slain:"}),p.jsx("span",{children:ve(r.stats.dragonsKilled,r.numberFormat)})]}),p.jsxs("div",{style:U,children:[p.jsx("span",{children:"Tavern Games:"}),p.jsx("span",{children:ve(r.stats.tavernGamesPlayed,r.numberFormat)})]})]}),p.jsx("button",{className:"btn",style:{background:"#5d4037",width:"100%"},onClick:i,children:"Close Records"})]})})},GE=({gameState:r,onInvestTrade:e,onBuildWonder:i,onClose:a})=>{const[l,d]=_e.useState("trade"),f=(r.wonders.great_pyramid||0)>=3;return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",width:"95%",height:"80vh",display:"flex",flexDirection:"column",padding:"0"},children:[p.jsxs("div",{style:{padding:"20px",background:"#3e2723",color:"#fff"},children:[p.jsx("h2",{style:{margin:0,border:"none",color:"#ffd700"},children:" Imperial Management"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"15px"},children:[p.jsx("button",{className:"tab-btn",style:{background:l==="trade"?"#ffd700":"rgba(255,255,255,0.1)",color:l==="trade"?"#000":"#fff"},onClick:()=>d("trade"),children:"Trade Routes"}),p.jsx("button",{className:"tab-btn",style:{background:l==="wonders"?"#ffd700":"rgba(255,255,255,0.1)",color:l==="wonders"?"#000":"#fff"},onClick:()=>d("wonders"),children:"Great Wonders"})]})]}),p.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",background:"var(--panel-bg)"},children:[l==="trade"&&p.jsx(HE,{gameState:r,onInvestTrade:e,hasPyramid:f}),l==="wonders"&&p.jsx(FE,{gameState:r,onBuildWonder:i})]}),p.jsx("div",{style:{padding:"15px",borderTop:"1px solid var(--border-color)",textAlign:"right",background:"var(--bg-color)"},children:p.jsx("button",{className:"btn",onClick:a,children:"Return to Kingdom"})})]})})},HE=({gameState:r,onInvestTrade:e,hasPyramid:i})=>{var re,se,U,he;const[a,l]=_e.useState(null),[d,f]=_e.useState(0),[y,b]=_e.useState(0),[v,x]=_e.useState(0),S=r.activeTradeRoutes||[],D=()=>{a&&(e(a.id,d,y,{knight:v}),l(null),f(0),b(0),x(0))},P=ne=>{const me=m(y).plus(m(v).times(m(50))),ge=m(Math.max(100,d/100)),Ce=m(Math.min(.9,me.dividedBy(ge).toNumber()));let Ee=ne.risk.times(m(1).minus(Ce));return i&&(Ee=Ee.times(m(.5))),Ee};return p.jsxs("div",{children:[p.jsx("h3",{style:{borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:"Active Caravans"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"10px",marginBottom:"30px"},children:[S.length===0&&p.jsx("div",{style:{color:"var(--text-secondary)"},children:"No active trade routes."}),S.map(ne=>{var R,I;const me=Tc.find(V=>V.id===ne.routeId);if(!me)return null;const ge=(R=ne.startTime)!=null&&R.toNumber?ne.startTime.toNumber():Number(ne.startTime),Ce=(I=ne.duration)!=null&&I.toNumber?ne.duration.toNumber():Number(ne.duration),Ee=(Date.now()-ge)/1e3,M=Math.min(100,Ee/Ce*100);return p.jsxs("div",{style:{padding:"10px",border:"1px solid var(--accent-color)",borderRadius:"4px",background:"#fff"},children:[p.jsxs("div",{style:{fontWeight:"bold"},children:[me.icon," ",me.name]}),p.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Invested: ",ve(ne.goldInvested,r.numberFormat)]}),p.jsx("div",{style:{width:"100%",height:"10px",background:"#eee",marginTop:"5px",borderRadius:"5px"},children:p.jsx("div",{style:{width:`${M}%`,height:"100%",background:"var(--success-color)",borderRadius:"5px",transition:"width 1s linear"}})}),p.jsxs("div",{style:{textAlign:"right",fontSize:"0.8rem"},children:[Math.ceil(Ce-Ee),"s left"]})]},ne.id)})]}),p.jsx("h3",{style:{borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:"Establish New Route"}),a?p.jsxs("div",{style:{padding:"20px",border:"2px solid var(--accent-color)",borderRadius:"8px",background:"#f9fbe7"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[p.jsxs("h4",{style:{margin:0},children:[a.icon," ",a.name]}),p.jsx("button",{className:"btn",style:{background:"#999",padding:"5px 10px",fontSize:"0.8rem"},onClick:()=>l(null),children:"Cancel"})]}),p.jsxs("div",{style:{marginBottom:"15px"},children:[p.jsxs("label",{style:{display:"block",fontWeight:"bold"},children:["Gold Investment (Max ",ve(a.maxInvestment,r.numberFormat),")"]}),p.jsx("input",{type:"range",min:"0",max:Math.min((re=r.gold)!=null&&re.toNumber?r.gold.toNumber():Number(r.gold),(se=a.maxInvestment)!=null&&se.toNumber?a.maxInvestment.toNumber():Number(a.maxInvestment)),value:d,onChange:ne=>f(parseInt(ne.target.value)),style:{width:"100%"}}),p.jsxs("div",{style:{textAlign:"right"},children:[ve(d,r.numberFormat)," G"]})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"15px"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",fontWeight:"bold"},children:"Soldier Escort"}),p.jsx("input",{type:"number",min:"0",max:(U=r.soldiers)!=null&&U.toNumber?r.soldiers.toNumber():Number(r.soldiers),value:y,onChange:ne=>b(parseInt(ne.target.value)),style:{width:"100%",padding:"5px"}}),p.jsxs("div",{style:{fontSize:"0.8rem"},children:["Available: ",ve(r.soldiers,r.numberFormat)]})]}),p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",fontWeight:"bold"},children:"Knight Escort"}),p.jsx("input",{type:"number",min:"0",max:(he=r.eliteUnits.knight)!=null&&he.toNumber?r.eliteUnits.knight.toNumber():Number(r.eliteUnits.knight||0),value:v,onChange:ne=>x(parseInt(ne.target.value)),style:{width:"100%",padding:"5px"}}),p.jsxs("div",{style:{fontSize:"0.8rem"},children:["Available: ",ve(r.eliteUnits.knight||0,r.numberFormat)]})]})]}),p.jsxs("div",{style:{background:"#fff",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Projected Return:"})," ",ve(m(d).times(a.rewardMultiplier),r.numberFormat)," G"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Duration:"})," ",(()=>{var ge;const ne=(ge=a.baseDuration)!=null&&ge.toNumber?a.baseDuration.toNumber():Number(a.baseDuration),me=i?ne*.5:ne;return Math.ceil(me)/60})()," min"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Risk:"})," ",p.jsxs("span",{style:{color:P(a).gt(m(.3))?"red":"green"},children:[P(a).times(m(100)).toFixed(1),"%"]})]})]}),p.jsx("button",{className:"btn",style:{width:"100%"},disabled:d<=0||y===0&&v===0,onClick:D,children:"Dispatch Caravan"})]}):p.jsx("div",{style:{display:"grid",gap:"10px"},children:Tc.map(ne=>p.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"15px",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",background:"#fff"},onClick:()=>l(ne),children:[p.jsx("div",{style:{fontSize:"2rem",marginRight:"15px"},children:ne.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsx("div",{style:{fontWeight:"bold"},children:ne.name}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:ne.description}),p.jsxs("div",{style:{fontSize:"0.8rem",color:"green"},children:["Max Profit: ",ve(ne.rewardMultiplier,r.numberFormat),"x"]})]}),p.jsx("button",{className:"btn",style:{fontSize:"0.8rem"},children:"Select"})]},ne.id))})]})},FE=({gameState:r,onBuildWonder:e})=>{const i=l=>{for(const d of l)if(d.type==="gold"&&r.gold.lt(m(d.amount))||d.type==="soldiers"&&r.soldiers.lt(m(d.amount))||d.type==="renown"&&r.renown.lt(m(d.amount))||["knight","paladin","void_sentinel"].includes(d.type)&&(r.eliteUnits[d.type]||m(0)).lt(m(d.amount)))return!1;return!0},a=l=>l.map((d,f)=>p.jsxs("span",{style:{marginRight:"10px",color:i([d])?"green":"red"},children:[ve(d.amount,r.numberFormat)," ",d.type==="gold"?"G":d.type]},f));return p.jsx("div",{style:{display:"grid",gap:"20px"},children:_v.map(l=>{const d=r.wonders[l.id]||0,f=d>=l.stages.length,y=f?null:l.stages[d],b=y?i(y.cost):!1;return p.jsxs("div",{style:{border:"2px solid var(--accent-color)",borderRadius:"8px",overflow:"hidden"},children:[p.jsxs("div",{style:{background:f?"gold":"#f0f4c3",padding:"15px",display:"flex",alignItems:"center"},children:[p.jsx("div",{style:{fontSize:"3rem",marginRight:"15px"},children:l.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsx("h3",{style:{margin:0,color:"#333"},children:l.name}),p.jsx("div",{style:{fontSize:"0.9rem"},children:l.description}),p.jsxs("div",{style:{marginTop:"5px",fontWeight:"bold",color:"#4a148c"},children:["Bonus: ",l.bonusDescription]})]}),p.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:f?"COMPLETED":`${d} / ${l.stages.length}`})]}),!f&&y&&p.jsxs("div",{style:{padding:"15px",background:"#fff"},children:[p.jsxs("h4",{style:{marginTop:0},children:["Next Stage: ",y.name]}),p.jsx("p",{style:{fontSize:"0.9rem",color:"#666"},children:y.description}),p.jsxs("div",{style:{background:"#eee",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:[p.jsx("strong",{children:"Requirements: "}),a(y.cost)]}),p.jsx("button",{className:"btn",style:{width:"100%",background:b?"var(--accent-color)":"#999"},disabled:!b,onClick:()=>e(l.id),children:"Construct Stage"})]}),f&&p.jsx("div",{style:{padding:"10px",background:"#fff8e1",textAlign:"center",color:"orange",fontWeight:"bold"},children:"This Wonder stands eternal."})]},l.id)})})},QE=({toasts:r})=>p.jsx("div",{className:"toast-container",children:r.map(e=>p.jsxs("div",{className:`toast ${e.type}`,children:[e.type==="success"&&"",e.type==="warning"&&"",e.type==="info"&&"",e.type==="error"&&"",p.jsx("span",{children:e.message})]},e.id))}),YE=()=>{const[r,e]=_e.useState(null);if(_e.useEffect(()=>{const a=f=>{const b=f.target.closest("[data-tooltip]");if(b){const v=b.getAttribute("data-tooltip");v&&e({text:v,x:f.clientX,y:f.clientY})}else e(null)},l=f=>{r&&e(y=>y?{...y,x:f.clientX,y:f.clientY}:null)},d=()=>{e(null)};return document.addEventListener("mouseover",a),document.addEventListener("mousemove",l),document.addEventListener("mouseout",d),()=>{document.removeEventListener("mouseover",a),document.removeEventListener("mousemove",l),document.removeEventListener("mouseout",d)}},[r]),!r)return null;const i={left:r.x+15,top:r.y+15};return r.x+250>window.innerWidth&&(i.left=r.x-260),r.y+100>window.innerHeight&&(i.top=r.y-50),p.jsx("div",{className:"game-tooltip",style:i,children:r.text})},KE=({gameState:r})=>{const{weather:e,buildings:i,totalGold:a}=r,l=D=>i[D]||0;let d="wilderness";l("palace")>0?d="empire":l("castle")>0||l("market")>0?d="city":(l("peasant")>20||l("field")>10||a>500)&&(d="hamlet");let f="",y="";switch(d){case"wilderness":f="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 60%, #556B2F 60%, #556B2F 100%)",y="     ";break;case"hamlet":f="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 65%, #8B4513 65%, #228B22 80%)",y="     ";break;case"city":f="linear-gradient(to bottom, #B0C4DE 0%, #B0C4DE 60%, #696969 60%, #808080 100%)",y="     ";break;case"empire":f="linear-gradient(to bottom, #191970 0%, #4B0082 50%, #FFD700 100%)",y="     ";break}const b=e.current;let v="none",x="",S=0;return b==="rainy"?(v="linear-gradient(to bottom, rgba(0,0,50,0.3), rgba(0,0,100,0.3))",x="    ",S=1):b==="stormy"?(v="linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(50,50,50,0.6))",x="    ",S=1):b==="sunny"?(v="radial-gradient(circle at top right, rgba(255,255,0,0.3), transparent)",x="",S=.6):b==="windy"&&(x="  ",S=.8),p.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:f,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",paddingBottom:"20vh",zIndex:0,overflow:"hidden",transition:"background 2s ease"},children:[p.jsx("div",{style:{position:"absolute",top:"10%",width:"100%",textAlign:"center",fontSize:"5rem",opacity:S,animation:b==="windy"?"float 3s infinite ease-in-out":"none"},children:x}),v!=="none"&&p.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:v,pointerEvents:"none"}}),p.jsx("div",{style:{fontSize:"4rem",textAlign:"center",zIndex:1,textShadow:"0 4px 4px rgba(0,0,0,0.3)",whiteSpace:"nowrap"},children:y}),p.jsx("div",{style:{marginTop:"20px",fontSize:"1.5rem",color:"#fff",textShadow:"2px 2px 4px #000",fontStyle:"italic",zIndex:2,background:"rgba(0,0,0,0.5)",padding:"5px 15px",borderRadius:"15px"},children:"The Kingdom sleeps..."}),p.jsx("style",{children:`
            @keyframes float {
                0% { transform: translateX(0px); }
                50% { transform: translateX(20px); }
                100% { transform: translateX(0px); }
            }
        `})]})},XE=()=>{};var t0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let l=r.charCodeAt(a);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},$E=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const l=r[i++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const d=r[i++];e[a++]=String.fromCharCode((l&31)<<6|d&63)}else if(l>239&&l<365){const d=r[i++],f=r[i++],y=r[i++],b=((l&7)<<18|(d&63)<<12|(f&63)<<6|y&63)-65536;e[a++]=String.fromCharCode(55296+(b>>10)),e[a++]=String.fromCharCode(56320+(b&1023))}else{const d=r[i++],f=r[i++];e[a++]=String.fromCharCode((l&15)<<12|(d&63)<<6|f&63)}}return e.join("")},Ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<r.length;l+=3){const d=r[l],f=l+1<r.length,y=f?r[l+1]:0,b=l+2<r.length,v=b?r[l+2]:0,x=d>>2,S=(d&3)<<4|y>>4;let D=(y&15)<<2|v>>6,P=v&63;b||(P=64,f||(D=64)),a.push(i[x],i[S],i[D],i[P])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(bv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):$E(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<r.length;){const d=i[r.charAt(l++)],y=l<r.length?i[r.charAt(l)]:0;++l;const v=l<r.length?i[r.charAt(l)]:64;++l;const S=l<r.length?i[r.charAt(l)]:64;if(++l,d==null||y==null||v==null||S==null)throw new WE;const D=d<<2|y>>4;if(a.push(D),v!==64){const P=y<<4&240|v>>2;if(a.push(P),S!==64){const re=v<<6&192|S;a.push(re)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class WE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZE=function(r){const e=bv(r);return Ev.encodeByteArray(e,!0)},xc=function(r){return ZE(r).replace(/\./g,"")},JE=function(r){try{return Ev.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=()=>eT().__FIREBASE_DEFAULTS__,nT=()=>{if(typeof process>"u"||typeof t0>"u")return;const r=t0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},iT=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&JE(r[1]);return e&&JSON.parse(e)},zf=()=>{try{return XE()||tT()||nT()||iT()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},rT=r=>{var e,i;return(i=(e=zf())==null?void 0:e.emulatorHosts)==null?void 0:i[r]},sT=r=>{const e=rT(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},Tv=()=>{var r;return(r=zf())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function oT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",l=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[xc(JSON.stringify(i)),xc(JSON.stringify(f)),""].join(".")}const gl={};function uT(){const r={prod:[],emulator:[]};for(const e of Object.keys(gl))gl[e]?r.emulator.push(e):r.prod.push(e);return r}function cT(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let n0=!1;function dT(r,e){if(typeof window>"u"||typeof document>"u"||!kf(window.location.host)||gl[r]===e||gl[r]||n0)return;gl[r]=e;function i(D){return`__firebase__banner__${D}`}const a="__firebase__banner",d=uT().prod.length>0;function f(){const D=document.getElementById(a);D&&D.remove()}function y(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function b(D,P){D.setAttribute("width","24"),D.setAttribute("id",P),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function v(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{n0=!0,f()},D}function x(D,P){D.setAttribute("id",P),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function S(){const D=cT(a),P=i("text"),re=document.getElementById(P)||document.createElement("span"),se=i("learnmore"),U=document.getElementById(se)||document.createElement("a"),he=i("preprendIcon"),ne=document.getElementById(he)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const me=D.element;y(me),x(U,se);const ge=v();b(ne,he),me.append(ne,re,U,ge),document.body.appendChild(me)}d?(re.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,re.innerText="Preview backend running in this workspace."),re.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fT(){var e;const r=(e=zf())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mT(){return!fT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function gT(){try{return typeof indexedDB=="object"}catch{return!1}}function pT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var d;e(((d=l.error)==null?void 0:d.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yT="FirebaseError";class ao extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=yT,Object.setPrototypeOf(this,ao.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xv.prototype.create)}}class xv{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},l=`${this.service}/${e}`,d=this.errors[e],f=d?vT(d,a):"Error",y=`${this.serviceName}: ${f} (${l}).`;return new ao(l,y,a)}}function vT(r,e){return r.replace(_T,(i,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const _T=/\{\$([^}]+)}/g;function Ac(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const l of i){if(!a.includes(l))return!1;const d=r[l],f=e[l];if(i0(d)&&i0(f)){if(!Ac(d,f))return!1}else if(d!==f)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function i0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ja(r){return r&&r._delegate?r._delegate:r}class Tl{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new aT;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TT(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const d=this.getOrInitializeService({instanceIdentifier:l});a.resolve(d)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[d,f]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(d);a===y&&f.resolve(l)}return l}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const d=this.instances.get(a);return d&&e(d,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:ET(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ET(r){return r===Hs?void 0:r}function TT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new bT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(it||(it={}));const AT={debug:it.DEBUG,verbose:it.VERBOSE,info:it.INFO,warn:it.WARN,error:it.ERROR,silent:it.SILENT},ST=it.INFO,wT={[it.DEBUG]:"log",[it.VERBOSE]:"log",[it.INFO]:"info",[it.WARN]:"warn",[it.ERROR]:"error"},CT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),l=wT[e];if(l)console[l](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Av{constructor(e){this.name=e,this._logLevel=ST,this._logHandler=CT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in it))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,it.DEBUG,...e),this._logHandler(this,it.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,it.VERBOSE,...e),this._logHandler(this,it.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,it.INFO,...e),this._logHandler(this,it.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,it.WARN,...e),this._logHandler(this,it.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,it.ERROR,...e),this._logHandler(this,it.ERROR,...e)}}const RT=(r,e)=>e.some(i=>r instanceof i);let r0,s0;function DT(){return r0||(r0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NT(){return s0||(s0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sv=new WeakMap,hf=new WeakMap,wv=new WeakMap,tf=new WeakMap,Lf=new WeakMap;function IT(r){const e=new Promise((i,a)=>{const l=()=>{r.removeEventListener("success",d),r.removeEventListener("error",f)},d=()=>{i(Jr(r.result)),l()},f=()=>{a(r.error),l()};r.addEventListener("success",d),r.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&Sv.set(i,r)}).catch(()=>{}),Lf.set(e,r),e}function MT(r){if(hf.has(r))return;const e=new Promise((i,a)=>{const l=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",f),r.removeEventListener("abort",f)},d=()=>{i(),l()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",d),r.addEventListener("error",f),r.addEventListener("abort",f)});hf.set(r,e)}let ff={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return hf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||wv.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return Jr(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function VT(r){ff=r(ff)}function OT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(nf(this),e,...i);return wv.set(a,e.sort?e.sort():[e]),Jr(a)}:NT().includes(r)?function(...e){return r.apply(nf(this),e),Jr(Sv.get(this))}:function(...e){return Jr(r.apply(nf(this),e))}}function jT(r){return typeof r=="function"?OT(r):(r instanceof IDBTransaction&&MT(r),RT(r,DT())?new Proxy(r,ff):r)}function Jr(r){if(r instanceof IDBRequest)return IT(r);if(tf.has(r))return tf.get(r);const e=jT(r);return e!==r&&(tf.set(r,e),Lf.set(e,r)),e}const nf=r=>Lf.get(r);function zT(r,e,{blocked:i,upgrade:a,blocking:l,terminated:d}={}){const f=indexedDB.open(r,e),y=Jr(f);return a&&f.addEventListener("upgradeneeded",b=>{a(Jr(f.result),b.oldVersion,b.newVersion,Jr(f.transaction),b)}),i&&f.addEventListener("blocked",b=>i(b.oldVersion,b.newVersion,b)),y.then(b=>{d&&b.addEventListener("close",()=>d()),l&&b.addEventListener("versionchange",v=>l(v.oldVersion,v.newVersion,v))}).catch(()=>{}),y}const kT=["get","getKey","getAll","getAllKeys","count"],LT=["put","add","delete","clear"],rf=new Map;function a0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,l=LT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||kT.includes(i)))return;const d=async function(f,...y){const b=this.transaction(f,l?"readwrite":"readonly");let v=b.store;return a&&(v=v.index(y.shift())),(await Promise.all([v[i](...y),l&&b.done]))[0]};return rf.set(e,d),d}VT(r=>({...r,get:(e,i,a)=>a0(e,i)||r.get(e,i,a),has:(e,i)=>!!a0(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(BT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function BT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mf="@firebase/app",o0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new Av("@firebase/app"),PT="@firebase/app-compat",qT="@firebase/analytics-compat",GT="@firebase/analytics",HT="@firebase/app-check-compat",FT="@firebase/app-check",QT="@firebase/auth",YT="@firebase/auth-compat",KT="@firebase/database",XT="@firebase/data-connect",$T="@firebase/database-compat",WT="@firebase/functions",ZT="@firebase/functions-compat",JT="@firebase/installations",ex="@firebase/installations-compat",tx="@firebase/messaging",nx="@firebase/messaging-compat",ix="@firebase/performance",rx="@firebase/performance-compat",sx="@firebase/remote-config",ax="@firebase/remote-config-compat",ox="@firebase/storage",lx="@firebase/storage-compat",ux="@firebase/firestore",cx="@firebase/ai",dx="@firebase/firestore-compat",hx="firebase",fx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="[DEFAULT]",mx={[mf]:"fire-core",[PT]:"fire-core-compat",[GT]:"fire-analytics",[qT]:"fire-analytics-compat",[FT]:"fire-app-check",[HT]:"fire-app-check-compat",[QT]:"fire-auth",[YT]:"fire-auth-compat",[KT]:"fire-rtdb",[XT]:"fire-data-connect",[$T]:"fire-rtdb-compat",[WT]:"fire-fn",[ZT]:"fire-fn-compat",[JT]:"fire-iid",[ex]:"fire-iid-compat",[tx]:"fire-fcm",[nx]:"fire-fcm-compat",[ix]:"fire-perf",[rx]:"fire-perf-compat",[sx]:"fire-rc",[ax]:"fire-rc-compat",[ox]:"fire-gcs",[lx]:"fire-gcs-compat",[ux]:"fire-fst",[dx]:"fire-fst-compat",[cx]:"fire-vertex","fire-js":"fire-js",[hx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc=new Map,gx=new Map,pf=new Map;function l0(r,e){try{r.container.addComponent(e)}catch(i){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function wc(r){const e=r.name;if(pf.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;pf.set(e,r);for(const i of Sc.values())l0(i,r);for(const i of gx.values())l0(i,r);return!0}function px(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function yx(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},es=new xv("app","Firebase",vx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Tl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw es.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=fx;function Cv(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a={name:gf,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw es.create("bad-app-name",{appName:String(l)});if(i||(i=Tv()),!i)throw es.create("no-options");const d=Sc.get(l);if(d){if(Ac(i,d.options)&&Ac(a,d.config))return d;throw es.create("duplicate-app",{appName:l})}const f=new xT(l);for(const b of pf.values())f.addComponent(b);const y=new _x(i,a,f);return Sc.set(l,y),y}function Ex(r=gf){const e=Sc.get(r);if(!e&&r===gf&&Tv())return Cv();if(!e)throw es.create("no-app",{appName:r});return e}function Ka(r,e,i){let a=mx[r]??r;i&&(a+=`-${i}`);const l=a.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(f.join(" "));return}wc(new Tl(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="firebase-heartbeat-database",xx=1,xl="firebase-heartbeat-store";let sf=null;function Rv(){return sf||(sf=zT(Tx,xx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(xl)}catch(i){console.warn(i)}}}}).catch(r=>{throw es.create("idb-open",{originalErrorMessage:r.message})})),sf}async function Ax(r){try{const i=(await Rv()).transaction(xl),a=await i.objectStore(xl).get(Dv(r));return await i.done,a}catch(e){if(e instanceof ao)dr.warn(e.message);else{const i=es.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(i.message)}}}async function u0(r,e){try{const a=(await Rv()).transaction(xl,"readwrite");await a.objectStore(xl).put(e,Dv(r)),await a.done}catch(i){if(i instanceof ao)dr.warn(i.message);else{const a=es.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});dr.warn(a.message)}}}function Dv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx=1024,wx=30;class Cx{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Dx(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=c0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(f=>f.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:l}),this._heartbeatsCache.heartbeats.length>wx){const f=Nx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){dr.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=c0(),{heartbeatsToSend:a,unsentEntries:l}=Rx(this._heartbeatsCache.heartbeats),d=xc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(i){return dr.warn(i),""}}}function c0(){return new Date().toISOString().substring(0,10)}function Rx(r,e=Sx){const i=[];let a=r.slice();for(const l of r){const d=i.find(f=>f.agent===l.agent);if(d){if(d.dates.push(l.date),d0(i)>e){d.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),d0(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class Dx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return gT()?pT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await Ax(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function d0(r){return xc(JSON.stringify({version:2,heartbeats:r})).length}function Nx(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ix(r){wc(new Tl("platform-logger",e=>new UT(e),"PRIVATE")),wc(new Tl("heartbeat",e=>new Cx(e),"PRIVATE")),Ka(mf,o0,r),Ka(mf,o0,"esm2020"),Ka("fire-js","")}Ix("");var Mx="firebase",Vx="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka(Mx,Vx,"app");var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,Nv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,R){function I(){}I.prototype=R.prototype,M.F=R.prototype,M.prototype=new I,M.prototype.constructor=M,M.D=function(V,N,z){for(var w=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)w[Oe-2]=arguments[Oe];return R.prototype[N].apply(V,w)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(M,R,I){I||(I=0);const V=Array(16);if(typeof R=="string")for(var N=0;N<16;++N)V[N]=R.charCodeAt(I++)|R.charCodeAt(I++)<<8|R.charCodeAt(I++)<<16|R.charCodeAt(I++)<<24;else for(N=0;N<16;++N)V[N]=R[I++]|R[I++]<<8|R[I++]<<16|R[I++]<<24;R=M.g[0],I=M.g[1],N=M.g[2];let z=M.g[3],w;w=R+(z^I&(N^z))+V[0]+3614090360&4294967295,R=I+(w<<7&4294967295|w>>>25),w=z+(N^R&(I^N))+V[1]+3905402710&4294967295,z=R+(w<<12&4294967295|w>>>20),w=N+(I^z&(R^I))+V[2]+606105819&4294967295,N=z+(w<<17&4294967295|w>>>15),w=I+(R^N&(z^R))+V[3]+3250441966&4294967295,I=N+(w<<22&4294967295|w>>>10),w=R+(z^I&(N^z))+V[4]+4118548399&4294967295,R=I+(w<<7&4294967295|w>>>25),w=z+(N^R&(I^N))+V[5]+1200080426&4294967295,z=R+(w<<12&4294967295|w>>>20),w=N+(I^z&(R^I))+V[6]+2821735955&4294967295,N=z+(w<<17&4294967295|w>>>15),w=I+(R^N&(z^R))+V[7]+4249261313&4294967295,I=N+(w<<22&4294967295|w>>>10),w=R+(z^I&(N^z))+V[8]+1770035416&4294967295,R=I+(w<<7&4294967295|w>>>25),w=z+(N^R&(I^N))+V[9]+2336552879&4294967295,z=R+(w<<12&4294967295|w>>>20),w=N+(I^z&(R^I))+V[10]+4294925233&4294967295,N=z+(w<<17&4294967295|w>>>15),w=I+(R^N&(z^R))+V[11]+2304563134&4294967295,I=N+(w<<22&4294967295|w>>>10),w=R+(z^I&(N^z))+V[12]+1804603682&4294967295,R=I+(w<<7&4294967295|w>>>25),w=z+(N^R&(I^N))+V[13]+4254626195&4294967295,z=R+(w<<12&4294967295|w>>>20),w=N+(I^z&(R^I))+V[14]+2792965006&4294967295,N=z+(w<<17&4294967295|w>>>15),w=I+(R^N&(z^R))+V[15]+1236535329&4294967295,I=N+(w<<22&4294967295|w>>>10),w=R+(N^z&(I^N))+V[1]+4129170786&4294967295,R=I+(w<<5&4294967295|w>>>27),w=z+(I^N&(R^I))+V[6]+3225465664&4294967295,z=R+(w<<9&4294967295|w>>>23),w=N+(R^I&(z^R))+V[11]+643717713&4294967295,N=z+(w<<14&4294967295|w>>>18),w=I+(z^R&(N^z))+V[0]+3921069994&4294967295,I=N+(w<<20&4294967295|w>>>12),w=R+(N^z&(I^N))+V[5]+3593408605&4294967295,R=I+(w<<5&4294967295|w>>>27),w=z+(I^N&(R^I))+V[10]+38016083&4294967295,z=R+(w<<9&4294967295|w>>>23),w=N+(R^I&(z^R))+V[15]+3634488961&4294967295,N=z+(w<<14&4294967295|w>>>18),w=I+(z^R&(N^z))+V[4]+3889429448&4294967295,I=N+(w<<20&4294967295|w>>>12),w=R+(N^z&(I^N))+V[9]+568446438&4294967295,R=I+(w<<5&4294967295|w>>>27),w=z+(I^N&(R^I))+V[14]+3275163606&4294967295,z=R+(w<<9&4294967295|w>>>23),w=N+(R^I&(z^R))+V[3]+4107603335&4294967295,N=z+(w<<14&4294967295|w>>>18),w=I+(z^R&(N^z))+V[8]+1163531501&4294967295,I=N+(w<<20&4294967295|w>>>12),w=R+(N^z&(I^N))+V[13]+2850285829&4294967295,R=I+(w<<5&4294967295|w>>>27),w=z+(I^N&(R^I))+V[2]+4243563512&4294967295,z=R+(w<<9&4294967295|w>>>23),w=N+(R^I&(z^R))+V[7]+1735328473&4294967295,N=z+(w<<14&4294967295|w>>>18),w=I+(z^R&(N^z))+V[12]+2368359562&4294967295,I=N+(w<<20&4294967295|w>>>12),w=R+(I^N^z)+V[5]+4294588738&4294967295,R=I+(w<<4&4294967295|w>>>28),w=z+(R^I^N)+V[8]+2272392833&4294967295,z=R+(w<<11&4294967295|w>>>21),w=N+(z^R^I)+V[11]+1839030562&4294967295,N=z+(w<<16&4294967295|w>>>16),w=I+(N^z^R)+V[14]+4259657740&4294967295,I=N+(w<<23&4294967295|w>>>9),w=R+(I^N^z)+V[1]+2763975236&4294967295,R=I+(w<<4&4294967295|w>>>28),w=z+(R^I^N)+V[4]+1272893353&4294967295,z=R+(w<<11&4294967295|w>>>21),w=N+(z^R^I)+V[7]+4139469664&4294967295,N=z+(w<<16&4294967295|w>>>16),w=I+(N^z^R)+V[10]+3200236656&4294967295,I=N+(w<<23&4294967295|w>>>9),w=R+(I^N^z)+V[13]+681279174&4294967295,R=I+(w<<4&4294967295|w>>>28),w=z+(R^I^N)+V[0]+3936430074&4294967295,z=R+(w<<11&4294967295|w>>>21),w=N+(z^R^I)+V[3]+3572445317&4294967295,N=z+(w<<16&4294967295|w>>>16),w=I+(N^z^R)+V[6]+76029189&4294967295,I=N+(w<<23&4294967295|w>>>9),w=R+(I^N^z)+V[9]+3654602809&4294967295,R=I+(w<<4&4294967295|w>>>28),w=z+(R^I^N)+V[12]+3873151461&4294967295,z=R+(w<<11&4294967295|w>>>21),w=N+(z^R^I)+V[15]+530742520&4294967295,N=z+(w<<16&4294967295|w>>>16),w=I+(N^z^R)+V[2]+3299628645&4294967295,I=N+(w<<23&4294967295|w>>>9),w=R+(N^(I|~z))+V[0]+4096336452&4294967295,R=I+(w<<6&4294967295|w>>>26),w=z+(I^(R|~N))+V[7]+1126891415&4294967295,z=R+(w<<10&4294967295|w>>>22),w=N+(R^(z|~I))+V[14]+2878612391&4294967295,N=z+(w<<15&4294967295|w>>>17),w=I+(z^(N|~R))+V[5]+4237533241&4294967295,I=N+(w<<21&4294967295|w>>>11),w=R+(N^(I|~z))+V[12]+1700485571&4294967295,R=I+(w<<6&4294967295|w>>>26),w=z+(I^(R|~N))+V[3]+2399980690&4294967295,z=R+(w<<10&4294967295|w>>>22),w=N+(R^(z|~I))+V[10]+4293915773&4294967295,N=z+(w<<15&4294967295|w>>>17),w=I+(z^(N|~R))+V[1]+2240044497&4294967295,I=N+(w<<21&4294967295|w>>>11),w=R+(N^(I|~z))+V[8]+1873313359&4294967295,R=I+(w<<6&4294967295|w>>>26),w=z+(I^(R|~N))+V[15]+4264355552&4294967295,z=R+(w<<10&4294967295|w>>>22),w=N+(R^(z|~I))+V[6]+2734768916&4294967295,N=z+(w<<15&4294967295|w>>>17),w=I+(z^(N|~R))+V[13]+1309151649&4294967295,I=N+(w<<21&4294967295|w>>>11),w=R+(N^(I|~z))+V[4]+4149444226&4294967295,R=I+(w<<6&4294967295|w>>>26),w=z+(I^(R|~N))+V[11]+3174756917&4294967295,z=R+(w<<10&4294967295|w>>>22),w=N+(R^(z|~I))+V[2]+718787259&4294967295,N=z+(w<<15&4294967295|w>>>17),w=I+(z^(N|~R))+V[9]+3951481745&4294967295,M.g[0]=M.g[0]+R&4294967295,M.g[1]=M.g[1]+(N+(w<<21&4294967295|w>>>11))&4294967295,M.g[2]=M.g[2]+N&4294967295,M.g[3]=M.g[3]+z&4294967295}a.prototype.v=function(M,R){R===void 0&&(R=M.length);const I=R-this.blockSize,V=this.C;let N=this.h,z=0;for(;z<R;){if(N==0)for(;z<=I;)l(this,M,z),z+=this.blockSize;if(typeof M=="string"){for(;z<R;)if(V[N++]=M.charCodeAt(z++),N==this.blockSize){l(this,V),N=0;break}}else for(;z<R;)if(V[N++]=M[z++],N==this.blockSize){l(this,V),N=0;break}}this.h=N,this.o+=R},a.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var R=1;R<M.length-8;++R)M[R]=0;R=this.o*8;for(var I=M.length-8;I<M.length;++I)M[I]=R&255,R/=256;for(this.v(M),M=Array(16),R=0,I=0;I<4;++I)for(let V=0;V<32;V+=8)M[R++]=this.g[I]>>>V&255;return M};function d(M,R){var I=y;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=R(M)}function f(M,R){this.h=R;const I=[];let V=!0;for(let N=M.length-1;N>=0;N--){const z=M[N]|0;V&&z==R||(I[N]=z,V=!1)}this.g=I}var y={};function b(M){return-128<=M&&M<128?d(M,function(R){return new f([R|0],R<0?-1:0)}):new f([M|0],M<0?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return S;if(M<0)return U(v(-M));const R=[];let I=1;for(let V=0;M>=I;V++)R[V]=M/I|0,I*=4294967296;return new f(R,0)}function x(M,R){if(M.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(M.charAt(0)=="-")return U(x(M.substring(1),R));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=v(Math.pow(R,8));let V=S;for(let z=0;z<M.length;z+=8){var N=Math.min(8,M.length-z);const w=parseInt(M.substring(z,z+N),R);N<8?(N=v(Math.pow(R,N)),V=V.j(N).add(v(w))):(V=V.j(I),V=V.add(v(w)))}return V}var S=b(0),D=b(1),P=b(16777216);r=f.prototype,r.m=function(){if(se(this))return-U(this).m();let M=0,R=1;for(let I=0;I<this.g.length;I++){const V=this.i(I);M+=(V>=0?V:4294967296+V)*R,R*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(re(this))return"0";if(se(this))return"-"+U(this).toString(M);const R=v(Math.pow(M,6));var I=this;let V="";for(;;){const N=ge(I,R).g;I=he(I,N.j(R));let z=((I.g.length>0?I.g[0]:I.h)>>>0).toString(M);if(I=N,re(I))return z+V;for(;z.length<6;)z="0"+z;V=z+V}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function re(M){if(M.h!=0)return!1;for(let R=0;R<M.g.length;R++)if(M.g[R]!=0)return!1;return!0}function se(M){return M.h==-1}r.l=function(M){return M=he(this,M),se(M)?-1:re(M)?0:1};function U(M){const R=M.g.length,I=[];for(let V=0;V<R;V++)I[V]=~M.g[V];return new f(I,~M.h).add(D)}r.abs=function(){return se(this)?U(this):this},r.add=function(M){const R=Math.max(this.g.length,M.g.length),I=[];let V=0;for(let N=0;N<=R;N++){let z=V+(this.i(N)&65535)+(M.i(N)&65535),w=(z>>>16)+(this.i(N)>>>16)+(M.i(N)>>>16);V=w>>>16,z&=65535,w&=65535,I[N]=w<<16|z}return new f(I,I[I.length-1]&-2147483648?-1:0)};function he(M,R){return M.add(U(R))}r.j=function(M){if(re(this)||re(M))return S;if(se(this))return se(M)?U(this).j(U(M)):U(U(this).j(M));if(se(M))return U(this.j(U(M)));if(this.l(P)<0&&M.l(P)<0)return v(this.m()*M.m());const R=this.g.length+M.g.length,I=[];for(var V=0;V<2*R;V++)I[V]=0;for(V=0;V<this.g.length;V++)for(let N=0;N<M.g.length;N++){const z=this.i(V)>>>16,w=this.i(V)&65535,Oe=M.i(N)>>>16,tt=M.i(N)&65535;I[2*V+2*N]+=w*tt,ne(I,2*V+2*N),I[2*V+2*N+1]+=z*tt,ne(I,2*V+2*N+1),I[2*V+2*N+1]+=w*Oe,ne(I,2*V+2*N+1),I[2*V+2*N+2]+=z*Oe,ne(I,2*V+2*N+2)}for(M=0;M<R;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=R;M<2*R;M++)I[M]=0;return new f(I,0)};function ne(M,R){for(;(M[R]&65535)!=M[R];)M[R+1]+=M[R]>>>16,M[R]&=65535,R++}function me(M,R){this.g=M,this.h=R}function ge(M,R){if(re(R))throw Error("division by zero");if(re(M))return new me(S,S);if(se(M))return R=ge(U(M),R),new me(U(R.g),U(R.h));if(se(R))return R=ge(M,U(R)),new me(U(R.g),R.h);if(M.g.length>30){if(se(M)||se(R))throw Error("slowDivide_ only works with positive integers.");for(var I=D,V=R;V.l(M)<=0;)I=Ce(I),V=Ce(V);var N=Ee(I,1),z=Ee(V,1);for(V=Ee(V,2),I=Ee(I,2);!re(V);){var w=z.add(V);w.l(M)<=0&&(N=N.add(I),z=w),V=Ee(V,1),I=Ee(I,1)}return R=he(M,N.j(R)),new me(N,R)}for(N=S;M.l(R)>=0;){for(I=Math.max(1,Math.floor(M.m()/R.m())),V=Math.ceil(Math.log(I)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),z=v(I),w=z.j(R);se(w)||w.l(M)>0;)I-=V,z=v(I),w=z.j(R);re(z)&&(z=D),N=N.add(z),M=he(M,w)}return new me(N,M)}r.B=function(M){return ge(this,M).h},r.and=function(M){const R=Math.max(this.g.length,M.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)&M.i(V);return new f(I,this.h&M.h)},r.or=function(M){const R=Math.max(this.g.length,M.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)|M.i(V);return new f(I,this.h|M.h)},r.xor=function(M){const R=Math.max(this.g.length,M.g.length),I=[];for(let V=0;V<R;V++)I[V]=this.i(V)^M.i(V);return new f(I,this.h^M.h)};function Ce(M){const R=M.g.length+1,I=[];for(let V=0;V<R;V++)I[V]=M.i(V)<<1|M.i(V-1)>>>31;return new f(I,M.h)}function Ee(M,R){const I=R>>5;R%=32;const V=M.g.length-I,N=[];for(let z=0;z<V;z++)N[z]=R>0?M.i(z+I)>>>R|M.i(z+I+1)<<32-R:M.i(z+I);return new f(N,M.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Nv=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=v,f.fromString=x,ts=f}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});var ac=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iv,hl,Mv,hc,yf,Vv,Ov,jv;(function(){var r,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ac=="object"&&ac];for(var g=0;g<u.length;++g){var E=u[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var a=i(this);function l(u,g){if(g)e:{var E=a;u=u.split(".");for(var A=0;A<u.length-1;A++){var q=u[A];if(!(q in E))break e;E=E[q]}u=u[u.length-1],A=E[u],g=g(A),g!=A&&g!=null&&e(E,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var E=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&E.push([A,g[A]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function y(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function b(u,g,E){return u.call.apply(u.bind,arguments)}function v(u,g,E){return v=b,v.apply(null,arguments)}function x(u,g){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function S(u,g){function E(){}E.prototype=g.prototype,u.Z=g.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(A,q,Y){for(var fe=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)fe[Pe-2]=arguments[Pe];return g.prototype[q].apply(A,fe)}}var D=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const g=u.length;if(g>0){const E=Array(g);for(let A=0;A<g;A++)E[A]=u[A];return E}return[]}function re(u,g){for(let A=1;A<arguments.length;A++){const q=arguments[A];var E=typeof q;if(E=E!="object"?E:q?Array.isArray(q)?"array":E:"null",E=="array"||E=="object"&&typeof q.length=="number"){E=u.length||0;const Y=q.length||0;u.length=E+Y;for(let fe=0;fe<Y;fe++)u[E+fe]=q[fe]}else u.push(q)}}class se{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function U(u){f.setTimeout(()=>{throw u},0)}function he(){var u=M;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ne{constructor(){this.h=this.g=null}add(g,E){const A=me.get();A.set(g,E),this.h?this.h.next=A:this.g=A,this.h=A}}var me=new se(()=>new ge,u=>u.reset());class ge{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Ce,Ee=!1,M=new ne,R=()=>{const u=Promise.resolve(void 0);Ce=()=>{u.then(I)}};function I(){for(var u;u=he();){try{u.h.call(u.g)}catch(E){U(E)}var g=me;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ee=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};f.addEventListener("test",E,g),f.removeEventListener("test",E,g)}catch{}return u})();function w(u){return/^[\s\xa0]*$/.test(u)}function Oe(u,g){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}S(Oe,N),Oe.prototype.init=function(u,g){const E=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(E=="mouseover"?g=u.fromElement:E=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Oe.Z.h.call(this)},Oe.prototype.h=function(){Oe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ce(u,g,E,A,q){this.listener=u,this.proxy=null,this.src=g,this.type=E,this.capture=!!A,this.ha=q,this.key=++Q,this.da=this.fa=!1}function we(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u,g,E){for(const A in u)g.call(E,u[A],A,u)}function Ye(u,g){for(const E in u)g.call(void 0,u[E],E,u)}function C(u){const g={};for(const E in u)g[E]=u[E];return g}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(u,g){let E,A;for(let q=1;q<arguments.length;q++){A=arguments[q];for(E in A)u[E]=A[E];for(let Y=0;Y<$.length;Y++)E=$[Y],Object.prototype.hasOwnProperty.call(A,E)&&(u[E]=A[E])}}function Te(u){this.src=u,this.g={},this.h=0}Te.prototype.add=function(u,g,E,A,q){const Y=u.toString();u=this.g[Y],u||(u=this.g[Y]=[],this.h++);const fe=ze(u,g,A,q);return fe>-1?(g=u[fe],E||(g.fa=!1)):(g=new ce(g,this.src,Y,!!A,q),g.fa=E,u.push(g)),g};function Me(u,g){const E=g.type;if(E in u.g){var A=u.g[E],q=Array.prototype.indexOf.call(A,g,void 0),Y;(Y=q>=0)&&Array.prototype.splice.call(A,q,1),Y&&(we(g),u.g[E].length==0&&(delete u.g[E],u.h--))}}function ze(u,g,E,A){for(let q=0;q<u.length;++q){const Y=u[q];if(!Y.da&&Y.listener==g&&Y.capture==!!E&&Y.ha==A)return q}return-1}var He="closure_lm_"+(Math.random()*1e6|0),wt={};function lt(u,g,E,A,q){if(Array.isArray(g)){for(let Y=0;Y<g.length;Y++)lt(u,g[Y],E,A,q);return null}return E=ms(E),u&&u[tt]?u.J(g,E,y(A)?!!A.capture:!1,q):ii(u,g,E,!1,A,q)}function ii(u,g,E,A,q,Y){if(!g)throw Error("Invalid event type");const fe=y(q)?!!q.capture:!!q;let Pe=Gi(u);if(Pe||(u[He]=Pe=new Te(u)),E=Pe.add(g,E,A,fe,Y),E.proxy)return E;if(A=mr(),E.proxy=A,A.src=u,A.listener=E,u.addEventListener)z||(q=fe),q===void 0&&(q=!1),u.addEventListener(g.toString(),A,q);else if(u.attachEvent)u.attachEvent(Pn(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function mr(){function u(E){return g.call(u.src,u.listener,E)}const g=hs;return u}function gr(u,g,E,A,q){if(Array.isArray(g))for(var Y=0;Y<g.length;Y++)gr(u,g[Y],E,A,q);else A=y(A)?!!A.capture:!!A,E=ms(E),u&&u[tt]?(u=u.i,Y=String(g).toString(),Y in u.g&&(g=u.g[Y],E=ze(g,E,A,q),E>-1&&(we(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete u.g[Y],u.h--)))):u&&(u=Gi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ze(g,E,A,q)),(E=u>-1?g[u]:null)&&pr(E))}function pr(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[tt])Me(g.i,u);else{var E=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(E,A,u.capture):g.detachEvent?g.detachEvent(Pn(E),A):g.addListener&&g.removeListener&&g.removeListener(A),(E=Gi(g))?(Me(E,u),E.h==0&&(E.src=null,g[He]=null)):we(u)}}}function Pn(u){return u in wt?wt[u]:wt[u]="on"+u}function hs(u,g){if(u.da)u=!0;else{g=new Oe(g,this);const E=u.listener,A=u.ha||u.src;u.fa&&pr(u),u=E.call(A,g)}return u}function Gi(u){return u=u[He],u instanceof Te?u:null}var fs="__closure_events_fn_"+(Math.random()*1e9>>>0);function ms(u){return typeof u=="function"?u:(u[fs]||(u[fs]=function(g){return u.handleEvent(g)}),u[fs])}function Rt(){V.call(this),this.i=new Te(this),this.M=this,this.G=null}S(Rt,V),Rt.prototype[tt]=!0,Rt.prototype.removeEventListener=function(u,g,E,A){gr(this,u,g,E,A)};function Mt(u,g){var E,A=u.G;if(A)for(E=[];A;A=A.G)E.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new N(g,u);else if(g instanceof N)g.target=g.target||u;else{var q=g;g=new N(A,u),ye(g,q)}q=!0;let Y,fe;if(E)for(fe=E.length-1;fe>=0;fe--)Y=g.g=E[fe],q=vi(Y,A,!0,g)&&q;if(Y=g.g=u,q=vi(Y,A,!0,g)&&q,q=vi(Y,A,!1,g)&&q,E)for(fe=0;fe<E.length;fe++)Y=g.g=E[fe],q=vi(Y,A,!1,g)&&q}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const E=u.g[g];for(let A=0;A<E.length;A++)we(E[A]);delete u.g[g],u.h--}}this.G=null},Rt.prototype.J=function(u,g,E,A){return this.i.add(String(u),g,!1,E,A)},Rt.prototype.K=function(u,g,E,A){return this.i.add(String(u),g,!0,E,A)};function vi(u,g,E,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let q=!0;for(let Y=0;Y<g.length;++Y){const fe=g[Y];if(fe&&!fe.da&&fe.capture==E){const Pe=fe.listener,Vt=fe.ha||fe.src;fe.fa&&Me(u.i,fe),q=Pe.call(Vt,A)!==!1&&q}}return q&&!A.defaultPrevented}function ea(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=v(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function ta(u){u.g=ea(()=>{u.g=null,u.i&&(u.i=!1,ta(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class nn extends V{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ta(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Hi(u){V.call(this),this.h=u,this.g={}}S(Hi,V);var gs=[];function ps(u){ue(u.g,function(g,E){this.g.hasOwnProperty(E)&&pr(g)},u),u.g={}}Hi.prototype.N=function(){Hi.Z.N.call(this),ps(this)},Hi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=f.JSON.stringify,na=f.JSON.parse,ys=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function B(){}function k(){}var K={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function te(){N.call(this,"d")}S(te,N);function pe(){N.call(this,"c")}S(pe,N);var le={},de=null;function Le(){return de=de||new Rt}le.Ia="serverreachability";function ae(u){N.call(this,le.Ia,u)}S(ae,N);function je(u){const g=Le();Mt(g,new ae(g))}le.STAT_EVENT="statevent";function yt(u,g){N.call(this,le.STAT_EVENT,u),this.stat=g}S(yt,N);function Ae(u){const g=Le();Mt(g,new yt(g,u))}le.Ja="timingevent";function Fe(u,g){N.call(this,le.Ja,u),this.size=g}S(Fe,N);function kt(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function hn(){this.g=!0}hn.prototype.ua=function(){this.g=!1};function vs(u,g,E,A,q,Y){u.info(function(){if(u.g)if(Y){var fe="",Pe=Y.split("&");for(let at=0;at<Pe.length;at++){var Vt=Pe[at].split("=");if(Vt.length>1){const At=Vt[0];Vt=Vt[1];const Fn=At.split("_");fe=Fn.length>=2&&Fn[1]=="type"?fe+(At+"="+Vt+"&"):fe+(At+"=redacted&")}}}else fe=null;else fe=Y;return"XMLHTTP REQ ("+A+") [attempt "+q+"]: "+g+`
`+E+`
`+fe})}function yr(u,g,E,A,q,Y,fe){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+q+"]: "+g+`
`+E+`
`+Y+" "+fe})}function Qe(u,g,E,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+si(u,E)+(A?" "+A:"")})}function Dt(u,g){u.info(function(){return"TIMEOUT: "+g})}hn.prototype.info=function(){};function si(u,g){if(!u.g)return g;if(!g)return null;try{const Y=JSON.parse(g);if(Y){for(u=0;u<Y.length;u++)if(Array.isArray(Y[u])){var E=Y[u];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var q=A[0];if(q!="noop"&&q!="stop"&&q!="close")for(let fe=1;fe<A.length;fe++)A[fe]=""}}}}return ri(Y)}catch{return g}}var Nn={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},vr;function ai(){}S(ai,B),ai.prototype.g=function(){return new XMLHttpRequest},vr=new ai;function _n(u){return encodeURIComponent(String(u))}function oi(u){var g=1;u=u.split(":");const E=[];for(;g>0&&u.length;)E.push(u.shift()),g--;return u.length&&E.push(u.join(":")),E}function Yt(u,g,E,A){this.j=u,this.i=g,this.l=E,this.S=A||1,this.V=new Hi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new In}function In(){this.i=null,this.g="",this.h=!1}var xt={},Kt={};function bn(u,g,E){u.M=1,u.A=_s(Ut(g)),u.u=E,u.R=!0,ia(u,null)}function ia(u,g){u.F=Date.now(),_i(u),u.B=Ut(u.A);var E=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),oa(E.i,"t",A),u.C=0,E=u.j.L,u.h=new In,u.g=Zl(u.j,E?g:null,!u.u),u.P>0&&(u.O=new nn(v(u.Y,u,u.g),u.P)),g=u.V,E=u.g,A=u.ba;var q="readystatechange";Array.isArray(q)||(q&&(gs[0]=q.toString()),q=gs);for(let Y=0;Y<q.length;Y++){const fe=lt(E,q[Y],A||g.handleEvent,!1,g.h||g);if(!fe)break;g.g[fe.key]=fe}g=u.J?C(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),je(),vs(u.i,u.v,u.B,u.l,u.S,u.u)}Yt.prototype.ba=function(u){u=u.target;const g=this.O;g&&ci(u)==3?g.j():this.Y(u)},Yt.prototype.Y=function(u){try{if(u==this.g)e:{const Pe=ci(this.g),Vt=this.g.ya(),at=this.g.ca();if(!(Pe<3)&&(Pe!=3||this.g&&(this.h.h||this.g.la()||rn(this.g)))){this.K||Pe!=4||Vt==7||(Vt==8||at<=0?je(3):je(2)),bi(this);var g=this.g.ca();this.X=g;var E=Zc(this);if(this.o=g==200,yr(this.i,this.v,this.B,this.l,this.S,Pe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,q=this.g;if((A=q.g?q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(A)){var Y=A;break t}}Y=null}if(u=Y)Qe(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ei(this,u);else{this.o=!1,this.m=3,Ae(12),Mn(this),qn(this);break e}}if(this.R){u=!0;let At;for(;!this.K&&this.C<E.length;)if(At=Ul(this,E),At==Kt){Pe==4&&(this.m=4,Ae(14),u=!1),Qe(this.i,this.l,null,"[Incomplete Response]");break}else if(At==xt){this.m=4,Ae(15),Qe(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else Qe(this.i,this.l,At,null),Ei(this,At);if(Ll(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pe!=4||E.length!=0||this.h.h||(this.m=1,Ae(16),u=!1),this.o=this.o&&u,!u)Qe(this.i,this.l,E,"[Invalid Chunked Response]"),Mn(this),qn(this);else if(E.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),Co(fe),fe.P=!0,Ae(11))}}else Qe(this.i,this.l,E,null),Ei(this,E);Pe==4&&Mn(this),this.o&&!this.K&&(Pe==4?Kl(this.j,this):(this.o=!1,_i(this)))}else Yi(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,Ae(12)):(this.m=0,Ae(13)),Mn(this),qn(this)}}}catch{}finally{}};function Zc(u){if(!Ll(u))return u.g.la();const g=rn(u.g);if(g==="")return"";let E="";const A=g.length,q=ci(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Mn(u),qn(u),"";u.h.i=new f.TextDecoder}for(let Y=0;Y<A;Y++)u.h.h=!0,E+=u.h.i.decode(g[Y],{stream:!(q&&Y==A-1)});return g.length=0,u.h.g+=E,u.C=0,u.h.g}function Ll(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Ul(u,g){var E=u.C,A=g.indexOf(`
`,E);return A==-1?Kt:(E=Number(g.substring(E,A)),isNaN(E)?xt:(A+=1,A+E>g.length?Kt:(g=g.slice(A,A+E),u.C=A+E,g)))}Yt.prototype.cancel=function(){this.K=!0,Mn(this)};function _i(u){u.T=Date.now()+u.H,ra(u,u.H)}function ra(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=kt(v(u.aa,u),g)}function bi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}Yt.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Dt(this.i,this.B),this.M!=2&&(je(),Ae(17)),Mn(this),this.m=2,qn(this)):ra(this,this.T-u)};function qn(u){u.j.I==0||u.K||Kl(u.j,u)}function Mn(u){bi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,ps(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ei(u,g){try{var E=u.j;if(E.I!=0&&(E.g==u||xi(E.h,u))){if(!u.L&&xi(E.h,u)&&E.I==3){try{var A=E.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var q=A;if(q[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)ha(E),wr(E);else break e;ws(E),Ae(18)}}else E.xa=q[1],0<E.xa-E.K&&q[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=kt(v(E.Va,E),6e3));Ti(E.h)<=1&&E.ta&&(E.ta=void 0)}else Di(E,11)}else if((u.L||E.g==u)&&ha(E),!w(g))for(q=E.Ba.g.parse(g),g=0;g<q.length;g++){let at=q[g];const At=at[0];if(!(At<=E.K))if(E.K=At,at=at[1],E.I==2)if(at[0]=="c"){E.M=at[1],E.ba=at[2];const Fn=at[3];Fn!=null&&(E.ka=Fn,E.j.info("VER="+E.ka));const Ni=at[4];Ni!=null&&(E.za=Ni,E.j.info("SVER="+E.za));const di=at[5];di!=null&&typeof di=="number"&&di>0&&(A=1.5*di,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const hi=u.g;if(hi){const Cs=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var Y=A.h;Y.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(go(Y,Y.h),Y.h=null))}if(A.G){const fa=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(A.wa=fa,ct(A.J,A.G,fa))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var fe=u;if(A.na=Wl(A,A.L?A.ba:null,A.W),fe.L){po(A.h,fe);var Pe=fe,Vt=A.O;Vt&&(Pe.H=Vt),Pe.D&&(bi(Pe),_i(Pe)),A.g=fe}else Ql(A);E.i.length>0&&Ri(E)}else at[0]!="stop"&&at[0]!="close"||Di(E,7);else E.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Di(E,7):So(E):at[0]!="noop"&&E.l&&E.l.qa(at),E.A=0)}}je(4)}catch{}}var Lt=class{constructor(u,g){this.g=u,this.map=g}};function fo(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function mo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ti(u){return u.h?1:u.g?u.g.size:0}function xi(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function go(u,g){u.g?u.g.add(g):u.h=g}function po(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}fo.prototype.cancel=function(){if(this.i=yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function yo(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const E of u.g.values())g=g.concat(E.G);return g}return P(u.i)}var Bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sa(u,g){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const A=u[E].indexOf("=");let q,Y=null;A>=0?(q=u[E].substring(0,A),Y=u[E].substring(A+1)):q=u[E],g(q,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Vn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof Vn?(this.l=u.l,Jt(this,u.j),this.o=u.o,this.g=u.g,_r(this,u.u),this.h=u.h,vo(this,Hl(u.i)),this.m=u.m):u&&(g=String(u).match(Bl))?(this.l=!1,Jt(this,g[1]||"",!0),this.o=Ai(g[2]||""),this.g=Ai(g[3]||"",!0),_r(this,g[4]),this.h=Ai(g[5]||"",!0),vo(this,g[6]||"",!0),this.m=Ai(g[7]||"")):(this.l=!1,this.i=new Er(null,this.l))}Vn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(bs(g,aa,!0),":");var E=this.g;return(E||g=="file")&&(u.push("//"),(g=this.o)&&u.push(bs(g,aa,!0),"@"),u.push(_n(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(bs(E,E.charAt(0)=="/"?_o:Pl,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",bs(E,ql)),u.join("")},Vn.prototype.resolve=function(u){const g=Ut(this);let E=!!u.j;E?Jt(g,u.j):E=!!u.o,E?g.o=u.o:E=!!u.g,E?g.g=u.g:E=u.u!=null;var A=u.h;if(E)_r(g,u.u);else if(E=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var q=g.h.lastIndexOf("/");q!=-1&&(A=g.h.slice(0,q+1)+A)}if(q=A,q==".."||q==".")A="";else if(q.indexOf("./")!=-1||q.indexOf("/.")!=-1){A=q.lastIndexOf("/",0)==0,q=q.split("/");const Y=[];for(let fe=0;fe<q.length;){const Pe=q[fe++];Pe=="."?A&&fe==q.length&&Y.push(""):Pe==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&fe==q.length&&Y.push("")):(Y.push(Pe),A=!0)}A=Y.join("/")}else A=q}return E?g.h=A:E=u.i.toString()!=="",E?vo(g,Hl(u.i)):E=!!u.m,E&&(g.m=u.m),g};function Ut(u){return new Vn(u)}function Jt(u,g,E){u.j=E?Ai(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function _r(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function vo(u,g,E){g instanceof Er?(u.i=g,la(u.i,u.l)):(E||(g=bs(g,br)),u.i=new Er(g,u.l))}function ct(u,g,E){u.i.set(g,E)}function _s(u){return ct(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ai(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bs(u,g,E){return typeof u=="string"?(u=encodeURI(u).replace(g,En),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function En(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var aa=/[#\/\?@]/g,Pl=/[#\?:]/g,_o=/[#\?]/g,br=/[#\?@]/g,ql=/#/g;function Er(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Tn(u){u.g||(u.g=new Map,u.h=0,u.i&&sa(u.i,function(g,E){u.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}r=Er.prototype,r.add=function(u,g){Tn(this),this.i=null,u=Tr(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(g),this.h+=1,this};function Gl(u,g){Tn(u),g=Tr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function bo(u,g){return Tn(u),g=Tr(u,g),u.g.has(g)}r.forEach=function(u,g){Tn(this),this.g.forEach(function(E,A){E.forEach(function(q){u.call(g,q,A,this)},this)},this)};function Eo(u,g){Tn(u);let E=[];if(typeof g=="string")bo(u,g)&&(E=E.concat(u.g.get(Tr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)E=E.concat(u[g]);return E}r.set=function(u,g){return Tn(this),this.i=null,u=Tr(this,u),bo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=Eo(this,u),u.length>0?String(u[0]):g):g};function oa(u,g,E){Gl(u,g),E.length>0&&(u.i=null,u.g.set(Tr(u,g),P(E)),u.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var E=g[A];const q=_n(E);E=Eo(this,E);for(let Y=0;Y<E.length;Y++){let fe=q;E[Y]!==""&&(fe+="="+_n(E[Y])),u.push(fe)}}return this.i=u.join("&")};function Hl(u){const g=new Er;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Tr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function la(u,g){g&&!u.j&&(Tn(u),u.i=null,u.g.forEach(function(E,A){const q=A.toLowerCase();A!=q&&(Gl(this,A),oa(this,q,E))},u)),u.j=g}function li(u,g){const E=new hn;if(f.Image){const A=new Image;A.onload=x(Gn,E,"TestLoadImage: loaded",!0,g,A),A.onerror=x(Gn,E,"TestLoadImage: error",!1,g,A),A.onabort=x(Gn,E,"TestLoadImage: abort",!1,g,A),A.ontimeout=x(Gn,E,"TestLoadImage: timeout",!1,g,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function To(u,g){const E=new hn,A=new AbortController,q=setTimeout(()=>{A.abort(),Gn(E,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(Y=>{clearTimeout(q),Y.ok?Gn(E,"TestPingServer: ok",!0,g):Gn(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(q),Gn(E,"TestPingServer: error",!1,g)})}function Gn(u,g,E,A,q){try{q&&(q.onload=null,q.onerror=null,q.onabort=null,q.ontimeout=null),A(E)}catch{}}function xr(){this.g=new ys}function Si(u){this.i=u.Sb||null,this.h=u.ab||!1}S(Si,B),Si.prototype.g=function(){return new Es(this.i,this.h)};function Es(u,g){Rt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Es,Rt),r=Es.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,ui(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ar(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ua(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ua(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Ar(this):ui(this),this.readyState==3&&ua(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Ar(this))},r.Na=function(u){this.g&&(this.response=u,Ar(this))},r.ga=function(){this.g&&Ar(this)};function Ar(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ui(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=g.next();return u.join(`\r
`)};function ui(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Hn(u){let g="";return ue(u,function(E,A){g+=A,g+=":",g+=E,g+=`\r
`}),g}function Ts(u,g,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=Hn(E),typeof u=="string"?E!=null&&_n(E):ct(u,g,E))}function ft(u){Rt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(ft,Rt);var wi=/^https?$/i,xo=["POST","PUT"];r=ft.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():vr.g(),this.g.onreadystatechange=D(v(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Y){xs(this,Y);return}if(u=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var q in A)E.set(q,A[q]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())E.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),q=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(xo,g,void 0)>=0)||A||q||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,fe]of E)this.g.setRequestHeader(Y,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Y){xs(this,Y)}};function xs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,Ao(u),Qi(u)}function Ao(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),Qi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qi(this,!0)),ft.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?As(this):this.Xa())},r.Xa=function(){As(this)};function As(u){if(u.h&&typeof d<"u"){if(u.v&&ci(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),ci(u)==4){u.h=!1;try{const Y=u.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var A;if(A=Y===0){let fe=String(u.D).match(Bl)[1]||null;!fe&&f.self&&f.self.location&&(fe=f.self.location.protocol.slice(0,-1)),A=!wi.test(fe?fe.toLowerCase():"")}E=A}if(E)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var q=ci(u)>2?u.g.statusText:""}catch{q=""}u.l=q+" ["+u.ca()+"]",Ao(u)}}finally{Qi(u)}}}}function Qi(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,g||Mt(u,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ci(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),na(g)}};function rn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Yi(u){const g={};u=(u.g&&ci(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(w(u[A]))continue;var E=oi(u[A]);const q=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=g[q]||[];g[q]=Y,Y.push(E)}Ye(g,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ci(u,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||g}function Sr(u){this.za=0,this.i=[],this.j=new hn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ci("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ci("baseRetryDelayMs",5e3,u),this.Za=Ci("retryDelaySeedMs",1e4,u),this.Ta=Ci("forwardChannelMaxRetries",2,u),this.va=Ci("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new fo(u&&u.concurrentRequestLimit),this.Ba=new xr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Sr.prototype,r.ka=8,r.I=1,r.connect=function(u,g,E,A){Ae(0),this.W=u,this.H=g||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=Wl(this,null,this.W),Ri(this)};function So(u){if(ca(u),u.I==3){var g=u.V++,E=Ut(u.J);if(ct(E,"SID",u.M),ct(E,"RID",g),ct(E,"TYPE","terminate"),Ss(u,E),g=new Yt(u,u.j,g),g.M=2,g.A=_s(Ut(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=g.A,E=!0),E||(g.g=Zl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),_i(g)}$l(u)}function wr(u){u.g&&(Co(u),u.g.cancel(),u.g=null)}function ca(u){wr(u),u.v&&(f.clearTimeout(u.v),u.v=null),ha(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ri(u){if(!mo(u.h)&&!u.m){u.m=!0;var g=u.Ea;Ce||R(),Ee||(Ce(),Ee=!0),M.add(g,u),u.D=0}}function da(u,g){return Ti(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=kt(v(u.Ea,u,g),Xl(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const q=new Yt(this,this.j,u);let Y=this.o;if(this.U&&(Y?(Y=C(Y),ye(Y,this.U)):Y=this.U),this.u!==null||this.R||(q.J=Y,Y=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Fl(this,q,g),E=Ut(this.J),ct(E,"RID",u),ct(E,"CVER",22),this.G&&ct(E,"X-HTTP-Session-Id",this.G),Ss(this,E),Y&&(this.R?g="headers="+_n(Hn(Y))+"&"+g:this.u&&Ts(E,this.u,Y)),go(this.h,q),this.Ra&&ct(E,"TYPE","init"),this.S?(ct(E,"$req",g),ct(E,"SID","null"),q.U=!0,bn(q,E,null)):bn(q,E,g),this.I=2}}else this.I==3&&(u?wo(this,u):this.i.length==0||mo(this.h)||wo(this))};function wo(u,g){var E;g?E=g.l:E=u.V++;const A=Ut(u.J);ct(A,"SID",u.M),ct(A,"RID",E),ct(A,"AID",u.K),Ss(u,A),u.u&&u.o&&Ts(A,u.u,u.o),E=new Yt(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Fl(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),go(u.h,E),bn(E,A,g)}function Ss(u,g){u.H&&ue(u.H,function(E,A){ct(g,A,E)}),u.l&&ue({},function(E,A){ct(g,A,E)})}function Fl(u,g,E){E=Math.min(u.i.length,E);const A=u.l?v(u.l.Ka,u.l,u):null;e:{var q=u.i;let Pe=-1;for(;;){const Vt=["count="+E];Pe==-1?E>0?(Pe=q[0].g,Vt.push("ofs="+Pe)):Pe=0:Vt.push("ofs="+Pe);let at=!0;for(let At=0;At<E;At++){var Y=q[At].g;const Fn=q[At].map;if(Y-=Pe,Y<0)Pe=Math.max(0,q[At].g-100),at=!1;else try{Y="req"+Y+"_"||"";try{var fe=Fn instanceof Map?Fn:Object.entries(Fn);for(const[Ni,di]of fe){let hi=di;y(di)&&(hi=ri(di)),Vt.push(Y+Ni+"="+encodeURIComponent(hi))}}catch(Ni){throw Vt.push(Y+"type="+encodeURIComponent("_badmap")),Ni}}catch{A&&A(Fn)}}if(at){fe=Vt.join("&");break e}}fe=void 0}return u=u.i.splice(0,E),g.G=u,fe}function Ql(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Ce||R(),Ee||(Ce(),Ee=!0),M.add(g,u),u.A=0}}function ws(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=kt(v(u.Da,u),Xl(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Yl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=kt(v(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ae(10),wr(this),Yl(this))};function Co(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Yl(u){u.g=new Yt(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Ut(u.na);ct(g,"RID","rpc"),ct(g,"SID",u.M),ct(g,"AID",u.K),ct(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ct(g,"TO",u.ia),ct(g,"TYPE","xmlhttp"),Ss(u,g),u.u&&u.o&&Ts(g,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=_s(Ut(g)),E.u=null,E.R=!0,ia(E,u)}r.Va=function(){this.C!=null&&(this.C=null,wr(this),ws(this),Ae(19))};function ha(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Kl(u,g){var E=null;if(u.g==g){ha(u),Co(u),u.g=null;var A=2}else if(xi(u.h,g))E=g.G,po(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var q=u.D;A=Le(),Mt(A,new Fe(A,E)),Ri(u)}else Ql(u);else if(q=g.m,q==3||q==0&&g.X>0||!(A==1&&da(u,g)||A==2&&ws(u)))switch(E&&E.length>0&&(g=u.h,g.i=g.i.concat(E)),q){case 1:Di(u,5);break;case 4:Di(u,10);break;case 3:Di(u,6);break;default:Di(u,2)}}}function Xl(u,g){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*g}function Di(u,g){if(u.j.info("Error code "+g),g==2){var E=v(u.bb,u),A=u.Ua;const q=!A;A=new Vn(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Jt(A,"https"),_s(A),q?li(A.toString(),E):To(A.toString(),E)}else Ae(2);u.I=0,u.l&&u.l.pa(g),$l(u),ca(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ae(2)):(this.j.info("Failed to ping google.com"),Ae(1))};function $l(u){if(u.I=0,u.ja=[],u.l){const g=yo(u.h);(g.length!=0||u.i.length!=0)&&(re(u.ja,g),re(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function Wl(u,g,E){var A=E instanceof Vn?Ut(E):new Vn(E);if(A.g!="")g&&(A.g=g+"."+A.g),_r(A,A.u);else{var q=f.location;A=q.protocol,g=g?g+"."+q.hostname:q.hostname,q=+q.port;const Y=new Vn(null);A&&Jt(Y,A),g&&(Y.g=g),q&&_r(Y,q),E&&(Y.h=E),A=Y}return E=u.G,g=u.wa,E&&g&&ct(A,E,g),ct(A,"VER",u.ka),Ss(u,A),A}function Zl(u,g,E){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ft(new Si({ab:E})):new ft(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jl(){}r=Jl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Cr(){}Cr.prototype.g=function(u,g){return new yn(u,g)};function yn(u,g){Rt.call(this),this.g=new Sr(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!w(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Ki(this)}S(yn,Rt),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){So(this.g)},yn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=ri(u),u=E);g.i.push(new Lt(g.Ya++,u)),g.I==3&&Ri(g)},yn.prototype.N=function(){this.g.l=null,delete this.j,So(this.g),delete this.g,yn.Z.N.call(this)};function eu(u){te.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const E in g){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}S(eu,te);function tu(){pe.call(this),this.status=1}S(tu,pe);function Ki(u){this.g=u}S(Ki,Jl),Ki.prototype.ra=function(){Mt(this.g,"a")},Ki.prototype.qa=function(u){Mt(this.g,new eu(u))},Ki.prototype.pa=function(u){Mt(this.g,new tu)},Ki.prototype.oa=function(){Mt(this.g,"b")},Cr.prototype.createWebChannel=Cr.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,jv=function(){return new Cr},Ov=function(){return Le()},Vv=le,yf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Nn.NO_ERROR=0,Nn.TIMEOUT=8,Nn.HTTP_ERROR=6,hc=Nn,Fi.COMPLETE="complete",Mv=Fi,k.EventType=K,K.OPEN="a",K.CLOSE="b",K.ERROR="c",K.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,hl=k,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,Iv=ft}).apply(typeof ac<"u"?ac:typeof self<"u"?self:typeof window<"u"?window:{});const f0="@firebase/firestore",m0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Av("@firebase/firestore");function Ga(){return Ks.logLevel}function xe(r,...e){if(Ks.logLevel<=it.DEBUG){const i=e.map(Uf);Ks.debug(`Firestore (${oo}): ${r}`,...i)}}function hr(r,...e){if(Ks.logLevel<=it.ERROR){const i=e.map(Uf);Ks.error(`Firestore (${oo}): ${r}`,...i)}}function eo(r,...e){if(Ks.logLevel<=it.WARN){const i=e.map(Uf);Ks.warn(`Firestore (${oo}): ${r}`,...i)}}function Uf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(r,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,zv(r,a,i)}function zv(r,e,i){let a=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw hr(a),new Error(a)}function ut(r,e,i,a){let l="Unexpected state";typeof i=="string"?l=i:a=i,r||zv(e,l,a)}function Be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends ao{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ox{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(gn.UNAUTHENTICATED)))}shutdown(){}}class jx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class zx{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){ut(this.o===void 0,42304);let a=this.i;const l=b=>this.i!==a?(a=this.i,i(b)):Promise.resolve();let d=new ns;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new ns,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const b=d;e.enqueueRetryable((async()=>{await b.promise,await l(this.currentUser)}))},y=b=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((b=>y(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new ns)}}),0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ut(typeof a.accessToken=="string",31837,{l:a}),new kv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class kx{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lx{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new kx(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class g0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ux{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){ut(this.o===void 0,3512);const a=d=>{d.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,xe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>a(d)))};const l=d=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>l(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?l(d):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new g0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(ut(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new g0(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=Bx(40);for(let d=0;d<l.length;++d)a.length<20&&l[d]<i&&(a+=e.charAt(l[d]%62))}return a}}function Ze(r,e){return r<e?-1:r>e?1:0}function vf(r,e){const i=Math.min(r.length,e.length);for(let a=0;a<i;a++){const l=r.charAt(a),d=e.charAt(a);if(l!==d)return af(l)===af(d)?Ze(l,d):af(l)?1:-1}return Ze(r.length,e.length)}const Px=55296,qx=57343;function af(r){const e=r.charCodeAt(0);return e>=Px&&e<=qx}function to(r,e,i){return r.length===e.length&&r.every(((a,l)=>i(a,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="__name__";class zi{constructor(e,i,a){i===void 0?i=0:i>e.length&&Ve(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&Ve(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let l=0;l<a;l++){const d=zi.compareSegments(e.get(l),i.get(l));if(d!==0)return d}return Ze(e.length,i.length)}static compareSegments(e,i){const a=zi.isNumericId(e),l=zi.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?zi.extractNumericId(e).compare(zi.extractNumericId(i)):vf(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class _t extends zi{construct(e,i,a){return new _t(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new be(ee.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((l=>l.length>0)))}return new _t(i)}static emptyPath(){return new _t([])}}const Gx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends zi{construct(e,i,a){return new cn(e,i,a)}static isValidIdentifier(e){return Gx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p0}static keyField(){return new cn([p0])}static fromServerFormat(e){const i=[];let a="",l=0;const d=()=>{if(a.length===0)throw new be(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let f=!1;for(;l<e.length;){const y=e[l];if(y==="\\"){if(l+1===e.length)throw new be(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[l+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new be(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=b,l+=2}else y==="`"?(f=!f,l++):y!=="."||f?(a+=y,l++):(d(),l++)}if(d(),f)throw new be(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(i)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(_t.fromString(e))}static fromName(e){return new Ne(_t.fromString(e).popFirst(5))}static empty(){return new Ne(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return _t.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(r,e,i){if(!i)throw new be(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function Hx(r,e,i,a){if(e===!0&&a===!0)throw new be(ee.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function y0(r){if(!Ne.isDocumentKey(r))throw new be(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function v0(r){if(Ne.isDocumentKey(r))throw new be(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Uv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Uc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Ve(12329,{type:typeof r})}function Al(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Uc(r);throw new be(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}function Fx(r,e){if(e<=0)throw new be(ee.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(r,e){const i={typeString:r};return e&&(i.value=e),i}function Vl(r,e){if(!Uv(r))throw new be(ee.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const l=e[a].typeString,d="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const f=r[a];if(l&&typeof f!==l){i=`JSON field '${a}' must be a ${l}.`;break}if(d!==void 0&&f!==d.value){i=`Expected '${a}' field to equal '${d.value}'`;break}}if(i)throw new be(ee.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=-62135596800,b0=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*b0);return new Tt(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new be(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new be(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<_0)throw new be(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b0}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Vl(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Qt("string",Tt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{static fromTimestamp(e){return new ke(e)}static min(){return new ke(new Tt(0,0))}static max(){return new ke(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sl=-1;function Qx(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,l=ke.fromTimestamp(a===1e9?new Tt(i+1,0):new Tt(i,a));return new rs(l,Ne.empty(),e)}function Yx(r){return new rs(r.readTime,r.key,Sl)}class rs{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new rs(ke.min(),Ne.empty(),Sl)}static max(){return new rs(ke.max(),Ne.empty(),Sl)}}function Kx(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=Ne.comparator(r.documentKey,e.documentKey),i!==0?i:Ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $x{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lo(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==Xx)throw r;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new ie(((a,l)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(a,l)},this.catchCallback=d=>{this.wrapFailure(i,d).next(a,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof ie?i:ie.resolve(i)}catch(i){return ie.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):ie.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):ie.reject(i)}static resolve(e){return new ie(((i,a)=>{i(e)}))}static reject(e){return new ie(((i,a)=>{a(e)}))}static waitFor(e){return new ie(((i,a)=>{let l=0,d=0,f=!1;e.forEach((y=>{++l,y.next((()=>{++d,f&&d===l&&i()}),(b=>a(b)))})),f=!0,d===l&&i()}))}static or(e){let i=ie.resolve(!1);for(const a of e)i=i.next((l=>l?ie.resolve(l):a()));return i}static forEach(e,i){const a=[];return e.forEach(((l,d)=>{a.push(i.call(this,l,d))})),this.waitFor(a)}static mapArray(e,i){return new ie(((a,l)=>{const d=e.length,f=new Array(d);let y=0;for(let b=0;b<d;b++){const v=b;i(e[v]).next((x=>{f[v]=x,++y,y===d&&a(f)}),(x=>l(x)))}}))}static doWhile(e,i){return new ie(((a,l)=>{const d=()=>{e()===!0?i().next((()=>{d()}),l):a()};d()}))}}function Wx(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function uo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=-1;function Pc(r){return r==null}function Cc(r){return r===0&&1/r==-1/0}function Zx(r){return typeof r=="number"&&Number.isInteger(r)&&!Cc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="";function Jx(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=E0(e)),e=eA(r.get(i),e);return E0(e)}function eA(r,e){let i=e;const a=r.length;for(let l=0;l<a;l++){const d=r.charAt(l);switch(d){case"\0":i+="";break;case Bv:i+="";break;default:i+=d}}return i}function E0(r){return r+Bv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function $s(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function Pv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,i){this.comparator=e,this.root=i||un.EMPTY}insert(e,i){return new Ct(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Ct(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oc(this.root,e,this.comparator,!1)}getReverseIterator(){return new oc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oc(this.root,e,this.comparator,!0)}}class oc{constructor(e,i,a,l){this.isReverse=l,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=i?a(e.key,i):1,i&&l&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,i,a,l,d){this.key=e,this.value=i,this.color=a??un.RED,this.left=l??un.EMPTY,this.right=d??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,l,d){return new un(e??this.key,i??this.value,a??this.color,l??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let l=this;const d=a(e,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(e,i,a),null):d===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return un.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,i,a,l,d){return this}insert(e,i,a){return new un(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.comparator=e,this.data=new Ct(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new x0(this.data.getIterator())}getIteratorFrom(e){return new x0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof Zt)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,d=a.getNext().key;if(this.comparator(l,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Zt(this.comparator);return i.data=e,i}}class x0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new pi([])}unionWith(e){let i=new Zt(cn.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new pi(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return to(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new qv("Invalid base64 string: "+d):d}})(e);return new dn(i)}static fromUint8Array(e){const i=(function(l){let d="";for(let f=0;f<l.length;++f)d+=String.fromCharCode(l[f]);return d})(e);return new dn(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const tA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ss(r){if(ut(!!r,39018),typeof r=="string"){let e=0;const i=tA.exec(r);if(ut(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function as(r){return typeof r=="string"?dn.fromBase64String(r):dn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="server_timestamp",Hv="__type__",Fv="__previous_value__",Qv="__local_write_time__";function qf(r){var i,a;return((a=(((i=r==null?void 0:r.mapValue)==null?void 0:i.fields)||{})[Hv])==null?void 0:a.stringValue)===Gv}function qc(r){const e=r.mapValue.fields[Fv];return qf(e)?qc(e):e}function wl(r){const e=ss(r.mapValue.fields[Qv].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,i,a,l,d,f,y,b,v,x){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.longPollingOptions=b,this.useFetchStreams=v,this.isUsingEmulator=x}}const Rc="(default)";class Cl{constructor(e,i){this.projectId=e,this.database=i||Rc}static empty(){return new Cl("","")}get isDefaultDatabase(){return this.database===Rc}isEqual(e){return e instanceof Cl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__type__",iA="__max__",lc={mapValue:{}},Kv="__vector__",Dc="value";function os(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qf(r)?4:sA(r)?9007199254740991:rA(r)?10:11:Ve(28295,{value:r})}function qi(r,e){if(r===e)return!0;const i=os(r);if(i!==os(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return wl(r).isEqual(wl(e));case 3:return(function(l,d){if(typeof l.timestampValue=="string"&&typeof d.timestampValue=="string"&&l.timestampValue.length===d.timestampValue.length)return l.timestampValue===d.timestampValue;const f=ss(l.timestampValue),y=ss(d.timestampValue);return f.seconds===y.seconds&&f.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,d){return as(l.bytesValue).isEqual(as(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,d){return zt(l.geoPointValue.latitude)===zt(d.geoPointValue.latitude)&&zt(l.geoPointValue.longitude)===zt(d.geoPointValue.longitude)})(r,e);case 2:return(function(l,d){if("integerValue"in l&&"integerValue"in d)return zt(l.integerValue)===zt(d.integerValue);if("doubleValue"in l&&"doubleValue"in d){const f=zt(l.doubleValue),y=zt(d.doubleValue);return f===y?Cc(f)===Cc(y):isNaN(f)&&isNaN(y)}return!1})(r,e);case 9:return to(r.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(l,d){const f=l.mapValue.fields||{},y=d.mapValue.fields||{};if(T0(f)!==T0(y))return!1;for(const b in f)if(f.hasOwnProperty(b)&&(y[b]===void 0||!qi(f[b],y[b])))return!1;return!0})(r,e);default:return Ve(52216,{left:r})}}function Rl(r,e){return(r.values||[]).find((i=>qi(i,e)))!==void 0}function no(r,e){if(r===e)return 0;const i=os(r),a=os(e);if(i!==a)return Ze(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return Ze(r.booleanValue,e.booleanValue);case 2:return(function(d,f){const y=zt(d.integerValue||d.doubleValue),b=zt(f.integerValue||f.doubleValue);return y<b?-1:y>b?1:y===b?0:isNaN(y)?isNaN(b)?0:-1:1})(r,e);case 3:return A0(r.timestampValue,e.timestampValue);case 4:return A0(wl(r),wl(e));case 5:return vf(r.stringValue,e.stringValue);case 6:return(function(d,f){const y=as(d),b=as(f);return y.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(d,f){const y=d.split("/"),b=f.split("/");for(let v=0;v<y.length&&v<b.length;v++){const x=Ze(y[v],b[v]);if(x!==0)return x}return Ze(y.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,f){const y=Ze(zt(d.latitude),zt(f.latitude));return y!==0?y:Ze(zt(d.longitude),zt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return S0(r.arrayValue,e.arrayValue);case 10:return(function(d,f){var D,P,re,se;const y=d.fields||{},b=f.fields||{},v=(D=y[Dc])==null?void 0:D.arrayValue,x=(P=b[Dc])==null?void 0:P.arrayValue,S=Ze(((re=v==null?void 0:v.values)==null?void 0:re.length)||0,((se=x==null?void 0:x.values)==null?void 0:se.length)||0);return S!==0?S:S0(v,x)})(r.mapValue,e.mapValue);case 11:return(function(d,f){if(d===lc.mapValue&&f===lc.mapValue)return 0;if(d===lc.mapValue)return 1;if(f===lc.mapValue)return-1;const y=d.fields||{},b=Object.keys(y),v=f.fields||{},x=Object.keys(v);b.sort(),x.sort();for(let S=0;S<b.length&&S<x.length;++S){const D=vf(b[S],x[S]);if(D!==0)return D;const P=no(y[b[S]],v[x[S]]);if(P!==0)return P}return Ze(b.length,x.length)})(r.mapValue,e.mapValue);default:throw Ve(23264,{he:i})}}function A0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ze(r,e);const i=ss(r),a=ss(e),l=Ze(i.seconds,a.seconds);return l!==0?l:Ze(i.nanos,a.nanos)}function S0(r,e){const i=r.values||[],a=e.values||[];for(let l=0;l<i.length&&l<a.length;++l){const d=no(i[l],a[l]);if(d)return d}return Ze(i.length,a.length)}function io(r){return _f(r)}function _f(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const a=ss(i);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return as(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return Ne.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let a="[",l=!0;for(const d of i.values||[])l?l=!1:a+=",",a+=_f(d);return a+"]"})(r.arrayValue):"mapValue"in r?(function(i){const a=Object.keys(i.fields||{}).sort();let l="{",d=!0;for(const f of a)d?d=!1:l+=",",l+=`${f}:${_f(i.fields[f])}`;return l+"}"})(r.mapValue):Ve(61005,{value:r})}function fc(r){switch(os(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qc(r);return e?16+fc(e):16;case 5:return 2*r.stringValue.length;case 6:return as(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,d)=>l+fc(d)),0)})(r.arrayValue);case 10:case 11:return(function(a){let l=0;return $s(a.fields,((d,f)=>{l+=d.length+fc(f)})),l})(r.mapValue);default:throw Ve(13486,{value:r})}}function w0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function bf(r){return!!r&&"integerValue"in r}function Gf(r){return!!r&&"arrayValue"in r}function C0(r){return!!r&&"nullValue"in r}function R0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function mc(r){return!!r&&"mapValue"in r}function rA(r){var i,a;return((a=(((i=r==null?void 0:r.mapValue)==null?void 0:i.fields)||{})[Yv])==null?void 0:a.stringValue)===Kv}function pl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return $s(r.mapValue.fields,((i,a)=>e.mapValue.fields[i]=pl(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=pl(r.arrayValue.values[i]);return e}return{...r}}function sA(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iA}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.value=e}static empty(){return new ti({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!mc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(i)}setAll(e){let i=cn.emptyPath(),a={},l=[];e.forEach(((f,y)=>{if(!i.isImmediateParentOf(y)){const b=this.getFieldsMap(i);this.applyChanges(b,a,l),a={},l=[],i=y.popLast()}f?a[y.lastSegment()]=pl(f):l.push(y.lastSegment())}));const d=this.getFieldsMap(i);this.applyChanges(d,a,l)}delete(e){const i=this.field(e.popLast());mc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=i.mapValue.fields[e.get(a)];mc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,a){$s(i,((l,d)=>e[l]=d));for(const l of a)delete e[l]}clone(){return new ti(pl(this.value))}}function Xv(r){const e=[];return $s(r.fields,((i,a)=>{const l=new cn([i]);if(mc(a)){const d=Xv(a.mapValue).fields;if(d.length===0)e.push(l);else for(const f of d)e.push(l.child(f))}else e.push(l)})),new pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,i,a,l,d,f,y){this.key=e,this.documentType=i,this.version=a,this.readTime=l,this.createTime=d,this.data=f,this.documentState=y}static newInvalidDocument(e){return new pn(e,0,ke.min(),ke.min(),ke.min(),ti.empty(),0)}static newFoundDocument(e,i,a,l){return new pn(e,1,i,ke.min(),a,l,0)}static newNoDocument(e,i){return new pn(e,2,i,ke.min(),ke.min(),ti.empty(),0)}static newUnknownDocument(e,i){return new pn(e,3,i,ke.min(),ke.min(),ti.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(ke.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ti.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ti.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ke.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,i){this.position=e,this.inclusive=i}}function D0(r,e,i){let a=0;for(let l=0;l<r.position.length;l++){const d=e[l],f=r.position[l];if(d.field.isKeyField()?a=Ne.comparator(Ne.fromName(f.referenceValue),i.key):a=no(f,i.data.field(d.field)),d.dir==="desc"&&(a*=-1),a!==0)break}return a}function N0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!qi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,i="asc"){this.field=e,this.dir=i}}function aA(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{}class Ft extends $v{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new lA(e,i,a):i==="array-contains"?new dA(e,a):i==="in"?new hA(e,a):i==="not-in"?new fA(e,a):i==="array-contains-any"?new mA(e,a):new Ft(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new uA(e,a):new cA(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(no(i,this.value)):i!==null&&os(this.value)===os(i)&&this.matchesComparison(no(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends $v{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new yi(e,i)}matches(e){return Wv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wv(r){return r.op==="and"}function Zv(r){return oA(r)&&Wv(r)}function oA(r){for(const e of r.filters)if(e instanceof yi)return!1;return!0}function Ef(r){if(r instanceof Ft)return r.field.canonicalString()+r.op.toString()+io(r.value);if(Zv(r))return r.filters.map((e=>Ef(e))).join(",");{const e=r.filters.map((i=>Ef(i))).join(",");return`${r.op}(${e})`}}function Jv(r,e){return r instanceof Ft?(function(a,l){return l instanceof Ft&&a.op===l.op&&a.field.isEqual(l.field)&&qi(a.value,l.value)})(r,e):r instanceof yi?(function(a,l){return l instanceof yi&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((d,f,y)=>d&&Jv(f,l.filters[y])),!0):!1})(r,e):void Ve(19439)}function e_(r){return r instanceof Ft?(function(i){return`${i.field.canonicalString()} ${i.op} ${io(i.value)}`})(r):r instanceof yi?(function(i){return i.op.toString()+" {"+i.getFilters().map(e_).join(" ,")+"}"})(r):"Filter"}class lA extends Ft{constructor(e,i,a){super(e,i,a),this.key=Ne.fromName(a.referenceValue)}matches(e){const i=Ne.comparator(e.key,this.key);return this.matchesComparison(i)}}class uA extends Ft{constructor(e,i){super(e,"in",i),this.keys=t_("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class cA extends Ft{constructor(e,i){super(e,"not-in",i),this.keys=t_("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function t_(r,e){var i;return(((i=e.arrayValue)==null?void 0:i.values)||[]).map((a=>Ne.fromName(a.referenceValue)))}class dA extends Ft{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Gf(i)&&Rl(i.arrayValue,this.value)}}class hA extends Ft{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&Rl(this.value.arrayValue,i)}}class fA extends Ft{constructor(e,i){super(e,"not-in",i)}matches(e){if(Rl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!Rl(this.value.arrayValue,i)}}class mA extends Ft{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Gf(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>Rl(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,i=null,a=[],l=[],d=null,f=null,y=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=d,this.startAt=f,this.endAt=y,this.Te=null}}function I0(r,e=null,i=[],a=[],l=null,d=null,f=null){return new gA(r,e,i,a,l,d,f)}function Hf(r){const e=Be(r);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>Ef(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(d){return d.field.canonicalString()+d.dir})(a))).join(","),Pc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>io(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>io(a))).join(",")),e.Te=i}return e.Te}function Ff(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!aA(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!Jv(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!N0(r.startAt,e.startAt)&&N0(r.endAt,e.endAt)}function Tf(r){return Ne.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,i=null,a=[],l=[],d=null,f="F",y=null,b=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=d,this.limitType=f,this.startAt=y,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pA(r,e,i,a,l,d,f,y){return new co(r,e,i,a,l,d,f,y)}function n_(r){return new co(r)}function M0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function i_(r){return r.collectionGroup!==null}function yl(r){const e=Be(r);if(e.Ie===null){e.Ie=[];const i=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),i.add(d.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let y=new Zt(cn.comparator);return f.filters.forEach((b=>{b.getFlattenedFilters().forEach((v=>{v.isInequality()&&(y=y.add(v.field))}))})),y})(e).forEach((d=>{i.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new Dl(d,a))})),i.has(cn.keyField().canonicalString())||e.Ie.push(new Dl(cn.keyField(),a))}return e.Ie}function Li(r){const e=Be(r);return e.Ee||(e.Ee=yA(e,yl(r))),e.Ee}function yA(r,e){if(r.limitType==="F")return I0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const d=l.dir==="desc"?"asc":"desc";return new Dl(l.field,d)}));const i=r.endAt?new Nc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Nc(r.startAt.position,r.startAt.inclusive):null;return I0(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function xf(r,e){const i=r.filters.concat([e]);return new co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Ic(r,e,i){return new co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Gc(r,e){return Ff(Li(r),Li(e))&&r.limitType===e.limitType}function r_(r){return`${Hf(Li(r))}|lt:${r.limitType}`}function Ha(r){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((l=>e_(l))).join(", ")}]`),Pc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((l=>io(l))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((l=>io(l))).join(",")),`Target(${a})`})(Li(r))}; limitType=${r.limitType})`}function Hc(r,e){return e.isFoundDocument()&&(function(a,l){const d=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(d):Ne.isDocumentKey(a.path)?a.path.isEqual(d):a.path.isImmediateParentOf(d)})(r,e)&&(function(a,l){for(const d of yl(a))if(!d.field.isKeyField()&&l.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(a,l){for(const d of a.filters)if(!d.matches(l))return!1;return!0})(r,e)&&(function(a,l){return!(a.startAt&&!(function(f,y,b){const v=D0(f,y,b);return f.inclusive?v<=0:v<0})(a.startAt,yl(a),l)||a.endAt&&!(function(f,y,b){const v=D0(f,y,b);return f.inclusive?v>=0:v>0})(a.endAt,yl(a),l))})(r,e)}function vA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function s_(r){return(e,i)=>{let a=!1;for(const l of yl(r)){const d=_A(l,e,i);if(d!==0)return d;a=a||l.field.isKeyField()}return 0}}function _A(r,e,i){const a=r.field.isKeyField()?Ne.comparator(e.key,i.key):(function(d,f,y){const b=f.data.field(d),v=y.data.field(d);return b!==null&&v!==null?no(b,v):Ve(42886)})(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Ve(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[l,d]of a)if(this.equalsFn(l,e))return d}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let d=0;d<l.length;d++)if(this.equalsFn(l[d][0],e))return void(l[d]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,((i,a)=>{for(const[l,d]of a)e(l,d)}))}isEmpty(){return Pv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new Ct(Ne.comparator);function fr(){return bA}const a_=new Ct(Ne.comparator);function fl(...r){let e=a_;for(const i of r)e=e.insert(i.key,i);return e}function o_(r){let e=a_;return r.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function Qs(){return vl()}function l_(){return vl()}function vl(){return new Ws((r=>r.toString()),((r,e)=>r.isEqual(e)))}const EA=new Ct(Ne.comparator),TA=new Zt(Ne.comparator);function Je(...r){let e=TA;for(const i of r)e=e.add(i);return e}const xA=new Zt(Ze);function AA(){return xA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(e)?"-0":e}}function u_(r){return{integerValue:""+r}}function SA(r,e){return Zx(e)?u_(e):Qf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function wA(r,e,i){return r instanceof Nl?(function(l,d){const f={fields:{[Hv]:{stringValue:Gv},[Qv]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return d&&qf(d)&&(d=qc(d)),d&&(f.fields[Fv]=d),{mapValue:f}})(i,e):r instanceof Il?d_(r,e):r instanceof Ml?h_(r,e):(function(l,d){const f=c_(l,d),y=V0(f)+V0(l.Ae);return bf(f)&&bf(l.Ae)?u_(y):Qf(l.serializer,y)})(r,e)}function CA(r,e,i){return r instanceof Il?d_(r,e):r instanceof Ml?h_(r,e):i}function c_(r,e){return r instanceof Mc?(function(a){return bf(a)||(function(d){return!!d&&"doubleValue"in d})(a)})(e)?e:{integerValue:0}:null}class Nl extends Fc{}class Il extends Fc{constructor(e){super(),this.elements=e}}function d_(r,e){const i=f_(e);for(const a of r.elements)i.some((l=>qi(l,a)))||i.push(a);return{arrayValue:{values:i}}}class Ml extends Fc{constructor(e){super(),this.elements=e}}function h_(r,e){let i=f_(e);for(const a of r.elements)i=i.filter((l=>!qi(l,a)));return{arrayValue:{values:i}}}class Mc extends Fc{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function V0(r){return zt(r.integerValue||r.doubleValue)}function f_(r){return Gf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,i){this.field=e,this.transform=i}}function DA(r,e){return r.field.isEqual(e.field)&&(function(a,l){return a instanceof Il&&l instanceof Il||a instanceof Ml&&l instanceof Ml?to(a.elements,l.elements,qi):a instanceof Mc&&l instanceof Mc?qi(a.Ae,l.Ae):a instanceof Nl&&l instanceof Nl})(r.transform,e.transform)}class NA{constructor(e,i){this.version=e,this.transformResults=i}}class cr{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qc{}function m_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new p_(r.key,cr.none()):new Ol(r.key,r.data,cr.none());{const i=r.data,a=ti.empty();let l=new Zt(cn.comparator);for(let d of e.fields)if(!l.has(d)){let f=i.field(d);f===null&&d.length>1&&(d=d.popLast(),f=i.field(d)),f===null?a.delete(d):a.set(d,f),l=l.add(d)}return new Zs(r.key,a,new pi(l.toArray()),cr.none())}}function IA(r,e,i){r instanceof Ol?(function(l,d,f){const y=l.value.clone(),b=j0(l.fieldTransforms,d,f.transformResults);y.setAll(b),d.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(r,e,i):r instanceof Zs?(function(l,d,f){if(!gc(l.precondition,d))return void d.convertToUnknownDocument(f.version);const y=j0(l.fieldTransforms,d,f.transformResults),b=d.data;b.setAll(g_(l)),b.setAll(y),d.convertToFoundDocument(f.version,b).setHasCommittedMutations()})(r,e,i):(function(l,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,i)}function _l(r,e,i,a){return r instanceof Ol?(function(d,f,y,b){if(!gc(d.precondition,f))return y;const v=d.value.clone(),x=z0(d.fieldTransforms,b,f);return v.setAll(x),f.convertToFoundDocument(f.version,v).setHasLocalMutations(),null})(r,e,i,a):r instanceof Zs?(function(d,f,y,b){if(!gc(d.precondition,f))return y;const v=z0(d.fieldTransforms,b,f),x=f.data;return x.setAll(g_(d)),x.setAll(v),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),y===null?null:y.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((S=>S.field)))})(r,e,i,a):(function(d,f,y){return gc(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):y})(r,e,i)}function MA(r,e){let i=null;for(const a of r.fieldTransforms){const l=e.data.field(a.field),d=c_(a.transform,l||null);d!=null&&(i===null&&(i=ti.empty()),i.set(a.field,d))}return i||null}function O0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&to(a,l,((d,f)=>DA(d,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ol extends Qc{constructor(e,i,a,l=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zs extends Qc{constructor(e,i,a,l,d=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function g_(r){const e=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}})),e}function j0(r,e,i){const a=new Map;ut(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const d=r[l],f=d.transform,y=e.data.field(d.field);a.set(d.field,CA(f,y,i[l]))}return a}function z0(r,e,i){const a=new Map;for(const l of r){const d=l.transform,f=i.data.field(l.field);a.set(l.field,wA(d,f,e))}return a}class p_ extends Qc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VA extends Qc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e,i,a,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const d=this.mutations[l];d.key.isEqual(e.key)&&IA(d,e,a[l])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=_l(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=_l(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=l_();return this.mutations.forEach((l=>{const d=e.get(l.key),f=d.overlayedDocument;let y=this.applyToLocalView(f,d.mutatedFields);y=i.has(l.key)?null:y;const b=m_(f,y);b!==null&&a.set(l.key,b),f.isValidDocument()||f.convertToNoDocument(ke.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Je())}isEqual(e){return this.batchId===e.batchId&&to(this.mutations,e.mutations,((i,a)=>O0(i,a)))&&to(this.baseMutations,e.baseMutations,((i,a)=>O0(i,a)))}}class Yf{constructor(e,i,a,l){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(e,i,a){ut(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return EA})();const d=e.mutations;for(let f=0;f<d.length;f++)l=l.insert(d[f].key,a[f].version);return new Yf(e,i,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,nt;function kA(r){switch(r){case ee.OK:return Ve(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ve(15467,{code:r})}}function y_(r){if(r===void 0)return hr("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Ht.OK:return ee.OK;case Ht.CANCELLED:return ee.CANCELLED;case Ht.UNKNOWN:return ee.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return ee.INTERNAL;case Ht.UNAVAILABLE:return ee.UNAVAILABLE;case Ht.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ht.NOT_FOUND:return ee.NOT_FOUND;case Ht.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ht.ABORTED:return ee.ABORTED;case Ht.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ht.DATA_LOSS:return ee.DATA_LOSS;default:return Ve(39323,{code:r})}}(nt=Ht||(Ht={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=new ts([4294967295,4294967295],0);function k0(r){const e=LA().encode(r),i=new Nv;return i.update(e),new Uint8Array(i.digest())}function L0(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new ts([i,a],0),new ts([l,d],0)]}class Kf{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new ml(`Invalid padding: ${i}`);if(a<0)throw new ml(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new ml(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new ml(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=ts.fromNumber(this.ge)}ye(e,i,a){let l=e.add(i.multiply(ts.fromNumber(a)));return l.compare(UA)===1&&(l=new ts([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=k0(e),[a,l]=L0(i);for(let d=0;d<this.hashCount;d++){const f=this.ye(a,l,d);if(!this.we(f))return!1}return!0}static create(e,i,a){const l=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new Kf(d,l,i);return a.forEach((y=>f.insert(y))),f}insert(e){if(this.ge===0)return;const i=k0(e),[a,l]=L0(i);for(let d=0;d<this.hashCount;d++){const f=this.ye(a,l,d);this.Se(f)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,i,a,l,d){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const l=new Map;return l.set(e,jl.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Yc(ke.min(),l,new Ct(Ze),fr(),Je())}}class jl{constructor(e,i,a,l,d){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new jl(a,i,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,i,a,l){this.be=e,this.removedTargetIds=i,this.key=a,this.De=l}}class v_{constructor(e,i){this.targetId=e,this.Ce=i}}class __{constructor(e,i,a=dn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=l}}class U0{constructor(){this.ve=0,this.Fe=B0(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),i=Je(),a=Je();return this.Fe.forEach(((l,d)=>{switch(d){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:Ve(38017,{changeType:d})}})),new jl(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=B0()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class BA{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=uc(),this.He=uc(),this.Ye=new Ct(Ze)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:Ve(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,a=e.Ce.count,l=this.ot(i);if(l){const d=l.target;if(Tf(d))if(a===0){const f=new Ne(d.path);this.et(i,f,pn.newNoDocument(f,ke.min()))}else ut(a===1,20013,{expectedCount:a});else{const f=this._t(i);if(f!==a){const y=this.ut(e),b=y?this.ct(y,e,f):1;if(b!==0){this.it(i);const v=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,v)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:d=0}=i;let f,y;try{f=as(a).toUint8Array()}catch(b){if(b instanceof qv)return eo("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{y=new Kf(f,l,d)}catch(b){return eo(b instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return y.ge===0?null:y}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let l=0;return a.forEach((d=>{const f=this.Ge.ht(),y=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(y)||(this.et(i,d,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((d,f)=>{const y=this.ot(f);if(y){if(d.current&&Tf(y.target)){const b=new Ne(y.target.path);this.It(b).has(f)||this.Et(f,b)||this.et(f,b,pn.newNoDocument(b,e))}d.Be&&(i.set(f,d.ke()),d.qe())}}));let a=Je();this.He.forEach(((d,f)=>{let y=!0;f.forEachWhile((b=>{const v=this.ot(b);return!v||v.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(a=a.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const l=new Yc(e,i,this.Ye,this.je,a);return this.je=fr(),this.Je=uc(),this.He=uc(),this.Ye=new Ct(Ze),l}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new U0,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Zt(Ze),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Zt(Ze),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||xe("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U0),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function uc(){return new Ct(Ne.comparator)}function B0(){return new Ct(Ne.comparator)}const PA={asc:"ASCENDING",desc:"DESCENDING"},qA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GA={and:"AND",or:"OR"};class HA{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Af(r,e){return r.useProto3Json||Pc(e)?e:{value:e}}function Vc(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function FA(r,e){return Vc(r,e.toTimestamp())}function Ui(r){return ut(!!r,49232),ke.fromTimestamp((function(i){const a=ss(i);return new Tt(a.seconds,a.nanos)})(r))}function Xf(r,e){return Sf(r,e).canonicalString()}function Sf(r,e){const i=(function(l){return new _t(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?i:i.child(e)}function E_(r){const e=_t.fromString(r);return ut(w_(e),10190,{key:e.toString()}),e}function wf(r,e){return Xf(r.databaseId,e.path)}function of(r,e){const i=E_(e);if(i.get(1)!==r.databaseId.projectId)throw new be(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new be(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Ne(x_(i))}function T_(r,e){return Xf(r.databaseId,e)}function QA(r){const e=E_(r);return e.length===4?_t.emptyPath():x_(e)}function Cf(r){return new _t(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function x_(r){return ut(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function P0(r,e,i){return{name:wf(r,e),fields:i.value.mapValue.fields}}function YA(r,e){let i;if("targetChange"in e){e.targetChange;const a=(function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ve(39313,{state:v})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],d=(function(v,x){return v.useProto3Json?(ut(x===void 0||typeof x=="string",58123),dn.fromBase64String(x||"")):(ut(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),dn.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&(function(v){const x=v.code===void 0?ee.UNKNOWN:y_(v.code);return new be(x,v.message||"")})(f);i=new __(a,l,d,y||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=of(r,a.document.name),d=Ui(a.document.updateTime),f=a.document.createTime?Ui(a.document.createTime):ke.min(),y=new ti({mapValue:{fields:a.document.fields}}),b=pn.newFoundDocument(l,d,f,y),v=a.targetIds||[],x=a.removedTargetIds||[];i=new pc(v,x,b.key,b)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=of(r,a.document),d=a.readTime?Ui(a.readTime):ke.min(),f=pn.newNoDocument(l,d),y=a.removedTargetIds||[];i=new pc([],y,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=of(r,a.document),d=a.removedTargetIds||[];i=new pc([],d,l,null)}else{if(!("filter"in e))return Ve(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:d}=a,f=new zA(l,d),y=a.targetId;i=new v_(y,f)}}return i}function KA(r,e){let i;if(e instanceof Ol)i={update:P0(r,e.key,e.value)};else if(e instanceof p_)i={delete:wf(r,e.key)};else if(e instanceof Zs)i={update:P0(r,e.key,e.data),updateMask:iS(e.fieldMask)};else{if(!(e instanceof VA))return Ve(16599,{Vt:e.type});i={verify:wf(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(d,f){const y=f.transform;if(y instanceof Nl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Il)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Ml)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Mc)return{fieldPath:f.field.canonicalString(),increment:y.Ae};throw Ve(20930,{transform:f.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(l,d){return d.updateTime!==void 0?{updateTime:FA(l,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Ve(27497)})(r,e.precondition)),i}function XA(r,e){return r&&r.length>0?(ut(e!==void 0,14353),r.map((i=>(function(l,d){let f=l.updateTime?Ui(l.updateTime):Ui(d);return f.isEqual(ke.min())&&(f=Ui(d)),new NA(f,l.transformResults||[])})(i,e)))):[]}function $A(r,e){return{documents:[T_(r,e.path)]}}function WA(r,e){const i={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=T_(r,l);const d=(function(v){if(v.length!==0)return S_(yi.create(v,"and"))})(e.filters);d&&(i.structuredQuery.where=d);const f=(function(v){if(v.length!==0)return v.map((x=>(function(D){return{field:Fa(D.field),direction:eS(D.dir)}})(x)))})(e.orderBy);f&&(i.structuredQuery.orderBy=f);const y=Af(r,e.limit);return y!==null&&(i.structuredQuery.limit=y),e.startAt&&(i.structuredQuery.startAt=(function(v){return{before:v.inclusive,values:v.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(v){return{before:!v.inclusive,values:v.position}})(e.endAt)),{ft:i,parent:l}}function ZA(r){let e=QA(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){ut(a===1,65062);const x=i.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let d=[];i.where&&(d=(function(S){const D=A_(S);return D instanceof yi&&Zv(D)?D.getFilters():[D]})(i.where));let f=[];i.orderBy&&(f=(function(S){return S.map((D=>(function(re){return new Dl(Qa(re.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(re.direction))})(D)))})(i.orderBy));let y=null;i.limit&&(y=(function(S){let D;return D=typeof S=="object"?S.value:S,Pc(D)?null:D})(i.limit));let b=null;i.startAt&&(b=(function(S){const D=!!S.before,P=S.values||[];return new Nc(P,D)})(i.startAt));let v=null;return i.endAt&&(v=(function(S){const D=!S.before,P=S.values||[];return new Nc(P,D)})(i.endAt)),pA(e,l,f,d,y,"F",b,v)}function JA(r,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function A_(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Qa(i.unaryFilter.field);return Ft.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Qa(i.unaryFilter.field);return Ft.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Qa(i.unaryFilter.field);return Ft.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Qa(i.unaryFilter.field);return Ft.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Ft.create(Qa(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return yi.create(i.compositeFilter.filters.map((a=>A_(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}})(i.compositeFilter.op))})(r):Ve(30097,{filter:r})}function eS(r){return PA[r]}function tS(r){return qA[r]}function nS(r){return GA[r]}function Fa(r){return{fieldPath:r.canonicalString()}}function Qa(r){return cn.fromServerFormat(r.fieldPath)}function S_(r){return r instanceof Ft?(function(i){if(i.op==="=="){if(R0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NAN"}};if(C0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(R0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NOT_NAN"}};if(C0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(i.field),op:tS(i.op),value:i.value}}})(r):r instanceof yi?(function(i){const a=i.getFilters().map((l=>S_(l)));return a.length===1?a[0]:{compositeFilter:{op:nS(i.op),filters:a}}})(r):Ve(54877,{filter:r})}function iS(r){const e=[];return r.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function w_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e,i,a,l,d=ke.min(),f=ke.min(),y=dn.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y,this.expectedCount=b}withSequenceNumber(e){return new Zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.yt=e}}function sS(r){const e=ZA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ic(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.Cn=new oS}addToCollectionParentIndex(e,i){return this.Cn.add(i),ie.resolve()}getCollectionParents(e,i){return ie.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return ie.resolve()}deleteFieldIndex(e,i){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,i){return ie.resolve()}getDocumentsMatchingTarget(e,i){return ie.resolve(null)}getIndexType(e,i){return ie.resolve(0)}getFieldIndexes(e,i){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,i){return ie.resolve(rs.min())}getMinOffsetFromCollectionGroup(e,i){return ie.resolve(rs.min())}updateCollectionGroup(e,i,a){return ie.resolve()}updateIndexEntries(e,i){return ie.resolve()}}class oS{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i]||new Zt(_t.comparator),d=!l.has(a);return this.index[i]=l.add(a),d}has(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(e){return(this.index[e]||new Zt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C_=41943040;class Dn{static withCacheSize(e){return new Dn(e,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(C_,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ro(0)}static cr(){return new ro(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="LruGarbageCollector",lS=1048576;function H0([r,e],[i,a]){const l=Ze(r,i);return l===0?Ze(e,a):l}class uS{constructor(e){this.Ir=e,this.buffer=new Zt(H0),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();H0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class cS{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(G0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){uo(i)?xe(G0,"Ignoring IndexedDB error during garbage collection: ",i):await lo(i)}await this.Vr(3e5)}))}}class dS{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return ie.resolve(Bc.ce);const a=new uS(i);return this.mr.forEachTarget(e,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(q0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q0):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,l,d,f,y,b,v;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),l=this.params.maximumSequenceNumbersToCollect):l=S,f=Date.now(),this.nthSequenceNumber(e,l)))).next((S=>(a=S,y=Date.now(),this.removeTargets(e,a,i)))).next((S=>(d=S,b=Date.now(),this.removeOrphanedDocuments(e,a)))).next((S=>(v=Date.now(),Ga()<=it.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-x}ms
	Determined least recently used ${l} in `+(y-f)+`ms
	Removed ${d} targets in `+(b-y)+`ms
	Removed ${S} documents in `+(v-b)+`ms
Total Duration: ${v-x}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:d,documentsRemoved:S}))))}}function hS(r,e){return new dS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(){this.changes=new Ws((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?ie.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,i,a,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(a!==null&&_l(a.mutation,l,pi.empty(),Tt.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,Je()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=Je()){const l=Qs();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,a).next((d=>{let f=fl();return d.forEach(((y,b)=>{f=f.insert(y,b.overlayedDocument)})),f}))))}getOverlayedDocuments(e,i){const a=Qs();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,Je())))}populateOverlays(e,i,a){const l=[];return a.forEach((d=>{i.has(d)||l.push(d)})),this.documentOverlayCache.getOverlays(e,l).next((d=>{d.forEach(((f,y)=>{i.set(f,y)}))}))}computeViews(e,i,a,l){let d=fr();const f=vl(),y=(function(){return vl()})();return i.forEach(((b,v)=>{const x=a.get(v.key);l.has(v.key)&&(x===void 0||x.mutation instanceof Zs)?d=d.insert(v.key,v):x!==void 0?(f.set(v.key,x.mutation.getFieldMask()),_l(x.mutation,v,x.mutation.getFieldMask(),Tt.now())):f.set(v.key,pi.empty())})),this.recalculateAndSaveOverlays(e,d).next((b=>(b.forEach(((v,x)=>f.set(v,x))),i.forEach(((v,x)=>y.set(v,new mS(x,f.get(v)??null)))),y)))}recalculateAndSaveOverlays(e,i){const a=vl();let l=new Ct(((f,y)=>f-y)),d=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((f=>{for(const y of f)y.keys().forEach((b=>{const v=i.get(b);if(v===null)return;let x=a.get(b)||pi.empty();x=y.applyToLocalView(v,x),a.set(b,x);const S=(l.get(y.batchId)||Je()).add(b);l=l.insert(y.batchId,S)}))})).next((()=>{const f=[],y=l.getReverseIterator();for(;y.hasNext();){const b=y.getNext(),v=b.key,x=b.value,S=l_();x.forEach((D=>{if(!d.has(D)){const P=m_(i.get(D),a.get(D));P!==null&&S.set(D,P),d=d.add(D)}})),f.push(this.documentOverlayCache.saveOverlays(e,v,S))}return ie.waitFor(f)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,l){return(function(f){return Ne.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):i_(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,l):this.getDocumentsMatchingCollectionQuery(e,i,a,l)}getNextDocuments(e,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,l).next((d=>{const f=l-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,l-d.size):ie.resolve(Qs());let y=Sl,b=d;return f.next((v=>ie.forEach(v,((x,S)=>(y<S.largestBatchId&&(y=S.largestBatchId),d.get(x)?ie.resolve():this.remoteDocumentCache.getEntry(e,x).next((D=>{b=b.insert(x,D)}))))).next((()=>this.populateOverlays(e,v,d))).next((()=>this.computeViews(e,b,v,Je()))).next((x=>({batchId:y,changes:o_(x)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Ne(i)).next((a=>{let l=fl();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,l){const d=i.collectionGroup;let f=fl();return this.indexManager.getCollectionParents(e,d).next((y=>ie.forEach(y,(b=>{const v=(function(S,D){return new co(D,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(i,b.child(d));return this.getDocumentsMatchingCollectionQuery(e,v,a,l).next((x=>{x.forEach(((S,D)=>{f=f.insert(S,D)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,i,a,l){let d;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,d,l)))).next((f=>{d.forEach(((b,v)=>{const x=v.getKey();f.get(x)===null&&(f=f.insert(x,pn.newInvalidDocument(x)))}));let y=fl();return f.forEach(((b,v)=>{const x=d.get(b);x!==void 0&&_l(x.mutation,v,pi.empty(),Tt.now()),Hc(i,v)&&(y=y.insert(b,v))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return ie.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:Ui(l.createTime)}})(i)),ie.resolve()}getNamedQuery(e,i){return ie.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:sS(l.bundledQuery),readTime:Ui(l.readTime)}})(i)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this.overlays=new Ct(Ne.comparator),this.qr=new Map}getOverlay(e,i){return ie.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Qs();return ie.forEach(i,(l=>this.getOverlay(e,l).next((d=>{d!==null&&a.set(l,d)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((l,d)=>{this.St(e,i,d)})),ie.resolve()}removeOverlaysForBatchId(e,i,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(a)),ie.resolve()}getOverlaysForCollection(e,i,a){const l=Qs(),d=i.length+1,f=new Ne(i.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const b=y.getNext().value,v=b.getKey();if(!i.isPrefixOf(v.path))break;v.path.length===d&&b.largestBatchId>a&&l.set(b.getKey(),b)}return ie.resolve(l)}getOverlaysForCollectionGroup(e,i,a,l){let d=new Ct(((v,x)=>v-x));const f=this.overlays.getIterator();for(;f.hasNext();){const v=f.getNext().value;if(v.getKey().getCollectionGroup()===i&&v.largestBatchId>a){let x=d.get(v.largestBatchId);x===null&&(x=Qs(),d=d.insert(v.largestBatchId,x)),x.set(v.getKey(),v)}}const y=Qs(),b=d.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((v,x)=>y.set(v,x))),!(y.size()>=l)););return ie.resolve(y)}St(e,i,a){const l=this.overlays.get(a.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new jA(i,a));let d=this.qr.get(i);d===void 0&&(d=Je(),this.qr.set(i,d)),this.qr.set(i,d.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.Qr=new Zt(tn.$r),this.Ur=new Zt(tn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new tn(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new tn(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new Ne(new _t([])),a=new tn(i,e),l=new tn(i,e+1),d=[];return this.Ur.forEachInRange([a,l],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Ne(new _t([])),a=new tn(i,e),l=new tn(i,e+1);let d=Je();return this.Ur.forEachInRange([a,l],(f=>{d=d.add(f.key)})),d}containsKey(e){const i=new tn(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class tn{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Ne.comparator(e.key,i.key)||Ze(e.Yr,i.Yr)}static Kr(e,i){return Ze(e.Yr,i.Yr)||Ne.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _S{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Zt(tn.$r)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,l){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new OA(d,i,a,l);this.mutationQueue.push(f);for(const y of l)this.Zr=this.Zr.add(new tn(y.key,d)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return ie.resolve(f)}lookupMutationBatch(e,i){return ie.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,l=this.ei(a),d=l<0?0:l;return ie.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Pf:this.tr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new tn(i,0),l=new tn(i,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([a,l],(f=>{const y=this.Xr(f.Yr);d.push(y)})),ie.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Zt(Ze);return i.forEach((l=>{const d=new tn(l,0),f=new tn(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(y=>{a=a.add(y.Yr)}))})),ie.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,l=a.length+1;let d=a;Ne.isDocumentKey(d)||(d=d.child(""));const f=new tn(new Ne(d),0);let y=new Zt(Ze);return this.Zr.forEachWhile((b=>{const v=b.key.path;return!!a.isPrefixOf(v)&&(v.length===l&&(y=y.add(b.Yr)),!0)}),f),ie.resolve(this.ti(y))}ti(e){const i=[];return e.forEach((a=>{const l=this.Xr(a);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){ut(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return ie.forEach(i.mutations,(l=>{const d=new tn(l.key,i.batchId);return a=a.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new tn(i,0),l=this.Zr.firstAfterOrEqual(a);return ie.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bS{constructor(e){this.ri=e,this.docs=(function(){return new Ct(Ne.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,l=this.docs.get(a),d=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return ie.resolve(a?a.document.mutableCopy():pn.newInvalidDocument(i))}getEntries(e,i){let a=fr();return i.forEach((l=>{const d=this.docs.get(l);a=a.insert(l,d?d.document.mutableCopy():pn.newInvalidDocument(l))})),ie.resolve(a)}getDocumentsMatchingQuery(e,i,a,l){let d=fr();const f=i.path,y=new Ne(f.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(y);for(;b.hasNext();){const{key:v,value:{document:x}}=b.getNext();if(!f.isPrefixOf(v.path))break;v.path.length>f.length+1||Kx(Yx(x),a)<=0||(l.has(x.key)||Hc(i,x))&&(d=d.insert(x.key,x.mutableCopy()))}return ie.resolve(d)}getAllFromCollectionGroup(e,i,a,l){Ve(9500)}ii(e,i){return ie.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new ES(this)}getSize(e){return ie.resolve(this.size)}}class ES extends fS{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(a)})),ie.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e){this.persistence=e,this.si=new Ws((i=>Hf(i)),Ff),this.lastRemoteSnapshotVersion=ke.min(),this.highestTargetId=0,this.oi=0,this._i=new $f,this.targetCount=0,this.ai=ro.ur()}forEachTarget(e,i){return this.si.forEach(((a,l)=>i(l))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),ie.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new ro(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,ie.resolve()}updateTargetData(e,i){return this.Pr(i),ie.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,i,a){let l=0;const d=[];return this.si.forEach(((f,y)=>{y.sequenceNumber<=i&&a.get(y.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,y.targetId)),l++)})),ie.waitFor(d).next((()=>l))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return ie.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),ie.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const l=this.persistence.referenceDelegate,d=[];return l&&i.forEach((f=>{d.push(l.markPotentiallyOrphaned(e,f))})),ie.waitFor(d)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),ie.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return ie.resolve(a)}containsKey(e,i){return ie.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,i){this.ui={},this.overlays={},this.ci=new Bc(0),this.li=!1,this.li=!0,this.hi=new vS,this.referenceDelegate=e(this),this.Pi=new TS(this),this.indexManager=new aS,this.remoteDocumentCache=(function(l){return new bS(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new rS(i),this.Ii=new pS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new yS,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new _S(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){xe("MemoryPersistence","Starting transaction:",e);const l=new xS(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((d=>this.referenceDelegate.di(l).next((()=>d)))).toPromise().then((d=>(l.raiseOnCommittedEvent(),d)))}Ai(e,i){return ie.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class xS extends $x{constructor(e){super(),this.currentSequenceNumber=e}}class Wf{constructor(e){this.persistence=e,this.Ri=new $f,this.Vi=null}static mi(e){return new Wf(e)}get fi(){if(this.Vi)return this.Vi;throw Ve(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),ie.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),ie.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),ie.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((d=>this.fi.add(d.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.fi,(a=>{const l=Ne.fromPath(a);return this.gi(e,l).next((d=>{d||i.removeEntry(l,ke.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return ie.or([()=>ie.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class Oc{constructor(e,i){this.persistence=e,this.pi=new Ws((a=>Jx(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=hS(this,i)}static mi(e,i){return new Oc(e,i)}Ei(){}di(e){return ie.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((l=>a+l))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return ie.forEach(this.pi,((a,l)=>this.br(e,a,l).next((d=>d?ie.resolve():i(l)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),d=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,i).next((y=>{y||(a++,d.removeEntry(f,ke.min()))})))).next((()=>d.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ie.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),ie.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=fc(e.data.value)),i}br(e,i,a){return ie.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return ie.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,i,a,l){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=l}static As(e,i){let a=Je(),l=Je();for(const d of i.docChanges)switch(d.type){case 0:a=a.add(d.doc.key);break;case 1:l=l.add(d.doc.key)}return new Zf(e,i.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return mT()?8:Wx(hT())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,l){const d={result:null};return this.ys(e,i).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,i,l,a).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new AS;return this.Ss(e,i,f).next((y=>{if(d.result=y,this.Vs)return this.bs(e,i,f,y.size)}))})).next((()=>d.result))}bs(e,i,a,l){return a.documentReadCount<this.fs?(Ga()<=it.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Ha(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ie.resolve()):(Ga()<=it.DEBUG&&xe("QueryEngine","Query:",Ha(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(Ga()<=it.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Ha(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Li(i))):ie.resolve())}ys(e,i){if(M0(i))return ie.resolve(null);let a=Li(i);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=Ic(i,null,"F"),a=Li(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((d=>{const f=Je(...d);return this.ps.getDocuments(e,f).next((y=>this.indexManager.getMinOffset(e,a).next((b=>{const v=this.Ds(i,y);return this.Cs(i,v,f,b.readTime)?this.ys(e,Ic(i,null,"F")):this.vs(e,v,i,b)}))))})))))}ws(e,i,a,l){return M0(i)||l.isEqual(ke.min())?ie.resolve(null):this.ps.getDocuments(e,a).next((d=>{const f=this.Ds(i,d);return this.Cs(i,f,a,l)?ie.resolve(null):(Ga()<=it.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ha(i)),this.vs(e,f,i,Qx(l,Sl)).next((y=>y)))}))}Ds(e,i){let a=new Zt(s_(e));return i.forEach(((l,d)=>{Hc(e,d)&&(a=a.add(d))})),a}Cs(e,i,a,l){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const d=e.limitType==="F"?i.last():i.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(l)>0)}Ss(e,i,a){return Ga()<=it.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Ha(i)),this.ps.getDocumentsMatchingQuery(e,i,rs.min(),a)}vs(e,i,a,l){return this.ps.getDocumentsMatchingQuery(e,a,l).next((d=>(i.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="LocalStore",wS=3e8;class CS{constructor(e,i,a,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new Ct(Ze),this.xs=new Ws((d=>Hf(d)),Ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function RS(r,e,i,a){return new CS(r,e,i,a)}async function D_(r,e){const i=Be(r);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next((d=>(l=d,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((d=>{const f=[],y=[];let b=Je();for(const v of l){f.push(v.batchId);for(const x of v.mutations)b=b.add(x.key)}for(const v of d){y.push(v.batchId);for(const x of v.mutations)b=b.add(x.key)}return i.localDocuments.getDocuments(a,b).next((v=>({Ls:v,removedBatchIds:f,addedBatchIds:y})))}))}))}function DS(r,e){const i=Be(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),d=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,b,v,x){const S=v.batch,D=S.keys();let P=ie.resolve();return D.forEach((re=>{P=P.next((()=>x.getEntry(b,re))).next((se=>{const U=v.docVersions.get(re);ut(U!==null,48541),se.version.compareTo(U)<0&&(S.applyToRemoteDocument(se,v),se.isValidDocument()&&(se.setReadTime(v.commitVersion),x.addEntry(se)))}))})),P.next((()=>y.mutationQueue.removeMutationBatch(b,S)))})(i,a,e,d).next((()=>d.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(y){let b=Je();for(let v=0;v<y.mutationResults.length;++v)y.mutationResults[v].transformResults.length>0&&(b=b.add(y.batch.mutations[v].key));return b})(e)))).next((()=>i.localDocuments.getDocuments(a,l)))}))}function N_(r){const e=Be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function NS(r,e){const i=Be(r),a=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const y=[];e.targetChanges.forEach(((x,S)=>{const D=l.get(S);if(!D)return;y.push(i.Pi.removeMatchingKeys(d,x.removedDocuments,S).next((()=>i.Pi.addMatchingKeys(d,x.addedDocuments,S))));let P=D.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(dn.EMPTY_BYTE_STRING,ke.min()).withLastLimboFreeSnapshotVersion(ke.min()):x.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(x.resumeToken,a)),l=l.insert(S,P),(function(se,U,he){return se.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-se.snapshotVersion.toMicroseconds()>=wS?!0:he.addedDocuments.size+he.modifiedDocuments.size+he.removedDocuments.size>0})(D,P,x)&&y.push(i.Pi.updateTargetData(d,P))}));let b=fr(),v=Je();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&y.push(i.persistence.referenceDelegate.updateLimboDocument(d,x))})),y.push(IS(d,f,e.documentUpdates).next((x=>{b=x.ks,v=x.qs}))),!a.isEqual(ke.min())){const x=i.Pi.getLastRemoteSnapshotVersion(d).next((S=>i.Pi.setTargetsMetadata(d,d.currentSequenceNumber,a)));y.push(x)}return ie.waitFor(y).next((()=>f.apply(d))).next((()=>i.localDocuments.getLocalViewOfDocuments(d,b,v))).next((()=>b))})).then((d=>(i.Ms=l,d)))}function IS(r,e,i){let a=Je(),l=Je();return i.forEach((d=>a=a.add(d))),e.getEntries(r,a).next((d=>{let f=fr();return i.forEach(((y,b)=>{const v=d.get(y);b.isFoundDocument()!==v.isFoundDocument()&&(l=l.add(y)),b.isNoDocument()&&b.version.isEqual(ke.min())?(e.removeEntry(y,b.readTime),f=f.insert(y,b)):!v.isValidDocument()||b.version.compareTo(v.version)>0||b.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(b),f=f.insert(y,b)):xe(Jf,"Ignoring outdated watch update for ",y,". Current version:",v.version," Watch version:",b.version)})),{ks:f,qs:l}}))}function MS(r,e){const i=Be(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Pf),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function VS(r,e){const i=Be(r);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return i.Pi.getTargetData(a,e).next((d=>d?(l=d,ie.resolve(l)):i.Pi.allocateTargetId(a).next((f=>(l=new Zr(e,f,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=i.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function Rf(r,e,i){const a=Be(r),l=a.Ms.get(e),d=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",d,(f=>a.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!uo(f))throw f;xe(Jf,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ms=a.Ms.remove(e),a.xs.delete(l.target)}function F0(r,e,i){const a=Be(r);let l=ke.min(),d=Je();return a.persistence.runTransaction("Execute query","readwrite",(f=>(function(b,v,x){const S=Be(b),D=S.xs.get(x);return D!==void 0?ie.resolve(S.Ms.get(D)):S.Pi.getTargetData(v,x)})(a,f,Li(e)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(f,y.targetId).next((b=>{d=b}))})).next((()=>a.Fs.getDocumentsMatchingQuery(f,e,i?l:ke.min(),i?d:Je()))).next((y=>(OS(a,vA(e),y),{documents:y,Qs:d})))))}function OS(r,e,i){let a=r.Os.get(e)||ke.min();i.forEach(((l,d)=>{d.readTime.compareTo(a)>0&&(a=d.readTime)})),r.Os.set(e,a)}class Q0{constructor(){this.activeTargetIds=AA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jS{constructor(){this.Mo=new Q0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Q0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class K0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cc=null;function Df(){return cc===null?cc=(function(){return 268435456+Math.round(2147483648*Math.random())})():cc++,"0x"+cc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="RestConnection",kS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===Rc?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(e,i,a,l,d){const f=Df(),y=this.zo(e,i.toUriEncodedString());xe(lf,`Sending RPC '${e}' ${f}:`,y,a);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,l,d);const{host:v}=new URL(y),x=kf(v);return this.Jo(e,y,b,a,x).then((S=>(xe(lf,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw eo(lf,`RPC '${e}' ${f} failed with error: `,S,"url: ",y,"request:",a),S}))}Ho(e,i,a,l,d,f){return this.Go(e,i,a,l,d)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,d)=>e[d]=l)),a&&a.headers.forEach(((l,d)=>e[d]=l))}zo(e,i){const a=kS[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class BS extends LS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,l,d){const f=Df();return new Promise(((y,b)=>{const v=new Iv;v.setWithCredentials(!0),v.listenOnce(Mv.COMPLETE,(()=>{try{switch(v.getLastErrorCode()){case hc.NO_ERROR:const S=v.getResponseJson();xe(mn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),y(S);break;case hc.TIMEOUT:xe(mn,`RPC '${e}' ${f} timed out`),b(new be(ee.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const D=v.getStatus();if(xe(mn,`RPC '${e}' ${f} failed with status:`,D,"response text:",v.getResponseText()),D>0){let P=v.getResponseJson();Array.isArray(P)&&(P=P[0]);const re=P==null?void 0:P.error;if(re&&re.status&&re.message){const se=(function(he){const ne=he.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ne)>=0?ne:ee.UNKNOWN})(re.status);b(new be(se,re.message))}else b(new be(ee.UNKNOWN,"Server responded with status "+v.getStatus()))}else b(new be(ee.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{l_:e,streamId:f,h_:v.getLastErrorCode(),P_:v.getLastError()})}}finally{xe(mn,`RPC '${e}' ${f} completed.`)}}));const x=JSON.stringify(l);xe(mn,`RPC '${e}' ${f} sending request:`,l),v.send(i,"POST",x,a,15)}))}T_(e,i,a){const l=Df(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=jv(),y=Ov(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(b.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,i,a),b.encodeInitMessageHeaders=!0;const x=d.join("");xe(mn,`Creating RPC '${e}' stream ${l}: ${x}`,b);const S=f.createWebChannel(x,b);this.I_(S);let D=!1,P=!1;const re=new US({Yo:U=>{P?xe(mn,`Not sending because RPC '${e}' stream ${l} is closed:`,U):(D||(xe(mn,`Opening RPC '${e}' stream ${l} transport.`),S.open(),D=!0),xe(mn,`RPC '${e}' stream ${l} sending:`,U),S.send(U))},Zo:()=>S.close()}),se=(U,he,ne)=>{U.listen(he,(me=>{try{ne(me)}catch(ge){setTimeout((()=>{throw ge}),0)}}))};return se(S,hl.EventType.OPEN,(()=>{P||(xe(mn,`RPC '${e}' stream ${l} transport opened.`),re.o_())})),se(S,hl.EventType.CLOSE,(()=>{P||(P=!0,xe(mn,`RPC '${e}' stream ${l} transport closed`),re.a_(),this.E_(S))})),se(S,hl.EventType.ERROR,(U=>{P||(P=!0,eo(mn,`RPC '${e}' stream ${l} transport errored. Name:`,U.name,"Message:",U.message),re.a_(new be(ee.UNAVAILABLE,"The operation could not be completed")))})),se(S,hl.EventType.MESSAGE,(U=>{var he;if(!P){const ne=U.data[0];ut(!!ne,16349);const me=ne,ge=(me==null?void 0:me.error)||((he=me[0])==null?void 0:he.error);if(ge){xe(mn,`RPC '${e}' stream ${l} received error:`,ge);const Ce=ge.status;let Ee=(function(I){const V=Ht[I];if(V!==void 0)return y_(V)})(Ce),M=ge.message;Ee===void 0&&(Ee=ee.INTERNAL,M="Unknown error status: "+Ce+" with message "+ge.message),P=!0,re.a_(new be(Ee,M)),S.close()}else xe(mn,`RPC '${e}' stream ${l} received:`,ne),re.u_(ne)}})),se(y,Vv.STAT_EVENT,(U=>{U.stat===yf.PROXY?xe(mn,`RPC '${e}' stream ${l} detected buffering proxy`):U.stat===yf.NOPROXY&&xe(mn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{re.__()}),0),re}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(r){return new HA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,i,a=1e3,l=1.5,d=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=l,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-a);l>0&&xe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="PersistentStream";class M_{constructor(e,i,a,l,d,f,y,b){this.Mi=e,this.S_=a,this.b_=l,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I_(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===ee.RESOURCE_EXHAUSTED?(hr(i.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===i&&this.G_(a,l)}),(a=>{e((()=>{const l=new be(ee.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(X0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(xe(X0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class PS extends M_{constructor(e,i,a,l,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,f),this.serializer=d}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=YA(this.serializer,e),a=(function(d){if(!("targetChange"in d))return ke.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?ke.min():f.readTime?Ui(f.readTime):ke.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=Cf(this.serializer),i.addTarget=(function(d,f){let y;const b=f.target;if(y=Tf(b)?{documents:$A(d,b)}:{query:WA(d,b).ft},y.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){y.resumeToken=b_(d,f.resumeToken);const v=Af(d,f.expectedCount);v!==null&&(y.expectedCount=v)}else if(f.snapshotVersion.compareTo(ke.min())>0){y.readTime=Vc(d,f.snapshotVersion.toTimestamp());const v=Af(d,f.expectedCount);v!==null&&(y.expectedCount=v)}return y})(this.serializer,e);const a=JA(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=Cf(this.serializer),i.removeTarget=e,this.q_(i)}}class qS extends M_{constructor(e,i,a,l,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=XA(e.writeResults,e.commitTime),a=Ui(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=Cf(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>KA(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{}class HS extends GS{constructor(e,i,a,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new be(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,Sf(i,a),l,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new be(ee.UNKNOWN,d.toString())}))}Ho(e,i,a,l,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,y])=>this.connection.Ho(e,Sf(i,a),l,f,y,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new be(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class FS{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hr(i),this.aa=!1):xe("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class QS{constructor(e,i,a,l,d){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{a.enqueueAndForget((async()=>{Js(this)&&(xe(Xs,"Restarting streams for network reachability change."),await(async function(b){const v=Be(b);v.Ea.add(4),await zl(v),v.Ra.set("Unknown"),v.Ea.delete(4),await Xc(v)})(this))}))})),this.Ra=new FS(a,l)}}async function Xc(r){if(Js(r))for(const e of r.da)await e(!0)}async function zl(r){for(const e of r.da)await e(!1)}function V_(r,e){const i=Be(r);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),im(i)?nm(i):ho(i).O_()&&tm(i,e))}function em(r,e){const i=Be(r),a=ho(i);i.Ia.delete(e),a.O_()&&O_(i,e),i.Ia.size===0&&(a.O_()?a.L_():Js(i)&&i.Ra.set("Unknown"))}function tm(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ke.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}ho(r).Y_(e)}function O_(r,e){r.Va.Ue(e),ho(r).Z_(e)}function nm(r){r.Va=new BA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),ho(r).start(),r.Ra.ua()}function im(r){return Js(r)&&!ho(r).x_()&&r.Ia.size>0}function Js(r){return Be(r).Ea.size===0}function j_(r){r.Va=void 0}async function YS(r){r.Ra.set("Online")}async function KS(r){r.Ia.forEach(((e,i)=>{tm(r,e)}))}async function XS(r,e){j_(r),im(r)?(r.Ra.ha(e),nm(r)):r.Ra.set("Unknown")}async function $S(r,e,i){if(r.Ra.set("Online"),e instanceof __&&e.state===2&&e.cause)try{await(async function(l,d){const f=d.cause;for(const y of d.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,f),l.Ia.delete(y),l.Va.removeTarget(y))})(r,e)}catch(a){xe(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await jc(r,a)}else if(e instanceof pc?r.Va.Ze(e):e instanceof v_?r.Va.st(e):r.Va.tt(e),!i.isEqual(ke.min()))try{const a=await N_(r.localStore);i.compareTo(a)>=0&&await(function(d,f){const y=d.Va.Tt(f);return y.targetChanges.forEach(((b,v)=>{if(b.resumeToken.approximateByteSize()>0){const x=d.Ia.get(v);x&&d.Ia.set(v,x.withResumeToken(b.resumeToken,f))}})),y.targetMismatches.forEach(((b,v)=>{const x=d.Ia.get(b);if(!x)return;d.Ia.set(b,x.withResumeToken(dn.EMPTY_BYTE_STRING,x.snapshotVersion)),O_(d,b);const S=new Zr(x.target,b,v,x.sequenceNumber);tm(d,S)})),d.remoteSyncer.applyRemoteEvent(y)})(r,i)}catch(a){xe(Xs,"Failed to raise snapshot:",a),await jc(r,a)}}async function jc(r,e,i){if(!uo(e))throw e;r.Ea.add(1),await zl(r),r.Ra.set("Offline"),i||(i=()=>N_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{xe(Xs,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Xc(r)}))}function z_(r,e){return e().catch((i=>jc(r,i,e)))}async function $c(r){const e=Be(r),i=ls(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pf;for(;WS(e);)try{const l=await MS(e.localStore,a);if(l===null){e.Ta.length===0&&i.L_();break}a=l.batchId,ZS(e,l)}catch(l){await jc(e,l)}k_(e)&&L_(e)}function WS(r){return Js(r)&&r.Ta.length<10}function ZS(r,e){r.Ta.push(e);const i=ls(r);i.O_()&&i.X_&&i.ea(e.mutations)}function k_(r){return Js(r)&&!ls(r).x_()&&r.Ta.length>0}function L_(r){ls(r).start()}async function JS(r){ls(r).ra()}async function e2(r){const e=ls(r);for(const i of r.Ta)e.ea(i.mutations)}async function t2(r,e,i){const a=r.Ta.shift(),l=Yf.from(a,e,i);await z_(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await $c(r)}async function n2(r,e){e&&ls(r).X_&&await(async function(a,l){if((function(f){return kA(f)&&f!==ee.ABORTED})(l.code)){const d=a.Ta.shift();ls(a).B_(),await z_(a,(()=>a.remoteSyncer.rejectFailedWrite(d.batchId,l))),await $c(a)}})(r,e),k_(r)&&L_(r)}async function $0(r,e){const i=Be(r);i.asyncQueue.verifyOperationInProgress(),xe(Xs,"RemoteStore received new credentials");const a=Js(i);i.Ea.add(3),await zl(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Xc(i)}async function i2(r,e){const i=Be(r);e?(i.Ea.delete(2),await Xc(i)):e||(i.Ea.add(2),await zl(i),i.Ra.set("Unknown"))}function ho(r){return r.ma||(r.ma=(function(i,a,l){const d=Be(i);return d.sa(),new PS(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,l)})(r.datastore,r.asyncQueue,{Xo:YS.bind(null,r),t_:KS.bind(null,r),r_:XS.bind(null,r),H_:$S.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),im(r)?nm(r):r.Ra.set("Unknown")):(await r.ma.stop(),j_(r))}))),r.ma}function ls(r){return r.fa||(r.fa=(function(i,a,l){const d=Be(i);return d.sa(),new qS(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:JS.bind(null,r),r_:n2.bind(null,r),ta:e2.bind(null,r),na:t2.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await $c(r)):(await r.fa.stop(),r.Ta.length>0&&(xe(Xs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,i,a,l,d){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=d,this.deferred=new ns,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,l,d){const f=Date.now()+a,y=new rm(e,i,f,l,d);return y.start(a),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sm(r,e){if(hr("AsyncQueue",`${e}: ${r}`),uo(r))return new be(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{static emptySet(e){return new Xa(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Ne.comparator(i.key,a.key):(i,a)=>Ne.comparator(i.key,a.key),this.keyedMap=fl(),this.sortedSet=new Ct(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,d=a.getNext().key;if(!l.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new Xa;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.ga=new Ct(Ne.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Ve(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class so{constructor(e,i,a,l,d,f,y,b,v){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=b,this.hasCachedResults=v}static fromInitialDocuments(e,i,a,l,d){const f=[];return i.forEach((y=>{f.push({type:0,doc:y})})),new so(e,i,Xa.emptySet(i),f,a,l,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class s2{constructor(){this.queries=Z0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const l=Be(i),d=l.queries;l.queries=Z0(),d.forEach(((f,y)=>{for(const b of y.Sa)b.onError(a)}))})(this,new be(ee.ABORTED,"Firestore shutting down"))}}function Z0(){return new Ws((r=>r_(r)),Gc)}async function a2(r,e){const i=Be(r);let a=3;const l=e.query;let d=i.queries.get(l);d?!d.ba()&&e.Da()&&(a=2):(d=new r2,a=e.Da()?0:1);try{switch(a){case 0:d.wa=await i.onListen(l,!0);break;case 1:d.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const y=sm(f,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(y)}i.queries.set(l,d),d.Sa.push(e),e.va(i.onlineState),d.wa&&e.Fa(d.wa)&&am(i)}async function o2(r,e){const i=Be(r),a=e.query;let l=3;const d=i.queries.get(a);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?l=e.Da()?0:1:!d.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function l2(r,e){const i=Be(r);let a=!1;for(const l of e){const d=l.query,f=i.queries.get(d);if(f){for(const y of f.Sa)y.Fa(l)&&(a=!0);f.wa=l}}a&&am(i)}function u2(r,e,i){const a=Be(r),l=a.queries.get(e);if(l)for(const d of l.Sa)d.onError(i);a.queries.delete(e)}function am(r){r.Ca.forEach((e=>{e.next()}))}var Nf,J0;(J0=Nf||(Nf={})).Ma="default",J0.Cache="cache";class c2{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new so(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=so.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Nf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.key=e}}class B_{constructor(e){this.key=e}}class d2{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=s_(e),this.tu=new Xa(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new W0,l=i?i.tu:this.tu;let d=i?i.mutatedKeys:this.mutatedKeys,f=l,y=!1;const b=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,v=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,S)=>{const D=l.get(x),P=Hc(this.query,S)?S:null,re=!!D&&this.mutatedKeys.has(D.key),se=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let U=!1;D&&P?D.data.isEqual(P.data)?re!==se&&(a.track({type:3,doc:P}),U=!0):this.su(D,P)||(a.track({type:2,doc:P}),U=!0,(b&&this.eu(P,b)>0||v&&this.eu(P,v)<0)&&(y=!0)):!D&&P?(a.track({type:0,doc:P}),U=!0):D&&!P&&(a.track({type:1,doc:D}),U=!0,(b||v)&&(y=!0)),U&&(P?(f=f.add(P),d=se?d.add(x):d.delete(x)):(f=f.delete(x),d=d.delete(x)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const x=this.query.limitType==="F"?f.last():f.first();f=f.delete(x.key),d=d.delete(x.key),a.track({type:1,doc:x})}return{tu:f,iu:a,Cs:y,mutatedKeys:d}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,l){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((x,S)=>(function(P,re){const se=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{Rt:U})}};return se(P)-se(re)})(x.type,S.type)||this.eu(x.doc,S.doc))),this.ou(a),l=l??!1;const y=i&&!l?this._u():[],b=this.Xa.size===0&&this.current&&!l?1:0,v=b!==this.Za;return this.Za=b,f.length!==0||v?{snapshot:new so(this.query,e.tu,d,f,e.mutatedKeys,b===0,v,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new B_(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new U_(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=Je();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return so.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const om="SyncEngine";class h2{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class f2{constructor(e){this.key=e,this.hu=!1}}class m2{constructor(e,i,a,l,d,f){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ws((y=>r_(y)),Gc),this.Iu=new Map,this.Eu=new Set,this.du=new Ct(Ne.comparator),this.Au=new Map,this.Ru=new $f,this.Vu={},this.mu=new Map,this.fu=ro.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function g2(r,e,i=!0){const a=Q_(r);let l;const d=a.Tu.get(e);return d?(a.sharedClientState.addLocalQueryTarget(d.targetId),l=d.view.lu()):l=await P_(a,e,i,!0),l}async function p2(r,e){const i=Q_(r);await P_(i,e,!0,!1)}async function P_(r,e,i,a){const l=await VS(r.localStore,Li(e)),d=l.targetId,f=r.sharedClientState.addLocalQueryTarget(d,i);let y;return a&&(y=await y2(r,e,d,f==="current",l.resumeToken)),r.isPrimaryClient&&i&&V_(r.remoteStore,l),y}async function y2(r,e,i,a,l){r.pu=(S,D,P)=>(async function(se,U,he,ne){let me=U.view.ru(he);me.Cs&&(me=await F0(se.localStore,U.query,!1).then((({documents:M})=>U.view.ru(M,me))));const ge=ne&&ne.targetChanges.get(U.targetId),Ce=ne&&ne.targetMismatches.get(U.targetId)!=null,Ee=U.view.applyChanges(me,se.isPrimaryClient,ge,Ce);return tv(se,U.targetId,Ee.au),Ee.snapshot})(r,S,D,P);const d=await F0(r.localStore,e,!0),f=new d2(e,d.Qs),y=f.ru(d.documents),b=jl.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",l),v=f.applyChanges(y,r.isPrimaryClient,b);tv(r,i,v.au);const x=new h2(e,i,f);return r.Tu.set(e,x),r.Iu.has(i)?r.Iu.get(i).push(e):r.Iu.set(i,[e]),v.snapshot}async function v2(r,e,i){const a=Be(r),l=a.Tu.get(e),d=a.Iu.get(l.targetId);if(d.length>1)return a.Iu.set(l.targetId,d.filter((f=>!Gc(f,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await Rf(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),i&&em(a.remoteStore,l.targetId),If(a,l.targetId)})).catch(lo)):(If(a,l.targetId),await Rf(a.localStore,l.targetId,!0))}async function _2(r,e){const i=Be(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),em(i.remoteStore,a.targetId))}async function b2(r,e,i){const a=C2(r);try{const l=await(function(f,y){const b=Be(f),v=Tt.now(),x=y.reduce(((P,re)=>P.add(re.key)),Je());let S,D;return b.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let re=fr(),se=Je();return b.Ns.getEntries(P,x).next((U=>{re=U,re.forEach(((he,ne)=>{ne.isValidDocument()||(se=se.add(he))}))})).next((()=>b.localDocuments.getOverlayedDocuments(P,re))).next((U=>{S=U;const he=[];for(const ne of y){const me=MA(ne,S.get(ne.key).overlayedDocument);me!=null&&he.push(new Zs(ne.key,me,Xv(me.value.mapValue),cr.exists(!0)))}return b.mutationQueue.addMutationBatch(P,v,he,y)})).next((U=>{D=U;const he=U.applyToLocalDocumentSet(S,se);return b.documentOverlayCache.saveOverlays(P,U.batchId,he)}))})).then((()=>({batchId:D.batchId,changes:o_(S)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(f,y,b){let v=f.Vu[f.currentUser.toKey()];v||(v=new Ct(Ze)),v=v.insert(y,b),f.Vu[f.currentUser.toKey()]=v})(a,l.batchId,i),await kl(a,l.changes),await $c(a.remoteStore)}catch(l){const d=sm(l,"Failed to persist write");i.reject(d)}}async function q_(r,e){const i=Be(r);try{const a=await NS(i.localStore,e);e.targetChanges.forEach(((l,d)=>{const f=i.Au.get(d);f&&(ut(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ut(f.hu,14607):l.removedDocuments.size>0&&(ut(f.hu,42227),f.hu=!1))})),await kl(i,a,e)}catch(a){await lo(a)}}function ev(r,e,i){const a=Be(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.Tu.forEach(((d,f)=>{const y=f.view.va(e);y.snapshot&&l.push(y.snapshot)})),(function(f,y){const b=Be(f);b.onlineState=y;let v=!1;b.queries.forEach(((x,S)=>{for(const D of S.Sa)D.va(y)&&(v=!0)})),v&&am(b)})(a.eventManager,e),l.length&&a.Pu.H_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function E2(r,e,i){const a=Be(r);a.sharedClientState.updateQueryState(e,"rejected",i);const l=a.Au.get(e),d=l&&l.key;if(d){let f=new Ct(Ne.comparator);f=f.insert(d,pn.newNoDocument(d,ke.min()));const y=Je().add(d),b=new Yc(ke.min(),new Map,new Ct(Ze),f,y);await q_(a,b),a.du=a.du.remove(d),a.Au.delete(e),lm(a)}else await Rf(a.localStore,e,!1).then((()=>If(a,e,i))).catch(lo)}async function T2(r,e){const i=Be(r),a=e.batch.batchId;try{const l=await DS(i.localStore,e);H_(i,a,null),G_(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await kl(i,l)}catch(l){await lo(l)}}async function x2(r,e,i){const a=Be(r);try{const l=await(function(f,y){const b=Be(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",(v=>{let x;return b.mutationQueue.lookupMutationBatch(v,y).next((S=>(ut(S!==null,37113),x=S.keys(),b.mutationQueue.removeMutationBatch(v,S)))).next((()=>b.mutationQueue.performConsistencyCheck(v))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(v,x,y))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,x))).next((()=>b.localDocuments.getDocuments(v,x)))}))})(a.localStore,e);H_(a,e,i),G_(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await kl(a,l)}catch(l){await lo(l)}}function G_(r,e){(r.mu.get(e)||[]).forEach((i=>{i.resolve()})),r.mu.delete(e)}function H_(r,e,i){const a=Be(r);let l=a.Vu[a.currentUser.toKey()];if(l){const d=l.get(e);d&&(i?d.reject(i):d.resolve(),l=l.remove(e)),a.Vu[a.currentUser.toKey()]=l}}function If(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),i&&r.Pu.yu(a,i);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||F_(r,a)}))}function F_(r,e){r.Eu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(em(r.remoteStore,i),r.du=r.du.remove(e),r.Au.delete(i),lm(r))}function tv(r,e,i){for(const a of i)a instanceof U_?(r.Ru.addReference(a.key,e),A2(r,a)):a instanceof B_?(xe(om,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||F_(r,a.key)):Ve(19791,{wu:a})}function A2(r,e){const i=e.key,a=i.path.canonicalString();r.du.get(i)||r.Eu.has(a)||(xe(om,"New document in limbo: "+i),r.Eu.add(a),lm(r))}function lm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const i=new Ne(_t.fromString(e)),a=r.fu.next();r.Au.set(a,new f2(i)),r.du=r.du.insert(i,a),V_(r.remoteStore,new Zr(Li(n_(i.path)),a,"TargetPurposeLimboResolution",Bc.ce))}}async function kl(r,e,i){const a=Be(r),l=[],d=[],f=[];a.Tu.isEmpty()||(a.Tu.forEach(((y,b)=>{f.push(a.pu(b,e,i).then((v=>{var x;if((v||i)&&a.isPrimaryClient){const S=v?!v.fromCache:(x=i==null?void 0:i.targetChanges.get(b.targetId))==null?void 0:x.current;a.sharedClientState.updateQueryState(b.targetId,S?"current":"not-current")}if(v){l.push(v);const S=Zf.As(b.targetId,v);d.push(S)}})))})),await Promise.all(f),a.Pu.H_(l),await(async function(b,v){const x=Be(b);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>ie.forEach(v,(D=>ie.forEach(D.Es,(P=>x.persistence.referenceDelegate.addReference(S,D.targetId,P))).next((()=>ie.forEach(D.ds,(P=>x.persistence.referenceDelegate.removeReference(S,D.targetId,P)))))))))}catch(S){if(!uo(S))throw S;xe(Jf,"Failed to update sequence numbers: "+S)}for(const S of v){const D=S.targetId;if(!S.fromCache){const P=x.Ms.get(D),re=P.snapshotVersion,se=P.withLastLimboFreeSnapshotVersion(re);x.Ms=x.Ms.insert(D,se)}}})(a.localStore,d))}async function S2(r,e){const i=Be(r);if(!i.currentUser.isEqual(e)){xe(om,"User change. New user:",e.toKey());const a=await D_(i.localStore,e);i.currentUser=e,(function(d,f){d.mu.forEach((y=>{y.forEach((b=>{b.reject(new be(ee.CANCELLED,f))}))})),d.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await kl(i,a.Ls)}}function w2(r,e){const i=Be(r),a=i.Au.get(e);if(a&&a.hu)return Je().add(a.key);{let l=Je();const d=i.Iu.get(e);if(!d)return l;for(const f of d){const y=i.Tu.get(f);l=l.unionWith(y.view.nu)}return l}}function Q_(r){const e=Be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=w2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=E2.bind(null,e),e.Pu.H_=l2.bind(null,e.eventManager),e.Pu.yu=u2.bind(null,e.eventManager),e}function C2(r){const e=Be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=T2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x2.bind(null,e),e}class zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return RS(this.persistence,new SS,e.initialUser,this.serializer)}Cu(e){return new R_(Wf.mi,this.serializer)}Du(e){return new jS}async terminate(){var e,i;(e=this.gcScheduler)==null||e.stop(),(i=this.indexBackfillerScheduler)==null||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zc.provider={build:()=>new zc};class R2 extends zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){ut(this.persistence.referenceDelegate instanceof Oc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new cS(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new R_((a=>Oc.mi(a,i)),this.serializer)}}class Mf{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>ev(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=S2.bind(null,this.syncEngine),await i2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new s2})()}createDatastore(e){const i=Kc(e.databaseInfo.databaseId),a=(function(d){return new BS(d)})(e.databaseInfo);return(function(d,f,y,b){return new HS(d,f,y,b)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,l,d,f,y){return new QS(a,l,d,f,y)})(this.localStore,this.datastore,e.asyncQueue,(i=>ev(this.syncEngine,i,0)),(function(){return K0.v()?new K0:new zS})())}createSyncEngine(e,i){return(function(l,d,f,y,b,v,x){const S=new m2(l,d,f,y,b,v);return x&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await(async function(l){const d=Be(l);xe(Xs,"RemoteStore shutting down."),d.Ea.add(5),await zl(d),d.Aa.shutdown(),d.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(i=this.eventManager)==null||i.terminate()}}Mf.provider={build:()=>new Mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="FirestoreClient";class N2{constructor(e,i,a,l,d){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=gn.UNAUTHENTICATED,this.clientId=Bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(a,(async f=>{xe(us,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(a,(f=>(xe(us,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ns;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=sm(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function cf(r,e){r.asyncQueue.verifyOperationInProgress(),xe(us,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener((async l=>{a.isEqual(l)||(await D_(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function nv(r,e){r.asyncQueue.verifyOperationInProgress();const i=await I2(r);xe(us,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener((a=>$0(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,l)=>$0(e.remoteStore,l))),r._onlineComponents=e}async function I2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xe(us,"Using user provided OfflineComponentProvider");try{await cf(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ee.FAILED_PRECONDITION||l.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;eo("Error using user provided cache. Falling back to memory cache: "+i),await cf(r,new zc)}}else xe(us,"Using default OfflineComponentProvider"),await cf(r,new R2(void 0));return r._offlineComponents}async function Y_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xe(us,"Using user provided OnlineComponentProvider"),await nv(r,r._uninitializedComponentsProvider._online)):(xe(us,"Using default OnlineComponentProvider"),await nv(r,new Mf))),r._onlineComponents}function M2(r){return Y_(r).then((e=>e.syncEngine))}async function V2(r){const e=await Y_(r),i=e.eventManager;return i.onListen=g2.bind(null,e.syncEngine),i.onUnlisten=v2.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=p2.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=_2.bind(null,e.syncEngine),i}function O2(r,e,i={}){const a=new ns;return r.asyncQueue.enqueueAndForget((async()=>(function(d,f,y,b,v){const x=new D2({next:D=>{x.Nu(),f.enqueueAndForget((()=>o2(d,S))),D.fromCache&&b.source==="server"?v.reject(new be(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(D)},error:D=>v.reject(D)}),S=new c2(y,x,{includeMetadataChanges:!0,qa:!0});return a2(d,S)})(await V2(r),r.asyncQueue,e,i,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="firestore.googleapis.com",rv=!0;class sv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X_,this.ssl=rv}else this.host=e.host,this.ssl=e.ssl??rv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lS)throw new be(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Hx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K_(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,i,a,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Ox;switch(a.type){case"firstParty":return new Lx(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new be(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=iv.get(i);a&&(xe("ComponentProvider","Removing Datastore"),iv.delete(i),a.terminate())})(this),Promise.resolve()}}function j2(r,e,i,a={}){var v;r=Al(r,Wc);const l=kf(e),d=r._getSettings(),f={...d,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${i}`;l&&(oT(`https://${y}`),dT("Firestore",!0)),d.host!==X_&&d.host!==y&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...d,host:y,ssl:l,emulatorOptions:a};if(!Ac(b,f)&&(r._setSettings(b),a.mockUserToken)){let x,S;if(typeof a.mockUserToken=="string")x=a.mockUserToken,S=gn.MOCK_USER;else{x=lT(a.mockUserToken,(v=r._app)==null?void 0:v.options.projectId);const D=a.mockUserToken.sub||a.mockUserToken.user_id;if(!D)throw new be(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new gn(D)}r._authCredentials=new jx(new kv(x,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ds(this.firestore,e,this._query)}}class Wt{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new is(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}toJSON(){return{type:Wt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(Vl(i,Wt._jsonSchema))return new Wt(e,a||null,new Ne(_t.fromString(i.referencePath)))}}Wt._jsonSchemaVersion="firestore/documentReference/1.0",Wt._jsonSchema={type:Qt("string",Wt._jsonSchemaVersion),referencePath:Qt("string")};class is extends ds{constructor(e,i,a){super(e,i,n_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new Ne(e))}withConverter(e){return new is(this.firestore,e,this._path)}}function $_(r,e,...i){if(r=Ja(r),Lv("collection","path",e),r instanceof Wc){const a=_t.fromString(e,...i);return v0(a),new is(r,null,a)}{if(!(r instanceof Wt||r instanceof is))throw new be(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(_t.fromString(e,...i));return v0(a),new is(r.firestore,null,a)}}function av(r,e,...i){if(r=Ja(r),arguments.length===1&&(e=Bf.newId()),Lv("doc","path",e),r instanceof Wc){const a=_t.fromString(e,...i);return y0(a),new Wt(r,null,new Ne(a))}{if(!(r instanceof Wt||r instanceof is))throw new be(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(_t.fromString(e,...i));return y0(a),new Wt(r.firestore,r instanceof is?r.converter:null,new Ne(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="AsyncQueue";class lv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I_(this,"async_queue_retry"),this._c=()=>{const a=uf();a&&xe(ov,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=uf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=uf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new ns;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!uo(e))throw e;xe(ov,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,hr("INTERNAL UNHANDLED ERROR: ",uv(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=rm.createAndSchedule(this,e,i,a,(d=>this.hc(d)));return this.tc.push(l),l}uc(){this.nc&&Ve(47125,{Pc:uv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function uv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class um extends Wc{constructor(e,i,a,l){super(e,i,a,l),this.type="firestore",this._queue=new lv,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new lv(e),this._firestoreClient=void 0,await e}}}function z2(r,e){const i=typeof r=="object"?r:Ex(),a=typeof r=="string"?r:Rc,l=px(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const d=sT("firestore");d&&j2(l,...d)}return l}function W_(r){if(r._terminated)throw new be(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||k2(r),r._firestoreClient}function k2(r){var a,l,d;const e=r._freezeSettings(),i=(function(y,b,v,x){return new nA(y,b,v,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,K_(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(r._databaseId,((a=r._app)==null?void 0:a.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new N2(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(y){const b=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(b),_online:b}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ni(dn.fromBase64String(e))}catch(i){throw new be(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new ni(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ni._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Vl(e,ni._jsonSchema))return ni.fromBase64String(e.bytes)}}ni._jsonSchemaVersion="firestore/bytes/1.0",ni._jsonSchema={type:Qt("string",ni._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new be(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new be(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new be(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Bi._jsonSchemaVersion}}static fromJSON(e){if(Vl(e,Bi._jsonSchema))return new Bi(e.latitude,e.longitude)}}Bi._jsonSchemaVersion="firestore/geoPoint/1.0",Bi._jsonSchema={type:Qt("string",Bi._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let d=0;d<a.length;++d)if(a[d]!==l[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Vl(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Pi(e.vectorValues);throw new be(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:Qt("string",Pi._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2=/^__.*__$/;class U2{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,i,this.fieldTransforms):new Ol(e,this.data,i,this.fieldTransforms)}}function Z_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ac:r})}}class hm{constructor(e,i,a,l,d,f){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const i=(l=this.path)==null?void 0:l.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){var l;const i=(l=this.path)==null?void 0:l.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return kc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Z_(this.Ac)&&L2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class B2{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Kc(e)}Cc(e,i,a,l=!1){return new hm({Ac:e,methodName:i,Dc:a,path:cn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function J_(r){const e=r._freezeSettings(),i=Kc(r._databaseId);return new B2(r._databaseId,!!e.ignoreUndefinedProperties,i)}function P2(r,e,i,a,l,d={}){const f=r.Cc(d.merge||d.mergeFields?2:0,e,i,l);n1("Data must be an object, but it was:",f,a);const y=e1(a,f);let b,v;if(d.merge)b=new pi(f.fieldMask),v=f.fieldTransforms;else if(d.mergeFields){const x=[];for(const S of d.mergeFields){const D=G2(e,S,i);if(!f.contains(D))throw new be(ee.INVALID_ARGUMENT,`Field '${D}' is specified in your field mask but missing from your input data.`);F2(x,D)||x.push(D)}b=new pi(x),v=f.fieldTransforms.filter((S=>b.covers(S.field)))}else b=null,v=f.fieldTransforms;return new U2(new ti(y),b,v)}class fm extends dm{_toFieldTransform(e){return new RA(e.path,new Nl)}isEqual(e){return e instanceof fm}}function q2(r,e,i,a=!1){return mm(i,r.Cc(a?4:3,e))}function mm(r,e){if(t1(r=Ja(r)))return n1("Unsupported field value:",e,r),e1(r,e);if(r instanceof dm)return(function(a,l){if(!Z_(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const d=a._toFieldTransform(l);d&&l.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,l){const d=[];let f=0;for(const y of a){let b=mm(y,l.wc(f));b==null&&(b={nullValue:"NULL_VALUE"}),d.push(b),f++}return{arrayValue:{values:d}}})(r,e)}return(function(a,l){if((a=Ja(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return SA(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const d=Tt.fromDate(a);return{timestampValue:Vc(l.serializer,d)}}if(a instanceof Tt){const d=new Tt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Vc(l.serializer,d)}}if(a instanceof Bi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof ni)return{bytesValue:b_(l.serializer,a._byteString)};if(a instanceof Wt){const d=l.databaseId,f=a.firestore._databaseId;if(!f.isEqual(d))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Xf(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Pi)return(function(f,y){return{mapValue:{fields:{[Yv]:{stringValue:Kv},[Dc]:{arrayValue:{values:f.toArray().map((v=>{if(typeof v!="number")throw y.Sc("VectorValues must only contain numeric values.");return Qf(y.serializer,v)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${Uc(a)}`)})(r,e)}function e1(r,e){const i={};return Pv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(r,((a,l)=>{const d=mm(l,e.mc(a));d!=null&&(i[a]=d)})),{mapValue:{fields:i}}}function t1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Tt||r instanceof Bi||r instanceof ni||r instanceof Wt||r instanceof dm||r instanceof Pi)}function n1(r,e,i){if(!t1(i)||!Uv(i)){const a=Uc(i);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function G2(r,e,i){if((e=Ja(e))instanceof cm)return e._internalPath;if(typeof e=="string")return i1(r,e);throw kc("Field path arguments must be of type string or ",r,!1,void 0,i)}const H2=new RegExp("[~\\*/\\[\\]]");function i1(r,e,i){if(e.search(H2)>=0)throw kc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new cm(...e.split("."))._internalPath}catch{throw kc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function kc(r,e,i,a,l){const d=a&&!a.isEmpty(),f=l!==void 0;let y=`Function ${e}() called with invalid data`;i&&(y+=" (via `toFirestore()`)"),y+=". ";let b="";return(d||f)&&(b+=" (found",d&&(b+=` in field ${a}`),f&&(b+=` in document ${l}`),b+=")"),new be(ee.INVALID_ARGUMENT,y+r+b)}function F2(r,e){return r.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,i,a,l,d){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=l,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(gm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class Q2 extends r1{data(){return super.data()}}function gm(r,e){return typeof e=="string"?i1(r,e):e instanceof cm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class ym extends pm{}function s1(r,e,...i){let a=[];e instanceof pm&&a.push(e),a=a.concat(i),(function(d){const f=d.filter((b=>b instanceof _m)).length,y=d.filter((b=>b instanceof vm)).length;if(f>1||f>0&&y>0)throw new be(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const l of a)r=l._apply(r);return r}class vm extends ym{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new vm(e,i,a)}_apply(e){const i=this._parse(e);return l1(e._query,i),new ds(e.firestore,e.converter,xf(e._query,i))}_parse(e){const i=J_(e.firestore);return(function(d,f,y,b,v,x,S){let D;if(v.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new be(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){dv(S,x);const re=[];for(const se of S)re.push(cv(b,d,se));D={arrayValue:{values:re}}}else D=cv(b,d,S)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||dv(S,x),D=q2(y,f,S,x==="in"||x==="not-in");return Ft.create(v,x,D)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class _m extends pm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new _m(e,i)}_parse(e){const i=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return i.length===1?i[0]:yi.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(l,d){let f=l;const y=d.getFlattenedFilters();for(const b of y)l1(f,b),f=xf(f,b)})(e._query,i),new ds(e.firestore,e.converter,xf(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bm extends ym{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new bm(e,i)}_apply(e){const i=(function(l,d,f){if(l.startAt!==null)throw new be(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new be(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Dl(d,f)})(e._query,this._field,this._direction);return new ds(e.firestore,e.converter,(function(l,d){const f=l.explicitOrderBy.concat([d]);return new co(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,i))}}function a1(r,e="asc"){const i=e,a=gm("orderBy",r);return bm._create(a,i)}class Em extends ym{constructor(e,i,a){super(),this.type=e,this._limit=i,this._limitType=a}static _create(e,i,a){return new Em(e,i,a)}_apply(e){return new ds(e.firestore,e.converter,Ic(e._query,this._limit,this._limitType))}}function o1(r){return Fx("limit",r),Em._create("limit",r,"F")}function cv(r,e,i){if(typeof(i=Ja(i))=="string"){if(i==="")throw new be(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i_(e)&&i.indexOf("/")!==-1)throw new be(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(_t.fromString(i));if(!Ne.isDocumentKey(a))throw new be(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return w0(r,new Ne(a))}if(i instanceof Wt)return w0(r,i._key);throw new be(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(i)}.`)}function dv(r,e){if(!Array.isArray(r)||r.length===0)throw new be(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l1(r,e){const i=(function(l,d){for(const f of l)for(const y of f.getFlattenedFilters())if(d.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new be(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class K2{convertValue(e,i="none"){switch(os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return $s(e,((l,d)=>{a[l]=this.convertValue(d,i)})),a}convertVectorValue(e){var a,l,d;const i=(d=(l=(a=e.fields)==null?void 0:a[Dc].arrayValue)==null?void 0:l.values)==null?void 0:d.map((f=>zt(f.doubleValue)));return new Pi(i)}convertGeoPoint(e){return new Bi(zt(e.latitude),zt(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=qc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(wl(e));default:return null}}convertTimestamp(e){const i=ss(e);return new Tt(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=_t.fromString(e);ut(w_(a),9688,{name:e});const l=new Cl(a.get(1),a.get(3)),d=new Ne(a.popFirst(5));return l.isEqual(i)||hr(`Document ${d} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(r,e,i){let a;return a=r?r.toFirestore(e):e,a}class dc{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends r1{constructor(e,i,a,l,d,f){super(e,i,a,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(gm("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=$a._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:Qt("string",$a._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class yc extends $a{data(e={}){return super.data(e)}}class Wa{constructor(e,i,a,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new dc(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new yc(this._firestore,this._userDataWriter,a.key,a,new dc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new be(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,d){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((y=>{const b=new yc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new dc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:b,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>d||y.type!==3)).map((y=>{const b=new yc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new dc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let v=-1,x=-1;return y.type!==0&&(v=f.indexOf(y.doc.key),f=f.delete(y.doc.key)),y.type!==1&&(f=f.add(y.doc),x=f.indexOf(y.doc.key)),{type:$2(y.type),doc:b,oldIndex:v,newIndex:x}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],l=[];return this.docs.forEach((d=>{d._document!==null&&(i.push(d._document),a.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),l.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function $2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:r})}}Wa._jsonSchemaVersion="firestore/querySnapshot/1.0",Wa._jsonSchema={type:Qt("string",Wa._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class W2 extends K2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ni(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,i)}}function u1(r){r=Al(r,ds);const e=Al(r.firestore,um),i=W_(e),a=new W2(e);return Y2(r._query),O2(i,r._query).then((l=>new Wa(e,a,r,l)))}function hv(r,e,i){r=Al(r,Wt);const a=Al(r.firestore,um),l=X2(r.converter,e);return Z2(a,[P2(J_(a),"setDoc",r._key,l,r.converter!==null,i).toMutation(r._key,cr.none())])}function Z2(r,e){return(function(a,l){const d=new ns;return a.asyncQueue.enqueueAndForget((async()=>b2(await M2(a),l,d))),d.promise})(W_(r),e)}function fv(){return new fm("serverTimestamp")}(function(e,i=!0){(function(l){oo=l})(bx),wc(new Tl("firestore",((a,{instanceIdentifier:l,options:d})=>{const f=a.getProvider("app").getImmediate(),y=new um(new zx(a.getProvider("auth-internal")),new Ux(f,a.getProvider("app-check-internal")),(function(v,x){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new be(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cl(v.options.projectId,x)})(f,l),f);return d={useFetchStreams:i,...d},y._setSettings(d),y}),"PUBLIC").setMultipleInstances(!0)),Ka(f0,m0,e),Ka(f0,m0,"esm2020")})();const J2={apiKey:"AIzaSyA1Dw5M2Zk8bpTCjlU2Tuifvx0ZI3IeRv0",authDomain:"kingdomclicker-156dc.firebaseapp.com",projectId:"kingdomclicker-156dc",storageBucket:"kingdomclicker-156dc.firebasestorage.app",messagingSenderId:"496461589742",appId:"1:496461589742:web:e6413dfa2d1bbabd3ad7ff"},ew=Cv(J2),Lc=z2(ew);function tw(){return`#${Math.floor(Math.random()*99999).toString().padStart(5,"0")}`}function nw(){const r=new Date,e=r.getDay(),i=r.getDate()-e+(e===0?-6:1);return new Date(r.setDate(i))}async function mv(r){try{console.log("     :",{rulerName:r.rulerName,rulerId:r.rulerId,gold:r.gold.toString(),renown:r.renown.toString(),buildings:r.buildings,achievements:r.achievements});const e={...r,period:"alltime"},i={...r,period:"weekly"};console.log("   leaderboard_alltime...");const a=av(Lc,"leaderboard_alltime",r.rulerId);await hv(a,{...e,gold:Number(e.gold.toString()),renown:Number(e.renown.toString()),timestamp:fv()}),console.log("    leaderboard_alltime, ID:",r.rulerId),console.log("   leaderboard_weekly...");const l=av(Lc,"leaderboard_weekly",r.rulerId);return await hv(l,{...i,gold:Number(i.gold.toString()),renown:Number(i.renown.toString()),timestamp:fv()}),console.log("    leaderboard_weekly, ID:",r.rulerId),console.log("    !"),{allTimeId:r.rulerId,weeklyId:r.rulerId}}catch(e){throw console.error("    :"),console.error(" :",e),e instanceof Error&&(console.error(" :",e.message),console.error(" :",e.stack)),"code"in e&&(console.error("  Firebase:",e.code),console.error(" :",e.customData)),e}}async function iw(r=100){try{console.log("   all-time ...");const e=s1($_(Lc,"leaderboard_alltime"),a1("gold","desc"),o1(r));console.log("    Firestore...");const i=await u1(e);console.log("  :",i.docs.length);const a=i.docs.map(l=>{const d=l.data();return{id:l.id,...d,gold:d.gold instanceof $t?d.gold:new $t(d.gold),renown:d.renown instanceof $t?d.renown:new $t(d.renown),timestamp:d.timestamp}});return console.log(" All-time   , :",a.length),a}catch(e){throw console.error("   all-time :"),console.error(" :",e),e instanceof Error&&(console.error(" :",e.message),console.error(" :",e.stack)),"code"in e&&console.error("  Firebase:",e.code),e}}async function rw(r=100){try{console.log("   weekly ...");const e=nw();console.log("  :",e.toISOString());const i=s1($_(Lc,"leaderboard_weekly"),a1("gold","desc"),o1(r));console.log("    Firestore...");const a=await u1(i);console.log("    :",a.docs.length);const d=a.docs.map(f=>{const y=f.data();return{id:f.id,...y,gold:y.gold instanceof $t?y.gold:new $t(y.gold),renown:y.renown instanceof $t?y.renown:new $t(y.renown),timestamp:y.timestamp}}).filter(f=>{var v,x;const y=((x=(v=f.timestamp)==null?void 0:v.toDate)==null?void 0:x.call(v))||new Date(f.timestamp),b=y>=e;return b||console.log("   ( ):",y.toISOString()),b});return console.log(" Weekly   ,   :",d.length),d}catch(e){throw console.error("   weekly :"),console.error(" :",e),e instanceof Error&&(console.error(" :",e.message),console.error(" :",e.stack)),"code"in e&&console.error("  Firebase:",e.code),e}}const sw=({isOpen:r,onClose:e,onConfirm:i,gameState:a})=>{const[l,d]=_e.useState(""),[f,y]=_e.useState(!1);if(!r)return null;const b=async()=>{if(l.trim().length<3){alert("Ruler name must contain at least 3 characters!");return}if(l.trim().length>20){alert("Ruler name must not exceed 20 characters!");return}y(!0);try{const x={id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,rulerName:l.trim(),rulerId:tw(),lastLeaderboardView:0,lastLeaderboardSubmit:0,hasChosenName:!0};i(x),e()}catch{alert("An error occurred while creating profile. Please try again.")}finally{y(!1)}};return p.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:p.jsxs("div",{style:{backgroundColor:"#fdf6e3",border:"4px solid #8d6e63",borderRadius:"8px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center",fontFamily:"Georgia, serif"},children:[p.jsx("h2",{style:{color:"#3e2723",marginBottom:"16px"},children:" Royal Coronation! "}),p.jsxs("p",{style:{color:"#5d4037",marginBottom:"24px",lineHeight:"1.5"},children:["Congratulations! Your kingdom has reached ",p.jsx("strong",{children:aw(a.gold)})," gold!",p.jsx("br",{}),"It's time to choose a name for your ruler and enter the history books!"]}),p.jsxs("div",{style:{marginBottom:"24px"},children:[p.jsx("label",{style:{display:"block",color:"#3e2723",marginBottom:"8px",fontWeight:"bold"},children:"Ruler Name:"}),p.jsx("input",{type:"text",value:l,onChange:v=>d(v.target.value),placeholder:"Enter your name...",maxLength:20,style:{width:"100%",padding:"12px",border:"2px solid #a1887f",borderRadius:"4px",fontSize:"16px",fontFamily:"Arial, sans-serif",backgroundColor:"#fff",color:"#3e2723"},onKeyPress:v=>v.key==="Enter"&&b()}),p.jsxs("div",{style:{fontSize:"12px",color:"#8d6e63",marginTop:"4px",textAlign:"left"},children:[l.length,"/20 characters"]})]}),p.jsx("div",{style:{backgroundColor:"#fff3e0",border:"2px solid #bf9000",borderRadius:"4px",padding:"12px",marginBottom:"24px"},children:p.jsx("p",{style:{color:"#bf9000",margin:0,fontSize:"14px",fontWeight:"bold"},children:" Important: You'll be able to join the leaderboard and compete with players from around the world!"})}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[p.jsx("button",{type:"button",onClick:b,disabled:f||l.trim().length<3,style:{padding:"12px 24px",backgroundColor:f||l.trim().length<3?"#cccccc":"#2e7d32",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:f||l.trim().length<3?"not-allowed":"pointer",fontFamily:"Georgia, serif"},children:f?"Creating profile...":"Ascend the Throne"}),p.jsx("button",{type:"button",onClick:e,style:{padding:"12px 24px",backgroundColor:"#c62828",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",cursor:"pointer",fontFamily:"Georgia, serif",transition:"background-color 0.2s"},onMouseOver:v=>{v.currentTarget.style.backgroundColor="#d32f2f"},onMouseOut:v=>{v.currentTarget.style.backgroundColor="#c62828"},children:"Later"})]})]})})};function aw(r){return r.lt(1e3)?r.toFixed(0):r.lt(1e6)?r.toNumber().toLocaleString():r.toExponential(2)}const ow=({isOpen:r,onClose:e,playerProfile:i,onOpenRulerNameModal:a,gameState:l})=>{const[d,f]=_e.useState([]),[y,b]=_e.useState([]),[v,x]=_e.useState("alltime"),[S,D]=_e.useState(!1),[P,re]=_e.useState(null),[se,U]=_e.useState(0),[he,ne]=_e.useState(0),me=()=>{const V=localStorage.getItem("leaderboardCache");if(V)try{const{data:N,timestamp:z}=JSON.parse(V),w=Date.now(),Oe=3600*1e3;if(w-z<Oe&&N&&N.allTime&&N.weekly)return N}catch(N){console.error("Cache parse error:",N)}return null},ge=V=>{const N={data:V,timestamp:Date.now()};localStorage.setItem("leaderboardCache",JSON.stringify(N)),ne(Date.now())};_e.useEffect(()=>{if(r){try{const V=me();if(V){f(V.allTime),b(V.weekly);const N=JSON.parse(localStorage.getItem("leaderboardCache"));ne(N.timestamp);return}}catch(V){console.error("Cache read error:",V)}Ce()}},[r]);const Ce=async()=>{D(!0),re(null);try{const V=new Promise((w,Oe)=>setTimeout(()=>Oe(new Error("Loading timeout")),1e4)),[N,z]=await Promise.all([Promise.race([iw(50),V]),Promise.race([rw(50),V])]);f(N),b(z),ge({allTime:N,weekly:z})}catch(V){console.error("Error loading leaderboard:",V),re("Failed to load leaderboard. Please check your internet connection and try again.")}finally{D(!1)}},Ee=V=>{switch(V){case 1:return"";case 2:return"";case 3:return"";default:return`#${V}`}},M=()=>i?(v==="alltime"?d:y).findIndex(N=>N.rulerId===i.rulerId)+1:-1,R=()=>{const V=v==="alltime"?d:y;if(V.length>0){let N=0;if(V.forEach(z=>{if(z.timestamp){let w=0;typeof z.timestamp=="object"&&z.timestamp.toDate?w=z.timestamp.toDate().getTime():typeof z.timestamp=="number"?w=z.timestamp:typeof z.timestamp=="string"&&(w=new Date(z.timestamp).getTime()),w>N&&(N=w)}}),N>0)return N}return he},I=v==="alltime"?d:y;return r?p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"800px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[p.jsx("h2",{children:" Leaderboard "}),p.jsx("button",{className:"btn",onClick:e,children:"Close"})]}),i?p.jsxs(p.Fragment,{children:[d.length>0&&p.jsx("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"16px",textAlign:"center",fontSize:"12px"},children:p.jsxs("span",{style:{color:"var(--gold-color)"},children:[" Data updated ",Math.floor((Date.now()-R())/6e4)," minutes ago"]})}),i&&p.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"16px",textAlign:"center"},children:[p.jsxs("div",{style:{color:"var(--gold-color)",fontSize:"14px",fontWeight:"bold"},children:[" You are playing as: ",i.rulerName," ",i.rulerId]}),I.length>0&&p.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"5px"},children:["Your Rank: ",M()>0?`#${M()}`:"Not ranked yet"," in ",v==="alltime"?"All Time":"Weekly"]})]}),p.jsxs("div",{style:{display:"flex",marginBottom:"16px",borderBottom:"2px solid var(--border-color)"},children:[p.jsx("button",{onClick:()=>x("alltime"),className:v==="alltime"?"tab-btn active":"tab-btn",children:"All Time"}),p.jsx("button",{onClick:()=>x("weekly"),className:v==="weekly"?"tab-btn active":"tab-btn",children:"This Week"})]}),S?p.jsx("div",{style:{textAlign:"center",padding:"40px"},children:p.jsx("div",{style:{fontSize:"18px",color:"var(--text-secondary)"},children:"Loading leaderboard..."})}):P?p.jsxs("div",{style:{backgroundColor:"rgba(198, 40, 40, 0.1)",border:"2px solid var(--danger-color)",borderRadius:"4px",padding:"20px",textAlign:"center"},children:[p.jsx("p",{style:{color:"var(--danger-color)",margin:"0 0 15px 0"},children:P}),p.jsx("button",{className:"btn",onClick:()=>{re(null),Ce()},style:{fontSize:"14px"},children:" Retry"})]}):p.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"2px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--panel-bg)"},children:p.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[p.jsx("thead",{style:{backgroundColor:"var(--accent-color)",color:"white",position:"sticky",top:0},children:p.jsxs("tr",{children:[p.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Rank"}),p.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Ruler"}),p.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Gold"}),p.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Renown"}),p.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Buildings"})]})}),p.jsx("tbody",{children:I.map((V,N)=>p.jsxs("tr",{style:{backgroundColor:(i==null?void 0:i.rulerId)===V.rulerId?"rgba(191, 144, 0, 0.1)":N%2===0?"rgba(0, 0, 0, 0.02)":"transparent",borderBottom:"1px solid var(--border-color)"},children:[p.jsx("td",{style:{padding:"10px",fontWeight:"bold",color:"var(--text-color)"},children:Ee(N+1)}),p.jsx("td",{style:{padding:"10px",color:"var(--text-color)"},children:p.jsxs("div",{children:[p.jsx("strong",{children:V.rulerName}),p.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:V.rulerId})]})}),p.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--gold-color)",fontWeight:"bold"},children:ve(V.gold,"standard")}),p.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:ve(V.renown,"standard")}),p.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:V.buildings})]},V.id))})]})}),p.jsx("div",{style:{marginTop:"16px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:" Leaderboard updates automatically every hour. Data is cached for performance."})]}):p.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"20px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"var(--gold-color)",margin:"0 0 10px 0"},children:" View Only Mode"}),p.jsxs("p",{style:{color:"var(--text-secondary)",margin:"0 0 15px 0",lineHeight:"1.5"},children:["You can view the leaderboard, but you need to choose a ruler name to participate in rankings.",p.jsx("br",{}),p.jsx("strong",{children:"Reach 10M gold to unlock ruler name selection."}),p.jsx("br",{}),p.jsx("small",{children:"Leaderboard data updates every hour for all players."})]}),a&&l&&l.gold&&l.gold.gte(1e7)&&p.jsx("button",{className:"btn",onClick:()=>{e(),a()},style:{backgroundColor:"var(--accent-color)",padding:"10px 20px",fontSize:"14px"},children:" Choose Ruler Name"})]})]})}):null},Wr={density:"normal",fontSize:"medium",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,lastBuyAmount:m(1),layout:{left:m(1),center:m(1),right:m(1)},borderWidth:m(4),customColors:{enabled:!1,bg:"#e8dcc5",panel:"#fdf6e3",text:"#3e2723",secondaryText:"#5d4037",accent:"#8d6e63",accentHover:"#6d4c41",gold:"#bf9000",border:"#a1887f",success:"#2e7d32",danger:"#c62828"}},Gs={gold:m(0),totalGold:m(0),startTime:m(Date.now()),lastSaveTime:m(Date.now()),buildings:{},upgrades:[],achievements:[],renown:m(0),soldiers:m(0),eliteUnits:{},artifacts:[],advisors:[],advisorLevels:{},intermediateGoods:{},wonders:{},activeTradeRoutes:[],weather:{current:"clear",timeLeft:m(120)},activeDecrees:{},decreeCooldowns:{},conquest:{active:!1,crusadeId:null,startTime:m(0),soldiersSent:m(0)},event:null,theme:"default",numberFormat:"standard",idleModeEnabled:!0,interface:Wr,stats:{totalClicks:m(0),dragonsKilled:m(0),tavernGamesPlayed:m(0)},playerProfile:null},bl=r=>{if(r==null||typeof r=="string"||typeof r=="number"||typeof r=="boolean")return r;if(Array.isArray(r))return r.map(bl);if(typeof r=="object"&&r.toString&&typeof r.toString=="function"&&(r.hasOwnProperty("mantissa")||r.hasOwnProperty("exponent")))return r.toString();if(typeof r=="object"){const e={};for(const i in r)r.hasOwnProperty(i)&&(e[i]=bl(r[i]));return e}return r},lw=()=>{var na,ys;const[r,e]=_e.useState(()=>{var k,K,te,pe,le,de,Le;const B=localStorage.getItem("kingdom_save");if(B)try{const ae=JSON.parse(B),je=ae.interface||{},yt={...Wr,...je,lastBuyAmount:m(je.lastBuyAmount??1),layout:{left:m(((k=je.layout)==null?void 0:k.left)??Wr.layout.left),center:m(((K=je.layout)==null?void 0:K.center)??Wr.layout.center),right:m(((te=je.layout)==null?void 0:te.right)??Wr.layout.right)},borderWidth:m(je.borderWidth??Wr.borderWidth),customColors:{...Wr.customColors,...je.customColors||{}}};return{...Gs,...ae,renown:m(ae.renown||0),gold:m(ae.gold||0),totalGold:m(ae.totalGold||0),startTime:m(ae.startTime||Date.now()),lastSaveTime:m(ae.lastSaveTime||Date.now()),soldiers:m(ae.soldiers||0),buildings:Object.keys(ae.buildings||{}).reduce((Ae,Fe)=>(Ae[Fe]=m(ae.buildings[Fe]),Ae),{}),stats:{...Gs.stats,...ae.stats||{},totalClicks:m(((pe=ae.stats)==null?void 0:pe.totalClicks)||0),dragonsKilled:m(((le=ae.stats)==null?void 0:le.dragonsKilled)||0),tavernGamesPlayed:m(((de=ae.stats)==null?void 0:de.tavernGamesPlayed)||0)},eliteUnits:Object.keys(ae.eliteUnits||{}).reduce((Ae,Fe)=>(Ae[Fe]=m(ae.eliteUnits[Fe]),Ae),{}),advisors:ae.advisors||[],advisorLevels:Object.keys(ae.advisorLevels||{}).reduce((Ae,Fe)=>(Ae[Fe]=m(ae.advisorLevels[Fe]),Ae),{}),intermediateGoods:Object.keys(ae.intermediateGoods||{}).reduce((Ae,Fe)=>{const kt=ae.intermediateGoods[Fe];return Ae[Fe]={level:m(kt.level||0),lastClickTime:m(kt.lastClickTime||Date.now())},Ae},{}),wonders:Object.keys(ae.wonders||{}).reduce((Ae,Fe)=>(Ae[Fe]=m(ae.wonders[Fe]),Ae),{}),activeTradeRoutes:(ae.activeTradeRoutes||[]).map(Ae=>({id:Ae.id,routeId:Ae.routeId,startTime:m(Number(Ae.startTime)||0),duration:m(Number(Ae.duration)||0),goldInvested:m(Ae.goldInvested||0),soldiersSent:m(Ae.soldiersSent||0),eliteSent:Object.keys(Ae.eliteSent||{}).reduce((Fe,kt)=>(Fe[kt]=m(Ae.eliteSent[kt]||0),Fe),{})})),weather:ae.weather?{...ae.weather,timeLeft:m(Number(ae.weather.timeLeft)||120)}:Gs.weather,conquest:{...Gs.conquest,...ae.conquest||{},startTime:m(Number((Le=ae.conquest)==null?void 0:Le.startTime)||Date.now())},activeDecrees:Object.keys(ae.activeDecrees||{}).reduce((Ae,Fe)=>(Ae[Fe]=m(ae.activeDecrees[Fe]),Ae),{}),decreeCooldowns:Object.keys(ae.decreeCooldowns||{}).reduce((Ae,Fe)=>(Ae[Fe]=m(ae.decreeCooldowns[Fe]),Ae),{}),theme:ae.theme||"default",numberFormat:ae.numberFormat||"standard",idleModeEnabled:ae.idleModeEnabled!==void 0?ae.idleModeEnabled:!0,interface:yt,playerProfile:ae.playerProfile?{...ae.playerProfile,lastLeaderboardSubmit:ae.playerProfile.lastLeaderboardSubmit||0}:null}}catch(ae){console.error("Save load failed",ae)}return Gs}),i=_e.useRef(r);_e.useEffect(()=>{i.current=r},[r]);const[a,l]=_e.useState(!1);_e.useEffect(()=>{let B;const k=()=>{l(!1),clearTimeout(B),r.idleModeEnabled&&(B=setTimeout(()=>{l(!0)},2e4))};k();const K=["mousemove","mousedown","keydown","touchstart","scroll"];return K.forEach(te=>window.addEventListener(te,k)),()=>{clearTimeout(B),K.forEach(te=>window.removeEventListener(te,k))}},[r.idleModeEnabled]),_e.useEffect(()=>{var le;const B=document.documentElement,k=r.interface||Wr;if((le=k.customColors)!=null&&le.enabled){const de=k.customColors;B.style.setProperty("--bg-color",de.bg),B.style.setProperty("--panel-bg",de.panel),B.style.setProperty("--text-color",de.text),B.style.setProperty("--text-secondary",de.secondaryText||"#5d4037"),B.style.setProperty("--text-on-accent","#ffffff"),B.style.setProperty("--accent-color",de.accent),B.style.setProperty("--accent-hover",de.accentHover||de.accent),B.style.setProperty("--gold-color",de.gold||"#bf9000"),B.style.setProperty("--border-color",de.border),B.style.setProperty("--success-color",de.success||"#2e7d32"),B.style.setProperty("--danger-color",de.danger||"#c62828"),B.style.setProperty("--bg-image","none")}else{const de=r.theme||"default",Le=df[de]||df.default;Object.entries(Le.colors).forEach(([ae,je])=>{B.style.setProperty(ae,je)})}const K={small:"14px",medium:"16px",large:"18px"};B.style.setProperty("--base-font-size",K[k.fontSize]);const te={compact:"8px",normal:"12px",spacious:"20px"},pe={compact:"6px",normal:"12px",spacious:"16px"};B.style.setProperty("--panel-padding",te[k.density]),B.style.setProperty("--gap-size",pe[k.density]),B.style.setProperty("--custom-border-width",`${k.borderWidth}px`),B.style.setProperty("--col-left",String(k.layout.left)),B.style.setProperty("--col-center",String(k.layout.center)),B.style.setProperty("--col-right",String(k.layout.right)),k.reduceMotion?document.body.classList.add("no-motion"):document.body.classList.remove("no-motion")},[r.theme,r.interface]);const[d,f]=_e.useState(!1);_e.useEffect(()=>{var B;r.gold.gte(m(1e7))&&!((B=r.playerProfile)!=null&&B.hasChosenName)&&!d&&Q(!0)},[r.gold,r.playerProfile,d]);const[y,b]=_e.useState(null),[v,x]=_e.useState([]),[S,D]=_e.useState("buildings"),[P,re]=_e.useState("army"),[se,U]=_e.useState(!1),[he,ne]=_e.useState(!1),[me,ge]=_e.useState(!1),[Ce,Ee]=_e.useState(!1),[M,R]=_e.useState(!1),[I,V]=_e.useState(!1),[N,z]=_e.useState(!1),[w,Oe]=_e.useState(!1),[tt,Q]=_e.useState(!1),[ce,we]=_e.useState(!1),ue=(B,k="info")=>{const K=Date.now().toString()+Math.random();x(te=>[...te,{id:K,message:B,type:k}]),setTimeout(()=>{x(te=>te.filter(pe=>pe.id!==K))},3e3)};_e.useEffect(()=>{const B=k=>k.preventDefault();return document.addEventListener("contextmenu",B),()=>document.removeEventListener("contextmenu",B)},[]),_e.useEffect(()=>{var k;const B=Date.now();if(r.lastSaveTime&&m(B).minus(r.lastSaveTime).gt(m(6e4))){const K=m(B).minus(r.lastSaveTime).dividedBy(m(1e3)),te=Ye(r),pe=(((k=r.wonders)==null?void 0:k.void_gate)||m(0)).gte(m(3)),le=m(pe?1:.5),de=te.times(K).times(le).floor();de.gt(m(0))&&(ue(`While you were away, you earned ${ve(de,r.numberFormat)} gold! ${pe?"(100% Efficiency)":""}`,"success"),e(Le=>({...Le,gold:Le.gold.plus(de),totalGold:Le.totalGold.plus(de)})))}},[]),_e.useEffect(()=>{const B=setInterval(()=>{Date.now()%3e4<1e3&&e(k=>{const K={...k,lastSaveTime:m(Date.now())},te=bl(K);return localStorage.setItem("kingdom_save",JSON.stringify(te)),K})},1e3);return()=>clearInterval(B)},[]),_e.useEffect(()=>{const B=()=>{const K=i.current,te=bl(K);localStorage.setItem("kingdom_save",JSON.stringify(te))};window.addEventListener("beforeunload",B);const k=()=>{document.visibilityState==="hidden"&&B()};return document.addEventListener("visibilitychange",k),()=>{window.removeEventListener("beforeunload",B),document.removeEventListener("visibilitychange",k)}},[]),_e.useEffect(()=>{var k;if(!((k=r.playerProfile)!=null&&k.hasChosenName))return;const B=setInterval(()=>{const K=Date.now(),te=r.playerProfile.lastLeaderboardSubmit||0,pe=3600*1e3;K-te>=pe&&mv({rulerName:r.playerProfile.rulerName,rulerId:r.playerProfile.rulerId,gold:r.gold,renown:r.renown,buildings:Object.keys(r.buildings).length,achievements:r.achievements.length,period:"alltime"}).then(()=>{e(le=>({...le,playerProfile:{...le.playerProfile,lastLeaderboardSubmit:Date.now()}})),ue(" Auto-submitted to leaderboard!","success")}).catch(le=>{console.error("Auto leaderboard submission failed:",le)})},6e4);return()=>clearInterval(B)},[(na=r.playerProfile)==null?void 0:na.hasChosenName,(ys=r.playerProfile)==null?void 0:ys.lastLeaderboardSubmit,r.gold,r.renown,r.buildings,r.achievements]),_e.useRef(0),_e.useEffect(()=>{if(r.advisors.includes("treasurer")){const B=r.advisorLevels.treasurer||m(1),k=Math.max(1,5-B.toNumber()+1),K=setInterval(()=>{Te(!0)},k*1e3);return()=>clearInterval(K)}},[r.advisors,r.advisorLevels]),_e.useEffect(()=>{const B=setInterval(()=>{if(!r.event){r.advisors.includes("alchemist");const k=r.advisorLevels.alchemist||m(1),K=.05,te=$r("alchemist",k),pe=K*te.toNumber();if(Math.random()<pe){const le=["dragon","merchant","jester"],de=le[Math.floor(Math.random()*le.length)],Le={id:Date.now().toString(),type:de,expiresAt:m(Date.now()).plus(m(de==="dragon"?1e4:3e4)),hp:de==="dragon"?m(10):void 0,maxHp:de==="dragon"?m(10):void 0,reward:m(0)};e(ae=>({...ae,event:Le}))}}},1e4);return()=>clearInterval(B)},[r.event,r.advisors,r.advisorLevels]);const Ye=B=>{var pe,le;let k=m(0);const K=((pe=B.weather)==null?void 0:pe.current)||"clear";Ys.forEach(de=>{const Le=B.buildings[de.id]||m(0);let ae=de.baseProduction;K==="sunny"?(de.id==="peasant"||de.id==="field")&&(ae=ae.times(m(1.2))):K==="rainy"?(de.id==="silver_mine"||de.id==="alchemist")&&(ae=ae.times(m(1.2))):K==="stormy"?(de.id==="blacksmith"&&(ae=ae.times(m(1.3))),de.id==="field"&&(ae=ae.times(m(.8)))):K==="windy"&&de.id==="market"&&(ae=ae.times(m(1.15))),k=k.plus(Le.times(ae))});let te=m(1);if(ki.forEach(de=>{if(B.upgrades.includes(de.id)&&(de.type==="global"&&de.multiplier&&(te=te.times(de.multiplier)),de.type==="building"&&de.multiplier&&de.targetId)){const Le=Ys.find(ae=>ae.id===de.targetId);if(Le){const ae=B.buildings[de.targetId]||m(0);k=k.plus(ae.times(Le.baseProduction).times(de.multiplier.minus(m(1))))}}}),B.upgrades.includes("army_synergy")){const de=B.soldiers.dividedBy(m(1e3)).times(m(.01));te=te.times(m(1).plus(de))}if(B.upgrades.includes("achievement_synergy")){const de=m(B.achievements.length).times(m(.05));te=te.times(m(1).plus(de))}if(B.upgrades.includes("click_synergy")){const de=B.stats.totalClicks.times(m(1e-4));te=te.times(m(1).plus(de))}if(B.advisors.includes("cosmic_mage")){const de=B.advisorLevels.cosmic_mage||m(0),Le=B.advisors.includes("cosmic_mage")?$r("cosmic_mage",de):m(0),ae=m(1).plus(Le);te=te.times(ae)}return(((le=B.wonders)==null?void 0:le.sky_citadel)||m(0)).gte(m(3))&&(te=te.times(m(100))),B.artifacts.forEach(de=>{const Le=Za.find(ae=>ae.id===de);Le&&(te=te.times(Le.globalMultiplier))}),te=te.times(m(1).plus(B.renown.times(m(.1)))),(B.activeDecrees.royal_feast||m(0)).gt(m(Date.now()))&&(te=te.times(m(2))),k=k.times(te),k},C=Ye(r),$=_e.useRef(C);$.current=C,_e.useEffect(()=>{const B=setInterval(()=>{e(k=>{const K=Date.now(),te=$.current.times(m(ef)).dividedBy(m(1e3));let pe=k.totalGold.plus(te),le=k.gold.plus(te),de={...k.weather};const Le=m(ef/1e3);if(de.timeLeft=de.timeLeft.minus(Le),de.timeLeft.lte(m(0))){const Qe=["clear","sunny","rainy","stormy","windy"],Dt=Qe[Math.floor(Math.random()*Qe.length)],si=m(Math.floor(Math.random()*120)+60);de={current:Dt,timeLeft:si}}let ae=k.event;ae&&ae.expiresAt&&m(ae.expiresAt).lt(m(K))&&(ae=null);let je={...k.intermediateGoods},yt=m(0);if(yt.gt(0)){const Qe=mr(k),Dt=yt.times(Qe);le=le.plus(Dt),pe=pe.plus(Dt)}let Ae={...k.conquest},Fe=[...k.artifacts],kt=k.soldiers;if(Ae.active&&Ae.crusadeId){const Qe=Ec.find(Dt=>Dt.id===Ae.crusadeId);if(Qe){const Dt=r.advisorLevels.warmaster||m(0),si=r.advisors.includes("warmaster")?$r("warmaster",Dt):m(0);let Nn=m(1).minus(si);const Fi=si.times(m(2));k.weather.current==="windy"&&(Nn=Nn.times(m(.8)));const vr=m(Qe.duration).times(m(Nn));if(m((K-m(Ae.startTime).toNumber())/1e3).gte(vr)){k.advisors.includes("warmaster");const _n=Qe.baseRisk.minus(Fi),oi=Math.random();if(oi<_n.toNumber()){const Yt=(Ae.soldiersSent||Qe.soldierCost).times(m(.5)).floor();kt=kt.plus(Yt),ue(`Crusade Failed! Our army retreats. ${ve(Yt,r.numberFormat)} soldiers returned.`,"error")}else if(oi>.9){Fe.includes(Qe.rewardArtifactId)||Fe.push(Qe.rewardArtifactId);const Yt=$.current.times(m(300));le=le.plus(Yt),ue(`CRITICAL VICTORY! Found ${Qe.name} Artifact and ${ve(Yt.floor(),r.numberFormat)} Gold!`,"success")}else Fe.includes(Qe.rewardArtifactId)?ue(`Victory! Crusade ${Qe.name} complete (Artifact already owned).`,"info"):(Fe.push(Qe.rewardArtifactId),ue(`Victory! Retrieved Artifact from ${Qe.name}`,"success"));Ae={active:!1,crusadeId:null,startTime:m(0),soldiersSent:m(0)}}}}let hn=[...k.activeTradeRoutes||[]];hn.length,hn=hn.filter(Qe=>{var ai,_n;const Dt=Tc.find(oi=>oi.id===Qe.routeId);if(!Dt)return!1;const si=(((ai=k.wonders)==null?void 0:ai.great_pyramid)||m(0)).gte(3),Nn=si?.5:1,Fi=m(Qe.duration).times(m(Nn));if(m((K-m(Qe.startTime).toNumber())/1e3).gte(Fi)){const oi=m(Qe.soldiersSent).plus(m(((_n=Qe.eliteSent)==null?void 0:_n.knight)||0).times(m(50))),Yt=m(Math.max(100,m(Qe.goldInvested).dividedBy(m(100)).toNumber())),In=m(Math.min(.9,oi.dividedBy(Yt).toNumber()));let xt=Dt.risk.times(m(1).minus(In));if(si&&(xt=xt.times(m(.5))),Math.random()>xt.toNumber()){const bn=m(Qe.goldInvested).times(Dt.rewardMultiplier);le=le.plus(bn),pe=pe.plus(bn),ue(`Caravan returned from ${Dt.name}! Profit: +${ve(bn,k.numberFormat)} Gold`,"success")}else ue(`Caravan to ${Dt.name} was raided! Investment lost.`,"error");return!1}return!0});const vs=[...k.achievements];let yr=null;return bc.forEach(Qe=>{vs.includes(Qe.id)||Qe.condition({...k,totalGold:pe,gold:le},$.current)&&(vs.push(Qe.id),yr=Qe)}),yr&&(b(yr),setTimeout(()=>b(null),3e3)),{...k,gold:le,totalGold:pe,achievements:vs,event:ae,conquest:Ae,artifacts:Fe,soldiers:kt,activeTradeRoutes:hn,weather:de,intermediateGoods:je,advisorLevels:k.advisorLevels}})},ef);return()=>clearInterval(B)},[r.advisors,r.advisorLevels]);const ye=_e.useRef(r.artifacts);_e.useEffect(()=>{ye.current=r.artifacts},[r.artifacts]);const Te=(B=!1)=>{let k=m(1);if(ki.filter(K=>K.type==="click"&&i.current.upgrades.includes(K.id)).forEach(K=>{K.multiplier&&(k=k.times(K.multiplier))}),(i.current.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(k=k.times(m(5))),k=k.times(m(1).plus(i.current.renown.times(m(.1)))),i.current.godMode){const te=Ye(i.current).times(m(6e3));k=k.plus(te)}e(K=>({...K,gold:K.gold.plus(k),totalGold:K.totalGold.plus(k),stats:{...K.stats,totalClicks:B?K.stats.totalClicks:K.stats.totalClicks.plus(m(1))}}))},[Me,ze]=_e.useState(""),[He,wt]=_e.useState(null),[lt,ii]=_e.useState(null);_e.useEffect(()=>{const B=k=>{const K=k.target;if(!(K.tagName==="INPUT"||K.tagName==="TEXTAREA")&&k.key.length===1&&/[a-zA-Z]/.test(k.key)){k.preventDefault(),He||wt(Date.now());const te=Me+k.key.toLowerCase();if(ze(te),te==="godon"||te==="godoff"){const pe=Date.now();pe-(He||pe)<=7e3&&(te==="godon"?(ue(" GOD MODE ACTIVATED! Each click gives +6000 seconds of income!","success"),e(de=>({...de,...de.godMode?{}:{godMode:!0}}))):te==="godoff"&&(ue(" GOD MODE DEACTIVATED! Normal clicks restored.","info"),e(de=>{const Le={...de};return delete Le.godMode,Le}))),ze(""),wt(null),lt&&(clearTimeout(lt),ii(null))}}};return window.addEventListener("keydown",B),()=>{window.removeEventListener("keydown",B),lt&&clearTimeout(lt)}},[Me,He,lt]),_e.useEffect(()=>{if(He){const B=setTimeout(()=>{ze(""),wt(null),ii(null)},7e3);return ii(B),()=>{clearTimeout(B)}}},[He]);const mr=B=>{let k=m(1);if(ki.filter(K=>K.type==="click"&&B.upgrades.includes(K.id)).forEach(K=>{K.multiplier&&(k=k.times(K.multiplier))}),(B.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(k=k.times(m(5))),k=k.times(m(1).plus(B.renown.times(m(.1)))),B.godMode){const te=Ye(B).times(m(6e3));k=k.plus(te)}return k},gr=(B,k)=>{const K=Ys.find(ae=>ae.id===B);if(!K||k<=0)return;const te=r.buildings[B]||m(0),pe=r.advisorLevels.guildmaster||m(0),le=r.advisors.includes("guildmaster")?$r("guildmaster",pe):m(0),de=m(1).minus(le),Le=Ya(K.baseCost,te,m(k)).times(de).floor();r.gold.gte(Le)&&e(ae=>({...ae,gold:ae.gold.minus(Le),buildings:{...ae.buildings,[B]:(ae.buildings[B]||m(0)).plus(m(k))}}))},pr=B=>{const k=ki.find(K=>K.id===B);k&&(r.upgrades.includes(B)||(k.currency==="renown"?r.renown.gte(k.cost)?(e(K=>({...K,renown:K.renown.minus(k.cost),upgrades:[...K.upgrades,B]})),ue(`Legacy Unlocked: ${k.name}`,"success")):ue(`Not enough Renown! Need ${ve(k.cost,r.numberFormat)}`,"error"):r.gold.gte(k.cost)&&e(K=>({...K,gold:K.gold.minus(k.cost),upgrades:[...K.upgrades,B]}))))},Pn=B=>{const k=ei.times(m(B));r.gold.gte(k)&&e(K=>({...K,gold:K.gold.minus(k),soldiers:K.soldiers.plus(k.dividedBy(ei))}))},hs=(B,k)=>{const K=_c.find(le=>le.id===B);if(!K)return;const te=K.goldCost.times(m(k)),pe=K.soldierCost.times(m(k));r.gold.gte(te)&&r.soldiers.gte(pe)&&(e(le=>({...le,gold:le.gold.minus(te),soldiers:le.soldiers.minus(pe),eliteUnits:{...le.eliteUnits,[B]:(le.eliteUnits[B]||m(0)).plus(m(k))}})),ue(`Trained ${k} ${K.name}!`,"success"))},Gi=B=>{const k=yv.find(pe=>pe.id===B);if(!k)return;const K=r.advisors.includes(B),te=r.advisorLevels[B]||m(0);if(!K)r.renown.gte(k.cost)?(e(pe=>({...pe,renown:pe.renown.minus(k.cost),advisors:[...pe.advisors,B],advisorLevels:{...pe.advisorLevels,[B]:m(1)}})),ue(`Hired ${k.name}!`,"success")):ue(`Not enough Renown! Need ${ve(k.cost,r.numberFormat)}`,"error");else{const pe=vv(k,te);r.renown.gte(pe)?(e(le=>({...le,renown:le.renown.minus(pe),advisorLevels:{...le.advisorLevels,[B]:te.plus(m(1))}})),ue(`Upgraded ${k.name} to Level ${te.plus(m(1))}!`,"success")):ue(`Not enough Renown! Need ${ve(pe,r.numberFormat)}`,"error")}},fs=B=>{const k=pv.find(je=>je.id===B);if(!k)return;const K=Date.now(),te=r.advisorLevels.chronomancer||m(0),pe=r.advisorLevels.time_keeper||m(0),le=r.advisors.includes("chronomancer")?$r("chronomancer",te):m(0),de=r.advisors.includes("time_keeper")?$r("time_keeper",pe):m(0),Le=le.plus(de),ae=k.cooldown.times(m(1).minus(Le));if(!(r.decreeCooldowns[B]||m(0)).gt(m(K))&&!(r.activeDecrees[B]||m(0)).gt(m(K))){if(k.unlockCondition&&!k.unlockCondition(r)){ue("Requirement not met!","error");return}k.effectType==="instant_gold"?(e(je=>({...je,gold:je.gold.plus($.current.times(k.value)),totalGold:je.totalGold.plus($.current.times(k.value)),decreeCooldowns:{...je.decreeCooldowns,[B]:m(K).plus(ae.times(m(1e3)))}})),ue(`Decree Enacted: ${k.name}`,"success")):k.effectType==="add_soldiers"?(e(je=>({...je,soldiers:je.soldiers.plus(k.value),decreeCooldowns:{...je.decreeCooldowns,[B]:m(K).plus(ae.times(m(1e3)))}})),ue(`Decree Enacted: Recruited ${k.value} Soldiers`,"success")):(e(je=>({...je,activeDecrees:{...je.activeDecrees,[B]:m(K).plus(k.duration.times(m(1e3)))},decreeCooldowns:{...je.decreeCooldowns,[B]:m(K).plus(k.duration.plus(k.cooldown).times(m(1e3)))}})),ue(`Decree Enacted: ${k.name}`,"success"))}},ms=B=>{if(B.type==="merchant"){const k=$.current.times(m(10));e(K=>({...K,gold:K.gold.plus(k),totalGold:K.totalGold.plus(k),event:null})),ue(`The merchant gifted you ${ve(k.floor(),r.numberFormat)} gold!`,"success")}else if(B.type==="jester"){const k=r.gold.times(m(.1)),K=Math.random()>.5;e(te=>({...te,gold:K?te.gold.plus(k):te.gold.minus(k),totalGold:K?te.totalGold.plus(k):te.totalGold,event:null})),K?ue(`Jester pays out! +${ve(k.floor(),r.numberFormat)}`,"success"):ue(`Jester tricked you! -${ve(k.floor(),r.numberFormat)}`,"warning")}else if(B.type==="dragon"){let k=!1;e(K=>{if(!K.event||K.event.type!=="dragon")return K;const te=(K.event.hp||m(1)).minus(m(1));if(te.lte(0)){const pe=$.current.times(m(30));return k=!0,{...K,gold:K.gold.plus(pe),totalGold:K.totalGold.plus(pe),event:null,stats:{...K.stats,dragonsKilled:K.stats.dragonsKilled.plus(m(1))}}}return{...K,event:{...K.event,hp:te}}}),k&&ue("Dragon Slain! +Treasury Boost","success")}},Rt=(B,k,K,te)=>{const pe=Tc.find(ae=>ae.id===B);if(!pe)return;const le=m(k),de=m(K);if(r.gold.lt(le)){ue("Not enough gold!","error");return}if(r.soldiers.lt(de)){ue("Not enough soldiers!","error");return}let Le=!0;if(Object.entries(te).forEach(([ae,je])=>{(r.eliteUnits[ae]||m(0)).lt(m(je))&&(Le=!1)}),!Le){ue("Not enough elite units!","error");return}e(ae=>{const je={...ae.eliteUnits};return Object.entries(te).forEach(([yt,Ae])=>{je[yt]=(je[yt]||m(0)).minus(m(Ae))}),{...ae,gold:ae.gold.minus(le),soldiers:ae.soldiers.minus(de),eliteUnits:je,activeTradeRoutes:[...ae.activeTradeRoutes||[],{id:Date.now().toString(),routeId:B,startTime:m(Date.now()),duration:m(pe.baseDuration),goldInvested:le,soldiersSent:de,eliteSent:Object.fromEntries(Object.entries(te).map(([yt,Ae])=>[yt,m(Ae)]))}]}}),ue("Caravan Dispatched!","success")},Mt=B=>{const k=_v.find(le=>le.id===B);if(!k)return;const K=r.wonders[B]||m(0);if(K.gte(m(k.stages.length)))return;const te=k.stages[K].cost;let pe=!0;for(const le of te)if(le.type==="gold"&&r.gold.lt(m(le.amount))&&(pe=!1),le.type==="soldiers"&&r.soldiers.lt(m(le.amount))&&(pe=!1),le.type==="renown"&&r.renown.lt(m(le.amount))&&(pe=!1),["knight","paladin","void_sentinel"].includes(le.type)){const de=le.type;(r.eliteUnits[de]||m(0)).lt(m(le.amount))&&(pe=!1)}if(!pe){ue("Resources insufficient for construction!","error");return}e(le=>{let de=le.gold,Le=le.soldiers,ae=le.renown,je={...le.eliteUnits};for(const yt of te)if(yt.type==="gold"&&(de=de.minus(m(yt.amount))),yt.type==="soldiers"&&(Le=Le.minus(m(yt.amount))),yt.type==="renown"&&(ae=ae.minus(m(yt.amount))),["knight","paladin","void_sentinel"].includes(yt.type)){const Ae=yt.type;je[Ae]=(je[Ae]||m(0)).minus(m(yt.amount))}return{...le,gold:de,soldiers:Le,renown:ae,eliteUnits:je,wonders:{...le.wonders,[B]:K.plus(m(1))}}}),ue("Wonder Stage Complete!","success")},vi=B=>{const k=Ec.find(K=>K.id===B);if(k){if(k.requiredUnits){for(const[K,te]of Object.entries(k.requiredUnits))if((r.eliteUnits[K]||m(0)).lt(te)){ue("Missing elite units required for this mission.","error");return}}r.soldiers.gte(k.soldierCost)&&(e(K=>({...K,soldiers:K.soldiers.minus(k.soldierCost),conquest:{active:!0,crusadeId:B,startTime:m(Date.now()),soldiersSent:k.soldierCost}})),ue(`Crusade Started: ${k.name}`,"info"))}},ea=()=>{const B=r.advisorLevels.void_scholar||m(0),k=r.advisors.includes("void_scholar")?$r("void_scholar",B):m(0),K=m(1).plus(k),te=r.gold.dividedBy(m(1e9)).floor().times(K),pe=m(1e4).minus(r.renown).min(te);pe.lte(0)||(e({...Gs,renown:r.renown.plus(pe),achievements:r.achievements,artifacts:r.artifacts,advisors:r.advisors,advisorLevels:r.advisorLevels,wonders:r.wonders,startTime:m(Date.now()),lastSaveTime:m(Date.now()),theme:r.theme,idleModeEnabled:r.idleModeEnabled,interface:r.interface}),ge(!1),ue("Abdication Successful. Long live the new King!","success"))},ta=()=>{localStorage.removeItem("kingdom_save"),e({...Gs,startTime:m(Date.now())}),Ee(!1),ue("Game Reset","warning")},nn=()=>{const k=bl(r);localStorage.setItem("kingdom_save",JSON.stringify(k)),ue("Game Saved","info")},Hi=B=>{e(k=>({...k,playerProfile:B})),localStorage.setItem(`playerProfile_${B.id}`,JSON.stringify(B)),ue(`Welcome, ${B.rulerName} ${B.rulerId}!`,"success"),f(!1)},gs=async()=>{var te;if(!((te=r.playerProfile)!=null&&te.hasChosenName)){ue("Choose your ruler name first!","warning");return}const B=Date.now(),k=r.playerProfile.lastLeaderboardSubmit||0,K=3600*1e3;if(k>0&&B-k<K){const pe=K-(B-k),le=Math.floor(pe/(1e3*60)),de=Math.floor(pe%(1e3*60)/1e3);ue(`Please wait ${le}:${de.toString().padStart(2,"0")} before submitting to leaderboard again.`,"warning");return}try{await mv({rulerName:r.playerProfile.rulerName,rulerId:r.playerProfile.rulerId,gold:r.gold,renown:r.renown,buildings:Object.keys(r.buildings).length,achievements:r.achievements.length,period:"alltime"});const pe={...r.playerProfile,lastLeaderboardSubmit:B};e(le=>({...le,playerProfile:pe})),localStorage.setItem(`playerProfile_${r.playerProfile.id}`,JSON.stringify(pe)),ue("Your achievements have been submitted to leaderboard!","success"),ea()}catch(pe){console.error("Error submitting to leaderboard:",pe),ue("Failed to submit to leaderboard, but prestige will continue.","warning"),ea()}},ps=B=>{e(k=>({...k,interface:{...k.interface,lastBuyAmount:B}}))},ri=B=>({flex:B==="left"?"var(--col-left)":"var(--col-right)",display:"flex",flexDirection:"column",borderRight:B==="left"?"var(--custom-border-width) double var(--border-color)":"none",borderLeft:B==="right"?"var(--custom-border-width) double var(--border-color)":"none",background:"var(--panel-bg)",minWidth:0,transition:"transform 0.8s ease-in-out",transform:a&&r.idleModeEnabled?B==="left"?"translateX(-120%)":"translateX(120%)":"translateX(0)",zIndex:10});return p.jsxs("div",{style:{display:"flex",height:"100vh",width:"100vw",backgroundColor:"var(--bg-color)",overflow:"hidden",position:"relative"},children:[p.jsx(QE,{toasts:v}),p.jsx(YE,{}),a&&r.idleModeEnabled&&p.jsx(KE,{gameState:r}),p.jsxs("div",{style:ri("left"),children:[p.jsxs("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:[p.jsx("button",{className:`tab-btn ${S==="buildings"?"active":""}`,onClick:()=>D("buildings"),children:"Estates"}),p.jsx("button",{className:`tab-btn ${S==="upgrades"?"active":""}`,onClick:()=>D("upgrades"),children:"Upgrades"}),p.jsx("button",{className:`tab-btn ${S==="decrees"?"active":""}`,onClick:()=>D("decrees"),children:"Decrees"})]}),p.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:[S==="buildings"&&p.jsx(IE,{gameState:r,onBuyBuilding:gr,onSetBuyAmount:ps}),S==="upgrades"&&p.jsx(NE,{gameState:r,onBuyUpgrade:pr}),S==="decrees"&&p.jsx(ME,{gameState:r,onActivateDecree:fs})]})]}),p.jsx("div",{style:{flex:"var(--col-center)",display:"flex",flexDirection:"column",position:"relative",borderRight:a&&r.idleModeEnabled?"none":"var(--custom-border-width) double var(--border-color)",minWidth:0,zIndex:5,transition:"border 0.8s"},children:p.jsx(OE,{gameState:r,gps:C,onClick:()=>Te(!1),onEventInteract:ms,onOpenConquest:()=>{(r.buildings.castle||m(0)).gt(0)?U(!0):ue("You need a Castle to lead your army!","warning")},onOpenTavern:()=>ne(!0),onOpenPrestige:()=>ge(!0),onOpenSettings:()=>Ee(!0),onOpenCouncil:()=>V(!0),onOpenStatistics:()=>z(!0),onOpenLeaderboard:()=>we(!0),onOpenEmpire:()=>{(r.buildings.castle||m(0)).gt(0)?Oe(!0):ue("You need a Castle to manage an Empire!","warning")},isIdle:a&&r.idleModeEnabled})}),p.jsxs("div",{style:ri("right"),children:[p.jsxs("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:[p.jsx("button",{className:`tab-btn ${P==="army"?"active":""}`,onClick:()=>re("army"),children:"Army"}),p.jsx("button",{className:`tab-btn ${P==="achievements"?"active":""}`,onClick:()=>re("achievements"),children:"Achievements"})]}),p.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:[P==="army"&&p.jsx(VE,{gameState:r,onTrainSoldier:Pn,onTrainElite:hs}),P==="achievements"&&p.jsx(jE,{gameState:r})]})]}),!(a&&r.idleModeEnabled)&&y&&p.jsxs("div",{className:"achievement-popup",children:[p.jsx("div",{style:{fontSize:"2rem"},children:y.icon}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",color:"var(--text-color)"},children:"Achievement Unlocked!"}),p.jsx("div",{style:{color:"var(--accent-color)"},children:y.name})]})]}),se&&p.jsx(zE,{gameState:r,onStartCrusade:vi,onClose:()=>U(!1)}),w&&p.jsx(GE,{gameState:r,onInvestTrade:Rt,onBuildWonder:Mt,onClose:()=>Oe(!1)}),he&&p.jsx(kE,{gameState:r,onGamble:(B,k)=>{const K=m(B);e(te=>({...te,gold:k?te.gold.plus(K):te.gold.minus(K),stats:{...te.stats,tavernGamesPlayed:te.stats.tavernGamesPlayed.plus(m(1))}}))},onClose:()=>ne(!1)}),me&&p.jsx(LE,{gameState:r,onPrestige:gs,onClose:()=>ge(!1)}),Ce&&p.jsx(UE,{gameState:r,onClose:()=>Ee(!1),onHardReset:ta,onSave:nn,onOpenChangelog:()=>R(!0),onSetTheme:B=>e(k=>({...k,theme:B})),onSetNumberFormat:B=>e(k=>({...k,numberFormat:B})),onToggleIdleMode:()=>e(B=>({...B,idleModeEnabled:!B.idleModeEnabled})),onUpdateInterface:B=>e(k=>({...k,interface:{...k.interface,...B}}))}),N&&p.jsx(qE,{gameState:r,currentGps:C,onClose:()=>z(!1)}),M&&p.jsx(BE,{onClose:()=>R(!1)}),I&&p.jsx(PE,{gameState:r,onHireAdvisor:Gi,onClose:()=>V(!1)}),tt&&p.jsx(sw,{isOpen:tt,onClose:()=>{Q(!1),f(!0)},onConfirm:Hi,gameState:r}),ce&&p.jsx(ow,{isOpen:ce,onClose:()=>we(!1),playerProfile:r.playerProfile,gameState:r,onOpenRulerNameModal:()=>Q(!0)})]})},c1=document.getElementById("root");if(!c1)throw new Error("Could not find root element to mount to");const uw=Wb.createRoot(c1);uw.render(p.jsx(vc.StrictMode,{children:p.jsx(lw,{})}));
