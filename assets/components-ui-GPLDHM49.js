var C=Object.defineProperty,P=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var B=(e,t,o)=>t in e?C(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,z=(e,t)=>{for(var o in t||(t={}))I.call(t,o)&&B(e,o,t[o]);if(k)for(var o of k(t))L.call(t,o)&&B(e,o,t[o]);return e},E=(e,t)=>P(e,M(t));import{r as b,j as r}from"./vendor-react-CUeQczFW.js";import"./vendor-DdgGw12P.js";import{t as n,f as g,n as T,e as A,B as N,P as $}from"./core-b497BxOD.js";const J=({gameState:e,building:t,x:o,y:i,visible:s,onHide:l})=>{const a=b.useRef(null),[d,p]=b.useState({x:0,y:0});if(b.useEffect(()=>{if(!s||!a.current)return;const u=a.current.getBoundingClientRect();let y=o+15,f=i-u.height/2;const x=10;y+u.width>window.innerWidth-x&&(y=Math.max(x,o-u.width-15)),f<x&&(f=x),f+u.height>window.innerHeight-x&&(f=Math.max(x,window.innerHeight-u.height-x)),p({x:y,y:f})},[s,o,i]),!s||!t)return null;const c=e.buildings[t.id]||n(0);if(!(e.totalGold.gte(t.baseCost)||c.gt(n(0))))return r.jsxs("div",{ref:a,className:"advanced-tooltip",style:{position:"fixed",left:`${d.x}px`,top:`${d.y}px`,background:"var(--panel-bg)",color:"var(--text-color)",padding:"12px",borderRadius:"2px",border:"4px double var(--accent-color)",fontSize:"15px",lineHeight:"1.4",width:"240px",minWidth:"240px",zIndex:1e4,boxShadow:"var(--shadow)",pointerEvents:"none",transition:"all 0.15s ease"},onMouseLeave:l,children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"8px",color:"var(--accent-color)",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid var(--accent-color)",paddingBottom:"6px"},children:[r.jsx("span",{style:{fontSize:"20px"},children:"â“"}),r.jsx("span",{children:"???"})]}),r.jsxs("div",{style:{marginBottom:"8px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05))",borderRadius:"6px",border:"1px solid rgba(33, 150, 243, 0.3)",marginBottom:"6px"},children:[r.jsx("span",{style:{color:"rgba(33, 150, 243, 0.9)",fontWeight:"bold",fontSize:"13px"},children:"Count"}),r.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.05))",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)",marginBottom:"6px"},children:[r.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold",fontSize:"13px"},children:"Production"}),r.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???/s"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05))",borderRadius:"6px",border:"1px solid rgba(255, 152, 0, 0.3)"},children:[r.jsx("span",{style:{color:"#ff9800",fontWeight:"bold",fontSize:"13px"},children:"Income Share"}),r.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???%"})]})]}),r.jsxs("div",{style:{marginBottom:"8px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(141, 110, 99, 0.05))",borderRadius:"6px",border:"1px solid var(--accent-color)",marginBottom:"6px"},children:[r.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"13px"},children:"Next Building"}),r.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"14px"},children:"??? gold"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.05))",borderRadius:"6px",border:"1px solid rgba(156, 39, 176, 0.3)"},children:[r.jsx("span",{style:{color:"#9c27b0",fontWeight:"bold",fontSize:"13px"},children:"Each Produces"}),r.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???/s"})]})]}),r.jsx("div",{style:{padding:"6px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",borderTop:"1px solid var(--border-color)",fontSize:"11px",color:"var(--text-secondary)",fontStyle:"italic",textAlign:"center"},children:"???"})]});const v=e.buildings[t.id]||n(0),m=R(e,t),w=m.times(v),W=F(e),S=W.gt(0)?w.div(W).times(100):n(0),h=H(t.baseCost,v);return(h.gt(0)?m.div(h):n(0)).gt(0)?h.div(m):n(0),r.jsxs("div",{ref:a,className:"advanced-tooltip",style:{position:"fixed",left:`${d.x}px`,top:`${d.y}px`,background:"var(--panel-bg)",color:"var(--text-color)",padding:"12px",borderRadius:"2px",border:"4px double var(--accent-color)",fontSize:"15px",lineHeight:"1.4",width:"240px",minWidth:"240px",zIndex:1e4,boxShadow:"var(--shadow)",pointerEvents:"none",transition:"all 0.15s ease"},onMouseLeave:l,children:[r.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"8px",color:"var(--accent-color)",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid var(--accent-color)",paddingBottom:"6px"},children:[r.jsx("span",{style:{fontSize:"20px"},children:t.icon}),r.jsx("span",{children:t.name})]}),r.jsxs("div",{style:{marginBottom:"8px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05))",borderRadius:"6px",border:"1px solid rgba(33, 150, 243, 0.3)",marginBottom:"6px"},children:[r.jsx("span",{style:{color:"rgba(33, 150, 243, 0.9)",fontWeight:"bold",fontSize:"13px"},children:"Count"}),r.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:g(v,e.numberFormat)})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.05))",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)",marginBottom:"6px"},children:[r.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold",fontSize:"13px"},children:"Production"}),r.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[g(w,e.numberFormat),"/s"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05))",borderRadius:"6px",border:"1px solid rgba(255, 152, 0, 0.3)"},children:[r.jsx("span",{style:{color:"#ff9800",fontWeight:"bold",fontSize:"13px"},children:"Income Share"}),r.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[g(S,e.numberFormat),"%"]})]})]}),r.jsxs("div",{style:{marginBottom:"8px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(141, 110, 99, 0.05))",borderRadius:"6px",border:"1px solid var(--accent-color)",marginBottom:"6px"},children:[r.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"13px"},children:"Next Building"}),r.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"14px"},children:[g(h,e.numberFormat)," gold"]})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.05))",borderRadius:"6px",border:"1px solid rgba(156, 39, 176, 0.3)"},children:[r.jsx("span",{style:{color:"#9c27b0",fontWeight:"bold",fontSize:"13px"},children:"Each Produces"}),r.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[g(m,e.numberFormat),"/s"]})]})]}),r.jsx("div",{style:{padding:"6px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",borderTop:"1px solid var(--border-color)",fontSize:"11px",color:"var(--text-secondary)",fontStyle:"italic",textAlign:"center"},children:t.description})]})};function R(e,t){var p;let o=t.baseProduction;const i=((p=e.weather)==null?void 0:p.current)||"clear";i==="sunny"&&(t.id==="peasant"||t.id==="field"||t.id==="stable"||t.id==="cathedral")?o=o.times(n(1.2)):i==="rainy"&&(t.id==="silver_mine"||t.id==="alchemist"||t.id==="market"||t.id==="tavern")?o=o.times(n(1.2)):i==="stormy"?((t.id==="blacksmith"||t.id==="void_portal")&&(o=o.times(n(1.3))),(t.id==="field"||t.id==="stable")&&(o=o.times(n(.8)))):i==="windy"&&(t.id==="market"||t.id==="castle"||t.id==="time_chamber")&&(o=o.times(n(1.15)));const s=G(e.totalRenownEarned);s.gt(n(1))&&(o=o.times(s));let l=0;e.nationalProjects&&Object.values(e.nationalProjects).forEach(c=>{l+=c.level||0});const a=1+l*$;o=o.times(n(a));const d=1+e.achievements.length*.02;if(o=o.times(n(d)),e.globalIncomeMultiplier&&(o=o.times(n(e.globalIncomeMultiplier))),T(e.totalGold)){const c=e.infiniteTowerLevel||0,j=A(c);o=o.times(j)}return o}function G(e){const t=e.toNumber();if(t<=0)return n(1);let o=n(1);if(t<=100)o=n(1+t*.02);else if(t<=1e3)o=n(3).plus(n(t-100).times(n(.01)));else if(t<=1e4)o=n(4).plus(n(t-1e3).times(n(.005)));else if(t<=1e5)o=n(4.5).plus(n(t-1e4).times(n(.001)));else{const i=n(5.5),s=n(t-1e5).times(n(1e-6)),l=n(5).times(Math.log10(t));o=i.plus(s).plus(l)}return o}function F(e){let t=n(0);return N.forEach(o=>{const i=e.buildings[o.id]||n(0);if(i.gt(0)){const s=R(e,o);t=t.plus(s.times(i))}}),t}function H(e,t){return e.times(n(1.15).pow(t)).floor()}const _={general:{bonus:"+2% income per achievement",flavor:"Every achievement brings glory to your kingdom."},buildings:{bonus:"+2% income per achievement",flavor:"Buildings are the foundation of your kingdom's economy."},clicks:{bonus:"+2% income per achievement",flavor:"Every click brings your kingdom closer to greatness."},gold:{bonus:"+2% income per achievement",flavor:"Wealth is power, and your treasury grows ever stronger."},renown:{bonus:"+2% income per achievement",flavor:"Legends are forged through sacrifice and rebirth."},dragons:{bonus:"+2% income per achievement",flavor:"Ancient dragons guard immense treasures and power."},tavern:{bonus:"+2% income per achievement",flavor:"Fortune favors the bold in games of chance."},tower:{bonus:"+2% income per achievement",flavor:"The Infinite Tower reaches beyond the bounds of reality."},dark_matter:{bonus:"+2% income per achievement",flavor:"Dark matter holds the secrets of the universe itself."},total_buildings:{bonus:"+2% income per achievement",flavor:"A vast kingdom requires countless structures to thrive."},progress:{bonus:"+2% income per achievement",flavor:"Progress is the mark of a true ruler."},secret:{bonus:"+2% income per achievement",flavor:"Hidden achievements await those who dare to explore."}};function O(e){return e.startsWith("build_")?"buildings":e.startsWith("clicks_")?"clicks":e.startsWith("gold_")?"gold":e.startsWith("renown_")?"renown":e.startsWith("dragons_")?"dragons":e.startsWith("tavern_")?"tavern":e.startsWith("tower_")?"tower":e.startsWith("dark_matter_")?"dark_matter":e.startsWith("total_builds")?"total_buildings":["speed_1m","speed_1b","prestige_master","cinematic_idle"].includes(e)?"progress":["click_master","idle_master","developer_wife_blessing"].includes(e)?"secret":"general"}function K(e,t,o=!1){if(o)return"ðŸ”’ Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¾";const i=O(e.id),s=_[i]||_.general;if(!t)return"ðŸ”’ ???";let l=`ðŸ† ${e.name}
`;return l+=`${e.description}

`,e.requirement?l+=`ðŸ“‹ Requirement: ${e.requirement}
`:l+=`ðŸ“‹ Requirement: ${e.description}
`,l+=`ðŸ’Ž Bonus: ${s.bonus}
`,e.flavor?l+=`
ðŸ’­ ${e.flavor}`:l+=`
ðŸ’­ ${s.flavor}`,l}const Q=()=>{const[e,t]=b.useState(null);if(b.useEffect(()=>{const i=a=>{const p=a.target.closest("[data-tooltip]");if(p){const c=p.getAttribute("data-tooltip");c&&t({text:c,x:a.clientX,y:a.clientY})}else t(null)},s=a=>{e&&t(d=>d?E(z({},d),{x:a.clientX,y:a.clientY}):null)},l=()=>{t(null)};return document.addEventListener("mouseover",i),document.addEventListener("mousemove",s),document.addEventListener("mouseout",l),()=>{document.removeEventListener("mouseover",i),document.removeEventListener("mousemove",s),document.removeEventListener("mouseout",l)}},[e]),!e)return null;const o={left:e.x+15,top:e.y+15};return e.x+250>window.innerWidth&&(o.left=e.x-260),e.y+100>window.innerHeight&&(o.top=e.y-50),r.jsx("div",{className:"game-tooltip",style:o,children:e.text.split(`
`).map((i,s)=>r.jsx("div",{style:{marginBottom:s===e.text.split(`
`).length-1?0:"4px"},children:i},s))})};export{J as A,Q as G,G as a,K as g};
