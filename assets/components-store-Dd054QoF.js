import{r as C,j as t}from"./vendor-react-CUeQczFW.js";import{t as n,B as H,j as B,f as p,k as L,l as K}from"./core-uFyQeYSz.js";import{A as T,g as U}from"./components-ui-crbNLD7e.js";const P=(r,y=!1,d=!1,h=!1)=>({display:"flex",alignItems:"center",padding:"var(--panel-padding)",background:d?"rgba(0,0,0,0.05)":y?"rgba(46, 125, 50, 0.1)":h?"#f3e5f5":"var(--panel-bg)",border:"1px solid",borderColor:d?"rgba(0,0,0,0.2)":h?"#7b1fa2":r?"var(--accent-color)":"rgba(0,0,0,0.1)",borderRadius:"2px",cursor:r&&!d?"pointer":"default",opacity:r&&!d||y?1:.7,transition:"all 0.2s",boxShadow:r&&!d?"2px 2px 0 rgba(0,0,0,0.1)":"none",position:"relative",userSelect:"none",marginBottom:"var(--gap-size)",filter:d?"grayscale(1)":"none"}),N={display:"flex",flexDirection:"column",gap:"var(--gap-size)",height:"100%",overflowY:"auto",padding:"var(--panel-padding)"},Y=({gameState:r,onBuyBuilding:y,onSellBuilding:d,onSetBuyAmount:h})=>{var W;const[b,z]=C.useState({visible:!1,x:0,y:0,building:null}),f=n(1),a=((W=r.interface)==null?void 0:W.lastBuyAmount)||n(1),[g,k]=C.useState(!1),[q,w]=C.useState(1);C.useEffect(()=>{const e=l=>{l.ctrlKey?w(10):l.shiftKey?w(100):w(1)},u=l=>e(l),o=l=>e(l);return window.addEventListener("keydown",u),window.addEventListener("keyup",o),()=>{window.removeEventListener("keydown",u),window.removeEventListener("keyup",o)}},[]);const A=(e,u)=>{const o=e.currentTarget.getBoundingClientRect();z({visible:!0,x:o.right,y:o.top+o.height/2,building:u})},M=()=>{z({visible:!1,x:0,y:0,building:null})},F=(e,u)=>{var x;let o=u;const l=((x=r.weather)==null?void 0:x.current)||"clear";l==="sunny"&&(e==="peasant"||e==="field")?o=o.times(n(1.2)):l==="rainy"&&(e==="silver_mine"||e==="alchemist")?o=o.times(n(1.2)):l==="stormy"?(e==="blacksmith"&&(o=o.times(n(1.3))),e==="field"&&(o=o.times(n(.8)))):l==="windy"&&e==="market"&&(o=o.times(n(1.15)));let i=n(1),c=0;r.nationalProjects&&Object.values(r.nationalProjects).forEach(m=>c+=m.level||0);const S=1+c*.05;i=i.times(n(S));const v=U(r.renown);return i=i.times(v),o.times(i)};let E=0;return t.jsxs("div",{style:N,children:[t.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"10px",justifyContent:"center"},children:[n(1),n(10),n(100),n(500),n(1e3),n(-1)].map(e=>t.jsx("button",{onClick:()=>h(e),style:{padding:"5px 10px",border:"1px solid var(--accent-color)",background:a.equals(e)?"var(--accent-color)":"var(--panel-bg)",color:a.equals(e)?"var(--text-on-accent)":"var(--text-color)",cursor:"pointer",fontWeight:"bold",fontSize:"0.8rem"},children:e.equals(n(-1))?"Max":`${e.toString()}`},`amount-${e.toString()}`))}),t.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center"},children:"Hold Ctrl: x10 â€¢ Hold Shift: x100"}),t.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",justifyContent:"center"},children:[t.jsx("button",{className:"btn",style:{background:g?"var(--panel-bg)":"var(--accent-color)",color:g?"var(--text-color)":"var(--text-on-accent)",border:"1px solid var(--accent-color)",padding:"5px 15px",fontSize:"0.8rem"},onClick:()=>k(!1),children:"ðŸ›’ Buy Mode"}),t.jsx("button",{className:"btn",style:{background:g?"#e65100":"var(--panel-bg)",color:g?"var(--text-on-accent)":"var(--text-color)",border:"1px solid #e65100",padding:"5px 15px",fontSize:"0.8rem"},onClick:()=>k(!0),children:"ðŸ’° Sell Mode (25%)"})]}),t.jsx("h3",{style:{fontSize:"1rem",color:"var(--text-secondary)",fontWeight:"bold",borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:"Estates"}),H.map((e,u)=>{const o=r.buildings[e.id]||n(0),l=r.totalGold.gte(e.baseCost)||o.gt(n(0));if(l||E++,!l&&E>2)return null;if(g){if(o.eq(n(0)))return null;let s;a.equals(n(-1))?s=o:(s=a.times(q),s.gt(o)&&(s=o));const R=B(e.baseCost,o.minus(s),s).times(n(.25)).floor();return F(e.id,e.baseProduction),t.jsxs("div",{style:P(!0,!1,!1,!1),onClick:()=>d(e.id,s.toNumber()),onMouseEnter:D=>A(D,e),onMouseLeave:M,children:[t.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:e.icon}),t.jsx("div",{style:{flex:1},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:e.name}),t.jsx("span",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"var(--accent-color)"},children:p(o,r.numberFormat)})]})}),t.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[t.jsxs("div",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["+",p(R,r.numberFormat)]}),t.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["for ",p(s,r.numberFormat)]})]})]},e.id)}let i=n(0),c=n(0);a.equals(n(-1))?(i=L(e.baseCost,o,r.gold.div(f)),i.eq(n(0))?(i=n(1),c=K(e.baseCost,o).times(f).floor()):c=B(e.baseCost,o,i).times(f).floor()):(i=a,c=B(e.baseCost,o,i).times(f).floor());const S=r.gold.gte(c),v=a.equals(n(-1))&&L(e.baseCost,o,r.gold.div(f)).eq(n(0));let x=i,m=c,j=S;return a.equals(n(-1))||(x=i.times(q),m=B(e.baseCost,o,x).times(f).floor(),j=r.gold.gte(m)),t.jsxs("div",{style:P(j&&!v,!1,!l),onClick:()=>{if(!(j&&!v))return;const s=a.equals(n(-1))?i:x;y(e.id,s.toNumber())},onMouseEnter:s=>A(s,e),onMouseLeave:M,children:[t.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:l?e.icon:"â“"}),t.jsx("div",{style:{flex:1},children:t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:l?e.name:"???"}),t.jsx("span",{style:{fontSize:"1.8rem",fontWeight:"bold",color:"var(--accent-color)"},children:p(o,r.numberFormat)})]})}),t.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[t.jsx("div",{style:{color:j&&!v?"var(--gold-color)":"var(--text-secondary)",fontWeight:"bold"},children:p(a.equals(n(-1))?c:m,r.numberFormat)}),!a.equals(n(-1))&&t.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["for ",p(x,r.numberFormat)]})]})]},e.id)}),t.jsx(T,{gameState:r,building:b.building,x:b.x,y:b.y,visible:b.visible,onHide:M})]})},Z=({gameState:r})=>t.jsx("div",{style:N,children:t.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",background:"var(--panel-bg)",border:"2px dashed var(--border-color)",borderRadius:"8px",color:"var(--text-secondary)"},children:[t.jsx("div",{style:{fontSize:"3rem",marginBottom:"15px"},children:"ðŸš§"}),t.jsx("h3",{style:{fontSize:"1.5rem",color:"var(--accent-color)",marginBottom:"10px"},children:"Coming Soon"}),t.jsxs("p",{style:{fontSize:"1rem",lineHeight:"1.5",margin:0},children:["New features and content",t.jsx("br",{}),"are currently in development.",t.jsx("br",{}),"Stay tuned for future updates!"]})]})});export{Y as B,Z as W};
