var I=Object.defineProperty,ee=Object.defineProperties;var oe=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var te=Object.prototype.hasOwnProperty,ne=Object.prototype.propertyIsEnumerable;var R=(e,t,r)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))te.call(t,r)&&R(e,r,t[r]);if(C)for(var r of C(t))ne.call(t,r)&&R(e,r,t[r]);return e},B=(e,t)=>ee(e,oe(t));import{R as T,j as o,r as N}from"./vendor-react-CUeQczFW.js";import{t as s,f as x,W as re,P as ie,g as se}from"./core-uFyQeYSz.js";import{g as W}from"./components-ui-crbNLD7e.js";const le=T.memo(({renown:e,totalRenownEarned:t,numberFormat:r})=>{const c=W(t).minus(s(1)).times(s(100)).floor().toString();return o.jsxs("div",{style:{padding:"5px 15px",background:"rgba(103, 58, 183, 0.1)",border:"1px solid rgba(103, 58, 183, 0.3)",borderRadius:"20px",display:"inline-block"},children:[o.jsxs("div",{style:{color:"#673ab7",fontWeight:"bold",fontSize:"1rem"},children:["ðŸ‘‘ Current: ",x(e,r)," Renown"]}),o.jsxs("div",{style:{color:"#673ab7",fontWeight:"bold",fontSize:"1rem"},children:["ðŸ‘‘ Total: ",x(t,r)," (+",c,"% Bonus)"]})]})}),xe=T.memo(({gameState:e,gps:t,onClick:r,onEventInteract:c,onOpenTavern:A,onOpenPrestige:M,onOpenSettings:P,onOpenStatistics:E,onOpenLeaderboard:F,onOpenEmpire:L,isIdle:n})=>{var v,j,w;const[D,m]=N.useState([]),y=N.useRef(null),u=e.interface||{showFloatingText:!0,showWeatherWidget:!0,crownAnimations:!0},O=()=>{let i=0;return e.nationalProjects&&Object.values(e.nationalProjects).forEach(f=>{i+=f.level*ie}),s(i)},S=i=>{var f;if(u.showFloatingText){const b=(f=y.current)==null?void 0:f.getBoundingClientRect();if(b){const H=i.clientX-b.left+(Math.random()*40-20),U=i.clientY-b.top+(Math.random()*40-20),J=W(e.renown),G=s(1),k=e.clickUpgradeLevel||0,K=Math.min(k,15),V=s(2).pow(K),X=G.times(V),Y=se(k),q=t.times(Y);let d=X.plus(q);if(d=d.times(J),e.godMode){const p=t.times(s(99999));d=d.plus(p)}const Q="+"+x(d,e.numberFormat),z={id:Date.now(),x:H,y:U,val:Q};m(p=>[...p,z]),setTimeout(()=>{m(p=>p.filter(Z=>Z.id!==z.id))},1e3)}}r(i)},a=re[((v=e.weather)==null?void 0:v.current)||"clear"],h={transition:"transform 0.8s ease-in-out, width 0.8s ease-in-out, height 0.8s ease-in-out, margin 0.8s ease-in-out, position 0.8s ease-in-out"},_=l(n?{position:"fixed",bottom:"120px",right:"30px",transform:"scale(0.8)",transformOrigin:"bottom right",textAlign:"right",zIndex:100}:{transform:"scale(1)",marginBottom:"3rem",zIndex:10,textAlign:"center"},h),$=l(n?{width:"80px",height:"80px",fontSize:"2rem",position:"fixed",bottom:"30px",right:"30px",borderRadius:"50%",zIndex:100}:{width:"260px",height:"260px",fontSize:"6rem",borderRadius:"50%",position:"relative",zIndex:5,margin:"0 auto"},h),g={opacity:n?0:1,transition:"opacity 0.5s ease-in-out",pointerEvents:n?"none":"auto"};return o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--panel-padding)",height:"100%",overflow:"hidden"},children:[u.showWeatherWidget&&o.jsxs("div",{style:l({position:"absolute",top:"10px",left:"10px",zIndex:20,background:a.color,padding:"8px 12px",borderRadius:"20px",border:"2px solid rgba(0,0,0,0.1)",boxShadow:"2px 2px 5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px",cursor:"help"},g),"data-tooltip":`${a.name}: ${a.description}`,children:[o.jsx("span",{style:{fontSize:"1.5rem"},children:a.icon}),o.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[o.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#222"},children:a.name}),o.jsxs("div",{style:{fontSize:"0.7rem",color:"#444"},children:[s(Number(((j=e.weather)==null?void 0:j.timeLeft)||0)).ceil().toString(),"s remaining"]})]})]}),o.jsxs("div",{style:l({position:"absolute",top:"10px",right:"10px",zIndex:20,display:"flex",gap:"5px"},g),children:[o.jsx("button",{onClick:F,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.8,color:"var(--text-color)",transition:"all 0.2s ease"},title:"Leaderboard (Available for all players)",children:"ðŸ†"}),o.jsx("button",{onClick:E,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Statistics",children:"ðŸ“Š"}),o.jsx("button",{onClick:P,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Kingdom Settings",children:"âš™ï¸"})]}),o.jsxs("div",{style:_,children:[o.jsx("div",{style:{fontSize:"1rem",color:n?"var(--text-color)":"var(--text-secondary)",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"2px",textShadow:n?"1px 1px 2px #000":"none"},children:"Royal Treasury"}),o.jsx("div",{style:{fontSize:"3rem",fontFamily:"var(--font-main)",color:"var(--text-color)",textShadow:n?"2px 2px 4px #000":"2px 2px 0px rgba(255, 215, 0, 0.4)"},children:x(e.gold,e.numberFormat)}),o.jsxs("div",{style:{marginTop:"5px",fontSize:"1.1rem",color:n?"#90ee90":"var(--success-color)",fontStyle:"italic",textShadow:n?"1px 1px 2px #000":"none"},children:["+",x(t,e.numberFormat)," gold / sec"]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",marginTop:"15px"},children:[o.jsx(le,{renown:e.renown,totalRenownEarned:e.totalRenownEarned,numberFormat:e.numberFormat}),o.jsx("div",{style:{padding:"5px 15px",background:"rgba(76, 175, 80, 0.1)",border:"1px solid rgba(76, 175, 80, 0.3)",borderRadius:"20px",display:"inline-block"},children:o.jsxs("span",{style:{color:"#4caf50",fontWeight:"bold"},children:["ðŸ—ï¸ Projects: +",O().times(s(100)).floor().toString(),"%"]})})]})]}),o.jsxs("div",{style:{position:"relative",marginBottom:n?0:"3rem",display:"flex",justifyContent:"center",alignItems:"center"},children:[o.jsx("div",{className:"magnetic-container",children:o.jsx("button",{ref:y,className:`main-button ${n?"idle":""} ${u.crownAnimations?"":"no-animations"}`,style:B(l({},$),{display:"flex",alignItems:"center",justifyContent:"center",outline:"none",color:"#5d4037",cursor:"pointer",overflow:"hidden"}),onClick:S,children:o.jsx("span",{className:u.crownAnimations?"crown-icon":"",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",lineHeight:1,marginTop:"-10px"},children:"ðŸ‘‘"})})}),!n&&D.map(i=>o.jsx("div",{className:"floating-text",style:{left:i.x,top:i.y},children:i.val},i.id))]}),o.jsxs("div",{style:l({display:"flex",gap:"10px",zIndex:10,flexWrap:"wrap",justifyContent:"center"},g),children:[e.buildings.field&&e.buildings.field.gt(s(0))&&o.jsx("button",{className:"btn",style:{background:"var(--accent-color)",borderColor:"var(--gold-color)"},onClick:L,children:"ðŸ—ï¸ Projects"}),((w=e.buildings.tavern)==null?void 0:w.gt(s(0)))&&o.jsx("button",{className:"btn",onClick:A,children:"ðŸº Tavern"}),(e.totalGold.gt(s(5e5))||e.renown.gt(s(0)))&&o.jsx("button",{className:"btn",style:{background:"var(--accent-color)"},onClick:M,children:"ðŸ‘‘ Legacy"})]}),!n&&e.event&&e.event.type==="dragon"&&o.jsx("div",{className:"dragon-event",onMouseDown:()=>{try{c(e.event)}catch(i){console.error("Error clicking dragon:",i)}},children:"ðŸ‰"}),!n&&e.event&&e.event.type==="merchant"&&o.jsxs("div",{style:{position:"absolute",right:"20px",top:"100px",background:"#fff3e0",padding:"10px",border:"2px solid orange",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>c(e.event),children:[o.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ðŸ‘³"}),o.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Merchant"}),o.jsx("small",{style:{color:"#444"},children:"Click for gift"})]}),!n&&e.event&&e.event.type==="jester"&&o.jsxs("div",{style:{position:"absolute",left:"20px",top:"100px",background:"#fce4ec",padding:"10px",border:"2px solid pink",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>c(e.event),children:[o.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ðŸ¤¡"}),o.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Jester"}),o.jsx("small",{style:{color:"#444"},children:"Risk it all?"})]})]})});export{xe as M};
