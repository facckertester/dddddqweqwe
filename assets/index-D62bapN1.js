(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&a(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(l){if(l.ep)return;l.ep=!0;const d=i(l);fetch(l.href,d)}})();function Vf(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Qh={exports:{}},ul={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function Bb(){if(qy)return ul;qy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(a,l,d){var f=null;if(d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),"key"in l){d={};for(var y in l)y!=="key"&&(d[y]=l[y])}else d=l;return l=d.ref,{$$typeof:r,type:a,key:f,ref:l!==void 0?l:null,props:d}}return ul.Fragment=e,ul.jsx=i,ul.jsxs=i,ul}var Gy;function Pb(){return Gy||(Gy=1,Qh.exports=Bb()),Qh.exports}var p=Pb(),Yh={exports:{}},ke={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hy;function qb(){if(Hy)return ke;Hy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),_=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),N=Symbol.iterator;function U(C){return C===null||typeof C!="object"?null:(C=N&&C[N]||C["@@iterator"],typeof C=="function"?C:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},re=Object.assign,F={};function pe(C,$,fe){this.props=C,this.context=$,this.refs=F,this.updater=fe||ne}pe.prototype.isReactComponent={},pe.prototype.setState=function(C,$){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,$,"setState")},pe.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function ie(){}ie.prototype=pe.prototype;function me(C,$,fe){this.props=C,this.context=$,this.refs=F,this.updater=fe||ne}var ve=me.prototype=new ie;ve.constructor=me,re(ve,pe.prototype),ve.isPureReactComponent=!0;var Se=Array.isArray;function Te(){}var I={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function w(C,$,fe){var Ee=fe.ref;return{$$typeof:r,type:C,key:$,ref:Ee!==void 0?Ee:null,props:fe}}function O(C,$){return w(C.type,$,C.props)}function V(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function z(C){var $={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(fe){return $[fe]})}var D=/\/+/g;function He(C,$){return typeof C=="object"&&C!==null&&C.key!=null?z(""+C.key):$.toString(36)}function st(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(Te,Te):(C.status="pending",C.then(function($){C.status==="pending"&&(C.status="fulfilled",C.value=$)},function($){C.status==="pending"&&(C.status="rejected",C.reason=$)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function Y(C,$,fe,Ee,Ve){var je=typeof C;(je==="undefined"||je==="boolean")&&(C=null);var Ge=!1;if(C===null)Ge=!0;else switch(je){case"bigint":case"string":case"number":Ge=!0;break;case"object":switch(C.$$typeof){case r:case e:Ge=!0;break;case x:return Ge=C._init,Y(Ge(C._payload),$,fe,Ee,Ve)}}if(Ge)return Ve=Ve(C),Ge=Ee===""?"."+He(C,0):Ee,Se(Ve)?(fe="",Ge!=null&&(fe=Ge.replace(D,"$&/")+"/"),Y(Ve,$,fe,"",function(ai){return ai})):Ve!=null&&(V(Ve)&&(Ve=O(Ve,fe+(Ve.key==null||C&&C.key===Ve.key?"":(""+Ve.key).replace(D,"$&/")+"/")+Ge)),$.push(Ve)),1;Ge=0;var Ct=Ee===""?".":Ee+":";if(Se(C))for(var lt=0;lt<C.length;lt++)Ee=C[lt],je=Ct+He(Ee,lt),Ge+=Y(Ee,$,fe,je,Ve);else if(lt=U(C),typeof lt=="function")for(C=lt.call(C),lt=0;!(Ee=C.next()).done;)Ee=Ee.value,je=Ct+He(Ee,lt++),Ge+=Y(Ee,$,fe,je,Ve);else if(je==="object"){if(typeof C.then=="function")return Y(st(C),$,fe,Ee,Ve);throw $=String(C),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Ge}function de(C,$,fe){if(C==null)return C;var Ee=[],Ve=0;return Y(C,Ee,"","",function(je){return $.call(fe,je,Ve++)}),Ee}function we(C){if(C._status===-1){var $=C._result;$=$(),$.then(function(fe){(C._status===0||C._status===-1)&&(C._status=1,C._result=fe)},function(fe){(C._status===0||C._status===-1)&&(C._status=2,C._result=fe)}),C._status===-1&&(C._status=0,C._result=$)}if(C._status===1)return C._result.default;throw C._result}var ue=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Fe={map:de,forEach:function(C,$,fe){de(C,function(){$.apply(this,arguments)},fe)},count:function(C){var $=0;return de(C,function(){$++}),$},toArray:function(C){return de(C,function($){return $})||[]},only:function(C){if(!V(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return ke.Activity=A,ke.Children=Fe,ke.Component=pe,ke.Fragment=i,ke.Profiler=l,ke.PureComponent=me,ke.StrictMode=a,ke.Suspense=b,ke.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,ke.__COMPILER_RUNTIME={__proto__:null,c:function(C){return I.H.useMemoCache(C)}},ke.cache=function(C){return function(){return C.apply(null,arguments)}},ke.cacheSignal=function(){return null},ke.cloneElement=function(C,$,fe){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var Ee=re({},C.props),Ve=C.key;if($!=null)for(je in $.key!==void 0&&(Ve=""+$.key),$)!R.call($,je)||je==="key"||je==="__self"||je==="__source"||je==="ref"&&$.ref===void 0||(Ee[je]=$[je]);var je=arguments.length-2;if(je===1)Ee.children=fe;else if(1<je){for(var Ge=Array(je),Ct=0;Ct<je;Ct++)Ge[Ct]=arguments[Ct+2];Ee.children=Ge}return w(C.type,Ve,Ee)},ke.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:d,_context:C},C},ke.createElement=function(C,$,fe){var Ee,Ve={},je=null;if($!=null)for(Ee in $.key!==void 0&&(je=""+$.key),$)R.call($,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Ve[Ee]=$[Ee]);var Ge=arguments.length-2;if(Ge===1)Ve.children=fe;else if(1<Ge){for(var Ct=Array(Ge),lt=0;lt<Ge;lt++)Ct[lt]=arguments[lt+2];Ve.children=Ct}if(C&&C.defaultProps)for(Ee in Ge=C.defaultProps,Ge)Ve[Ee]===void 0&&(Ve[Ee]=Ge[Ee]);return w(C,je,Ve)},ke.createRef=function(){return{current:null}},ke.forwardRef=function(C){return{$$typeof:y,render:C}},ke.isValidElement=V,ke.lazy=function(C){return{$$typeof:x,_payload:{_status:-1,_result:C},_init:we}},ke.memo=function(C,$){return{$$typeof:_,type:C,compare:$===void 0?null:$}},ke.startTransition=function(C){var $=I.T,fe={};I.T=fe;try{var Ee=C(),Ve=I.S;Ve!==null&&Ve(fe,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(Te,ue)}catch(je){ue(je)}finally{$!==null&&fe.types!==null&&($.types=fe.types),I.T=$}},ke.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},ke.use=function(C){return I.H.use(C)},ke.useActionState=function(C,$,fe){return I.H.useActionState(C,$,fe)},ke.useCallback=function(C,$){return I.H.useCallback(C,$)},ke.useContext=function(C){return I.H.useContext(C)},ke.useDebugValue=function(){},ke.useDeferredValue=function(C,$){return I.H.useDeferredValue(C,$)},ke.useEffect=function(C,$){return I.H.useEffect(C,$)},ke.useEffectEvent=function(C){return I.H.useEffectEvent(C)},ke.useId=function(){return I.H.useId()},ke.useImperativeHandle=function(C,$,fe){return I.H.useImperativeHandle(C,$,fe)},ke.useInsertionEffect=function(C,$){return I.H.useInsertionEffect(C,$)},ke.useLayoutEffect=function(C,$){return I.H.useLayoutEffect(C,$)},ke.useMemo=function(C,$){return I.H.useMemo(C,$)},ke.useOptimistic=function(C,$){return I.H.useOptimistic(C,$)},ke.useReducer=function(C,$,fe){return I.H.useReducer(C,$,fe)},ke.useRef=function(C){return I.H.useRef(C)},ke.useState=function(C){return I.H.useState(C)},ke.useSyncExternalStore=function(C,$,fe){return I.H.useSyncExternalStore(C,$,fe)},ke.useTransition=function(){return I.H.useTransition()},ke.version="19.2.3",ke}var Fy;function Of(){return Fy||(Fy=1,Yh.exports=qb()),Yh.exports}var _e=Of();const mv=Vf(_e);var Kh={exports:{}},cl={},Xh={exports:{}},$h={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qy;function Gb(){return Qy||(Qy=1,(function(r){function e(Y,de){var we=Y.length;Y.push(de);e:for(;0<we;){var ue=we-1>>>1,Fe=Y[ue];if(0<l(Fe,de))Y[ue]=de,Y[we]=Fe,we=ue;else break e}}function i(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var de=Y[0],we=Y.pop();if(we!==de){Y[0]=we;e:for(var ue=0,Fe=Y.length,C=Fe>>>1;ue<C;){var $=2*(ue+1)-1,fe=Y[$],Ee=$+1,Ve=Y[Ee];if(0>l(fe,we))Ee<Fe&&0>l(Ve,fe)?(Y[ue]=Ve,Y[Ee]=we,ue=Ee):(Y[ue]=fe,Y[$]=we,ue=$);else if(Ee<Fe&&0>l(Ve,we))Y[ue]=Ve,Y[Ee]=we,ue=Ee;else break e}}return de}function l(Y,de){var we=Y.sortIndex-de.sortIndex;return we!==0?we:Y.id-de.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;r.unstable_now=function(){return d.now()}}else{var f=Date,y=f.now();r.unstable_now=function(){return f.now()-y}}var b=[],_=[],x=1,A=null,N=3,U=!1,ne=!1,re=!1,F=!1,pe=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ve(Y){for(var de=i(_);de!==null;){if(de.callback===null)a(_);else if(de.startTime<=Y)a(_),de.sortIndex=de.expirationTime,e(b,de);else break;de=i(_)}}function Se(Y){if(re=!1,ve(Y),!ne)if(i(b)!==null)ne=!0,Te||(Te=!0,z());else{var de=i(_);de!==null&&st(Se,de.startTime-Y)}}var Te=!1,I=-1,R=5,w=-1;function O(){return F?!0:!(r.unstable_now()-w<R)}function V(){if(F=!1,Te){var Y=r.unstable_now();w=Y;var de=!0;try{e:{ne=!1,re&&(re=!1,ie(I),I=-1),U=!0;var we=N;try{t:{for(ve(Y),A=i(b);A!==null&&!(A.expirationTime>Y&&O());){var ue=A.callback;if(typeof ue=="function"){A.callback=null,N=A.priorityLevel;var Fe=ue(A.expirationTime<=Y);if(Y=r.unstable_now(),typeof Fe=="function"){A.callback=Fe,ve(Y),de=!0;break t}A===i(b)&&a(b),ve(Y)}else a(b);A=i(b)}if(A!==null)de=!0;else{var C=i(_);C!==null&&st(Se,C.startTime-Y),de=!1}}break e}finally{A=null,N=we,U=!1}de=void 0}}finally{de?z():Te=!1}}}var z;if(typeof me=="function")z=function(){me(V)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,He=D.port2;D.port1.onmessage=V,z=function(){He.postMessage(null)}}else z=function(){pe(V,0)};function st(Y,de){I=pe(function(){Y(r.unstable_now())},de)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return N},r.unstable_next=function(Y){switch(N){case 1:case 2:case 3:var de=3;break;default:de=N}var we=N;N=de;try{return Y()}finally{N=we}},r.unstable_requestPaint=function(){F=!0},r.unstable_runWithPriority=function(Y,de){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var we=N;N=Y;try{return de()}finally{N=we}},r.unstable_scheduleCallback=function(Y,de,we){var ue=r.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?ue+we:ue):we=ue,Y){case 1:var Fe=-1;break;case 2:Fe=250;break;case 5:Fe=1073741823;break;case 4:Fe=1e4;break;default:Fe=5e3}return Fe=we+Fe,Y={id:x++,callback:de,priorityLevel:Y,startTime:we,expirationTime:Fe,sortIndex:-1},we>ue?(Y.sortIndex=we,e(_,Y),i(b)===null&&Y===i(_)&&(re?(ie(I),I=-1):re=!0,st(Se,we-ue))):(Y.sortIndex=Fe,e(b,Y),ne||U||(ne=!0,Te||(Te=!0,z()))),Y},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Y){var de=N;return function(){var we=N;N=de;try{return Y.apply(this,arguments)}finally{N=we}}}})($h)),$h}var Yy;function Hb(){return Yy||(Yy=1,Xh.exports=Gb()),Xh.exports}var Wh={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function Fb(){if(Ky)return hn;Ky=1;var r=Of();function e(b){var _="https://react.dev/errors/"+b;if(1<arguments.length){_+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)_+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+b+"; visit "+_+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,_,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:A==null?null:""+A,children:b,containerInfo:_,implementation:x}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(b,_){if(b==="font")return"";if(typeof _=="string")return _==="use-credentials"?_:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,hn.createPortal=function(b,_){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_||_.nodeType!==1&&_.nodeType!==9&&_.nodeType!==11)throw Error(e(299));return d(b,_,null,x)},hn.flushSync=function(b){var _=f.T,x=a.p;try{if(f.T=null,a.p=2,b)return b()}finally{f.T=_,a.p=x,a.d.f()}},hn.preconnect=function(b,_){typeof b=="string"&&(_?(_=_.crossOrigin,_=typeof _=="string"?_==="use-credentials"?_:"":void 0):_=null,a.d.C(b,_))},hn.prefetchDNS=function(b){typeof b=="string"&&a.d.D(b)},hn.preinit=function(b,_){if(typeof b=="string"&&_&&typeof _.as=="string"){var x=_.as,A=y(x,_.crossOrigin),N=typeof _.integrity=="string"?_.integrity:void 0,U=typeof _.fetchPriority=="string"?_.fetchPriority:void 0;x==="style"?a.d.S(b,typeof _.precedence=="string"?_.precedence:void 0,{crossOrigin:A,integrity:N,fetchPriority:U}):x==="script"&&a.d.X(b,{crossOrigin:A,integrity:N,fetchPriority:U,nonce:typeof _.nonce=="string"?_.nonce:void 0})}},hn.preinitModule=function(b,_){if(typeof b=="string")if(typeof _=="object"&&_!==null){if(_.as==null||_.as==="script"){var x=y(_.as,_.crossOrigin);a.d.M(b,{crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0})}}else _==null&&a.d.M(b)},hn.preload=function(b,_){if(typeof b=="string"&&typeof _=="object"&&_!==null&&typeof _.as=="string"){var x=_.as,A=y(x,_.crossOrigin);a.d.L(b,x,{crossOrigin:A,integrity:typeof _.integrity=="string"?_.integrity:void 0,nonce:typeof _.nonce=="string"?_.nonce:void 0,type:typeof _.type=="string"?_.type:void 0,fetchPriority:typeof _.fetchPriority=="string"?_.fetchPriority:void 0,referrerPolicy:typeof _.referrerPolicy=="string"?_.referrerPolicy:void 0,imageSrcSet:typeof _.imageSrcSet=="string"?_.imageSrcSet:void 0,imageSizes:typeof _.imageSizes=="string"?_.imageSizes:void 0,media:typeof _.media=="string"?_.media:void 0})}},hn.preloadModule=function(b,_){if(typeof b=="string")if(_){var x=y(_.as,_.crossOrigin);a.d.m(b,{as:typeof _.as=="string"&&_.as!=="script"?_.as:void 0,crossOrigin:x,integrity:typeof _.integrity=="string"?_.integrity:void 0})}else a.d.m(b)},hn.requestFormReset=function(b){a.d.r(b)},hn.unstable_batchedUpdates=function(b,_){return b(_)},hn.useFormState=function(b,_,x){return f.H.useFormState(b,_,x)},hn.useFormStatus=function(){return f.H.useHostTransitionStatus()},hn.version="19.2.3",hn}var Xy;function Qb(){if(Xy)return Wh.exports;Xy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Wh.exports=Fb(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $y;function Yb(){if($y)return cl;$y=1;var r=Hb(),e=Of(),i=Qb();function a(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,s=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(s=n.return),t=n.return;while(t)}return n.tag===3?s:null}function f(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function y(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function b(t){if(d(t)!==t)throw Error(a(188))}function _(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(a(188));return n!==t?null:t}for(var s=t,o=n;;){var c=s.return;if(c===null)break;var h=c.alternate;if(h===null){if(o=c.return,o!==null){s=o;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===s)return b(c),t;if(h===o)return b(c),n;h=h.sibling}throw Error(a(188))}if(s.return!==o.return)s=c,o=h;else{for(var v=!1,T=c.child;T;){if(T===s){v=!0,s=c,o=h;break}if(T===o){v=!0,o=c,s=h;break}T=T.sibling}if(!v){for(T=h.child;T;){if(T===s){v=!0,s=h,o=c;break}if(T===o){v=!0,o=h,s=c;break}T=T.sibling}if(!v)throw Error(a(189))}}if(s.alternate!==o)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:n}function x(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=x(t),n!==null)return n;t=t.sibling}return null}var A=Object.assign,N=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),ne=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),pe=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),me=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function z(t){return t===null||typeof t!="object"?null:(t=V&&t[V]||t["@@iterator"],typeof t=="function"?t:null)}var D=Symbol.for("react.client.reference");function He(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===D?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case re:return"Fragment";case pe:return"Profiler";case F:return"StrictMode";case Se:return"Suspense";case Te:return"SuspenseList";case w:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case ne:return"Portal";case me:return t.displayName||"Context";case ie:return(t._context.displayName||"Context")+".Consumer";case ve:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return n=t.displayName||null,n!==null?n:He(t.type)||"Memo";case R:n=t._payload,t=t._init;try{return He(t(n))}catch{}}return null}var st=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},ue=[],Fe=-1;function C(t){return{current:t}}function $(t){0>Fe||(t.current=ue[Fe],ue[Fe]=null,Fe--)}function fe(t,n){Fe++,ue[Fe]=t.current,t.current=n}var Ee=C(null),Ve=C(null),je=C(null),Ge=C(null);function Ct(t,n){switch(fe(je,n),fe(Ve,t),fe(Ee,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?dy(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=dy(n),t=hy(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(Ee),fe(Ee,t)}function lt(){$(Ee),$(Ve),$(je)}function ai(t){t.memoizedState!==null&&fe(Ge,t);var n=Ee.current,s=hy(n,t.type);n!==s&&(fe(Ve,t),fe(Ee,s))}function yr(t){Ve.current===t&&($(Ee),$(Ve)),Ge.current===t&&($(Ge),sl._currentValue=we)}var vr,_r;function Gn(t){if(vr===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);vr=n&&n[1]||"",_r=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vr+t+_r}var fs=!1;function Qi(t,n){if(!t||fs)return"";fs=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(K){var H=K}Reflect.construct(t,[],J)}else{try{J.call()}catch(K){H=K}t.call(J.prototype)}}else{try{throw Error()}catch(K){H=K}(J=t())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(K){if(K&&H&&typeof K.stack=="string")return[K.stack,H.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),v=h[0],T=h[1];if(v&&T){var M=v.split(`
`),G=T.split(`
`);for(c=o=0;o<M.length&&!M[o].includes("DetermineComponentFrameRoot");)o++;for(;c<G.length&&!G[c].includes("DetermineComponentFrameRoot");)c++;if(o===M.length||c===G.length)for(o=M.length-1,c=G.length-1;1<=o&&0<=c&&M[o]!==G[c];)c--;for(;1<=o&&0<=c;o--,c--)if(M[o]!==G[c]){if(o!==1||c!==1)do if(o--,c--,0>c||M[o]!==G[c]){var W=`
`+M[o].replace(" at new "," at ");return t.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",t.displayName)),W}while(1<=o&&0<=c);break}}}finally{fs=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?Gn(s):""}function ms(t,n){switch(t.tag){case 26:case 27:case 5:return Gn(t.type);case 16:return Gn("Lazy");case 13:return t.child!==n&&n!==null?Gn("Suspense Fallback"):Gn("Suspense");case 19:return Gn("SuspenseList");case 0:case 15:return Qi(t.type,!1);case 11:return Qi(t.type.render,!1);case 1:return Qi(t.type,!0);case 31:return Gn("Activity");default:return""}}function gs(t){try{var n="",s=null;do n+=ms(t,s),s=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Dt=Object.prototype.hasOwnProperty,Mt=r.unstable_scheduleCallback,vi=r.unstable_cancelCallback,ea=r.unstable_shouldYield,ta=r.unstable_requestPaint,tn=r.unstable_now,Yi=r.unstable_getCurrentPriorityLevel,ps=r.unstable_ImmediatePriority,ys=r.unstable_UserBlockingPriority,oi=r.unstable_NormalPriority,P=r.unstable_LowPriority,k=r.unstable_IdlePriority,X=r.log,oe=r.unstable_setDisableYieldValue,ge=null,ce=null;function le(t){if(typeof X=="function"&&oe(t),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(ge,t)}catch{}}var Re=Math.clz32?Math.clz32:xt,se=Math.log,Ue=Math.LN2;function xt(t){return t>>>=0,t===0?32:31-(se(t)/Ue|0)|0}var De=256,Qe=262144,ut=4194304;function pn(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function En(t,n,s){var o=t.pendingLanes;if(o===0)return 0;var c=0,h=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~h,o!==0?c=pn(o):(v&=T,v!==0?c=pn(v):s||(s=T&~t,s!==0&&(c=pn(s))))):(T=o&~h,T!==0?c=pn(T):v!==0?c=pn(v):s||(s=o&~t,s!==0&&(c=pn(s)))),c===0?0:n!==0&&n!==c&&(n&h)===0&&(h=c&-c,s=n&-n,h>=s||h===32&&(s&4194048)!==0)?n:c}function yn(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function nt(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Qt(){var t=ut;return ut<<=1,(ut&62914560)===0&&(ut=4194304),t}function Xt(t){for(var n=[],s=0;31>s;s++)n.push(t);return n}function Vn(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vs(t,n,s,o,c,h){var v=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var T=t.entanglements,M=t.expirationTimes,G=t.hiddenUpdates;for(s=v&~s;0<s;){var W=31-Re(s),J=1<<W;T[W]=0,M[W]=-1;var H=G[W];if(H!==null)for(G[W]=null,W=0;W<H.length;W++){var K=H[W];K!==null&&(K.lane&=-536870913)}s&=~J}o!==0&&_i(t,o,0),h!==0&&c===0&&t.tag!==0&&(t.suspendedLanes|=h&~(v&~n))}function _i(t,n,s){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-Re(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|s&261930}function Ki(t,n){var s=t.entangledLanes|=n;for(t=t.entanglements;s;){var o=31-Re(s),c=1<<o;c&n|t[o]&n&&(t[o]|=n),s&=~c}}function bi(t,n){var s=n&-n;return s=(s&42)!==0?1:Tn(s),(s&(t.suspendedLanes|n))!==0?0:s}function Tn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function nn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function na(){var t=de.p;return t!==0?t:(t=window.event,t===void 0?32:jy(t.type))}function vn(t,n){var s=de.p;try{return de.p=t,n()}finally{de.p=s}}var Hn=Math.random().toString(36).slice(2),At="__reactFiber$"+Hn,$t="__reactProps$"+Hn,Ei="__reactContainer$"+Hn,ia="__reactEvents$"+Hn,Zc="__reactListeners$"+Hn,zl="__reactHandles$"+Hn,kl="__reactResources$"+Hn,Ti="__reactMarker$"+Hn;function ra(t){delete t[At],delete t[$t],delete t[ia],delete t[Zc],delete t[zl]}function xi(t){var n=t[At];if(n)return n;for(var s=t.parentNode;s;){if(n=s[Ei]||s[At]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(t=_y(t);t!==null;){if(s=t[At])return s;t=_y(t)}return n}t=s,s=t.parentNode}return null}function Fn(t){if(t=t[At]||t[Ei]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function On(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(a(33))}function Ai(t){var n=t[kl];return n||(n=t[kl]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function kt(t){t[Ti]=!0}var ho=new Set,fo={};function Si(t,n){wi(t,n),wi(t+"Capture",n)}function wi(t,n){for(fo[t]=n,t=0;t<n.length;t++)ho.add(n[t])}var mo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),go={},po={};function Ll(t){return Dt.call(po,t)?!0:Dt.call(go,t)?!1:mo.test(t)?po[t]=!0:(go[t]=!0,!1)}function sa(t,n,s){if(Ll(n))if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+s)}}function jn(t,n,s){if(s===null)t.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+s)}}function Lt(t,n,s,o){if(o===null)t.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(n,s,""+o)}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function br(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function yo(t,n,s){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var c=o.get,h=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return c.call(this)},set:function(v){s=""+v,h.call(this,v)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function dt(t){if(!t._valueTracker){var n=br(t)?"checked":"value";t._valueTracker=yo(t,n,""+t[n])}}function _s(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var s=n.getValue(),o="";return t&&(o=br(t)?t.checked?"true":"false":t.value),t=o,t!==s?(n.setValue(t),!0):!1}function Ci(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var bs=/[\n"\\]/g;function xn(t){return t.replace(bs,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function aa(t,n,s,o,c,h,v,T){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),n!=null?v==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Wt(n)):t.value!==""+Wt(n)&&(t.value=""+Wt(n)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),n!=null?vo(t,v,Wt(n)):s!=null?vo(t,v,Wt(s)):o!=null&&t.removeAttribute("value"),c==null&&h!=null&&(t.defaultChecked=!!h),c!=null&&(t.checked=c&&typeof c!="function"&&typeof c!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Wt(T):t.removeAttribute("name")}function Ul(t,n,s,o,c,h,v,T){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),n!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||n!=null)){dt(t);return}s=s!=null?""+Wt(s):"",n=n!=null?""+Wt(n):s,T||n===t.value||(t.value=n),t.defaultValue=n}o=o??c,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),dt(t)}function vo(t,n,s){n==="number"&&Ci(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Er(t,n,s,o){if(t=t.options,n){n={};for(var c=0;c<s.length;c++)n["$"+s[c]]=!0;for(s=0;s<t.length;s++)c=n.hasOwnProperty("$"+t[s].value),t[s].selected!==c&&(t[s].selected=c),c&&o&&(t[s].defaultSelected=!0)}else{for(s=""+Wt(s),n=null,c=0;c<t.length;c++){if(t[c].value===s){t[c].selected=!0,o&&(t[c].defaultSelected=!0);return}n!==null||t[c].disabled||(n=t[c])}n!==null&&(n.selected=!0)}}function Bl(t,n,s){if(n!=null&&(n=""+Wt(n),n!==t.value&&(t.value=n),s==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=s!=null?""+Wt(s):""}function Tr(t,n,s,o){if(n==null){if(o!=null){if(s!=null)throw Error(a(92));if(st(o)){if(1<o.length)throw Error(a(93));o=o[0]}s=o}s==null&&(s=""),n=s}s=Wt(n),t.defaultValue=s,o=t.textContent,o===s&&o!==""&&o!==null&&(t.value=o),dt(t)}function An(t,n){if(n){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=n;return}}t.textContent=n}var Pl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _o(t,n,s){var o=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,s):typeof s!="number"||s===0||Pl.has(n)?n==="float"?t.cssFloat=s:t[n]=(""+s).trim():t[n]=s+"px"}function bo(t,n,s){if(n!=null&&typeof n!="object")throw Error(a(62));if(t=t.style,s!=null){for(var o in s)!s.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var c in n)o=n[c],n.hasOwnProperty(c)&&s[c]!==o&&_o(t,c,o)}else for(var h in n)n.hasOwnProperty(h)&&_o(t,h,n[h])}function oa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ql=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function la(t){return xr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function li(){}var Eo=null;function Qn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ar=null,Ri=null;function Es(t){var n=Fn(t);if(n&&(t=n.stateNode)){var s=t[$t]||null;e:switch(t=n.stateNode,n.type){case"input":if(aa(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+xn(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var o=s[n];if(o!==t&&o.form===t.form){var c=o[$t]||null;if(!c)throw Error(a(90));aa(o,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(n=0;n<s.length;n++)o=s[n],o.form===t.form&&_s(o)}break e;case"textarea":Bl(t,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Er(t,!!s.multiple,n,!1)}}}var ua=!1;function Sr(t,n,s){if(ua)return t(n,s);ua=!0;try{var o=t(n);return o}finally{if(ua=!1,(Ar!==null||Ri!==null)&&(ju(),Ar&&(n=Ar,t=Ri,Ri=Ar=null,Es(n),t)))for(n=0;n<t.length;n++)Es(t[n])}}function ui(t,n){var s=t.stateNode;if(s===null)return null;var o=s[$t]||null;if(o===null)return null;s=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,n,typeof s));return s}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ts=!1;if(Yn)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Ts=!1}var Di=null,To=null,xs=null;function xo(){if(xs)return xs;var t,n=To,s=n.length,o,c="value"in Di?Di.value:Di.textContent,h=c.length;for(t=0;t<s&&n[t]===c[t];t++);var v=s-t;for(o=1;o<=v&&n[s-o]===c[h-o];o++);return xs=c.slice(t,1<o?1-o:void 0)}function As(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Xi(){return!0}function ci(){return!1}function rn(t){function n(s,o,c,h,v){this._reactName=s,this._targetInst=c,this.type=o,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(s=t[T],this[T]=s?s(h):h[T]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Xi:ci,this.isPropagationStopped=ci,this}return A(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Xi)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Xi)},persist:function(){},isPersistent:Xi}),n}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ni=rn($i),wr=A({},$i,{view:0,detail:0}),Ao=rn(wr),Cr,ca,Ii,da=A({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ii&&(Ii&&t.type==="mousemove"?(Cr=t.screenX-Ii.screenX,ca=t.screenY-Ii.screenY):ca=Cr=0,Ii=t),Cr)},movementY:function(t){return"movementY"in t?t.movementY:ca}}),So=rn(da),Ss=A({},da,{dataTransfer:0}),Gl=rn(Ss),Hl=A({},wr,{relatedTarget:0}),ws=rn(Hl),wo=A({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),Fl=rn(wo),ha=A({},$i,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ql=rn(ha),Yl=A({},$i,{data:0}),Mi=rn(Yl),Kl={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$l={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wl(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=$l[t])?!!n[t]:!1}function Rr(){return Wl}var _n=A({},wr,{key:function(t){if(t.key){var n=Kl[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=As(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Xl[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rr,charCode:function(t){return t.type==="keypress"?As(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?As(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Zl=rn(_n),Jl=A({},da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wi=rn(Jl),u=A({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rr}),g=rn(u),E=A({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),S=rn(E),B=A({},da,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q=rn(B),he=A({},$i,{newState:0,oldState:0}),Be=rn(he),Vt=[9,13,27,32],at=Yn&&"CompositionEvent"in window,St=null;Yn&&"documentMode"in document&&(St=document.documentMode);var Kn=Yn&&"TextEvent"in window&&!St,Vi=Yn&&(!at||St&&8<St&&11>=St),di=" ",hi=!1;function Cs(t,n){switch(t){case"keyup":return Vt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ma=!1;function c1(t,n){switch(t){case"compositionend":return fa(n);case"keypress":return n.which!==32?null:(hi=!0,di);case"textInput":return t=n.data,t===di&&hi?null:t;default:return null}}function d1(t,n){if(ma)return t==="compositionend"||!at&&Cs(t,n)?(t=xo(),xs=To=Di=null,ma=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Vi&&n.locale!=="ko"?null:n.data;default:return null}}var h1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!h1[t.type]:n==="textarea"}function xm(t,n,s,o){Ar?Ri?Ri.push(o):Ri=[o]:Ar=o,n=qu(n,"onChange"),0<n.length&&(s=new Ni("onChange","change",null,s,o),t.push({event:s,listeners:n}))}var Co=null,Ro=null;function f1(t){sy(t,0)}function eu(t){var n=On(t);if(_s(n))return t}function Am(t,n){if(t==="change")return n}var Sm=!1;if(Yn){var Jc;if(Yn){var ed="oninput"in document;if(!ed){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),ed=typeof wm.oninput=="function"}Jc=ed}else Jc=!1;Sm=Jc&&(!document.documentMode||9<document.documentMode)}function Cm(){Co&&(Co.detachEvent("onpropertychange",Rm),Ro=Co=null)}function Rm(t){if(t.propertyName==="value"&&eu(Ro)){var n=[];xm(n,Ro,t,Qn(t)),Sr(f1,n)}}function m1(t,n,s){t==="focusin"?(Cm(),Co=n,Ro=s,Co.attachEvent("onpropertychange",Rm)):t==="focusout"&&Cm()}function g1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(Ro)}function p1(t,n){if(t==="click")return eu(n)}function y1(t,n){if(t==="input"||t==="change")return eu(n)}function v1(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var zn=typeof Object.is=="function"?Object.is:v1;function Do(t,n){if(zn(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var s=Object.keys(t),o=Object.keys(n);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var c=s[o];if(!Dt.call(n,c)||!zn(t[c],n[c]))return!1}return!0}function Dm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nm(t,n){var s=Dm(t);t=0;for(var o;s;){if(s.nodeType===3){if(o=t+s.textContent.length,t<=n&&o>=n)return{node:s,offset:n-t};t=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Dm(s)}}function Im(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Im(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Mm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=Ci(t.document);n instanceof t.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)t=n.contentWindow;else break;n=Ci(t.document)}return n}function td(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var _1=Yn&&"documentMode"in document&&11>=document.documentMode,ga=null,nd=null,No=null,id=!1;function Vm(t,n,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;id||ga==null||ga!==Ci(o)||(o=ga,"selectionStart"in o&&td(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),No&&Do(No,o)||(No=o,o=qu(nd,"onSelect"),0<o.length&&(n=new Ni("onSelect","select",null,n,s),t.push({event:n,listeners:o}),n.target=ga)))}function Rs(t,n){var s={};return s[t.toLowerCase()]=n.toLowerCase(),s["Webkit"+t]="webkit"+n,s["Moz"+t]="moz"+n,s}var pa={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionrun:Rs("Transition","TransitionRun"),transitionstart:Rs("Transition","TransitionStart"),transitioncancel:Rs("Transition","TransitionCancel"),transitionend:Rs("Transition","TransitionEnd")},rd={},Om={};Yn&&(Om=document.createElement("div").style,"AnimationEvent"in window||(delete pa.animationend.animation,delete pa.animationiteration.animation,delete pa.animationstart.animation),"TransitionEvent"in window||delete pa.transitionend.transition);function Ds(t){if(rd[t])return rd[t];if(!pa[t])return t;var n=pa[t],s;for(s in n)if(n.hasOwnProperty(s)&&s in Om)return rd[t]=n[s];return t}var jm=Ds("animationend"),zm=Ds("animationiteration"),km=Ds("animationstart"),b1=Ds("transitionrun"),E1=Ds("transitionstart"),T1=Ds("transitioncancel"),Lm=Ds("transitionend"),Um=new Map,sd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");sd.push("scrollEnd");function fi(t,n){Um.set(t,n),Si(n,[t])}var tu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xn=[],ya=0,ad=0;function nu(){for(var t=ya,n=ad=ya=0;n<t;){var s=Xn[n];Xn[n++]=null;var o=Xn[n];Xn[n++]=null;var c=Xn[n];Xn[n++]=null;var h=Xn[n];if(Xn[n++]=null,o!==null&&c!==null){var v=o.pending;v===null?c.next=c:(c.next=v.next,v.next=c),o.pending=c}h!==0&&Bm(s,c,h)}}function iu(t,n,s,o){Xn[ya++]=t,Xn[ya++]=n,Xn[ya++]=s,Xn[ya++]=o,ad|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function od(t,n,s,o){return iu(t,n,s,o),ru(t)}function Ns(t,n){return iu(t,null,null,n),ru(t)}function Bm(t,n,s){t.lanes|=s;var o=t.alternate;o!==null&&(o.lanes|=s);for(var c=!1,h=t.return;h!==null;)h.childLanes|=s,o=h.alternate,o!==null&&(o.childLanes|=s),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(c=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,c&&n!==null&&(c=31-Re(s),t=h.hiddenUpdates,o=t[c],o===null?t[c]=[n]:o.push(n),n.lane=s|536870912),h):null}function ru(t){if(50<Zo)throw Zo=0,ph=null,Error(a(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var va={};function x1(t,n,s,o){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kn(t,n,s,o){return new x1(t,n,s,o)}function ld(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Zi(t,n){var s=t.alternate;return s===null?(s=kn(t.tag,n,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=n,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,n=t.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Pm(t,n){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,n=s.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function su(t,n,s,o,c,h){var v=0;if(o=t,typeof t=="function")ld(t)&&(v=1);else if(typeof t=="string")v=Rb(t,s,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case w:return t=kn(31,s,n,c),t.elementType=w,t.lanes=h,t;case re:return Is(s.children,c,h,n);case F:v=8,c|=24;break;case pe:return t=kn(12,s,n,c|2),t.elementType=pe,t.lanes=h,t;case Se:return t=kn(13,s,n,c),t.elementType=Se,t.lanes=h,t;case Te:return t=kn(19,s,n,c),t.elementType=Te,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case me:v=10;break e;case ie:v=9;break e;case ve:v=11;break e;case I:v=14;break e;case R:v=16,o=null;break e}v=29,s=Error(a(130,t===null?"null":typeof t,"")),o=null}return n=kn(v,s,n,c),n.elementType=t,n.type=o,n.lanes=h,n}function Is(t,n,s,o){return t=kn(7,t,o,n),t.lanes=s,t}function ud(t,n,s){return t=kn(6,t,null,n),t.lanes=s,t}function qm(t){var n=kn(18,null,null,0);return n.stateNode=t,n}function cd(t,n,s){return n=kn(4,t.children!==null?t.children:[],t.key,n),n.lanes=s,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Gm=new WeakMap;function $n(t,n){if(typeof t=="object"&&t!==null){var s=Gm.get(t);return s!==void 0?s:(n={value:t,source:n,stack:gs(n)},Gm.set(t,n),n)}return{value:t,source:n,stack:gs(n)}}var _a=[],ba=0,au=null,Io=0,Wn=[],Zn=0,Dr=null,Oi=1,ji="";function Ji(t,n){_a[ba++]=Io,_a[ba++]=au,au=t,Io=n}function Hm(t,n,s){Wn[Zn++]=Oi,Wn[Zn++]=ji,Wn[Zn++]=Dr,Dr=t;var o=Oi;t=ji;var c=32-Re(o)-1;o&=~(1<<c),s+=1;var h=32-Re(n)+c;if(30<h){var v=c-c%5;h=(o&(1<<v)-1).toString(32),o>>=v,c-=v,Oi=1<<32-Re(n)+c|s<<c|o,ji=h+t}else Oi=1<<h|s<<c|o,ji=t}function dd(t){t.return!==null&&(Ji(t,1),Hm(t,1,0))}function hd(t){for(;t===au;)au=_a[--ba],_a[ba]=null,Io=_a[--ba],_a[ba]=null;for(;t===Dr;)Dr=Wn[--Zn],Wn[Zn]=null,ji=Wn[--Zn],Wn[Zn]=null,Oi=Wn[--Zn],Wn[Zn]=null}function Fm(t,n){Wn[Zn++]=Oi,Wn[Zn++]=ji,Wn[Zn++]=Dr,Oi=n.id,ji=n.overflow,Dr=t}var sn=null,bt=null,Je=!1,Nr=null,Jn=!1,fd=Error(a(519));function Ir(t){var n=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Mo($n(n,t)),fd}function Qm(t){var n=t.stateNode,s=t.type,o=t.memoizedProps;switch(n[At]=t,n[$t]=o,s){case"dialog":Ke("cancel",n),Ke("close",n);break;case"iframe":case"object":case"embed":Ke("load",n);break;case"video":case"audio":for(s=0;s<el.length;s++)Ke(el[s],n);break;case"source":Ke("error",n);break;case"img":case"image":case"link":Ke("error",n),Ke("load",n);break;case"details":Ke("toggle",n);break;case"input":Ke("invalid",n),Ul(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ke("invalid",n);break;case"textarea":Ke("invalid",n),Tr(n,o.value,o.defaultValue,o.children)}s=o.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||o.suppressHydrationWarning===!0||uy(n.textContent,s)?(o.popover!=null&&(Ke("beforetoggle",n),Ke("toggle",n)),o.onScroll!=null&&Ke("scroll",n),o.onScrollEnd!=null&&Ke("scrollend",n),o.onClick!=null&&(n.onclick=li),n=!0):n=!1,n||Ir(t,!0)}function Ym(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 31:case 13:Jn=!1;return;case 27:case 3:Jn=!0;return;default:sn=sn.return}}function Ea(t){if(t!==sn)return!1;if(!Je)return Ym(t),Je=!0,!1;var n=t.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Ih(t.type,t.memoizedProps)),s=!s),s&&bt&&Ir(t),Ym(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));bt=vy(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));bt=vy(t)}else n===27?(n=bt,Fr(t.type)?(t=zh,zh=null,bt=t):bt=n):bt=sn?ti(t.stateNode.nextSibling):null;return!0}function Ms(){bt=sn=null,Je=!1}function md(){var t=Nr;return t!==null&&(Rn===null?Rn=t:Rn.push.apply(Rn,t),Nr=null),t}function Mo(t){Nr===null?Nr=[t]:Nr.push(t)}var gd=C(null),Vs=null,er=null;function Mr(t,n,s){fe(gd,n._currentValue),n._currentValue=s}function tr(t){t._currentValue=gd.current,$(gd)}function pd(t,n,s){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===s)break;t=t.return}}function yd(t,n,s,o){var c=t.child;for(c!==null&&(c.return=t);c!==null;){var h=c.dependencies;if(h!==null){var v=c.child;h=h.firstContext;e:for(;h!==null;){var T=h;h=c;for(var M=0;M<n.length;M++)if(T.context===n[M]){h.lanes|=s,T=h.alternate,T!==null&&(T.lanes|=s),pd(h.return,s,t),o||(v=null);break e}h=T.next}}else if(c.tag===18){if(v=c.return,v===null)throw Error(a(341));v.lanes|=s,h=v.alternate,h!==null&&(h.lanes|=s),pd(v,s,t),v=null}else v=c.child;if(v!==null)v.return=c;else for(v=c;v!==null;){if(v===t){v=null;break}if(c=v.sibling,c!==null){c.return=v.return,v=c;break}v=v.return}c=v}}function Ta(t,n,s,o){t=null;for(var c=n,h=!1;c!==null;){if(!h){if((c.flags&524288)!==0)h=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var v=c.alternate;if(v===null)throw Error(a(387));if(v=v.memoizedProps,v!==null){var T=c.type;zn(c.pendingProps.value,v.value)||(t!==null?t.push(T):t=[T])}}else if(c===Ge.current){if(v=c.alternate,v===null)throw Error(a(387));v.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(t!==null?t.push(sl):t=[sl])}c=c.return}t!==null&&yd(n,t,s,o),n.flags|=262144}function ou(t){for(t=t.firstContext;t!==null;){if(!zn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Os(t){Vs=t,er=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function an(t){return Km(Vs,t)}function lu(t,n){return Vs===null&&Os(t),Km(t,n)}function Km(t,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},er===null){if(t===null)throw Error(a(308));er=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else er=er.next=n;return s}var A1=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(s,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(s){return s()})}},S1=r.unstable_scheduleCallback,w1=r.unstable_NormalPriority,Ut={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function vd(){return{controller:new A1,data:new Map,refCount:0}}function Vo(t){t.refCount--,t.refCount===0&&S1(w1,function(){t.controller.abort()})}var Oo=null,_d=0,xa=0,Aa=null;function C1(t,n){if(Oo===null){var s=Oo=[];_d=0,xa=Th(),Aa={status:"pending",value:void 0,then:function(o){s.push(o)}}}return _d++,n.then(Xm,Xm),n}function Xm(){if(--_d===0&&Oo!==null){Aa!==null&&(Aa.status="fulfilled");var t=Oo;Oo=null,xa=0,Aa=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function R1(t,n){var s=[],o={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var c=0;c<s.length;c++)(0,s[c])(n)},function(c){for(o.status="rejected",o.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),o}var $m=Y.S;Y.S=function(t,n){Vp=tn(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&C1(t,n),$m!==null&&$m(t,n)};var js=C(null);function bd(){var t=js.current;return t!==null?t:vt.pooledCache}function uu(t,n){n===null?fe(js,js.current):fe(js,n.pool)}function Wm(){var t=bd();return t===null?null:{parent:Ut._currentValue,pool:t}}var Sa=Error(a(460)),Ed=Error(a(474)),cu=Error(a(542)),du={then:function(){}};function Zm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Jm(t,n,s){switch(s=t[s],s===void 0?t.push(n):s!==n&&(n.then(li,li),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,tg(t),t;default:if(typeof n.status=="string")n.then(li,li);else{if(t=vt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var c=n;c.status="fulfilled",c.value=o}},function(o){if(n.status==="pending"){var c=n;c.status="rejected",c.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,tg(t),t}throw ks=n,Sa}}function zs(t){try{var n=t._init;return n(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(ks=s,Sa):s}}var ks=null;function eg(){if(ks===null)throw Error(a(459));var t=ks;return ks=null,t}function tg(t){if(t===Sa||t===cu)throw Error(a(483))}var wa=null,jo=0;function hu(t){var n=jo;return jo+=1,wa===null&&(wa=[]),Jm(wa,t,n)}function zo(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function fu(t,n){throw n.$$typeof===N?Error(a(525)):(t=Object.prototype.toString.call(n),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function ng(t){function n(L,j){if(t){var q=L.deletions;q===null?(L.deletions=[j],L.flags|=16):q.push(j)}}function s(L,j){if(!t)return null;for(;j!==null;)n(L,j),j=j.sibling;return null}function o(L){for(var j=new Map;L!==null;)L.key!==null?j.set(L.key,L):j.set(L.index,L),L=L.sibling;return j}function c(L,j){return L=Zi(L,j),L.index=0,L.sibling=null,L}function h(L,j,q){return L.index=q,t?(q=L.alternate,q!==null?(q=q.index,q<j?(L.flags|=67108866,j):q):(L.flags|=67108866,j)):(L.flags|=1048576,j)}function v(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function T(L,j,q,Z){return j===null||j.tag!==6?(j=ud(q,L.mode,Z),j.return=L,j):(j=c(j,q),j.return=L,j)}function M(L,j,q,Z){var Ne=q.type;return Ne===re?W(L,j,q.props.children,Z,q.key):j!==null&&(j.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&zs(Ne)===j.type)?(j=c(j,q.props),zo(j,q),j.return=L,j):(j=su(q.type,q.key,q.props,null,L.mode,Z),zo(j,q),j.return=L,j)}function G(L,j,q,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==q.containerInfo||j.stateNode.implementation!==q.implementation?(j=cd(q,L.mode,Z),j.return=L,j):(j=c(j,q.children||[]),j.return=L,j)}function W(L,j,q,Z,Ne){return j===null||j.tag!==7?(j=Is(q,L.mode,Z,Ne),j.return=L,j):(j=c(j,q),j.return=L,j)}function J(L,j,q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=ud(""+j,L.mode,q),j.return=L,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case U:return q=su(j.type,j.key,j.props,null,L.mode,q),zo(q,j),q.return=L,q;case ne:return j=cd(j,L.mode,q),j.return=L,j;case R:return j=zs(j),J(L,j,q)}if(st(j)||z(j))return j=Is(j,L.mode,q,null),j.return=L,j;if(typeof j.then=="function")return J(L,hu(j),q);if(j.$$typeof===me)return J(L,lu(L,j),q);fu(L,j)}return null}function H(L,j,q,Z){var Ne=j!==null?j.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Ne!==null?null:T(L,j,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case U:return q.key===Ne?M(L,j,q,Z):null;case ne:return q.key===Ne?G(L,j,q,Z):null;case R:return q=zs(q),H(L,j,q,Z)}if(st(q)||z(q))return Ne!==null?null:W(L,j,q,Z,null);if(typeof q.then=="function")return H(L,j,hu(q),Z);if(q.$$typeof===me)return H(L,j,lu(L,q),Z);fu(L,q)}return null}function K(L,j,q,Z,Ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(q)||null,T(j,L,""+Z,Ne);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U:return L=L.get(Z.key===null?q:Z.key)||null,M(j,L,Z,Ne);case ne:return L=L.get(Z.key===null?q:Z.key)||null,G(j,L,Z,Ne);case R:return Z=zs(Z),K(L,j,q,Z,Ne)}if(st(Z)||z(Z))return L=L.get(q)||null,W(j,L,Z,Ne,null);if(typeof Z.then=="function")return K(L,j,q,hu(Z),Ne);if(Z.$$typeof===me)return K(L,j,q,lu(j,Z),Ne);fu(j,Z)}return null}function Ae(L,j,q,Z){for(var Ne=null,it=null,Ce=j,qe=j=0,$e=null;Ce!==null&&qe<q.length;qe++){Ce.index>qe?($e=Ce,Ce=null):$e=Ce.sibling;var rt=H(L,Ce,q[qe],Z);if(rt===null){Ce===null&&(Ce=$e);break}t&&Ce&&rt.alternate===null&&n(L,Ce),j=h(rt,j,qe),it===null?Ne=rt:it.sibling=rt,it=rt,Ce=$e}if(qe===q.length)return s(L,Ce),Je&&Ji(L,qe),Ne;if(Ce===null){for(;qe<q.length;qe++)Ce=J(L,q[qe],Z),Ce!==null&&(j=h(Ce,j,qe),it===null?Ne=Ce:it.sibling=Ce,it=Ce);return Je&&Ji(L,qe),Ne}for(Ce=o(Ce);qe<q.length;qe++)$e=K(Ce,L,qe,q[qe],Z),$e!==null&&(t&&$e.alternate!==null&&Ce.delete($e.key===null?qe:$e.key),j=h($e,j,qe),it===null?Ne=$e:it.sibling=$e,it=$e);return t&&Ce.forEach(function($r){return n(L,$r)}),Je&&Ji(L,qe),Ne}function Me(L,j,q,Z){if(q==null)throw Error(a(151));for(var Ne=null,it=null,Ce=j,qe=j=0,$e=null,rt=q.next();Ce!==null&&!rt.done;qe++,rt=q.next()){Ce.index>qe?($e=Ce,Ce=null):$e=Ce.sibling;var $r=H(L,Ce,rt.value,Z);if($r===null){Ce===null&&(Ce=$e);break}t&&Ce&&$r.alternate===null&&n(L,Ce),j=h($r,j,qe),it===null?Ne=$r:it.sibling=$r,it=$r,Ce=$e}if(rt.done)return s(L,Ce),Je&&Ji(L,qe),Ne;if(Ce===null){for(;!rt.done;qe++,rt=q.next())rt=J(L,rt.value,Z),rt!==null&&(j=h(rt,j,qe),it===null?Ne=rt:it.sibling=rt,it=rt);return Je&&Ji(L,qe),Ne}for(Ce=o(Ce);!rt.done;qe++,rt=q.next())rt=K(Ce,L,qe,rt.value,Z),rt!==null&&(t&&rt.alternate!==null&&Ce.delete(rt.key===null?qe:rt.key),j=h(rt,j,qe),it===null?Ne=rt:it.sibling=rt,it=rt);return t&&Ce.forEach(function(Ub){return n(L,Ub)}),Je&&Ji(L,qe),Ne}function yt(L,j,q,Z){if(typeof q=="object"&&q!==null&&q.type===re&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case U:e:{for(var Ne=q.key;j!==null;){if(j.key===Ne){if(Ne=q.type,Ne===re){if(j.tag===7){s(L,j.sibling),Z=c(j,q.props.children),Z.return=L,L=Z;break e}}else if(j.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===R&&zs(Ne)===j.type){s(L,j.sibling),Z=c(j,q.props),zo(Z,q),Z.return=L,L=Z;break e}s(L,j);break}else n(L,j);j=j.sibling}q.type===re?(Z=Is(q.props.children,L.mode,Z,q.key),Z.return=L,L=Z):(Z=su(q.type,q.key,q.props,null,L.mode,Z),zo(Z,q),Z.return=L,L=Z)}return v(L);case ne:e:{for(Ne=q.key;j!==null;){if(j.key===Ne)if(j.tag===4&&j.stateNode.containerInfo===q.containerInfo&&j.stateNode.implementation===q.implementation){s(L,j.sibling),Z=c(j,q.children||[]),Z.return=L,L=Z;break e}else{s(L,j);break}else n(L,j);j=j.sibling}Z=cd(q,L.mode,Z),Z.return=L,L=Z}return v(L);case R:return q=zs(q),yt(L,j,q,Z)}if(st(q))return Ae(L,j,q,Z);if(z(q)){if(Ne=z(q),typeof Ne!="function")throw Error(a(150));return q=Ne.call(q),Me(L,j,q,Z)}if(typeof q.then=="function")return yt(L,j,hu(q),Z);if(q.$$typeof===me)return yt(L,j,lu(L,q),Z);fu(L,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,j!==null&&j.tag===6?(s(L,j.sibling),Z=c(j,q),Z.return=L,L=Z):(s(L,j),Z=ud(q,L.mode,Z),Z.return=L,L=Z),v(L)):s(L,j)}return function(L,j,q,Z){try{jo=0;var Ne=yt(L,j,q,Z);return wa=null,Ne}catch(Ce){if(Ce===Sa||Ce===cu)throw Ce;var it=kn(29,Ce,null,L.mode);return it.lanes=Z,it.return=L,it}finally{}}}var Ls=ng(!0),ig=ng(!1),Vr=!1;function Td(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Or(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function jr(t,n,s){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(ot&2)!==0){var c=o.pending;return c===null?n.next=n:(n.next=c.next,c.next=n),o.pending=n,n=ru(t),Bm(t,null,s),n}return iu(t,o,n,s),ru(t)}function ko(t,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Ki(t,s)}}function Ad(t,n){var s=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var c=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?c=h=v:h=h.next=v,s=s.next}while(s!==null);h===null?c=h=n:h=h.next=n}else c=h=n;s={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=n:t.next=n,s.lastBaseUpdate=n}var Sd=!1;function Lo(){if(Sd){var t=Aa;if(t!==null)throw t}}function Uo(t,n,s,o){Sd=!1;var c=t.updateQueue;Vr=!1;var h=c.firstBaseUpdate,v=c.lastBaseUpdate,T=c.shared.pending;if(T!==null){c.shared.pending=null;var M=T,G=M.next;M.next=null,v===null?h=G:v.next=G,v=M;var W=t.alternate;W!==null&&(W=W.updateQueue,T=W.lastBaseUpdate,T!==v&&(T===null?W.firstBaseUpdate=G:T.next=G,W.lastBaseUpdate=M))}if(h!==null){var J=c.baseState;v=0,W=G=M=null,T=h;do{var H=T.lane&-536870913,K=H!==T.lane;if(K?(Xe&H)===H:(o&H)===H){H!==0&&H===xa&&(Sd=!0),W!==null&&(W=W.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var Ae=t,Me=T;H=n;var yt=s;switch(Me.tag){case 1:if(Ae=Me.payload,typeof Ae=="function"){J=Ae.call(yt,J,H);break e}J=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=Me.payload,H=typeof Ae=="function"?Ae.call(yt,J,H):Ae,H==null)break e;J=A({},J,H);break e;case 2:Vr=!0}}H=T.callback,H!==null&&(t.flags|=64,K&&(t.flags|=8192),K=c.callbacks,K===null?c.callbacks=[H]:K.push(H))}else K={lane:H,tag:T.tag,payload:T.payload,callback:T.callback,next:null},W===null?(G=W=K,M=J):W=W.next=K,v|=H;if(T=T.next,T===null){if(T=c.shared.pending,T===null)break;K=T,T=K.next,K.next=null,c.lastBaseUpdate=K,c.shared.pending=null}}while(!0);W===null&&(M=J),c.baseState=M,c.firstBaseUpdate=G,c.lastBaseUpdate=W,h===null&&(c.shared.lanes=0),Br|=v,t.lanes=v,t.memoizedState=J}}function rg(t,n){if(typeof t!="function")throw Error(a(191,t));t.call(n)}function sg(t,n){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)rg(s[t],n)}var Ca=C(null),mu=C(0);function ag(t,n){t=cr,fe(mu,t),fe(Ca,n),cr=t|n.baseLanes}function wd(){fe(mu,cr),fe(Ca,Ca.current)}function Cd(){cr=mu.current,$(Ca),$(mu)}var Ln=C(null),ei=null;function zr(t){var n=t.alternate;fe(Ot,Ot.current&1),fe(Ln,t),ei===null&&(n===null||Ca.current!==null||n.memoizedState!==null)&&(ei=t)}function Rd(t){fe(Ot,Ot.current),fe(Ln,t),ei===null&&(ei=t)}function og(t){t.tag===22?(fe(Ot,Ot.current),fe(Ln,t),ei===null&&(ei=t)):kr()}function kr(){fe(Ot,Ot.current),fe(Ln,Ln.current)}function Un(t){$(Ln),ei===t&&(ei=null),$(Ot)}var Ot=C(0);function gu(t){for(var n=t;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Oh(s)||jh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var nr=0,Pe=null,gt=null,Bt=null,pu=!1,Ra=!1,Us=!1,yu=0,Bo=0,Da=null,D1=0;function Nt(){throw Error(a(321))}function Dd(t,n){if(n===null)return!1;for(var s=0;s<n.length&&s<t.length;s++)if(!zn(t[s],n[s]))return!1;return!0}function Nd(t,n,s,o,c,h){return nr=h,Pe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Y.H=t===null||t.memoizedState===null?Hg:Fd,Us=!1,h=s(o,c),Us=!1,Ra&&(h=ug(n,s,o,c)),lg(t),h}function lg(t){Y.H=Go;var n=gt!==null&&gt.next!==null;if(nr=0,Bt=gt=Pe=null,pu=!1,Bo=0,Da=null,n)throw Error(a(300));t===null||Pt||(t=t.dependencies,t!==null&&ou(t)&&(Pt=!0))}function ug(t,n,s,o){Pe=t;var c=0;do{if(Ra&&(Da=null),Bo=0,Ra=!1,25<=c)throw Error(a(301));if(c+=1,Bt=gt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}Y.H=Fg,h=n(s,o)}while(Ra);return h}function N1(){var t=Y.H,n=t.useState()[0];return n=typeof n.then=="function"?Po(n):n,t=t.useState()[0],(gt!==null?gt.memoizedState:null)!==t&&(Pe.flags|=1024),n}function Id(){var t=yu!==0;return yu=0,t}function Md(t,n,s){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~s}function Vd(t){if(pu){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}pu=!1}nr=0,Bt=gt=Pe=null,Ra=!1,Bo=yu=0,Da=null}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Pe.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function jt(){if(gt===null){var t=Pe.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var n=Bt===null?Pe.memoizedState:Bt.next;if(n!==null)Bt=n,gt=t;else{if(t===null)throw Pe.alternate===null?Error(a(467)):Error(a(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Bt===null?Pe.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function vu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Po(t){var n=Bo;return Bo+=1,Da===null&&(Da=[]),t=Jm(Da,t,n),n=Pe,(Bt===null?n.memoizedState:Bt.next)===null&&(n=n.alternate,Y.H=n===null||n.memoizedState===null?Hg:Fd),t}function _u(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Po(t);if(t.$$typeof===me)return an(t)}throw Error(a(438,String(t)))}function Od(t){var n=null,s=Pe.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var o=Pe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(c){return c.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=vu(),Pe.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(t),o=0;o<t;o++)s[o]=O;return n.index++,s}function ir(t,n){return typeof n=="function"?n(t):n}function bu(t){var n=jt();return jd(n,gt,t)}function jd(t,n,s){var o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=s;var c=t.baseQueue,h=o.pending;if(h!==null){if(c!==null){var v=c.next;c.next=h.next,h.next=v}n.baseQueue=c=h,o.pending=null}if(h=t.baseState,c===null)t.memoizedState=h;else{n=c.next;var T=v=null,M=null,G=n,W=!1;do{var J=G.lane&-536870913;if(J!==G.lane?(Xe&J)===J:(nr&J)===J){var H=G.revertLane;if(H===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),J===xa&&(W=!0);else if((nr&H)===H){G=G.next,H===xa&&(W=!0);continue}else J={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(T=M=J,v=h):M=M.next=J,Pe.lanes|=H,Br|=H;J=G.action,Us&&s(h,J),h=G.hasEagerState?G.eagerState:s(h,J)}else H={lane:J,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},M===null?(T=M=H,v=h):M=M.next=H,Pe.lanes|=J,Br|=J;G=G.next}while(G!==null&&G!==n);if(M===null?v=h:M.next=T,!zn(h,t.memoizedState)&&(Pt=!0,W&&(s=Aa,s!==null)))throw s;t.memoizedState=h,t.baseState=v,t.baseQueue=M,o.lastRenderedState=h}return c===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function zd(t){var n=jt(),s=n.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var o=s.dispatch,c=s.pending,h=n.memoizedState;if(c!==null){s.pending=null;var v=c=c.next;do h=t(h,v.action),v=v.next;while(v!==c);zn(h,n.memoizedState)||(Pt=!0),n.memoizedState=h,n.baseQueue===null&&(n.baseState=h),s.lastRenderedState=h}return[h,o]}function cg(t,n,s){var o=Pe,c=jt(),h=Je;if(h){if(s===void 0)throw Error(a(407));s=s()}else s=n();var v=!zn((gt||c).memoizedState,s);if(v&&(c.memoizedState=s,Pt=!0),c=c.queue,Ud(fg.bind(null,o,c,t),[t]),c.getSnapshot!==n||v||Bt!==null&&Bt.memoizedState.tag&1){if(o.flags|=2048,Na(9,{destroy:void 0},hg.bind(null,o,c,s,n),null),vt===null)throw Error(a(349));h||(nr&127)!==0||dg(o,n,s)}return s}function dg(t,n,s){t.flags|=16384,t={getSnapshot:n,value:s},n=Pe.updateQueue,n===null?(n=vu(),Pe.updateQueue=n,n.stores=[t]):(s=n.stores,s===null?n.stores=[t]:s.push(t))}function hg(t,n,s,o){n.value=s,n.getSnapshot=o,mg(n)&&gg(t)}function fg(t,n,s){return s(function(){mg(n)&&gg(t)})}function mg(t){var n=t.getSnapshot;t=t.value;try{var s=n();return!zn(t,s)}catch{return!0}}function gg(t){var n=Ns(t,2);n!==null&&Dn(n,t,2)}function kd(t){var n=bn();if(typeof t=="function"){var s=t;if(t=s(),Us){le(!0);try{s()}finally{le(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:t},n}function pg(t,n,s,o){return t.baseState=s,jd(t,gt,typeof o=="function"?o:ir)}function I1(t,n,s,o,c){if(xu(t))throw Error(a(485));if(t=n.action,t!==null){var h={payload:c,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};Y.T!==null?s(!0):h.isTransition=!1,o(h),s=n.pending,s===null?(h.next=n.pending=h,yg(n,h)):(h.next=s.next,n.pending=s.next=h)}}function yg(t,n){var s=n.action,o=n.payload,c=t.state;if(n.isTransition){var h=Y.T,v={};Y.T=v;try{var T=s(c,o),M=Y.S;M!==null&&M(v,T),vg(t,n,T)}catch(G){Ld(t,n,G)}finally{h!==null&&v.types!==null&&(h.types=v.types),Y.T=h}}else try{h=s(c,o),vg(t,n,h)}catch(G){Ld(t,n,G)}}function vg(t,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(o){_g(t,n,o)},function(o){return Ld(t,n,o)}):_g(t,n,s)}function _g(t,n,s){n.status="fulfilled",n.value=s,bg(n),t.state=s,n=t.pending,n!==null&&(s=n.next,s===n?t.pending=null:(s=s.next,n.next=s,yg(t,s)))}function Ld(t,n,s){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=s,bg(n),n=n.next;while(n!==o)}t.action=null}function bg(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function Eg(t,n){return n}function Tg(t,n){if(Je){var s=vt.formState;if(s!==null){e:{var o=Pe;if(Je){if(bt){t:{for(var c=bt,h=Jn;c.nodeType!==8;){if(!h){c=null;break t}if(c=ti(c.nextSibling),c===null){c=null;break t}}h=c.data,c=h==="F!"||h==="F"?c:null}if(c){bt=ti(c.nextSibling),o=c.data==="F!";break e}}Ir(o)}o=!1}o&&(n=s[0])}}return s=bn(),s.memoizedState=s.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Eg,lastRenderedState:n},s.queue=o,s=Pg.bind(null,Pe,o),o.dispatch=s,o=kd(!1),h=Hd.bind(null,Pe,!1,o.queue),o=bn(),c={state:n,dispatch:null,action:t,pending:null},o.queue=c,s=I1.bind(null,Pe,c,h,s),c.dispatch=s,o.memoizedState=t,[n,s,!1]}function xg(t){var n=jt();return Ag(n,gt,t)}function Ag(t,n,s){if(n=jd(t,n,Eg)[0],t=bu(ir)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Po(n)}catch(v){throw v===Sa?cu:v}else o=n;n=jt();var c=n.queue,h=c.dispatch;return s!==n.memoizedState&&(Pe.flags|=2048,Na(9,{destroy:void 0},M1.bind(null,c,s),null)),[o,h,t]}function M1(t,n){t.action=n}function Sg(t){var n=jt(),s=gt;if(s!==null)return Ag(n,s,t);jt(),n=n.memoizedState,s=jt();var o=s.queue.dispatch;return s.memoizedState=t,[n,o,!1]}function Na(t,n,s,o){return t={tag:t,create:s,deps:o,inst:n,next:null},n=Pe.updateQueue,n===null&&(n=vu(),Pe.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=t.next=t:(o=s.next,s.next=t,t.next=o,n.lastEffect=t),t}function wg(){return jt().memoizedState}function Eu(t,n,s,o){var c=bn();Pe.flags|=t,c.memoizedState=Na(1|n,{destroy:void 0},s,o===void 0?null:o)}function Tu(t,n,s,o){var c=jt();o=o===void 0?null:o;var h=c.memoizedState.inst;gt!==null&&o!==null&&Dd(o,gt.memoizedState.deps)?c.memoizedState=Na(n,h,s,o):(Pe.flags|=t,c.memoizedState=Na(1|n,h,s,o))}function Cg(t,n){Eu(8390656,8,t,n)}function Ud(t,n){Tu(2048,8,t,n)}function V1(t){Pe.flags|=4;var n=Pe.updateQueue;if(n===null)n=vu(),Pe.updateQueue=n,n.events=[t];else{var s=n.events;s===null?n.events=[t]:s.push(t)}}function Rg(t){var n=jt().memoizedState;return V1({ref:n,nextImpl:t}),function(){if((ot&2)!==0)throw Error(a(440));return n.impl.apply(void 0,arguments)}}function Dg(t,n){return Tu(4,2,t,n)}function Ng(t,n){return Tu(4,4,t,n)}function Ig(t,n){if(typeof n=="function"){t=t();var s=n(t);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Mg(t,n,s){s=s!=null?s.concat([t]):null,Tu(4,4,Ig.bind(null,n,t),s)}function Bd(){}function Vg(t,n){var s=jt();n=n===void 0?null:n;var o=s.memoizedState;return n!==null&&Dd(n,o[1])?o[0]:(s.memoizedState=[t,n],t)}function Og(t,n){var s=jt();n=n===void 0?null:n;var o=s.memoizedState;if(n!==null&&Dd(n,o[1]))return o[0];if(o=t(),Us){le(!0);try{t()}finally{le(!1)}}return s.memoizedState=[o,n],o}function Pd(t,n,s){return s===void 0||(nr&1073741824)!==0&&(Xe&261930)===0?t.memoizedState=n:(t.memoizedState=s,t=jp(),Pe.lanes|=t,Br|=t,s)}function jg(t,n,s,o){return zn(s,n)?s:Ca.current!==null?(t=Pd(t,s,o),zn(t,n)||(Pt=!0),t):(nr&42)===0||(nr&1073741824)!==0&&(Xe&261930)===0?(Pt=!0,t.memoizedState=s):(t=jp(),Pe.lanes|=t,Br|=t,n)}function zg(t,n,s,o,c){var h=de.p;de.p=h!==0&&8>h?h:8;var v=Y.T,T={};Y.T=T,Hd(t,!1,n,s);try{var M=c(),G=Y.S;if(G!==null&&G(T,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var W=R1(M,o);qo(t,n,W,qn(t))}else qo(t,n,o,qn(t))}catch(J){qo(t,n,{then:function(){},status:"rejected",reason:J},qn())}finally{de.p=h,v!==null&&T.types!==null&&(v.types=T.types),Y.T=v}}function O1(){}function qd(t,n,s,o){if(t.tag!==5)throw Error(a(476));var c=kg(t).queue;zg(t,c,n,we,s===null?O1:function(){return Lg(t),s(o)})}function kg(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:we},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ir,lastRenderedState:s},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Lg(t){var n=kg(t);n.next===null&&(n=t.alternate.memoizedState),qo(t,n.next.queue,{},qn())}function Gd(){return an(sl)}function Ug(){return jt().memoizedState}function Bg(){return jt().memoizedState}function j1(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var s=qn();t=Or(s);var o=jr(n,t,s);o!==null&&(Dn(o,n,s),ko(o,n,s)),n={cache:vd()},t.payload=n;return}n=n.return}}function z1(t,n,s){var o=qn();s={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},xu(t)?qg(n,s):(s=od(t,n,s,o),s!==null&&(Dn(s,t,o),Gg(s,n,o)))}function Pg(t,n,s){var o=qn();qo(t,n,s,o)}function qo(t,n,s,o){var c={lane:o,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(xu(t))qg(n,c);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=n.lastRenderedReducer,h!==null))try{var v=n.lastRenderedState,T=h(v,s);if(c.hasEagerState=!0,c.eagerState=T,zn(T,v))return iu(t,n,c,0),vt===null&&nu(),!1}catch{}finally{}if(s=od(t,n,c,o),s!==null)return Dn(s,t,o),Gg(s,n,o),!0}return!1}function Hd(t,n,s,o){if(o={lane:2,revertLane:Th(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},xu(t)){if(n)throw Error(a(479))}else n=od(t,s,o,2),n!==null&&Dn(n,t,2)}function xu(t){var n=t.alternate;return t===Pe||n!==null&&n===Pe}function qg(t,n){Ra=pu=!0;var s=t.pending;s===null?n.next=n:(n.next=s.next,s.next=n),t.pending=n}function Gg(t,n,s){if((s&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,s|=o,n.lanes=s,Ki(t,s)}}var Go={readContext:an,use:_u,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Go.useEffectEvent=Nt;var Hg={readContext:an,use:_u,useCallback:function(t,n){return bn().memoizedState=[t,n===void 0?null:n],t},useContext:an,useEffect:Cg,useImperativeHandle:function(t,n,s){s=s!=null?s.concat([t]):null,Eu(4194308,4,Ig.bind(null,n,t),s)},useLayoutEffect:function(t,n){return Eu(4194308,4,t,n)},useInsertionEffect:function(t,n){Eu(4,2,t,n)},useMemo:function(t,n){var s=bn();n=n===void 0?null:n;var o=t();if(Us){le(!0);try{t()}finally{le(!1)}}return s.memoizedState=[o,n],o},useReducer:function(t,n,s){var o=bn();if(s!==void 0){var c=s(n);if(Us){le(!0);try{s(n)}finally{le(!1)}}}else c=n;return o.memoizedState=o.baseState=c,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:c},o.queue=t,t=t.dispatch=z1.bind(null,Pe,t),[o.memoizedState,t]},useRef:function(t){var n=bn();return t={current:t},n.memoizedState=t},useState:function(t){t=kd(t);var n=t.queue,s=Pg.bind(null,Pe,n);return n.dispatch=s,[t.memoizedState,s]},useDebugValue:Bd,useDeferredValue:function(t,n){var s=bn();return Pd(s,t,n)},useTransition:function(){var t=kd(!1);return t=zg.bind(null,Pe,t.queue,!0,!1),bn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,s){var o=Pe,c=bn();if(Je){if(s===void 0)throw Error(a(407));s=s()}else{if(s=n(),vt===null)throw Error(a(349));(Xe&127)!==0||dg(o,n,s)}c.memoizedState=s;var h={value:s,getSnapshot:n};return c.queue=h,Cg(fg.bind(null,o,h,t),[t]),o.flags|=2048,Na(9,{destroy:void 0},hg.bind(null,o,h,s,n),null),s},useId:function(){var t=bn(),n=vt.identifierPrefix;if(Je){var s=ji,o=Oi;s=(o&~(1<<32-Re(o)-1)).toString(32)+s,n="_"+n+"R_"+s,s=yu++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=D1++,n="_"+n+"r_"+s.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Gd,useFormState:Tg,useActionState:Tg,useOptimistic:function(t){var n=bn();n.memoizedState=n.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Hd.bind(null,Pe,!0,s),s.dispatch=n,[t,n]},useMemoCache:Od,useCacheRefresh:function(){return bn().memoizedState=j1.bind(null,Pe)},useEffectEvent:function(t){var n=bn(),s={impl:t};return n.memoizedState=s,function(){if((ot&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}},Fd={readContext:an,use:_u,useCallback:Vg,useContext:an,useEffect:Ud,useImperativeHandle:Mg,useInsertionEffect:Dg,useLayoutEffect:Ng,useMemo:Og,useReducer:bu,useRef:wg,useState:function(){return bu(ir)},useDebugValue:Bd,useDeferredValue:function(t,n){var s=jt();return jg(s,gt.memoizedState,t,n)},useTransition:function(){var t=bu(ir)[0],n=jt().memoizedState;return[typeof t=="boolean"?t:Po(t),n]},useSyncExternalStore:cg,useId:Ug,useHostTransitionStatus:Gd,useFormState:xg,useActionState:xg,useOptimistic:function(t,n){var s=jt();return pg(s,gt,t,n)},useMemoCache:Od,useCacheRefresh:Bg};Fd.useEffectEvent=Rg;var Fg={readContext:an,use:_u,useCallback:Vg,useContext:an,useEffect:Ud,useImperativeHandle:Mg,useInsertionEffect:Dg,useLayoutEffect:Ng,useMemo:Og,useReducer:zd,useRef:wg,useState:function(){return zd(ir)},useDebugValue:Bd,useDeferredValue:function(t,n){var s=jt();return gt===null?Pd(s,t,n):jg(s,gt.memoizedState,t,n)},useTransition:function(){var t=zd(ir)[0],n=jt().memoizedState;return[typeof t=="boolean"?t:Po(t),n]},useSyncExternalStore:cg,useId:Ug,useHostTransitionStatus:Gd,useFormState:Sg,useActionState:Sg,useOptimistic:function(t,n){var s=jt();return gt!==null?pg(s,gt,t,n):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:Od,useCacheRefresh:Bg};Fg.useEffectEvent=Rg;function Qd(t,n,s,o){n=t.memoizedState,s=s(o,n),s=s==null?n:A({},n,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Yd={enqueueSetState:function(t,n,s){t=t._reactInternals;var o=qn(),c=Or(o);c.payload=n,s!=null&&(c.callback=s),n=jr(t,c,o),n!==null&&(Dn(n,t,o),ko(n,t,o))},enqueueReplaceState:function(t,n,s){t=t._reactInternals;var o=qn(),c=Or(o);c.tag=1,c.payload=n,s!=null&&(c.callback=s),n=jr(t,c,o),n!==null&&(Dn(n,t,o),ko(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var s=qn(),o=Or(s);o.tag=2,n!=null&&(o.callback=n),n=jr(t,o,s),n!==null&&(Dn(n,t,s),ko(n,t,s))}};function Qg(t,n,s,o,c,h,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,v):n.prototype&&n.prototype.isPureReactComponent?!Do(s,o)||!Do(c,h):!0}function Yg(t,n,s,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,o),n.state!==t&&Yd.enqueueReplaceState(n,n.state,null)}function Bs(t,n){var s=n;if("ref"in n){s={};for(var o in n)o!=="ref"&&(s[o]=n[o])}if(t=t.defaultProps){s===n&&(s=A({},s));for(var c in t)s[c]===void 0&&(s[c]=t[c])}return s}function Kg(t){tu(t)}function Xg(t){console.error(t)}function $g(t){tu(t)}function Au(t,n){try{var s=t.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Wg(t,n,s){try{var o=t.onCaughtError;o(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Kd(t,n,s){return s=Or(s),s.tag=3,s.payload={element:null},s.callback=function(){Au(t,n)},s}function Zg(t){return t=Or(t),t.tag=3,t}function Jg(t,n,s,o){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var h=o.value;t.payload=function(){return c(h)},t.callback=function(){Wg(n,s,o)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Wg(n,s,o),typeof c!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function k1(t,n,s,o,c){if(s.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=s.alternate,n!==null&&Ta(n,s,c,!0),s=Ln.current,s!==null){switch(s.tag){case 31:case 13:return ei===null?zu():s.alternate===null&&It===0&&(It=3),s.flags&=-257,s.flags|=65536,s.lanes=c,o===du?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([o]):n.add(o),_h(t,o,c)),!1;case 22:return s.flags|=65536,o===du?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([o]):s.add(o)),_h(t,o,c)),!1}throw Error(a(435,s.tag))}return _h(t,o,c),zu(),!1}if(Je)return n=Ln.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=c,o!==fd&&(t=Error(a(422),{cause:o}),Mo($n(t,s)))):(o!==fd&&(n=Error(a(423),{cause:o}),Mo($n(n,s))),t=t.current.alternate,t.flags|=65536,c&=-c,t.lanes|=c,o=$n(o,s),c=Kd(t.stateNode,o,c),Ad(t,c),It!==4&&(It=2)),!1;var h=Error(a(520),{cause:o});if(h=$n(h,s),Wo===null?Wo=[h]:Wo.push(h),It!==4&&(It=2),n===null)return!0;o=$n(o,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,t=c&-c,s.lanes|=t,t=Kd(s.stateNode,o,t),Ad(s,t),!1;case 1:if(n=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Pr===null||!Pr.has(h))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Zg(c),Jg(c,t,s,o),Ad(s,c),!1}s=s.return}while(s!==null);return!1}var Xd=Error(a(461)),Pt=!1;function on(t,n,s,o){n.child=t===null?ig(n,null,s,o):Ls(n,t.child,s,o)}function ep(t,n,s,o,c){s=s.render;var h=n.ref;if("ref"in o){var v={};for(var T in o)T!=="ref"&&(v[T]=o[T])}else v=o;return Os(n),o=Nd(t,n,s,v,h,c),T=Id(),t!==null&&!Pt?(Md(t,n,c),rr(t,n,c)):(Je&&T&&dd(n),n.flags|=1,on(t,n,o,c),n.child)}function tp(t,n,s,o,c){if(t===null){var h=s.type;return typeof h=="function"&&!ld(h)&&h.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=h,np(t,n,h,o,c)):(t=su(s.type,null,o,n,n.mode,c),t.ref=n.ref,t.return=n,n.child=t)}if(h=t.child,!ih(t,c)){var v=h.memoizedProps;if(s=s.compare,s=s!==null?s:Do,s(v,o)&&t.ref===n.ref)return rr(t,n,c)}return n.flags|=1,t=Zi(h,o),t.ref=n.ref,t.return=n,n.child=t}function np(t,n,s,o,c){if(t!==null){var h=t.memoizedProps;if(Do(h,o)&&t.ref===n.ref)if(Pt=!1,n.pendingProps=o=h,ih(t,c))(t.flags&131072)!==0&&(Pt=!0);else return n.lanes=t.lanes,rr(t,n,c)}return $d(t,n,s,o,c)}function ip(t,n,s,o){var c=o.children,h=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,t!==null){for(o=n.child=t.child,c=0;o!==null;)c=c|o.lanes|o.childLanes,o=o.sibling;o=c&~h}else o=0,n.child=null;return rp(t,n,h,s,o)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&uu(n,h!==null?h.cachePool:null),h!==null?ag(n,h):wd(),og(n);else return o=n.lanes=536870912,rp(t,n,h!==null?h.baseLanes|s:s,s,o)}else h!==null?(uu(n,h.cachePool),ag(n,h),kr(),n.memoizedState=null):(t!==null&&uu(n,null),wd(),kr());return on(t,n,c,s),n.child}function Ho(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function rp(t,n,s,o,c){var h=bd();return h=h===null?null:{parent:Ut._currentValue,pool:h},n.memoizedState={baseLanes:s,cachePool:h},t!==null&&uu(n,null),wd(),og(n),t!==null&&Ta(t,n,o,!0),n.childLanes=c,null}function Su(t,n){return n=Cu({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function sp(t,n,s){return Ls(n,t.child,null,s),t=Su(n,n.pendingProps),t.flags|=2,Un(n),n.memoizedState=null,t}function L1(t,n,s){var o=n.pendingProps,c=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(Je){if(o.mode==="hidden")return t=Su(n,o),n.lanes=536870912,Ho(null,t);if(Rd(n),(t=bt)?(t=yy(t,Jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Dr!==null?{id:Oi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},s=qm(t),s.return=n,n.child=s,sn=n,bt=null)):t=null,t===null)throw Ir(n);return n.lanes=536870912,null}return Su(n,o)}var h=t.memoizedState;if(h!==null){var v=h.dehydrated;if(Rd(n),c)if(n.flags&256)n.flags&=-257,n=sp(t,n,s);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(a(558));else if(Pt||Ta(t,n,s,!1),c=(s&t.childLanes)!==0,Pt||c){if(o=vt,o!==null&&(v=bi(o,s),v!==0&&v!==h.retryLane))throw h.retryLane=v,Ns(t,v),Dn(o,t,v),Xd;zu(),n=sp(t,n,s)}else t=h.treeContext,bt=ti(v.nextSibling),sn=n,Je=!0,Nr=null,Jn=!1,t!==null&&Fm(n,t),n=Su(n,o),n.flags|=4096;return n}return t=Zi(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function wu(t,n){var s=n.ref;if(s===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(n.flags|=4194816)}}function $d(t,n,s,o,c){return Os(n),s=Nd(t,n,s,o,void 0,c),o=Id(),t!==null&&!Pt?(Md(t,n,c),rr(t,n,c)):(Je&&o&&dd(n),n.flags|=1,on(t,n,s,c),n.child)}function ap(t,n,s,o,c,h){return Os(n),n.updateQueue=null,s=ug(n,o,s,c),lg(t),o=Id(),t!==null&&!Pt?(Md(t,n,h),rr(t,n,h)):(Je&&o&&dd(n),n.flags|=1,on(t,n,s,h),n.child)}function op(t,n,s,o,c){if(Os(n),n.stateNode===null){var h=va,v=s.contextType;typeof v=="object"&&v!==null&&(h=an(v)),h=new s(o,h),n.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Yd,n.stateNode=h,h._reactInternals=n,h=n.stateNode,h.props=o,h.state=n.memoizedState,h.refs={},Td(n),v=s.contextType,h.context=typeof v=="object"&&v!==null?an(v):va,h.state=n.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(Qd(n,s,v,o),h.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&Yd.enqueueReplaceState(h,h.state,null),Uo(n,o,h,c),Lo(),h.state=n.memoizedState),typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){h=n.stateNode;var T=n.memoizedProps,M=Bs(s,T);h.props=M;var G=h.context,W=s.contextType;v=va,typeof W=="object"&&W!==null&&(v=an(W));var J=s.getDerivedStateFromProps;W=typeof J=="function"||typeof h.getSnapshotBeforeUpdate=="function",T=n.pendingProps!==T,W||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(T||G!==v)&&Yg(n,h,o,v),Vr=!1;var H=n.memoizedState;h.state=H,Uo(n,o,h,c),Lo(),G=n.memoizedState,T||H!==G||Vr?(typeof J=="function"&&(Qd(n,s,J,o),G=n.memoizedState),(M=Vr||Qg(n,s,M,o,H,G,v))?(W||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(n.flags|=4194308)):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=G),h.props=o,h.state=G,h.context=v,o=M):(typeof h.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{h=n.stateNode,xd(t,n),v=n.memoizedProps,W=Bs(s,v),h.props=W,J=n.pendingProps,H=h.context,G=s.contextType,M=va,typeof G=="object"&&G!==null&&(M=an(G)),T=s.getDerivedStateFromProps,(G=typeof T=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==J||H!==M)&&Yg(n,h,o,M),Vr=!1,H=n.memoizedState,h.state=H,Uo(n,o,h,c),Lo();var K=n.memoizedState;v!==J||H!==K||Vr||t!==null&&t.dependencies!==null&&ou(t.dependencies)?(typeof T=="function"&&(Qd(n,s,T,o),K=n.memoizedState),(W=Vr||Qg(n,s,W,o,H,K,M)||t!==null&&t.dependencies!==null&&ou(t.dependencies))?(G||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,K,M),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,K,M)),typeof h.componentDidUpdate=="function"&&(n.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=K),h.props=o,h.state=K,h.context=M,o=W):(typeof h.componentDidUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(n.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&H===t.memoizedState||(n.flags|=1024),o=!1)}return h=o,wu(t,n),o=(n.flags&128)!==0,h||o?(h=n.stateNode,s=o&&typeof s.getDerivedStateFromError!="function"?null:h.render(),n.flags|=1,t!==null&&o?(n.child=Ls(n,t.child,null,c),n.child=Ls(n,null,s,c)):on(t,n,s,c),n.memoizedState=h.state,t=n.child):t=rr(t,n,c),t}function lp(t,n,s,o){return Ms(),n.flags|=256,on(t,n,s,o),n.child}var Wd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Zd(t){return{baseLanes:t,cachePool:Wm()}}function Jd(t,n,s){return t=t!==null?t.childLanes&~s:0,n&&(t|=Pn),t}function up(t,n,s){var o=n.pendingProps,c=!1,h=(n.flags&128)!==0,v;if((v=h)||(v=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),v&&(c=!0,n.flags&=-129),v=(n.flags&32)!==0,n.flags&=-33,t===null){if(Je){if(c?zr(n):kr(),(t=bt)?(t=yy(t,Jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Dr!==null?{id:Oi,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},s=qm(t),s.return=n,n.child=s,sn=n,bt=null)):t=null,t===null)throw Ir(n);return jh(t)?n.lanes=32:n.lanes=536870912,null}var T=o.children;return o=o.fallback,c?(kr(),c=n.mode,T=Cu({mode:"hidden",children:T},c),o=Is(o,c,s,null),T.return=n,o.return=n,T.sibling=o,n.child=T,o=n.child,o.memoizedState=Zd(s),o.childLanes=Jd(t,v,s),n.memoizedState=Wd,Ho(null,o)):(zr(n),eh(n,T))}var M=t.memoizedState;if(M!==null&&(T=M.dehydrated,T!==null)){if(h)n.flags&256?(zr(n),n.flags&=-257,n=th(t,n,s)):n.memoizedState!==null?(kr(),n.child=t.child,n.flags|=128,n=null):(kr(),T=o.fallback,c=n.mode,o=Cu({mode:"visible",children:o.children},c),T=Is(T,c,s,null),T.flags|=2,o.return=n,T.return=n,o.sibling=T,n.child=o,Ls(n,t.child,null,s),o=n.child,o.memoizedState=Zd(s),o.childLanes=Jd(t,v,s),n.memoizedState=Wd,n=Ho(null,o));else if(zr(n),jh(T)){if(v=T.nextSibling&&T.nextSibling.dataset,v)var G=v.dgst;v=G,o=Error(a(419)),o.stack="",o.digest=v,Mo({value:o,source:null,stack:null}),n=th(t,n,s)}else if(Pt||Ta(t,n,s,!1),v=(s&t.childLanes)!==0,Pt||v){if(v=vt,v!==null&&(o=bi(v,s),o!==0&&o!==M.retryLane))throw M.retryLane=o,Ns(t,o),Dn(v,t,o),Xd;Oh(T)||zu(),n=th(t,n,s)}else Oh(T)?(n.flags|=192,n.child=t.child,n=null):(t=M.treeContext,bt=ti(T.nextSibling),sn=n,Je=!0,Nr=null,Jn=!1,t!==null&&Fm(n,t),n=eh(n,o.children),n.flags|=4096);return n}return c?(kr(),T=o.fallback,c=n.mode,M=t.child,G=M.sibling,o=Zi(M,{mode:"hidden",children:o.children}),o.subtreeFlags=M.subtreeFlags&65011712,G!==null?T=Zi(G,T):(T=Is(T,c,s,null),T.flags|=2),T.return=n,o.return=n,o.sibling=T,n.child=o,Ho(null,o),o=n.child,T=t.child.memoizedState,T===null?T=Zd(s):(c=T.cachePool,c!==null?(M=Ut._currentValue,c=c.parent!==M?{parent:M,pool:M}:c):c=Wm(),T={baseLanes:T.baseLanes|s,cachePool:c}),o.memoizedState=T,o.childLanes=Jd(t,v,s),n.memoizedState=Wd,Ho(t.child,o)):(zr(n),s=t.child,t=s.sibling,s=Zi(s,{mode:"visible",children:o.children}),s.return=n,s.sibling=null,t!==null&&(v=n.deletions,v===null?(n.deletions=[t],n.flags|=16):v.push(t)),n.child=s,n.memoizedState=null,s)}function eh(t,n){return n=Cu({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Cu(t,n){return t=kn(22,t,null,n),t.lanes=0,t}function th(t,n,s){return Ls(n,t.child,null,s),t=eh(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function cp(t,n,s){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),pd(t.return,n,s)}function nh(t,n,s,o,c,h){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:c,treeForkCount:h}:(v.isBackwards=n,v.rendering=null,v.renderingStartTime=0,v.last=o,v.tail=s,v.tailMode=c,v.treeForkCount=h)}function dp(t,n,s){var o=n.pendingProps,c=o.revealOrder,h=o.tail;o=o.children;var v=Ot.current,T=(v&2)!==0;if(T?(v=v&1|2,n.flags|=128):v&=1,fe(Ot,v),on(t,n,o,s),o=Je?Io:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cp(t,s,n);else if(t.tag===19)cp(t,s,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(c){case"forwards":for(s=n.child,c=null;s!==null;)t=s.alternate,t!==null&&gu(t)===null&&(c=s),s=s.sibling;s=c,s===null?(c=n.child,n.child=null):(c=s.sibling,s.sibling=null),nh(n,!1,c,s,h,o);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=n.child,n.child=null;c!==null;){if(t=c.alternate,t!==null&&gu(t)===null){n.child=c;break}t=c.sibling,c.sibling=s,s=c,c=t}nh(n,!0,s,null,h,o);break;case"together":nh(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function rr(t,n,s){if(t!==null&&(n.dependencies=t.dependencies),Br|=n.lanes,(s&n.childLanes)===0)if(t!==null){if(Ta(t,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(a(153));if(n.child!==null){for(t=n.child,s=Zi(t,t.pendingProps),n.child=s,s.return=n;t.sibling!==null;)t=t.sibling,s=s.sibling=Zi(t,t.pendingProps),s.return=n;s.sibling=null}return n.child}function ih(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&ou(t)))}function U1(t,n,s){switch(n.tag){case 3:Ct(n,n.stateNode.containerInfo),Mr(n,Ut,t.memoizedState.cache),Ms();break;case 27:case 5:ai(n);break;case 4:Ct(n,n.stateNode.containerInfo);break;case 10:Mr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,Rd(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(zr(n),n.flags|=128,null):(s&n.child.childLanes)!==0?up(t,n,s):(zr(n),t=rr(t,n,s),t!==null?t.sibling:null);zr(n);break;case 19:var c=(t.flags&128)!==0;if(o=(s&n.childLanes)!==0,o||(Ta(t,n,s,!1),o=(s&n.childLanes)!==0),c){if(o)return dp(t,n,s);n.flags|=128}if(c=n.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),fe(Ot,Ot.current),o)break;return null;case 22:return n.lanes=0,ip(t,n,s,n.pendingProps);case 24:Mr(n,Ut,t.memoizedState.cache)}return rr(t,n,s)}function hp(t,n,s){if(t!==null)if(t.memoizedProps!==n.pendingProps)Pt=!0;else{if(!ih(t,s)&&(n.flags&128)===0)return Pt=!1,U1(t,n,s);Pt=(t.flags&131072)!==0}else Pt=!1,Je&&(n.flags&1048576)!==0&&Hm(n,Io,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=zs(n.elementType),n.type=t,typeof t=="function")ld(t)?(o=Bs(t,o),n.tag=1,n=op(null,n,t,o,s)):(n.tag=0,n=$d(null,n,t,o,s));else{if(t!=null){var c=t.$$typeof;if(c===ve){n.tag=11,n=ep(null,n,t,o,s);break e}else if(c===I){n.tag=14,n=tp(null,n,t,o,s);break e}}throw n=He(t)||t,Error(a(306,n,""))}}return n;case 0:return $d(t,n,n.type,n.pendingProps,s);case 1:return o=n.type,c=Bs(o,n.pendingProps),op(t,n,o,c,s);case 3:e:{if(Ct(n,n.stateNode.containerInfo),t===null)throw Error(a(387));o=n.pendingProps;var h=n.memoizedState;c=h.element,xd(t,n),Uo(n,o,null,s);var v=n.memoizedState;if(o=v.cache,Mr(n,Ut,o),o!==h.cache&&yd(n,[Ut],s,!0),Lo(),o=v.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:v.cache},n.updateQueue.baseState=h,n.memoizedState=h,n.flags&256){n=lp(t,n,o,s);break e}else if(o!==c){c=$n(Error(a(424)),n),Mo(c),n=lp(t,n,o,s);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=ti(t.firstChild),sn=n,Je=!0,Nr=null,Jn=!0,s=ig(n,null,o,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(Ms(),o===c){n=rr(t,n,s);break e}on(t,n,o,s)}n=n.child}return n;case 26:return wu(t,n),t===null?(s=xy(n.type,null,n.pendingProps,null))?n.memoizedState=s:Je||(s=n.type,t=n.pendingProps,o=Gu(je.current).createElement(s),o[At]=n,o[$t]=t,ln(o,s,t),kt(o),n.stateNode=o):n.memoizedState=xy(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return ai(n),t===null&&Je&&(o=n.stateNode=by(n.type,n.pendingProps,je.current),sn=n,Jn=!0,c=bt,Fr(n.type)?(zh=c,bt=ti(o.firstChild)):bt=c),on(t,n,n.pendingProps.children,s),wu(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&Je&&((c=o=bt)&&(o=gb(o,n.type,n.pendingProps,Jn),o!==null?(n.stateNode=o,sn=n,bt=ti(o.firstChild),Jn=!1,c=!0):c=!1),c||Ir(n)),ai(n),c=n.type,h=n.pendingProps,v=t!==null?t.memoizedProps:null,o=h.children,Ih(c,h)?o=null:v!==null&&Ih(c,v)&&(n.flags|=32),n.memoizedState!==null&&(c=Nd(t,n,N1,null,null,s),sl._currentValue=c),wu(t,n),on(t,n,o,s),n.child;case 6:return t===null&&Je&&((t=s=bt)&&(s=pb(s,n.pendingProps,Jn),s!==null?(n.stateNode=s,sn=n,bt=null,t=!0):t=!1),t||Ir(n)),null;case 13:return up(t,n,s);case 4:return Ct(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=Ls(n,null,o,s):on(t,n,o,s),n.child;case 11:return ep(t,n,n.type,n.pendingProps,s);case 7:return on(t,n,n.pendingProps,s),n.child;case 8:return on(t,n,n.pendingProps.children,s),n.child;case 12:return on(t,n,n.pendingProps.children,s),n.child;case 10:return o=n.pendingProps,Mr(n,n.type,o.value),on(t,n,o.children,s),n.child;case 9:return c=n.type._context,o=n.pendingProps.children,Os(n),c=an(c),o=o(c),n.flags|=1,on(t,n,o,s),n.child;case 14:return tp(t,n,n.type,n.pendingProps,s);case 15:return np(t,n,n.type,n.pendingProps,s);case 19:return dp(t,n,s);case 31:return L1(t,n,s);case 22:return ip(t,n,s,n.pendingProps);case 24:return Os(n),o=an(Ut),t===null?(c=bd(),c===null&&(c=vt,h=vd(),c.pooledCache=h,h.refCount++,h!==null&&(c.pooledCacheLanes|=s),c=h),n.memoizedState={parent:o,cache:c},Td(n),Mr(n,Ut,c)):((t.lanes&s)!==0&&(xd(t,n),Uo(n,null,null,s),Lo()),c=t.memoizedState,h=n.memoizedState,c.parent!==o?(c={parent:o,cache:o},n.memoizedState=c,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=c),Mr(n,Ut,o)):(o=h.cache,Mr(n,Ut,o),o!==c.cache&&yd(n,[Ut],s,!0))),on(t,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(a(156,n.tag))}function sr(t){t.flags|=4}function rh(t,n,s,o,c){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(c&335544128)===c)if(t.stateNode.complete)t.flags|=8192;else if(Up())t.flags|=8192;else throw ks=du,Ed}else t.flags&=-16777217}function fp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ry(n))if(Up())t.flags|=8192;else throw ks=du,Ed}function Ru(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?Qt():536870912,t.lanes|=n,Oa|=n)}function Fo(t,n){if(!Je)switch(t.tailMode){case"hidden":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Et(t){var n=t.alternate!==null&&t.alternate.child===t.child,s=0,o=0;if(n)for(var c=t.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags&65011712,o|=c.flags&65011712,c.return=t,c=c.sibling;else for(c=t.child;c!==null;)s|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=t,c=c.sibling;return t.subtreeFlags|=o,t.childLanes=s,n}function B1(t,n,s){var o=n.pendingProps;switch(hd(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(n),null;case 1:return Et(n),null;case 3:return s=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),tr(Ut),lt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ea(n)?sr(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,md())),Et(n),null;case 26:var c=n.type,h=n.memoizedState;return t===null?(sr(n),h!==null?(Et(n),fp(n,h)):(Et(n),rh(n,c,null,o,s))):h?h!==t.memoizedState?(sr(n),Et(n),fp(n,h)):(Et(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&sr(n),Et(n),rh(n,c,t,o,s)),null;case 27:if(yr(n),s=je.current,c=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&sr(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Et(n),null}t=Ee.current,Ea(n)?Qm(n):(t=by(c,o,s),n.stateNode=t,sr(n))}return Et(n),null;case 5:if(yr(n),c=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&sr(n);else{if(!o){if(n.stateNode===null)throw Error(a(166));return Et(n),null}if(h=Ee.current,Ea(n))Qm(n);else{var v=Gu(je.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?v.createElement("select",{is:o.is}):v.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?v.createElement(c,{is:o.is}):v.createElement(c)}}h[At]=n,h[$t]=o;e:for(v=n.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===n)break e;for(;v.sibling===null;){if(v.return===null||v.return===n)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}n.stateNode=h;e:switch(ln(h,c,o),c){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&sr(n)}}return Et(n),rh(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,s),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&sr(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(a(166));if(t=je.current,Ea(n)){if(t=n.stateNode,s=n.memoizedProps,o=null,c=sn,c!==null)switch(c.tag){case 27:case 5:o=c.memoizedProps}t[At]=n,t=!!(t.nodeValue===s||o!==null&&o.suppressHydrationWarning===!0||uy(t.nodeValue,s)),t||Ir(n,!0)}else t=Gu(t).createTextNode(o),t[At]=n,n.stateNode=t}return Et(n),null;case 31:if(s=n.memoizedState,t===null||t.memoizedState!==null){if(o=Ea(n),s!==null){if(t===null){if(!o)throw Error(a(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[At]=n}else Ms(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Et(n),t=!1}else s=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return n.flags&256?(Un(n),n):(Un(n),null);if((n.flags&128)!==0)throw Error(a(558))}return Et(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(c=Ea(n),o!==null&&o.dehydrated!==null){if(t===null){if(!c)throw Error(a(318));if(c=n.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(a(317));c[At]=n}else Ms(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Et(n),c=!1}else c=md(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),c=!0;if(!c)return n.flags&256?(Un(n),n):(Un(n),null)}return Un(n),(n.flags&128)!==0?(n.lanes=s,n):(s=o!==null,t=t!==null&&t.memoizedState!==null,s&&(o=n.child,c=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(c=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==c&&(o.flags|=2048)),s!==t&&s&&(n.child.flags|=8192),Ru(n,n.updateQueue),Et(n),null);case 4:return lt(),t===null&&wh(n.stateNode.containerInfo),Et(n),null;case 10:return tr(n.type),Et(n),null;case 19:if($(Ot),o=n.memoizedState,o===null)return Et(n),null;if(c=(n.flags&128)!==0,h=o.rendering,h===null)if(c)Fo(o,!1);else{if(It!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(h=gu(t),h!==null){for(n.flags|=128,Fo(o,!1),t=h.updateQueue,n.updateQueue=t,Ru(n,t),n.subtreeFlags=0,t=s,s=n.child;s!==null;)Pm(s,t),s=s.sibling;return fe(Ot,Ot.current&1|2),Je&&Ji(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&tn()>Vu&&(n.flags|=128,c=!0,Fo(o,!1),n.lanes=4194304)}else{if(!c)if(t=gu(h),t!==null){if(n.flags|=128,c=!0,t=t.updateQueue,n.updateQueue=t,Ru(n,t),Fo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!Je)return Et(n),null}else 2*tn()-o.renderingStartTime>Vu&&s!==536870912&&(n.flags|=128,c=!0,Fo(o,!1),n.lanes=4194304);o.isBackwards?(h.sibling=n.child,n.child=h):(t=o.last,t!==null?t.sibling=h:n.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=tn(),t.sibling=null,s=Ot.current,fe(Ot,c?s&1|2:s&1),Je&&Ji(n,o.treeForkCount),t):(Et(n),null);case 22:case 23:return Un(n),Cd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(s&536870912)!==0&&(n.flags&128)===0&&(Et(n),n.subtreeFlags&6&&(n.flags|=8192)):Et(n),s=n.updateQueue,s!==null&&Ru(n,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==s&&(n.flags|=2048),t!==null&&$(js),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),tr(Ut),Et(n),null;case 25:return null;case 30:return null}throw Error(a(156,n.tag))}function P1(t,n){switch(hd(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return tr(Ut),lt(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return yr(n),null;case 31:if(n.memoizedState!==null){if(Un(n),n.alternate===null)throw Error(a(340));Ms()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Un(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(a(340));Ms()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return $(Ot),null;case 4:return lt(),null;case 10:return tr(n.type),null;case 22:case 23:return Un(n),Cd(),t!==null&&$(js),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return tr(Ut),null;case 25:return null;default:return null}}function mp(t,n){switch(hd(n),n.tag){case 3:tr(Ut),lt();break;case 26:case 27:case 5:yr(n);break;case 4:lt();break;case 31:n.memoizedState!==null&&Un(n);break;case 13:Un(n);break;case 19:$(Ot);break;case 10:tr(n.type);break;case 22:case 23:Un(n),Cd(),t!==null&&$(js);break;case 24:tr(Ut)}}function Qo(t,n){try{var s=n.updateQueue,o=s!==null?s.lastEffect:null;if(o!==null){var c=o.next;s=c;do{if((s.tag&t)===t){o=void 0;var h=s.create,v=s.inst;o=h(),v.destroy=o}s=s.next}while(s!==c)}}catch(T){ft(n,n.return,T)}}function Lr(t,n,s){try{var o=n.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&t)===t){var v=o.inst,T=v.destroy;if(T!==void 0){v.destroy=void 0,c=n;var M=s,G=T;try{G()}catch(W){ft(c,M,W)}}}o=o.next}while(o!==h)}}catch(W){ft(n,n.return,W)}}function gp(t){var n=t.updateQueue;if(n!==null){var s=t.stateNode;try{sg(n,s)}catch(o){ft(t,t.return,o)}}}function pp(t,n,s){s.props=Bs(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(o){ft(t,n,o)}}function Yo(t,n){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof s=="function"?t.refCleanup=s(o):s.current=o}}catch(c){ft(t,n,c)}}function zi(t,n){var s=t.ref,o=t.refCleanup;if(s!==null)if(typeof o=="function")try{o()}catch(c){ft(t,n,c)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){ft(t,n,c)}else s.current=null}function yp(t){var n=t.type,s=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&o.focus();break e;case"img":s.src?o.src=s.src:s.srcSet&&(o.srcset=s.srcSet)}}catch(c){ft(t,t.return,c)}}function sh(t,n,s){try{var o=t.stateNode;ub(o,t.type,s,n),o[$t]=n}catch(c){ft(t,t.return,c)}}function vp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Fr(t.type)||t.tag===4}function ah(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Fr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oh(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(t),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=li));else if(o!==4&&(o===27&&Fr(t.type)&&(s=t.stateNode,n=null),t=t.child,t!==null))for(oh(t,n,s),t=t.sibling;t!==null;)oh(t,n,s),t=t.sibling}function Du(t,n,s){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?s.insertBefore(t,n):s.appendChild(t);else if(o!==4&&(o===27&&Fr(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Du(t,n,s),t=t.sibling;t!==null;)Du(t,n,s),t=t.sibling}function _p(t){var n=t.stateNode,s=t.memoizedProps;try{for(var o=t.type,c=n.attributes;c.length;)n.removeAttributeNode(c[0]);ln(n,o,s),n[At]=t,n[$t]=s}catch(h){ft(t,t.return,h)}}var ar=!1,qt=!1,lh=!1,bp=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function q1(t,n){if(t=t.containerInfo,Dh=$u,t=Mm(t),td(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var c=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var v=0,T=-1,M=-1,G=0,W=0,J=t,H=null;t:for(;;){for(var K;J!==s||c!==0&&J.nodeType!==3||(T=v+c),J!==h||o!==0&&J.nodeType!==3||(M=v+o),J.nodeType===3&&(v+=J.nodeValue.length),(K=J.firstChild)!==null;)H=J,J=K;for(;;){if(J===t)break t;if(H===s&&++G===c&&(T=v),H===h&&++W===o&&(M=v),(K=J.nextSibling)!==null)break;J=H,H=J.parentNode}J=K}s=T===-1||M===-1?null:{start:T,end:M}}else s=null}s=s||{start:0,end:0}}else s=null;for(Nh={focusedElem:t,selectionRange:s},$u=!1,Zt=n;Zt!==null;)if(n=Zt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Zt=t;else for(;Zt!==null;){switch(n=Zt,h=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)c=t[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,s=n,c=h.memoizedProps,h=h.memoizedState,o=s.stateNode;try{var Ae=Bs(s.type,c);t=o.getSnapshotBeforeUpdate(Ae,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(Me){ft(s,s.return,Me)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,s=t.nodeType,s===9)Vh(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Vh(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=n.sibling,t!==null){t.return=n.return,Zt=t;break}Zt=n.return}}function Ep(t,n,s){var o=s.flags;switch(s.tag){case 0:case 11:case 15:lr(t,s),o&4&&Qo(5,s);break;case 1:if(lr(t,s),o&4)if(t=s.stateNode,n===null)try{t.componentDidMount()}catch(v){ft(s,s.return,v)}else{var c=Bs(s.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(c,n,t.__reactInternalSnapshotBeforeUpdate)}catch(v){ft(s,s.return,v)}}o&64&&gp(s),o&512&&Yo(s,s.return);break;case 3:if(lr(t,s),o&64&&(t=s.updateQueue,t!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{sg(t,n)}catch(v){ft(s,s.return,v)}}break;case 27:n===null&&o&4&&_p(s);case 26:case 5:lr(t,s),n===null&&o&4&&yp(s),o&512&&Yo(s,s.return);break;case 12:lr(t,s);break;case 31:lr(t,s),o&4&&Ap(t,s);break;case 13:lr(t,s),o&4&&Sp(t,s),o&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=W1.bind(null,s),yb(t,s))));break;case 22:if(o=s.memoizedState!==null||ar,!o){n=n!==null&&n.memoizedState!==null||qt,c=ar;var h=qt;ar=o,(qt=n)&&!h?ur(t,s,(s.subtreeFlags&8772)!==0):lr(t,s),ar=c,qt=h}break;case 30:break;default:lr(t,s)}}function Tp(t){var n=t.alternate;n!==null&&(t.alternate=null,Tp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&ra(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var wt=null,Sn=!1;function or(t,n,s){for(s=s.child;s!==null;)xp(t,n,s),s=s.sibling}function xp(t,n,s){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(ge,s)}catch{}switch(s.tag){case 26:qt||zi(s,n),or(t,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:qt||zi(s,n);var o=wt,c=Sn;Fr(s.type)&&(wt=s.stateNode,Sn=!1),or(t,n,s),nl(s.stateNode),wt=o,Sn=c;break;case 5:qt||zi(s,n);case 6:if(o=wt,c=Sn,wt=null,or(t,n,s),wt=o,Sn=c,wt!==null)if(Sn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(s.stateNode)}catch(h){ft(s,n,h)}else try{wt.removeChild(s.stateNode)}catch(h){ft(s,n,h)}break;case 18:wt!==null&&(Sn?(t=wt,gy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),qa(t)):gy(wt,s.stateNode));break;case 4:o=wt,c=Sn,wt=s.stateNode.containerInfo,Sn=!0,or(t,n,s),wt=o,Sn=c;break;case 0:case 11:case 14:case 15:Lr(2,s,n),qt||Lr(4,s,n),or(t,n,s);break;case 1:qt||(zi(s,n),o=s.stateNode,typeof o.componentWillUnmount=="function"&&pp(s,n,o)),or(t,n,s);break;case 21:or(t,n,s);break;case 22:qt=(o=qt)||s.memoizedState!==null,or(t,n,s),qt=o;break;default:or(t,n,s)}}function Ap(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{qa(t)}catch(s){ft(n,n.return,s)}}}function Sp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{qa(t)}catch(s){ft(n,n.return,s)}}function G1(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new bp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new bp),n;default:throw Error(a(435,t.tag))}}function Nu(t,n){var s=G1(t);n.forEach(function(o){if(!s.has(o)){s.add(o);var c=Z1.bind(null,t,o);o.then(c,c)}})}function wn(t,n){var s=n.deletions;if(s!==null)for(var o=0;o<s.length;o++){var c=s[o],h=t,v=n,T=v;e:for(;T!==null;){switch(T.tag){case 27:if(Fr(T.type)){wt=T.stateNode,Sn=!1;break e}break;case 5:wt=T.stateNode,Sn=!1;break e;case 3:case 4:wt=T.stateNode.containerInfo,Sn=!0;break e}T=T.return}if(wt===null)throw Error(a(160));xp(h,v,c),wt=null,Sn=!1,h=c.alternate,h!==null&&(h.return=null),c.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)wp(n,t),n=n.sibling}var mi=null;function wp(t,n){var s=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:wn(n,t),Cn(t),o&4&&(Lr(3,t,t.return),Qo(3,t),Lr(5,t,t.return));break;case 1:wn(n,t),Cn(t),o&512&&(qt||s===null||zi(s,s.return)),o&64&&ar&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?o:s.concat(o))));break;case 26:var c=mi;if(wn(n,t),Cn(t),o&512&&(qt||s===null||zi(s,s.return)),o&4){var h=s!==null?s.memoizedState:null;if(o=t.memoizedState,s===null)if(o===null)if(t.stateNode===null){e:{o=t.type,s=t.memoizedProps,c=c.ownerDocument||c;t:switch(o){case"title":h=c.getElementsByTagName("title")[0],(!h||h[Ti]||h[At]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=c.createElement(o),c.head.insertBefore(h,c.querySelector("head > title"))),ln(h,o,s),h[At]=t,kt(h),o=h;break e;case"link":var v=wy("link","href",c).get(o+(s.href||""));if(v){for(var T=0;T<v.length;T++)if(h=v[T],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(T,1);break t}}h=c.createElement(o),ln(h,o,s),c.head.appendChild(h);break;case"meta":if(v=wy("meta","content",c).get(o+(s.content||""))){for(T=0;T<v.length;T++)if(h=v[T],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(T,1);break t}}h=c.createElement(o),ln(h,o,s),c.head.appendChild(h);break;default:throw Error(a(468,o))}h[At]=t,kt(h),o=h}t.stateNode=o}else Cy(c,t.type,t.stateNode);else t.stateNode=Sy(c,o,t.memoizedProps);else h!==o?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,o===null?Cy(c,t.type,t.stateNode):Sy(c,o,t.memoizedProps)):o===null&&t.stateNode!==null&&sh(t,t.memoizedProps,s.memoizedProps)}break;case 27:wn(n,t),Cn(t),o&512&&(qt||s===null||zi(s,s.return)),s!==null&&o&4&&sh(t,t.memoizedProps,s.memoizedProps);break;case 5:if(wn(n,t),Cn(t),o&512&&(qt||s===null||zi(s,s.return)),t.flags&32){c=t.stateNode;try{An(c,"")}catch(Ae){ft(t,t.return,Ae)}}o&4&&t.stateNode!=null&&(c=t.memoizedProps,sh(t,c,s!==null?s.memoizedProps:c)),o&1024&&(lh=!0);break;case 6:if(wn(n,t),Cn(t),o&4){if(t.stateNode===null)throw Error(a(162));o=t.memoizedProps,s=t.stateNode;try{s.nodeValue=o}catch(Ae){ft(t,t.return,Ae)}}break;case 3:if(Qu=null,c=mi,mi=Hu(n.containerInfo),wn(n,t),mi=c,Cn(t),o&4&&s!==null&&s.memoizedState.isDehydrated)try{qa(n.containerInfo)}catch(Ae){ft(t,t.return,Ae)}lh&&(lh=!1,Cp(t));break;case 4:o=mi,mi=Hu(t.stateNode.containerInfo),wn(n,t),Cn(t),mi=o;break;case 12:wn(n,t),Cn(t);break;case 31:wn(n,t),Cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Nu(t,o)));break;case 13:wn(n,t),Cn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Mu=tn()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Nu(t,o)));break;case 22:c=t.memoizedState!==null;var M=s!==null&&s.memoizedState!==null,G=ar,W=qt;if(ar=G||c,qt=W||M,wn(n,t),qt=W,ar=G,Cn(t),o&8192)e:for(n=t.stateNode,n._visibility=c?n._visibility&-2:n._visibility|1,c&&(s===null||M||ar||qt||Ps(t)),s=null,n=t;;){if(n.tag===5||n.tag===26){if(s===null){M=s=n;try{if(h=M.stateNode,c)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{T=M.stateNode;var J=M.memoizedProps.style,H=J!=null&&J.hasOwnProperty("display")?J.display:null;T.style.display=H==null||typeof H=="boolean"?"":(""+H).trim()}}catch(Ae){ft(M,M.return,Ae)}}}else if(n.tag===6){if(s===null){M=n;try{M.stateNode.nodeValue=c?"":M.memoizedProps}catch(Ae){ft(M,M.return,Ae)}}}else if(n.tag===18){if(s===null){M=n;try{var K=M.stateNode;c?py(K,!0):py(M.stateNode,!1)}catch(Ae){ft(M,M.return,Ae)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(s=o.retryQueue,s!==null&&(o.retryQueue=null,Nu(t,s))));break;case 19:wn(n,t),Cn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Nu(t,o)));break;case 30:break;case 21:break;default:wn(n,t),Cn(t)}}function Cn(t){var n=t.flags;if(n&2){try{for(var s,o=t.return;o!==null;){if(vp(o)){s=o;break}o=o.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var c=s.stateNode,h=ah(t);Du(t,h,c);break;case 5:var v=s.stateNode;s.flags&32&&(An(v,""),s.flags&=-33);var T=ah(t);Du(t,T,v);break;case 3:case 4:var M=s.stateNode.containerInfo,G=ah(t);oh(t,G,M);break;default:throw Error(a(161))}}catch(W){ft(t,t.return,W)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Cp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Cp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function lr(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Ep(t,n.alternate,n),n=n.sibling}function Ps(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Lr(4,n,n.return),Ps(n);break;case 1:zi(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&pp(n,n.return,s),Ps(n);break;case 27:nl(n.stateNode);case 26:case 5:zi(n,n.return),Ps(n);break;case 22:n.memoizedState===null&&Ps(n);break;case 30:Ps(n);break;default:Ps(n)}t=t.sibling}}function ur(t,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,c=t,h=n,v=h.flags;switch(h.tag){case 0:case 11:case 15:ur(c,h,s),Qo(4,h);break;case 1:if(ur(c,h,s),o=h,c=o.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch(G){ft(o,o.return,G)}if(o=h,c=o.updateQueue,c!==null){var T=o.stateNode;try{var M=c.shared.hiddenCallbacks;if(M!==null)for(c.shared.hiddenCallbacks=null,c=0;c<M.length;c++)rg(M[c],T)}catch(G){ft(o,o.return,G)}}s&&v&64&&gp(h),Yo(h,h.return);break;case 27:_p(h);case 26:case 5:ur(c,h,s),s&&o===null&&v&4&&yp(h),Yo(h,h.return);break;case 12:ur(c,h,s);break;case 31:ur(c,h,s),s&&v&4&&Ap(c,h);break;case 13:ur(c,h,s),s&&v&4&&Sp(c,h);break;case 22:h.memoizedState===null&&ur(c,h,s),Yo(h,h.return);break;case 30:break;default:ur(c,h,s)}n=n.sibling}}function uh(t,n){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Vo(s))}function ch(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Vo(t))}function gi(t,n,s,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Rp(t,n,s,o),n=n.sibling}function Rp(t,n,s,o){var c=n.flags;switch(n.tag){case 0:case 11:case 15:gi(t,n,s,o),c&2048&&Qo(9,n);break;case 1:gi(t,n,s,o);break;case 3:gi(t,n,s,o),c&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&Vo(t)));break;case 12:if(c&2048){gi(t,n,s,o),t=n.stateNode;try{var h=n.memoizedProps,v=h.id,T=h.onPostCommit;typeof T=="function"&&T(v,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(M){ft(n,n.return,M)}}else gi(t,n,s,o);break;case 31:gi(t,n,s,o);break;case 13:gi(t,n,s,o);break;case 23:break;case 22:h=n.stateNode,v=n.alternate,n.memoizedState!==null?h._visibility&2?gi(t,n,s,o):Ko(t,n):h._visibility&2?gi(t,n,s,o):(h._visibility|=2,Ia(t,n,s,o,(n.subtreeFlags&10256)!==0||!1)),c&2048&&uh(v,n);break;case 24:gi(t,n,s,o),c&2048&&ch(n.alternate,n);break;default:gi(t,n,s,o)}}function Ia(t,n,s,o,c){for(c=c&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var h=t,v=n,T=s,M=o,G=v.flags;switch(v.tag){case 0:case 11:case 15:Ia(h,v,T,M,c),Qo(8,v);break;case 23:break;case 22:var W=v.stateNode;v.memoizedState!==null?W._visibility&2?Ia(h,v,T,M,c):Ko(h,v):(W._visibility|=2,Ia(h,v,T,M,c)),c&&G&2048&&uh(v.alternate,v);break;case 24:Ia(h,v,T,M,c),c&&G&2048&&ch(v.alternate,v);break;default:Ia(h,v,T,M,c)}n=n.sibling}}function Ko(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=t,o=n,c=o.flags;switch(o.tag){case 22:Ko(s,o),c&2048&&uh(o.alternate,o);break;case 24:Ko(s,o),c&2048&&ch(o.alternate,o);break;default:Ko(s,o)}n=n.sibling}}var Xo=8192;function Ma(t,n,s){if(t.subtreeFlags&Xo)for(t=t.child;t!==null;)Dp(t,n,s),t=t.sibling}function Dp(t,n,s){switch(t.tag){case 26:Ma(t,n,s),t.flags&Xo&&t.memoizedState!==null&&Db(s,mi,t.memoizedState,t.memoizedProps);break;case 5:Ma(t,n,s);break;case 3:case 4:var o=mi;mi=Hu(t.stateNode.containerInfo),Ma(t,n,s),mi=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Xo,Xo=16777216,Ma(t,n,s),Xo=o):Ma(t,n,s));break;default:Ma(t,n,s)}}function Np(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function $o(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];Zt=o,Mp(o,t)}Np(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ip(t),t=t.sibling}function Ip(t){switch(t.tag){case 0:case 11:case 15:$o(t),t.flags&2048&&Lr(9,t,t.return);break;case 3:$o(t);break;case 12:$o(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,Iu(t)):$o(t);break;default:$o(t)}}function Iu(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var o=n[s];Zt=o,Mp(o,t)}Np(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Lr(8,n,n.return),Iu(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Iu(n));break;default:Iu(n)}t=t.sibling}}function Mp(t,n){for(;Zt!==null;){var s=Zt;switch(s.tag){case 0:case 11:case 15:Lr(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var o=s.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Vo(s.memoizedState.cache)}if(o=s.child,o!==null)o.return=s,Zt=o;else e:for(s=t;Zt!==null;){o=Zt;var c=o.sibling,h=o.return;if(Tp(o),o===s){Zt=null;break e}if(c!==null){c.return=h,Zt=c;break e}Zt=h}}}var H1={getCacheForType:function(t){var n=an(Ut),s=n.data.get(t);return s===void 0&&(s=t(),n.data.set(t,s)),s},cacheSignal:function(){return an(Ut).controller.signal}},F1=typeof WeakMap=="function"?WeakMap:Map,ot=0,vt=null,Ye=null,Xe=0,ht=0,Bn=null,Ur=!1,Va=!1,dh=!1,cr=0,It=0,Br=0,qs=0,hh=0,Pn=0,Oa=0,Wo=null,Rn=null,fh=!1,Mu=0,Vp=0,Vu=1/0,Ou=null,Pr=null,Yt=0,qr=null,ja=null,dr=0,mh=0,gh=null,Op=null,Zo=0,ph=null;function qn(){return(ot&2)!==0&&Xe!==0?Xe&-Xe:Y.T!==null?Th():na()}function jp(){if(Pn===0)if((Xe&536870912)===0||Je){var t=Qe;Qe<<=1,(Qe&3932160)===0&&(Qe=262144),Pn=t}else Pn=536870912;return t=Ln.current,t!==null&&(t.flags|=32),Pn}function Dn(t,n,s){(t===vt&&(ht===2||ht===9)||t.cancelPendingCommit!==null)&&(za(t,0),Gr(t,Xe,Pn,!1)),Vn(t,s),((ot&2)===0||t!==vt)&&(t===vt&&((ot&2)===0&&(qs|=s),It===4&&Gr(t,Xe,Pn,!1)),ki(t))}function zp(t,n,s){if((ot&6)!==0)throw Error(a(327));var o=!s&&(n&127)===0&&(n&t.expiredLanes)===0||yn(t,n),c=o?K1(t,n):vh(t,n,!0),h=o;do{if(c===0){Va&&!o&&Gr(t,n,0,!1);break}else{if(s=t.current.alternate,h&&!Q1(s)){c=vh(t,n,!1),h=!1;continue}if(c===2){if(h=n,t.errorRecoveryDisabledLanes&h)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){n=v;e:{var T=t;c=Wo;var M=T.current.memoizedState.isDehydrated;if(M&&(za(T,v).flags|=256),v=vh(T,v,!1),v!==2){if(dh&&!M){T.errorRecoveryDisabledLanes|=h,qs|=h,c=4;break e}h=Rn,Rn=c,h!==null&&(Rn===null?Rn=h:Rn.push.apply(Rn,h))}c=v}if(h=!1,c!==2)continue}}if(c===1){za(t,0),Gr(t,n,0,!0);break}e:{switch(o=t,h=c,h){case 0:case 1:throw Error(a(345));case 4:if((n&4194048)!==n)break;case 6:Gr(o,n,Pn,!Ur);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((n&62914560)===n&&(c=Mu+300-tn(),10<c)){if(Gr(o,n,Pn,!Ur),En(o,0,!0)!==0)break e;dr=n,o.timeoutHandle=fy(kp.bind(null,o,s,Rn,Ou,fh,n,Pn,qs,Oa,Ur,h,"Throttled",-0,0),c);break e}kp(o,s,Rn,Ou,fh,n,Pn,qs,Oa,Ur,h,null,-0,0)}}break}while(!0);ki(t)}function kp(t,n,s,o,c,h,v,T,M,G,W,J,H,K){if(t.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:li},Dp(n,h,J);var Ae=(h&62914560)===h?Mu-tn():(h&4194048)===h?Vp-tn():0;if(Ae=Nb(J,Ae),Ae!==null){dr=h,t.cancelPendingCommit=Ae(Fp.bind(null,t,n,h,s,o,c,v,T,M,W,J,null,H,K)),Gr(t,h,v,!G);return}}Fp(t,n,h,s,o,c,v,T,M)}function Q1(t){for(var n=t;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var o=0;o<s.length;o++){var c=s[o],h=c.getSnapshot;c=c.value;try{if(!zn(h(),c))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Gr(t,n,s,o){n&=~hh,n&=~qs,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var c=n;0<c;){var h=31-Re(c),v=1<<h;o[h]=-1,c&=~v}s!==0&&_i(t,s,n)}function ju(){return(ot&6)===0?(Jo(0),!1):!0}function yh(){if(Ye!==null){if(ht===0)var t=Ye.return;else t=Ye,er=Vs=null,Vd(t),wa=null,jo=0,t=Ye;for(;t!==null;)mp(t.alternate,t),t=t.return;Ye=null}}function za(t,n){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,hb(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),dr=0,yh(),vt=t,Ye=s=Zi(t.current,null),Xe=n,ht=0,Bn=null,Ur=!1,Va=yn(t,n),dh=!1,Oa=Pn=hh=qs=Br=It=0,Rn=Wo=null,fh=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var c=31-Re(o),h=1<<c;n|=t[c],o&=~h}return cr=n,nu(),s}function Lp(t,n){Pe=null,Y.H=Go,n===Sa||n===cu?(n=eg(),ht=3):n===Ed?(n=eg(),ht=4):ht=n===Xd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Bn=n,Ye===null&&(It=1,Au(t,$n(n,t.current)))}function Up(){var t=Ln.current;return t===null?!0:(Xe&4194048)===Xe?ei===null:(Xe&62914560)===Xe||(Xe&536870912)!==0?t===ei:!1}function Bp(){var t=Y.H;return Y.H=Go,t===null?Go:t}function Pp(){var t=Y.A;return Y.A=H1,t}function zu(){It=4,Ur||(Xe&4194048)!==Xe&&Ln.current!==null||(Va=!0),(Br&134217727)===0&&(qs&134217727)===0||vt===null||Gr(vt,Xe,Pn,!1)}function vh(t,n,s){var o=ot;ot|=2;var c=Bp(),h=Pp();(vt!==t||Xe!==n)&&(Ou=null,za(t,n)),n=!1;var v=It;e:do try{if(ht!==0&&Ye!==null){var T=Ye,M=Bn;switch(ht){case 8:yh(),v=6;break e;case 3:case 2:case 9:case 6:Ln.current===null&&(n=!0);var G=ht;if(ht=0,Bn=null,ka(t,T,M,G),s&&Va){v=0;break e}break;default:G=ht,ht=0,Bn=null,ka(t,T,M,G)}}Y1(),v=It;break}catch(W){Lp(t,W)}while(!0);return n&&t.shellSuspendCounter++,er=Vs=null,ot=o,Y.H=c,Y.A=h,Ye===null&&(vt=null,Xe=0,nu()),v}function Y1(){for(;Ye!==null;)qp(Ye)}function K1(t,n){var s=ot;ot|=2;var o=Bp(),c=Pp();vt!==t||Xe!==n?(Ou=null,Vu=tn()+500,za(t,n)):Va=yn(t,n);e:do try{if(ht!==0&&Ye!==null){n=Ye;var h=Bn;t:switch(ht){case 1:ht=0,Bn=null,ka(t,n,h,1);break;case 2:case 9:if(Zm(h)){ht=0,Bn=null,Gp(n);break}n=function(){ht!==2&&ht!==9||vt!==t||(ht=7),ki(t)},h.then(n,n);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:Zm(h)?(ht=0,Bn=null,Gp(n)):(ht=0,Bn=null,ka(t,n,h,7));break;case 5:var v=null;switch(Ye.tag){case 26:v=Ye.memoizedState;case 5:case 27:var T=Ye;if(v?Ry(v):T.stateNode.complete){ht=0,Bn=null;var M=T.sibling;if(M!==null)Ye=M;else{var G=T.return;G!==null?(Ye=G,ku(G)):Ye=null}break t}}ht=0,Bn=null,ka(t,n,h,5);break;case 6:ht=0,Bn=null,ka(t,n,h,6);break;case 8:yh(),It=6;break e;default:throw Error(a(462))}}X1();break}catch(W){Lp(t,W)}while(!0);return er=Vs=null,Y.H=o,Y.A=c,ot=s,Ye!==null?0:(vt=null,Xe=0,nu(),It)}function X1(){for(;Ye!==null&&!ea();)qp(Ye)}function qp(t){var n=hp(t.alternate,t,cr);t.memoizedProps=t.pendingProps,n===null?ku(t):Ye=n}function Gp(t){var n=t,s=n.alternate;switch(n.tag){case 15:case 0:n=ap(s,n,n.pendingProps,n.type,void 0,Xe);break;case 11:n=ap(s,n,n.pendingProps,n.type.render,n.ref,Xe);break;case 5:Vd(n);default:mp(s,n),n=Ye=Pm(n,cr),n=hp(s,n,cr)}t.memoizedProps=t.pendingProps,n===null?ku(t):Ye=n}function ka(t,n,s,o){er=Vs=null,Vd(n),wa=null,jo=0;var c=n.return;try{if(k1(t,c,n,s,Xe)){It=1,Au(t,$n(s,t.current)),Ye=null;return}}catch(h){if(c!==null)throw Ye=c,h;It=1,Au(t,$n(s,t.current)),Ye=null;return}n.flags&32768?(Je||o===1?t=!0:Va||(Xe&536870912)!==0?t=!1:(Ur=t=!0,(o===2||o===9||o===3||o===6)&&(o=Ln.current,o!==null&&o.tag===13&&(o.flags|=16384))),Hp(n,t)):ku(n)}function ku(t){var n=t;do{if((n.flags&32768)!==0){Hp(n,Ur);return}t=n.return;var s=B1(n.alternate,n,cr);if(s!==null){Ye=s;return}if(n=n.sibling,n!==null){Ye=n;return}Ye=n=t}while(n!==null);It===0&&(It=5)}function Hp(t,n){do{var s=P1(t.alternate,t);if(s!==null){s.flags&=32767,Ye=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(t=t.sibling,t!==null)){Ye=t;return}Ye=t=s}while(t!==null);It=6,Ye=null}function Fp(t,n,s,o,c,h,v,T,M){t.cancelPendingCommit=null;do Lu();while(Yt!==0);if((ot&6)!==0)throw Error(a(327));if(n!==null){if(n===t.current)throw Error(a(177));if(h=n.lanes|n.childLanes,h|=ad,vs(t,s,h,v,T,M),t===vt&&(Ye=vt=null,Xe=0),ja=n,qr=t,dr=s,mh=h,gh=c,Op=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,J1(oi,function(){return $p(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=Y.T,Y.T=null,c=de.p,de.p=2,v=ot,ot|=4;try{q1(t,n,s)}finally{ot=v,de.p=c,Y.T=o}}Yt=1,Qp(),Yp(),Kp()}}function Qp(){if(Yt===1){Yt=0;var t=qr,n=ja,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=Y.T,Y.T=null;var o=de.p;de.p=2;var c=ot;ot|=4;try{wp(n,t);var h=Nh,v=Mm(t.containerInfo),T=h.focusedElem,M=h.selectionRange;if(v!==T&&T&&T.ownerDocument&&Im(T.ownerDocument.documentElement,T)){if(M!==null&&td(T)){var G=M.start,W=M.end;if(W===void 0&&(W=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(W,T.value.length);else{var J=T.ownerDocument||document,H=J&&J.defaultView||window;if(H.getSelection){var K=H.getSelection(),Ae=T.textContent.length,Me=Math.min(M.start,Ae),yt=M.end===void 0?Me:Math.min(M.end,Ae);!K.extend&&Me>yt&&(v=yt,yt=Me,Me=v);var L=Nm(T,Me),j=Nm(T,yt);if(L&&j&&(K.rangeCount!==1||K.anchorNode!==L.node||K.anchorOffset!==L.offset||K.focusNode!==j.node||K.focusOffset!==j.offset)){var q=J.createRange();q.setStart(L.node,L.offset),K.removeAllRanges(),Me>yt?(K.addRange(q),K.extend(j.node,j.offset)):(q.setEnd(j.node,j.offset),K.addRange(q))}}}}for(J=[],K=T;K=K.parentNode;)K.nodeType===1&&J.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<J.length;T++){var Z=J[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}$u=!!Dh,Nh=Dh=null}finally{ot=c,de.p=o,Y.T=s}}t.current=n,Yt=2}}function Yp(){if(Yt===2){Yt=0;var t=qr,n=ja,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=Y.T,Y.T=null;var o=de.p;de.p=2;var c=ot;ot|=4;try{Ep(t,n.alternate,n)}finally{ot=c,de.p=o,Y.T=s}}Yt=3}}function Kp(){if(Yt===4||Yt===3){Yt=0,ta();var t=qr,n=ja,s=dr,o=Op;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Yt=5:(Yt=0,ja=qr=null,Xp(t,t.pendingLanes));var c=t.pendingLanes;if(c===0&&(Pr=null),nn(s),n=n.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(ge,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=Y.T,c=de.p,de.p=2,Y.T=null;try{for(var h=t.onRecoverableError,v=0;v<o.length;v++){var T=o[v];h(T.value,{componentStack:T.stack})}}finally{Y.T=n,de.p=c}}(dr&3)!==0&&Lu(),ki(t),c=t.pendingLanes,(s&261930)!==0&&(c&42)!==0?t===ph?Zo++:(Zo=0,ph=t):Zo=0,Jo(0)}}function Xp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,Vo(n)))}function Lu(){return Qp(),Yp(),Kp(),$p()}function $p(){if(Yt!==5)return!1;var t=qr,n=mh;mh=0;var s=nn(dr),o=Y.T,c=de.p;try{de.p=32>s?32:s,Y.T=null,s=gh,gh=null;var h=qr,v=dr;if(Yt=0,ja=qr=null,dr=0,(ot&6)!==0)throw Error(a(331));var T=ot;if(ot|=4,Ip(h.current),Rp(h,h.current,v,s),ot=T,Jo(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(ge,h)}catch{}return!0}finally{de.p=c,Y.T=o,Xp(t,n)}}function Wp(t,n,s){n=$n(s,n),n=Kd(t.stateNode,n,2),t=jr(t,n,2),t!==null&&(Vn(t,2),ki(t))}function ft(t,n,s){if(t.tag===3)Wp(t,t,s);else for(;n!==null;){if(n.tag===3){Wp(n,t,s);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Pr===null||!Pr.has(o))){t=$n(s,t),s=Zg(2),o=jr(n,s,2),o!==null&&(Jg(s,o,n,t),Vn(o,2),ki(o));break}}n=n.return}}function _h(t,n,s){var o=t.pingCache;if(o===null){o=t.pingCache=new F1;var c=new Set;o.set(n,c)}else c=o.get(n),c===void 0&&(c=new Set,o.set(n,c));c.has(s)||(dh=!0,c.add(s),t=$1.bind(null,t,n,s),n.then(t,t))}function $1(t,n,s){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,vt===t&&(Xe&s)===s&&(It===4||It===3&&(Xe&62914560)===Xe&&300>tn()-Mu?(ot&2)===0&&za(t,0):hh|=s,Oa===Xe&&(Oa=0)),ki(t)}function Zp(t,n){n===0&&(n=Qt()),t=Ns(t,n),t!==null&&(Vn(t,n),ki(t))}function W1(t){var n=t.memoizedState,s=0;n!==null&&(s=n.retryLane),Zp(t,s)}function Z1(t,n){var s=0;switch(t.tag){case 31:case 13:var o=t.stateNode,c=t.memoizedState;c!==null&&(s=c.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(a(314))}o!==null&&o.delete(n),Zp(t,s)}function J1(t,n){return Mt(t,n)}var Uu=null,La=null,bh=!1,Bu=!1,Eh=!1,Hr=0;function ki(t){t!==La&&t.next===null&&(La===null?Uu=La=t:La=La.next=t),Bu=!0,bh||(bh=!0,tb())}function Jo(t,n){if(!Eh&&Bu){Eh=!0;do for(var s=!1,o=Uu;o!==null;){if(t!==0){var c=o.pendingLanes;if(c===0)var h=0;else{var v=o.suspendedLanes,T=o.pingedLanes;h=(1<<31-Re(42|t)+1)-1,h&=c&~(v&~T),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,ny(o,h))}else h=Xe,h=En(o,o===vt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||yn(o,h)||(s=!0,ny(o,h));o=o.next}while(s);Eh=!1}}function eb(){Jp()}function Jp(){Bu=bh=!1;var t=0;Hr!==0&&db()&&(t=Hr);for(var n=tn(),s=null,o=Uu;o!==null;){var c=o.next,h=ey(o,n);h===0?(o.next=null,s===null?Uu=c:s.next=c,c===null&&(La=s)):(s=o,(t!==0||(h&3)!==0)&&(Bu=!0)),o=c}Yt!==0&&Yt!==5||Jo(t),Hr!==0&&(Hr=0)}function ey(t,n){for(var s=t.suspendedLanes,o=t.pingedLanes,c=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var v=31-Re(h),T=1<<v,M=c[v];M===-1?((T&s)===0||(T&o)!==0)&&(c[v]=nt(T,n)):M<=n&&(t.expiredLanes|=T),h&=~T}if(n=vt,s=Xe,s=En(t,t===n?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,s===0||t===n&&(ht===2||ht===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&vi(o),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||yn(t,s)){if(n=s&-s,n===t.callbackPriority)return n;switch(o!==null&&vi(o),nn(s)){case 2:case 8:s=ys;break;case 32:s=oi;break;case 268435456:s=k;break;default:s=oi}return o=ty.bind(null,t),s=Mt(s,o),t.callbackPriority=n,t.callbackNode=s,n}return o!==null&&o!==null&&vi(o),t.callbackPriority=2,t.callbackNode=null,2}function ty(t,n){if(Yt!==0&&Yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Lu()&&t.callbackNode!==s)return null;var o=Xe;return o=En(t,t===vt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(zp(t,o,n),ey(t,tn()),t.callbackNode!=null&&t.callbackNode===s?ty.bind(null,t):null)}function ny(t,n){if(Lu())return null;zp(t,n,!0)}function tb(){fb(function(){(ot&6)!==0?Mt(ps,eb):Jp()})}function Th(){if(Hr===0){var t=xa;t===0&&(t=De,De<<=1,(De&261888)===0&&(De=256)),Hr=t}return Hr}function iy(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:la(""+t)}function ry(t,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,t.id&&s.setAttribute("form",t.id),n.parentNode.insertBefore(s,n),t=new FormData(t),s.parentNode.removeChild(s),t}function nb(t,n,s,o,c){if(n==="submit"&&s&&s.stateNode===c){var h=iy((c[$t]||null).action),v=o.submitter;v&&(n=(n=v[$t]||null)?iy(n.formAction):v.getAttribute("formAction"),n!==null&&(h=n,v=null));var T=new Ni("action","action",null,o,c);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Hr!==0){var M=v?ry(c,v):new FormData(c);qd(s,{pending:!0,data:M,method:c.method,action:h},null,M)}}else typeof h=="function"&&(T.preventDefault(),M=v?ry(c,v):new FormData(c),qd(s,{pending:!0,data:M,method:c.method,action:h},h,M))},currentTarget:c}]})}}for(var xh=0;xh<sd.length;xh++){var Ah=sd[xh],ib=Ah.toLowerCase(),rb=Ah[0].toUpperCase()+Ah.slice(1);fi(ib,"on"+rb)}fi(jm,"onAnimationEnd"),fi(zm,"onAnimationIteration"),fi(km,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(b1,"onTransitionRun"),fi(E1,"onTransitionStart"),fi(T1,"onTransitionCancel"),fi(Lm,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(el));function sy(t,n){n=(n&4)!==0;for(var s=0;s<t.length;s++){var o=t[s],c=o.event;o=o.listeners;e:{var h=void 0;if(n)for(var v=o.length-1;0<=v;v--){var T=o[v],M=T.instance,G=T.currentTarget;if(T=T.listener,M!==h&&c.isPropagationStopped())break e;h=T,c.currentTarget=G;try{h(c)}catch(W){tu(W)}c.currentTarget=null,h=M}else for(v=0;v<o.length;v++){if(T=o[v],M=T.instance,G=T.currentTarget,T=T.listener,M!==h&&c.isPropagationStopped())break e;h=T,c.currentTarget=G;try{h(c)}catch(W){tu(W)}c.currentTarget=null,h=M}}}}function Ke(t,n){var s=n[ia];s===void 0&&(s=n[ia]=new Set);var o=t+"__bubble";s.has(o)||(ay(n,t,2,!1),s.add(o))}function Sh(t,n,s){var o=0;n&&(o|=4),ay(s,t,o,n)}var Pu="_reactListening"+Math.random().toString(36).slice(2);function wh(t){if(!t[Pu]){t[Pu]=!0,ho.forEach(function(s){s!=="selectionchange"&&(sb.has(s)||Sh(s,!1,t),Sh(s,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[Pu]||(n[Pu]=!0,Sh("selectionchange",!1,n))}}function ay(t,n,s,o){switch(jy(n)){case 2:var c=Vb;break;case 8:c=Ob;break;default:c=Ph}s=c.bind(null,n,s,t),c=void 0,!Ts||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(c=!0),o?c!==void 0?t.addEventListener(n,s,{capture:!0,passive:c}):t.addEventListener(n,s,!0):c!==void 0?t.addEventListener(n,s,{passive:c}):t.addEventListener(n,s,!1)}function Ch(t,n,s,o,c){var h=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var v=o.tag;if(v===3||v===4){var T=o.stateNode.containerInfo;if(T===c)break;if(v===4)for(v=o.return;v!==null;){var M=v.tag;if((M===3||M===4)&&v.stateNode.containerInfo===c)return;v=v.return}for(;T!==null;){if(v=xi(T),v===null)return;if(M=v.tag,M===5||M===6||M===26||M===27){o=h=v;continue e}T=T.parentNode}}o=o.return}Sr(function(){var G=h,W=Qn(s),J=[];e:{var H=Um.get(t);if(H!==void 0){var K=Ni,Ae=t;switch(t){case"keypress":if(As(s)===0)break e;case"keydown":case"keyup":K=Zl;break;case"focusin":Ae="focus",K=ws;break;case"focusout":Ae="blur",K=ws;break;case"beforeblur":case"afterblur":K=ws;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=So;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=Gl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=g;break;case jm:case zm:case km:K=Fl;break;case Lm:K=S;break;case"scroll":case"scrollend":K=Ao;break;case"wheel":K=Q;break;case"copy":case"cut":case"paste":K=Ql;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Wi;break;case"toggle":case"beforetoggle":K=Be}var Me=(n&4)!==0,yt=!Me&&(t==="scroll"||t==="scrollend"),L=Me?H!==null?H+"Capture":null:H;Me=[];for(var j=G,q;j!==null;){var Z=j;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||L===null||(Z=ui(j,L),Z!=null&&Me.push(tl(j,Z,q))),yt)break;j=j.return}0<Me.length&&(H=new K(H,Ae,null,s,W),J.push({event:H,listeners:Me}))}}if((n&7)===0){e:{if(H=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",H&&s!==Eo&&(Ae=s.relatedTarget||s.fromElement)&&(xi(Ae)||Ae[Ei]))break e;if((K||H)&&(H=W.window===W?W:(H=W.ownerDocument)?H.defaultView||H.parentWindow:window,K?(Ae=s.relatedTarget||s.toElement,K=G,Ae=Ae?xi(Ae):null,Ae!==null&&(yt=d(Ae),Me=Ae.tag,Ae!==yt||Me!==5&&Me!==27&&Me!==6)&&(Ae=null)):(K=null,Ae=G),K!==Ae)){if(Me=So,Z="onMouseLeave",L="onMouseEnter",j="mouse",(t==="pointerout"||t==="pointerover")&&(Me=Wi,Z="onPointerLeave",L="onPointerEnter",j="pointer"),yt=K==null?H:On(K),q=Ae==null?H:On(Ae),H=new Me(Z,j+"leave",K,s,W),H.target=yt,H.relatedTarget=q,Z=null,xi(W)===G&&(Me=new Me(L,j+"enter",Ae,s,W),Me.target=q,Me.relatedTarget=yt,Z=Me),yt=Z,K&&Ae)t:{for(Me=ab,L=K,j=Ae,q=0,Z=L;Z;Z=Me(Z))q++;Z=0;for(var Ne=j;Ne;Ne=Me(Ne))Z++;for(;0<q-Z;)L=Me(L),q--;for(;0<Z-q;)j=Me(j),Z--;for(;q--;){if(L===j||j!==null&&L===j.alternate){Me=L;break t}L=Me(L),j=Me(j)}Me=null}else Me=null;K!==null&&oy(J,H,K,Me,!1),Ae!==null&&yt!==null&&oy(J,yt,Ae,Me,!0)}}e:{if(H=G?On(G):window,K=H.nodeName&&H.nodeName.toLowerCase(),K==="select"||K==="input"&&H.type==="file")var it=Am;else if(Tm(H))if(Sm)it=y1;else{it=g1;var Ce=m1}else K=H.nodeName,!K||K.toLowerCase()!=="input"||H.type!=="checkbox"&&H.type!=="radio"?G&&oa(G.elementType)&&(it=Am):it=p1;if(it&&(it=it(t,G))){xm(J,it,s,W);break e}Ce&&Ce(t,H,G),t==="focusout"&&G&&H.type==="number"&&G.memoizedProps.value!=null&&vo(H,"number",H.value)}switch(Ce=G?On(G):window,t){case"focusin":(Tm(Ce)||Ce.contentEditable==="true")&&(ga=Ce,nd=G,No=null);break;case"focusout":No=nd=ga=null;break;case"mousedown":id=!0;break;case"contextmenu":case"mouseup":case"dragend":id=!1,Vm(J,s,W);break;case"selectionchange":if(_1)break;case"keydown":case"keyup":Vm(J,s,W)}var qe;if(at)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else ma?Cs(t,s)&&($e="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&($e="onCompositionStart");$e&&(Vi&&s.locale!=="ko"&&(ma||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&ma&&(qe=xo()):(Di=W,To="value"in Di?Di.value:Di.textContent,ma=!0)),Ce=qu(G,$e),0<Ce.length&&($e=new Mi($e,t,null,s,W),J.push({event:$e,listeners:Ce}),qe?$e.data=qe:(qe=fa(s),qe!==null&&($e.data=qe)))),(qe=Kn?c1(t,s):d1(t,s))&&($e=qu(G,"onBeforeInput"),0<$e.length&&(Ce=new Mi("onBeforeInput","beforeinput",null,s,W),J.push({event:Ce,listeners:$e}),Ce.data=qe)),nb(J,t,G,s,W)}sy(J,n)})}function tl(t,n,s){return{instance:t,listener:n,currentTarget:s}}function qu(t,n){for(var s=n+"Capture",o=[];t!==null;){var c=t,h=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||h===null||(c=ui(t,s),c!=null&&o.unshift(tl(t,c,h)),c=ui(t,n),c!=null&&o.push(tl(t,c,h))),t.tag===3)return o;t=t.return}return[]}function ab(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function oy(t,n,s,o,c){for(var h=n._reactName,v=[];s!==null&&s!==o;){var T=s,M=T.alternate,G=T.stateNode;if(T=T.tag,M!==null&&M===o)break;T!==5&&T!==26&&T!==27||G===null||(M=G,c?(G=ui(s,h),G!=null&&v.unshift(tl(s,G,M))):c||(G=ui(s,h),G!=null&&v.push(tl(s,G,M)))),s=s.return}v.length!==0&&t.push({event:n,listeners:v})}var ob=/\r\n?/g,lb=/\u0000|\uFFFD/g;function ly(t){return(typeof t=="string"?t:""+t).replace(ob,`
`).replace(lb,"")}function uy(t,n){return n=ly(n),ly(t)===n}function pt(t,n,s,o,c,h){switch(s){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||An(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&An(t,""+o);break;case"className":jn(t,"class",o);break;case"tabIndex":jn(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(t,s,o);break;case"style":bo(t,o,h);break;case"data":if(n!=="object"){jn(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||s!=="href")){t.removeAttribute(s);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=la(""+o),t.setAttribute(s,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(n!=="input"&&pt(t,n,"name",c.name,c,null),pt(t,n,"formEncType",c.formEncType,c,null),pt(t,n,"formMethod",c.formMethod,c,null),pt(t,n,"formTarget",c.formTarget,c,null)):(pt(t,n,"encType",c.encType,c,null),pt(t,n,"method",c.method,c,null),pt(t,n,"target",c.target,c,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(s);break}o=la(""+o),t.setAttribute(s,o);break;case"onClick":o!=null&&(t.onclick=li);break;case"onScroll":o!=null&&Ke("scroll",t);break;case"onScrollEnd":o!=null&&Ke("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}s=la(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""+o):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":o===!0?t.setAttribute(s,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(s,o):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(s,o):t.removeAttribute(s);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(s):t.setAttribute(s,o);break;case"popover":Ke("beforetoggle",t),Ke("toggle",t),sa(t,"popover",o);break;case"xlinkActuate":Lt(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Lt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Lt(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Lt(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Lt(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Lt(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Lt(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":sa(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=ql.get(s)||s,sa(t,s,o))}}function Rh(t,n,s,o,c,h){switch(s){case"style":bo(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(a(61));if(s=o.__html,s!=null){if(c.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof o=="string"?An(t,o):(typeof o=="number"||typeof o=="bigint")&&An(t,""+o);break;case"onScroll":o!=null&&Ke("scroll",t);break;case"onScrollEnd":o!=null&&Ke("scrollend",t);break;case"onClick":o!=null&&(t.onclick=li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),n=s.slice(2,c?s.length-7:void 0),h=t[$t]||null,h=h!=null?h[s]:null,typeof h=="function"&&t.removeEventListener(n,h,c),typeof o=="function")){typeof h!="function"&&h!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(n,o,c);break e}s in t?t[s]=o:o===!0?t.setAttribute(s,""):sa(t,s,o)}}}function ln(t,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ke("error",t),Ke("load",t);var o=!1,c=!1,h;for(h in s)if(s.hasOwnProperty(h)){var v=s[h];if(v!=null)switch(h){case"src":o=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:pt(t,n,h,v,s,null)}}c&&pt(t,n,"srcSet",s.srcSet,s,null),o&&pt(t,n,"src",s.src,s,null);return;case"input":Ke("invalid",t);var T=h=v=c=null,M=null,G=null;for(o in s)if(s.hasOwnProperty(o)){var W=s[o];if(W!=null)switch(o){case"name":c=W;break;case"type":v=W;break;case"checked":M=W;break;case"defaultChecked":G=W;break;case"value":h=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(a(137,n));break;default:pt(t,n,o,W,s,null)}}Ul(t,h,T,M,G,v,c,!1);return;case"select":Ke("invalid",t),o=v=h=null;for(c in s)if(s.hasOwnProperty(c)&&(T=s[c],T!=null))switch(c){case"value":h=T;break;case"defaultValue":v=T;break;case"multiple":o=T;default:pt(t,n,c,T,s,null)}n=h,s=v,t.multiple=!!o,n!=null?Er(t,!!o,n,!1):s!=null&&Er(t,!!o,s,!0);return;case"textarea":Ke("invalid",t),h=c=o=null;for(v in s)if(s.hasOwnProperty(v)&&(T=s[v],T!=null))switch(v){case"value":o=T;break;case"defaultValue":c=T;break;case"children":h=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(a(91));break;default:pt(t,n,v,T,s,null)}Tr(t,o,c,h);return;case"option":for(M in s)if(s.hasOwnProperty(M)&&(o=s[M],o!=null))switch(M){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:pt(t,n,M,o,s,null)}return;case"dialog":Ke("beforetoggle",t),Ke("toggle",t),Ke("cancel",t),Ke("close",t);break;case"iframe":case"object":Ke("load",t);break;case"video":case"audio":for(o=0;o<el.length;o++)Ke(el[o],t);break;case"image":Ke("error",t),Ke("load",t);break;case"details":Ke("toggle",t);break;case"embed":case"source":case"link":Ke("error",t),Ke("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in s)if(s.hasOwnProperty(G)&&(o=s[G],o!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,n));default:pt(t,n,G,o,s,null)}return;default:if(oa(n)){for(W in s)s.hasOwnProperty(W)&&(o=s[W],o!==void 0&&Rh(t,n,W,o,s,void 0));return}}for(T in s)s.hasOwnProperty(T)&&(o=s[T],o!=null&&pt(t,n,T,o,s,null))}function ub(t,n,s,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,h=null,v=null,T=null,M=null,G=null,W=null;for(K in s){var J=s[K];if(s.hasOwnProperty(K)&&J!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":M=J;default:o.hasOwnProperty(K)||pt(t,n,K,null,o,J)}}for(var H in o){var K=o[H];if(J=s[H],o.hasOwnProperty(H)&&(K!=null||J!=null))switch(H){case"type":h=K;break;case"name":c=K;break;case"checked":G=K;break;case"defaultChecked":W=K;break;case"value":v=K;break;case"defaultValue":T=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(a(137,n));break;default:K!==J&&pt(t,n,H,K,o,J)}}aa(t,v,T,M,G,W,h,c);return;case"select":K=v=T=H=null;for(h in s)if(M=s[h],s.hasOwnProperty(h)&&M!=null)switch(h){case"value":break;case"multiple":K=M;default:o.hasOwnProperty(h)||pt(t,n,h,null,o,M)}for(c in o)if(h=o[c],M=s[c],o.hasOwnProperty(c)&&(h!=null||M!=null))switch(c){case"value":H=h;break;case"defaultValue":T=h;break;case"multiple":v=h;default:h!==M&&pt(t,n,c,h,o,M)}n=T,s=v,o=K,H!=null?Er(t,!!s,H,!1):!!o!=!!s&&(n!=null?Er(t,!!s,n,!0):Er(t,!!s,s?[]:"",!1));return;case"textarea":K=H=null;for(T in s)if(c=s[T],s.hasOwnProperty(T)&&c!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:pt(t,n,T,null,o,c)}for(v in o)if(c=o[v],h=s[v],o.hasOwnProperty(v)&&(c!=null||h!=null))switch(v){case"value":H=c;break;case"defaultValue":K=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(a(91));break;default:c!==h&&pt(t,n,v,c,o,h)}Bl(t,H,K);return;case"option":for(var Ae in s)if(H=s[Ae],s.hasOwnProperty(Ae)&&H!=null&&!o.hasOwnProperty(Ae))switch(Ae){case"selected":t.selected=!1;break;default:pt(t,n,Ae,null,o,H)}for(M in o)if(H=o[M],K=s[M],o.hasOwnProperty(M)&&H!==K&&(H!=null||K!=null))switch(M){case"selected":t.selected=H&&typeof H!="function"&&typeof H!="symbol";break;default:pt(t,n,M,H,o,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Me in s)H=s[Me],s.hasOwnProperty(Me)&&H!=null&&!o.hasOwnProperty(Me)&&pt(t,n,Me,null,o,H);for(G in o)if(H=o[G],K=s[G],o.hasOwnProperty(G)&&H!==K&&(H!=null||K!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(a(137,n));break;default:pt(t,n,G,H,o,K)}return;default:if(oa(n)){for(var yt in s)H=s[yt],s.hasOwnProperty(yt)&&H!==void 0&&!o.hasOwnProperty(yt)&&Rh(t,n,yt,void 0,o,H);for(W in o)H=o[W],K=s[W],!o.hasOwnProperty(W)||H===K||H===void 0&&K===void 0||Rh(t,n,W,H,o,K);return}}for(var L in s)H=s[L],s.hasOwnProperty(L)&&H!=null&&!o.hasOwnProperty(L)&&pt(t,n,L,null,o,H);for(J in o)H=o[J],K=s[J],!o.hasOwnProperty(J)||H===K||H==null&&K==null||pt(t,n,J,H,o,K)}function cy(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,s=performance.getEntriesByType("resource"),o=0;o<s.length;o++){var c=s[o],h=c.transferSize,v=c.initiatorType,T=c.duration;if(h&&T&&cy(v)){for(v=0,T=c.responseEnd,o+=1;o<s.length;o++){var M=s[o],G=M.startTime;if(G>T)break;var W=M.transferSize,J=M.initiatorType;W&&cy(J)&&(M=M.responseEnd,v+=W*(M<T?1:(T-G)/(M-G)))}if(--o,n+=8*(h+v)/(c.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Dh=null,Nh=null;function Gu(t){return t.nodeType===9?t:t.ownerDocument}function dy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hy(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Ih(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Mh=null;function db(){var t=window.event;return t&&t.type==="popstate"?t===Mh?!1:(Mh=t,!0):(Mh=null,!1)}var fy=typeof setTimeout=="function"?setTimeout:void 0,hb=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,fb=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(t){return my.resolve(null).then(t).catch(mb)}:fy;function mb(t){setTimeout(function(){throw t})}function Fr(t){return t==="head"}function gy(t,n){var s=n,o=0;do{var c=s.nextSibling;if(t.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(o===0){t.removeChild(c),qa(n);return}o--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")o++;else if(s==="html")nl(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,nl(s);for(var h=s.firstChild;h;){var v=h.nextSibling,T=h.nodeName;h[Ti]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=v}}else s==="body"&&nl(t.ownerDocument.body);s=c}while(s);qa(n)}function py(t,n){var s=t;t=0;do{var o=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),o&&o.nodeType===8)if(s=o.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=o}while(s)}function Vh(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Vh(s),ra(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function gb(t,n,s,o){for(;t.nodeType===1;){var c=s;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ti])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==c.rel||t.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||t.getAttribute("title")!==(c.title==null?null:c.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(c.src==null?null:c.src)||t.getAttribute("type")!==(c.type==null?null:c.type)||t.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var h=c.name==null?null:""+c.name;if(c.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=ti(t.nextSibling),t===null)break}return null}function pb(t,n,s){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=ti(t.nextSibling),t===null))return null;return t}function yy(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=ti(t.nextSibling),t===null))return null;return t}function Oh(t){return t.data==="$?"||t.data==="$~"}function jh(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function yb(t,n){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||s.readyState!=="loading")n();else{var o=function(){n(),s.removeEventListener("DOMContentLoaded",o)};s.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function ti(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var zh=null;function vy(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(n===0)return ti(t.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}t=t.nextSibling}return null}function _y(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return t;n--}else s!=="/$"&&s!=="/&"||n++}t=t.previousSibling}return null}function by(t,n,s){switch(n=Gu(s),t){case"html":if(t=n.documentElement,!t)throw Error(a(452));return t;case"head":if(t=n.head,!t)throw Error(a(453));return t;case"body":if(t=n.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function nl(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);ra(t)}var ni=new Map,Ey=new Set;function Hu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var hr=de.d;de.d={f:vb,r:_b,D:bb,C:Eb,L:Tb,m:xb,X:Sb,S:Ab,M:wb};function vb(){var t=hr.f(),n=ju();return t||n}function _b(t){var n=Fn(t);n!==null&&n.tag===5&&n.type==="form"?Lg(n):hr.r(t)}var Ua=typeof document>"u"?null:document;function Ty(t,n,s){var o=Ua;if(o&&typeof n=="string"&&n){var c=xn(n);c='link[rel="'+t+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Ey.has(c)||(Ey.add(c),t={rel:t,crossOrigin:s,href:n},o.querySelector(c)===null&&(n=o.createElement("link"),ln(n,"link",t),kt(n),o.head.appendChild(n)))}}function bb(t){hr.D(t),Ty("dns-prefetch",t,null)}function Eb(t,n){hr.C(t,n),Ty("preconnect",t,n)}function Tb(t,n,s){hr.L(t,n,s);var o=Ua;if(o&&t&&n){var c='link[rel="preload"][as="'+xn(n)+'"]';n==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+xn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+xn(s.imageSizes)+'"]')):c+='[href="'+xn(t)+'"]';var h=c;switch(n){case"style":h=Ba(t);break;case"script":h=Pa(t)}ni.has(h)||(t=A({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:t,as:n},s),ni.set(h,t),o.querySelector(c)!==null||n==="style"&&o.querySelector(il(h))||n==="script"&&o.querySelector(rl(h))||(n=o.createElement("link"),ln(n,"link",t),kt(n),o.head.appendChild(n)))}}function xb(t,n){hr.m(t,n);var s=Ua;if(s&&t){var o=n&&typeof n.as=="string"?n.as:"script",c='link[rel="modulepreload"][as="'+xn(o)+'"][href="'+xn(t)+'"]',h=c;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Pa(t)}if(!ni.has(h)&&(t=A({rel:"modulepreload",href:t},n),ni.set(h,t),s.querySelector(c)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(rl(h)))return}o=s.createElement("link"),ln(o,"link",t),kt(o),s.head.appendChild(o)}}}function Ab(t,n,s){hr.S(t,n,s);var o=Ua;if(o&&t){var c=Ai(o).hoistableStyles,h=Ba(t);n=n||"default";var v=c.get(h);if(!v){var T={loading:0,preload:null};if(v=o.querySelector(il(h)))T.loading=5;else{t=A({rel:"stylesheet",href:t,"data-precedence":n},s),(s=ni.get(h))&&kh(t,s);var M=v=o.createElement("link");kt(M),ln(M,"link",t),M._p=new Promise(function(G,W){M.onload=G,M.onerror=W}),M.addEventListener("load",function(){T.loading|=1}),M.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Fu(v,n,o)}v={type:"stylesheet",instance:v,count:1,state:T},c.set(h,v)}}}function Sb(t,n){hr.X(t,n);var s=Ua;if(s&&t){var o=Ai(s).hoistableScripts,c=Pa(t),h=o.get(c);h||(h=s.querySelector(rl(c)),h||(t=A({src:t,async:!0},n),(n=ni.get(c))&&Lh(t,n),h=s.createElement("script"),kt(h),ln(h,"link",t),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(c,h))}}function wb(t,n){hr.M(t,n);var s=Ua;if(s&&t){var o=Ai(s).hoistableScripts,c=Pa(t),h=o.get(c);h||(h=s.querySelector(rl(c)),h||(t=A({src:t,async:!0,type:"module"},n),(n=ni.get(c))&&Lh(t,n),h=s.createElement("script"),kt(h),ln(h,"link",t),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(c,h))}}function xy(t,n,s,o){var c=(c=je.current)?Hu(c):null;if(!c)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Ba(s.href),s=Ai(c).hoistableStyles,o=s.get(n),o||(o={type:"style",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Ba(s.href);var h=Ai(c).hoistableStyles,v=h.get(t);if(v||(c=c.ownerDocument||c,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,v),(h=c.querySelector(il(t)))&&!h._p&&(v.instance=h,v.state.loading=5),ni.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},ni.set(t,s),h||Cb(c,t,s,v.state))),n&&o===null)throw Error(a(528,""));return v}if(n&&o!==null)throw Error(a(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Pa(s),s=Ai(c).hoistableScripts,o=s.get(n),o||(o={type:"script",instance:null,count:0,state:null},s.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Ba(t){return'href="'+xn(t)+'"'}function il(t){return'link[rel="stylesheet"]['+t+"]"}function Ay(t){return A({},t,{"data-precedence":t.precedence,precedence:null})}function Cb(t,n,s,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),ln(n,"link",s),kt(n),t.head.appendChild(n))}function Pa(t){return'[src="'+xn(t)+'"]'}function rl(t){return"script[async]"+t}function Sy(t,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+xn(s.href)+'"]');if(o)return n.instance=o,kt(o),o;var c=A({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),kt(o),ln(o,"style",c),Fu(o,s.precedence,t),n.instance=o;case"stylesheet":c=Ba(s.href);var h=t.querySelector(il(c));if(h)return n.state.loading|=4,n.instance=h,kt(h),h;o=Ay(s),(c=ni.get(c))&&kh(o,c),h=(t.ownerDocument||t).createElement("link"),kt(h);var v=h;return v._p=new Promise(function(T,M){v.onload=T,v.onerror=M}),ln(h,"link",o),n.state.loading|=4,Fu(h,s.precedence,t),n.instance=h;case"script":return h=Pa(s.src),(c=t.querySelector(rl(h)))?(n.instance=c,kt(c),c):(o=s,(c=ni.get(h))&&(o=A({},s),Lh(o,c)),t=t.ownerDocument||t,c=t.createElement("script"),kt(c),ln(c,"link",o),t.head.appendChild(c),n.instance=c);case"void":return null;default:throw Error(a(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Fu(o,s.precedence,t));return n.instance}function Fu(t,n,s){for(var o=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=o.length?o[o.length-1]:null,h=c,v=0;v<o.length;v++){var T=o[v];if(T.dataset.precedence===n)h=T;else if(h!==c)break}h?h.parentNode.insertBefore(t,h.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(t,n.firstChild))}function kh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Lh(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var Qu=null;function wy(t,n,s){if(Qu===null){var o=new Map,c=Qu=new Map;c.set(s,o)}else c=Qu,o=c.get(s),o||(o=new Map,c.set(s,o));if(o.has(t))return o;for(o.set(t,null),s=s.getElementsByTagName(t),c=0;c<s.length;c++){var h=s[c];if(!(h[Ti]||h[At]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(n)||"";v=t+v;var T=o.get(v);T?T.push(h):o.set(v,[h])}}return o}function Cy(t,n,s){t=t.ownerDocument||t,t.head.insertBefore(s,n==="title"?t.querySelector("head > title"):null)}function Rb(t,n,s){if(s===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Ry(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Db(t,n,s,o){if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=Ba(o.href),h=n.querySelector(il(c));if(h){n=h._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=Yu.bind(t),n.then(t,t)),s.state.loading|=4,s.instance=h,kt(h);return}h=n.ownerDocument||n,o=Ay(o),(c=ni.get(c))&&kh(o,c),h=h.createElement("link"),kt(h);var v=h;v._p=new Promise(function(T,M){v.onload=T,v.onerror=M}),ln(h,"link",o),s.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=Yu.bind(t),n.addEventListener("load",s),n.addEventListener("error",s))}}var Uh=0;function Nb(t,n){return t.stylesheets&&t.count===0&&Xu(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var o=setTimeout(function(){if(t.stylesheets&&Xu(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+n);0<t.imgBytes&&Uh===0&&(Uh=62500*cb());var c=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Xu(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>Uh?50:800)+n);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(c)}}:null}function Yu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ku=null;function Xu(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ku=new Map,n.forEach(Ib,t),Ku=null,Yu.call(t))}function Ib(t,n){if(!(n.state.loading&4)){var s=Ku.get(t);if(s)var o=s.get(null);else{s=new Map,Ku.set(t,s);for(var c=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<c.length;h++){var v=c[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),o=v)}o&&s.set(null,o)}c=n.instance,v=c.getAttribute("data-precedence"),h=s.get(v)||o,h===o&&s.set(null,c),s.set(v,c),this.count++,o=Yu.bind(this),c.addEventListener("load",o),c.addEventListener("error",o),h?h.parentNode.insertBefore(c,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(c,t.firstChild)),n.state.loading|=4}}var sl={$$typeof:me,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function Mb(t,n,s,o,c,h,v,T,M){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xt(0),this.hiddenUpdates=Xt(null),this.identifierPrefix=o,this.onUncaughtError=c,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Dy(t,n,s,o,c,h,v,T,M,G,W,J){return t=new Mb(t,n,s,v,M,G,W,J,T),n=1,h===!0&&(n|=24),h=kn(3,null,null,n),t.current=h,h.stateNode=t,n=vd(),n.refCount++,t.pooledCache=n,n.refCount++,h.memoizedState={element:o,isDehydrated:s,cache:n},Td(h),t}function Ny(t){return t?(t=va,t):va}function Iy(t,n,s,o,c,h){c=Ny(c),o.context===null?o.context=c:o.pendingContext=c,o=Or(n),o.payload={element:s},h=h===void 0?null:h,h!==null&&(o.callback=h),s=jr(t,o,n),s!==null&&(Dn(s,t,n),ko(s,t,n))}function My(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<n?s:n}}function Bh(t,n){My(t,n),(t=t.alternate)&&My(t,n)}function Vy(t){if(t.tag===13||t.tag===31){var n=Ns(t,67108864);n!==null&&Dn(n,t,67108864),Bh(t,67108864)}}function Oy(t){if(t.tag===13||t.tag===31){var n=qn();n=Tn(n);var s=Ns(t,n);s!==null&&Dn(s,t,n),Bh(t,n)}}var $u=!0;function Vb(t,n,s,o){var c=Y.T;Y.T=null;var h=de.p;try{de.p=2,Ph(t,n,s,o)}finally{de.p=h,Y.T=c}}function Ob(t,n,s,o){var c=Y.T;Y.T=null;var h=de.p;try{de.p=8,Ph(t,n,s,o)}finally{de.p=h,Y.T=c}}function Ph(t,n,s,o){if($u){var c=qh(o);if(c===null)Ch(t,n,o,Wu,s),zy(t,o);else if(zb(c,t,n,s,o))o.stopPropagation();else if(zy(t,o),n&4&&-1<jb.indexOf(t)){for(;c!==null;){var h=Fn(c);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=pn(h.pendingLanes);if(v!==0){var T=h;for(T.pendingLanes|=2,T.entangledLanes|=2;v;){var M=1<<31-Re(v);T.entanglements[1]|=M,v&=~M}ki(h),(ot&6)===0&&(Vu=tn()+500,Jo(0))}}break;case 31:case 13:T=Ns(h,2),T!==null&&Dn(T,h,2),ju(),Bh(h,2)}if(h=qh(o),h===null&&Ch(t,n,o,Wu,s),h===c)break;c=h}c!==null&&o.stopPropagation()}else Ch(t,n,o,null,s)}}function qh(t){return t=Qn(t),Gh(t)}var Wu=null;function Gh(t){if(Wu=null,t=xi(t),t!==null){var n=d(t);if(n===null)t=null;else{var s=n.tag;if(s===13){if(t=f(n),t!==null)return t;t=null}else if(s===31){if(t=y(n),t!==null)return t;t=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Wu=t,null}function jy(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Yi()){case ps:return 2;case ys:return 8;case oi:case P:return 32;case k:return 268435456;default:return 32}default:return 32}}var Hh=!1,Qr=null,Yr=null,Kr=null,al=new Map,ol=new Map,Xr=[],jb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function zy(t,n){switch(t){case"focusin":case"focusout":Qr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":al.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ol.delete(n.pointerId)}}function ll(t,n,s,o,c,h){return t===null||t.nativeEvent!==h?(t={blockedOn:n,domEventName:s,eventSystemFlags:o,nativeEvent:h,targetContainers:[c]},n!==null&&(n=Fn(n),n!==null&&Vy(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,c!==null&&n.indexOf(c)===-1&&n.push(c),t)}function zb(t,n,s,o,c){switch(n){case"focusin":return Qr=ll(Qr,t,n,s,o,c),!0;case"dragenter":return Yr=ll(Yr,t,n,s,o,c),!0;case"mouseover":return Kr=ll(Kr,t,n,s,o,c),!0;case"pointerover":var h=c.pointerId;return al.set(h,ll(al.get(h)||null,t,n,s,o,c)),!0;case"gotpointercapture":return h=c.pointerId,ol.set(h,ll(ol.get(h)||null,t,n,s,o,c)),!0}return!1}function ky(t){var n=xi(t.target);if(n!==null){var s=d(n);if(s!==null){if(n=s.tag,n===13){if(n=f(s),n!==null){t.blockedOn=n,vn(t.priority,function(){Oy(s)});return}}else if(n===31){if(n=y(s),n!==null){t.blockedOn=n,vn(t.priority,function(){Oy(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zu(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var s=qh(t.nativeEvent);if(s===null){s=t.nativeEvent;var o=new s.constructor(s.type,s);Eo=o,s.target.dispatchEvent(o),Eo=null}else return n=Fn(s),n!==null&&Vy(n),t.blockedOn=s,!1;n.shift()}return!0}function Ly(t,n,s){Zu(t)&&s.delete(n)}function kb(){Hh=!1,Qr!==null&&Zu(Qr)&&(Qr=null),Yr!==null&&Zu(Yr)&&(Yr=null),Kr!==null&&Zu(Kr)&&(Kr=null),al.forEach(Ly),ol.forEach(Ly)}function Ju(t,n){t.blockedOn===n&&(t.blockedOn=null,Hh||(Hh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kb)))}var ec=null;function Uy(t){ec!==t&&(ec=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){ec===t&&(ec=null);for(var n=0;n<t.length;n+=3){var s=t[n],o=t[n+1],c=t[n+2];if(typeof o!="function"){if(Gh(o||s)===null)continue;break}var h=Fn(s);h!==null&&(t.splice(n,3),n-=3,qd(h,{pending:!0,data:c,method:s.method,action:o},o,c))}}))}function qa(t){function n(M){return Ju(M,t)}Qr!==null&&Ju(Qr,t),Yr!==null&&Ju(Yr,t),Kr!==null&&Ju(Kr,t),al.forEach(n),ol.forEach(n);for(var s=0;s<Xr.length;s++){var o=Xr[s];o.blockedOn===t&&(o.blockedOn=null)}for(;0<Xr.length&&(s=Xr[0],s.blockedOn===null);)ky(s),s.blockedOn===null&&Xr.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(o=0;o<s.length;o+=3){var c=s[o],h=s[o+1],v=c[$t]||null;if(typeof h=="function")v||Uy(s);else if(v){var T=null;if(h&&h.hasAttribute("formAction")){if(c=h,v=h[$t]||null)T=v.formAction;else if(Gh(c)!==null)continue}else T=v.action;typeof T=="function"?s[o+1]=T:(s.splice(o,3),o-=3),Uy(s)}}}function By(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return c=v})},focusReset:"manual",scroll:"manual"})}function n(){c!==null&&(c(),c=null),o||setTimeout(s,20)}function s(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,c=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),c!==null&&(c(),c=null)}}}function Fh(t){this._internalRoot=t}tc.prototype.render=Fh.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(a(409));var s=n.current,o=qn();Iy(s,o,t,n,null,null)},tc.prototype.unmount=Fh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Iy(t.current,2,null,t,null,null),ju(),n[Ei]=null}};function tc(t){this._internalRoot=t}tc.prototype.unstable_scheduleHydration=function(t){if(t){var n=na();t={blockedOn:null,target:t,priority:n};for(var s=0;s<Xr.length&&n!==0&&n<Xr[s].priority;s++);Xr.splice(s,0,t),s===0&&ky(t)}};var Py=e.version;if(Py!=="19.2.3")throw Error(a(527,Py,"19.2.3"));de.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=_(n),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var Lb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nc.isDisabled&&nc.supportsFiber)try{ge=nc.inject(Lb),ce=nc}catch{}}return cl.createRoot=function(t,n){if(!l(t))throw Error(a(299));var s=!1,o="",c=Kg,h=Xg,v=$g;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(c=n.onUncaughtError),n.onCaughtError!==void 0&&(h=n.onCaughtError),n.onRecoverableError!==void 0&&(v=n.onRecoverableError)),n=Dy(t,1,!1,null,null,s,o,null,c,h,v,By),t[Ei]=n.current,wh(t),new Fh(n)},cl.hydrateRoot=function(t,n,s){if(!l(t))throw Error(a(299));var o=!1,c="",h=Kg,v=Xg,T=$g,M=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.formState!==void 0&&(M=s.formState)),n=Dy(t,1,!0,n,s??null,o,c,M,h,v,T,By),n.context=Ny(null),s=n.current,o=qn(),o=Tn(o),c=Or(o),c.callback=null,jr(s,c,o),s=o,n.current.lanes=s,Vn(n,s),ki(n),t[Ei]=n.current,wh(t),new tc(n)},cl.version="19.2.3",cl}var Wy;function Kb(){if(Wy)return Kh.exports;Wy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Kh.exports=Yb(),Kh.exports}var Xb=Kb();const $b=Vf(Xb);var Zh,Zy;function Wb(){return Zy||(Zy=1,Zh=function(r,e,i){if(r==null||e==null)return r;var a=String(r),l=typeof e=="number"?e:parseInt(e,10);if(isNaN(l)||!isFinite(l))return a;var d=a.length;if(d>=l)return a;var f=i==null?"":String(i);f===""&&(f=" ");for(var y=l-d;f.length<y;)f+=f;var b=f.length>y?f.substr(0,y):f;return a+b}),Zh}var Zb=Wb();const Jh=Vf(Zb);var Li=9e15,ic=(function(){for(var r=[],e=-323;e<=308;e++)r.push(+("1e"+e));return function(i){return r[i+323]}})(),ae=function(r){return r instanceof Mn?r:new Mn(r)},Nn=function(r,e){return new Mn().fromMantissaExponent(r,e)},Fs=function(r,e){return new Mn().fromMantissaExponent_noNormalize(r,e)};function Jb(r,e,i,a){var l=e.mul(i.pow(a));return Mn.floor(r.div(l).mul(i.sub(1)).add(1).log10()/i.log10())}function eE(r,e,i,a){return e.mul(i.pow(a)).mul(Mn.sub(1,i.pow(r))).div(Mn.sub(1,i))}var Mn=(function(){function r(e){this.mantissa=NaN,this.exponent=NaN,e===void 0?(this.m=0,this.e=0):e instanceof r?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):this.fromString(e)}return Object.defineProperty(r.prototype,"m",{get:function(){return this.mantissa},set:function(e){this.mantissa=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"e",{get:function(){return this.exponent},set:function(e){this.exponent=e},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"s",{get:function(){return this.sign()},set:function(e){if(e===0)return this.e=0,void(this.m=0);this.sgn()!==e&&(this.m=-this.m)},enumerable:!1,configurable:!0}),r.fromMantissaExponent=function(e,i){return new r().fromMantissaExponent(e,i)},r.fromMantissaExponent_noNormalize=function(e,i){return new r().fromMantissaExponent_noNormalize(e,i)},r.fromDecimal=function(e){return new r().fromDecimal(e)},r.fromNumber=function(e){return new r().fromNumber(e)},r.fromString=function(e){return new r().fromString(e)},r.fromValue=function(e){return new r().fromValue(e)},r.fromValue_noAlloc=function(e){return e instanceof r?e:new r(e)},r.abs=function(e){return ae(e).abs()},r.neg=function(e){return ae(e).neg()},r.negate=function(e){return ae(e).neg()},r.negated=function(e){return ae(e).neg()},r.sign=function(e){return ae(e).sign()},r.sgn=function(e){return ae(e).sign()},r.round=function(e){return ae(e).round()},r.floor=function(e){return ae(e).floor()},r.ceil=function(e){return ae(e).ceil()},r.trunc=function(e){return ae(e).trunc()},r.add=function(e,i){return ae(e).add(i)},r.plus=function(e,i){return ae(e).add(i)},r.sub=function(e,i){return ae(e).sub(i)},r.subtract=function(e,i){return ae(e).sub(i)},r.minus=function(e,i){return ae(e).sub(i)},r.mul=function(e,i){return ae(e).mul(i)},r.multiply=function(e,i){return ae(e).mul(i)},r.times=function(e,i){return ae(e).mul(i)},r.div=function(e,i){return ae(e).div(i)},r.divide=function(e,i){return ae(e).div(i)},r.recip=function(e){return ae(e).recip()},r.reciprocal=function(e){return ae(e).recip()},r.reciprocate=function(e){return ae(e).reciprocate()},r.cmp=function(e,i){return ae(e).cmp(i)},r.compare=function(e,i){return ae(e).cmp(i)},r.eq=function(e,i){return ae(e).eq(i)},r.equals=function(e,i){return ae(e).eq(i)},r.neq=function(e,i){return ae(e).neq(i)},r.notEquals=function(e,i){return ae(e).notEquals(i)},r.lt=function(e,i){return ae(e).lt(i)},r.lte=function(e,i){return ae(e).lte(i)},r.gt=function(e,i){return ae(e).gt(i)},r.gte=function(e,i){return ae(e).gte(i)},r.max=function(e,i){return ae(e).max(i)},r.min=function(e,i){return ae(e).min(i)},r.clamp=function(e,i,a){return ae(e).clamp(i,a)},r.clampMin=function(e,i){return ae(e).clampMin(i)},r.clampMax=function(e,i){return ae(e).clampMax(i)},r.cmp_tolerance=function(e,i,a){return ae(e).cmp_tolerance(i,a)},r.compare_tolerance=function(e,i,a){return ae(e).cmp_tolerance(i,a)},r.eq_tolerance=function(e,i,a){return ae(e).eq_tolerance(i,a)},r.equals_tolerance=function(e,i,a){return ae(e).eq_tolerance(i,a)},r.neq_tolerance=function(e,i,a){return ae(e).neq_tolerance(i,a)},r.notEquals_tolerance=function(e,i,a){return ae(e).notEquals_tolerance(i,a)},r.lt_tolerance=function(e,i,a){return ae(e).lt_tolerance(i,a)},r.lte_tolerance=function(e,i,a){return ae(e).lte_tolerance(i,a)},r.gt_tolerance=function(e,i,a){return ae(e).gt_tolerance(i,a)},r.gte_tolerance=function(e,i,a){return ae(e).gte_tolerance(i,a)},r.log10=function(e){return ae(e).log10()},r.absLog10=function(e){return ae(e).absLog10()},r.pLog10=function(e){return ae(e).pLog10()},r.log=function(e,i){return ae(e).log(i)},r.log2=function(e){return ae(e).log2()},r.ln=function(e){return ae(e).ln()},r.logarithm=function(e,i){return ae(e).logarithm(i)},r.pow10=function(e){return Number.isInteger(e)?Fs(1,e):Nn(Math.pow(10,e%1),Math.trunc(e))},r.pow=function(e,i){return typeof e=="number"&&e===10&&typeof i=="number"&&Number.isInteger(i)?Fs(1,i):ae(e).pow(i)},r.exp=function(e){return ae(e).exp()},r.sqr=function(e){return ae(e).sqr()},r.sqrt=function(e){return ae(e).sqrt()},r.cube=function(e){return ae(e).cube()},r.cbrt=function(e){return ae(e).cbrt()},r.dp=function(e){return ae(e).dp()},r.decimalPlaces=function(e){return ae(e).dp()},r.affordGeometricSeries=function(e,i,a,l){return Jb(ae(e),ae(i),ae(a),l)},r.sumGeometricSeries=function(e,i,a,l){return eE(e,ae(i),ae(a),l)},r.affordArithmeticSeries=function(e,i,a,l){return(function(d,f,y,b){var _=f.add(b.mul(y)).sub(y.div(2)),x=_.pow(2);return _.neg().add(x.add(y.mul(d).mul(2)).sqrt()).div(y).floor()})(ae(e),ae(i),ae(a),ae(l))},r.sumArithmeticSeries=function(e,i,a,l){return(function(d,f,y,b){var _=f.add(b.mul(y));return d.div(2).mul(_.mul(2).plus(d.sub(1).mul(y)))})(ae(e),ae(i),ae(a),ae(l))},r.efficiencyOfPurchase=function(e,i,a){return(function(l,d,f){return l.div(d).add(l.div(f))})(ae(e),ae(i),ae(a))},r.randomDecimalForTesting=function(e){if(20*Math.random()<1)return Fs(0,0);var i=10*Math.random();10*Math.random()<1&&(i=Math.round(i)),i*=Math.sign(2*Math.random()-1);var a=Math.floor(Math.random()*e*2)-e;return Nn(i,a)},r.prototype.normalize=function(){if(this.m>=1&&this.m<10)return this;if(this.m===0)return this.m=0,this.e=0,this;var e=Math.floor(Math.log10(Math.abs(this.m)));return this.m=e===-324?10*this.m/1e-323:this.m/ic(e),this.e+=e,this},r.prototype.fromMantissaExponent=function(e,i){return isFinite(e)&&isFinite(i)?(this.m=e,this.e=i,this.normalize(),this):(e=Number.NaN,i=Number.NaN,this)},r.prototype.fromMantissaExponent_noNormalize=function(e,i){return this.m=e,this.e=i,this},r.prototype.fromDecimal=function(e){return this.m=e.m,this.e=e.e,this},r.prototype.fromNumber=function(e){return isNaN(e)?(this.m=Number.NaN,this.e=Number.NaN):e===Number.POSITIVE_INFINITY?(this.m=1,this.e=Li):e===Number.NEGATIVE_INFINITY?(this.m=-1,this.e=Li):e===0?(this.m=0,this.e=0):(this.e=Math.floor(Math.log10(Math.abs(e))),this.m=this.e===-324?10*e/1e-323:e/ic(this.e),this.normalize()),this},r.prototype.fromString=function(e){if(e.indexOf("e")!==-1){var i=e.split("e");this.m=parseFloat(i[0]),this.e=parseFloat(i[1]),this.normalize()}else if(e==="NaN")this.m=Number.NaN,this.e=Number.NaN;else if(this.fromNumber(parseFloat(e)),isNaN(this.m))throw Error("[DecimalError] Invalid argument: "+e);return this},r.prototype.fromValue=function(e){return e instanceof r?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.m=0,this.e=0,this)},r.prototype.toNumber=function(){if(!isFinite(this.e))return Number.NaN;if(this.e>308)return this.m>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;if(this.e<-324)return 0;if(this.e===-324)return this.m>0?5e-324:-5e-324;var e=this.m*ic(this.e);if(!isFinite(e)||this.e<0)return e;var i=Math.round(e);return Math.abs(i-e)<1e-10?i:e},r.prototype.mantissaWithDecimalPlaces=function(e){if(isNaN(this.m)||isNaN(this.e))return Number.NaN;if(this.m===0)return 0;var i=e+1,a=Math.ceil(Math.log10(Math.abs(this.m))),l=Math.round(this.m*Math.pow(10,i-a))*Math.pow(10,a-i);return parseFloat(l.toFixed(Math.max(i-a,0)))},r.prototype.toString=function(){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=Li?this.m>0?"Infinity":"-Infinity":this.e<=-Li||this.m===0?"0":this.e<21&&this.e>-7?this.toNumber().toString():this.m+"e"+(this.e>=0?"+":"")+this.e},r.prototype.toExponential=function(e){if(isNaN(this.m)||isNaN(this.e))return"NaN";if(this.e>=Li)return this.m>0?"Infinity":"-Infinity";if(this.e<=-Li||this.m===0)return"0"+(e>0?Jh(".",e+1,"0"):"")+"e+0";if(this.e>-324&&this.e<308)return this.toNumber().toExponential(e);isFinite(e)||(e=17);var i=e+1,a=Math.max(1,Math.ceil(Math.log10(Math.abs(this.m))));return(Math.round(this.m*Math.pow(10,i-a))*Math.pow(10,a-i)).toFixed(Math.max(i-a,0))+"e"+(this.e>=0?"+":"")+this.e},r.prototype.toFixed=function(e){return isNaN(this.m)||isNaN(this.e)?"NaN":this.e>=Li?this.m>0?"Infinity":"-Infinity":this.e<=-Li||this.m===0?"0"+(e>0?Jh(".",e+1,"0"):""):this.e>=17?this.m.toString().replace(".","").padEnd(this.e+1,"0")+(e>0?Jh(".",e+1,"0"):""):this.toNumber().toFixed(e)},r.prototype.toPrecision=function(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.e-1):this.toExponential(e-1)},r.prototype.valueOf=function(){return this.toString()},r.prototype.toJSON=function(){return this.toString()},r.prototype.toStringWithDecimalPlaces=function(e){return this.toExponential(e)},r.prototype.abs=function(){return Fs(Math.abs(this.m),this.e)},r.prototype.neg=function(){return Fs(-this.m,this.e)},r.prototype.negate=function(){return this.neg()},r.prototype.negated=function(){return this.neg()},r.prototype.sign=function(){return Math.sign(this.m)},r.prototype.sgn=function(){return this.sign()},r.prototype.round=function(){return this.e<-1?new r(0):this.e<17?new r(Math.round(this.toNumber())):this},r.prototype.floor=function(){return this.e<-1?Math.sign(this.m)>=0?new r(0):new r(-1):this.e<17?new r(Math.floor(this.toNumber())):this},r.prototype.ceil=function(){return this.e<-1?Math.sign(this.m)>0?new r(1):new r(0):this.e<17?new r(Math.ceil(this.toNumber())):this},r.prototype.trunc=function(){return this.e<0?new r(0):this.e<17?new r(Math.trunc(this.toNumber())):this},r.prototype.add=function(e){var i,a,l=ae(e);if(this.m===0)return l;if(l.m===0)return this;if(this.e>=l.e?(i=this,a=l):(i=l,a=this),i.e-a.e>17)return i;var d=Math.round(1e14*i.m+1e14*a.m*ic(a.e-i.e));return Nn(d,i.e-14)},r.prototype.plus=function(e){return this.add(e)},r.prototype.sub=function(e){return this.add(ae(e).neg())},r.prototype.subtract=function(e){return this.sub(e)},r.prototype.minus=function(e){return this.sub(e)},r.prototype.mul=function(e){if(typeof e=="number")return e<1e307&&e>-1e307?Nn(this.m*e,this.e):Nn(1e-307*this.m*e,this.e+307);var i=typeof e=="string"?new r(e):e;return Nn(this.m*i.m,this.e+i.e)},r.prototype.multiply=function(e){return this.mul(e)},r.prototype.times=function(e){return this.mul(e)},r.prototype.div=function(e){return this.mul(ae(e).recip())},r.prototype.divide=function(e){return this.div(e)},r.prototype.divideBy=function(e){return this.div(e)},r.prototype.dividedBy=function(e){return this.div(e)},r.prototype.recip=function(){return Nn(1/this.m,-this.e)},r.prototype.reciprocal=function(){return this.recip()},r.prototype.reciprocate=function(){return this.recip()},r.prototype.cmp=function(e){var i=ae(e);if(this.m===0){if(i.m===0)return 0;if(i.m<0)return 1;if(i.m>0)return-1}if(i.m===0){if(this.m<0)return-1;if(this.m>0)return 1}if(this.m>0)return i.m<0||this.e>i.e?1:this.e<i.e?-1:this.m>i.m?1:this.m<i.m?-1:0;if(this.m<0)return i.m>0||this.e>i.e?-1:this.e<i.e||this.m>i.m?1:this.m<i.m?-1:0;throw Error("Unreachable code")},r.prototype.compare=function(e){return this.cmp(e)},r.prototype.eq=function(e){var i=ae(e);return this.e===i.e&&this.m===i.m},r.prototype.equals=function(e){return this.eq(e)},r.prototype.neq=function(e){return!this.eq(e)},r.prototype.notEquals=function(e){return this.neq(e)},r.prototype.lt=function(e){var i=ae(e);return this.m===0?i.m>0:i.m===0?this.m<=0:this.e===i.e?this.m<i.m:this.m>0?i.m>0&&this.e<i.e:i.m>0||this.e>i.e},r.prototype.lte=function(e){return!this.gt(e)},r.prototype.gt=function(e){var i=ae(e);return this.m===0?i.m<0:i.m===0?this.m>0:this.e===i.e?this.m>i.m:this.m>0?i.m<0||this.e>i.e:i.m<0&&this.e<i.e},r.prototype.gte=function(e){return!this.lt(e)},r.prototype.max=function(e){var i=ae(e);return this.lt(i)?i:this},r.prototype.min=function(e){var i=ae(e);return this.gt(i)?i:this},r.prototype.clamp=function(e,i){return this.max(e).min(i)},r.prototype.clampMin=function(e){return this.max(e)},r.prototype.clampMax=function(e){return this.min(e)},r.prototype.cmp_tolerance=function(e,i){var a=ae(e);return this.eq_tolerance(a,i)?0:this.cmp(a)},r.prototype.compare_tolerance=function(e,i){return this.cmp_tolerance(e,i)},r.prototype.eq_tolerance=function(e,i){var a=ae(e);return r.lte(this.sub(a).abs(),r.max(this.abs(),a.abs()).mul(i))},r.prototype.equals_tolerance=function(e,i){return this.eq_tolerance(e,i)},r.prototype.neq_tolerance=function(e,i){return!this.eq_tolerance(e,i)},r.prototype.notEquals_tolerance=function(e,i){return this.neq_tolerance(e,i)},r.prototype.lt_tolerance=function(e,i){var a=ae(e);return!this.eq_tolerance(a,i)&&this.lt(a)},r.prototype.lte_tolerance=function(e,i){var a=ae(e);return this.eq_tolerance(a,i)||this.lt(a)},r.prototype.gt_tolerance=function(e,i){var a=ae(e);return!this.eq_tolerance(a,i)&&this.gt(a)},r.prototype.gte_tolerance=function(e,i){var a=ae(e);return this.eq_tolerance(a,i)||this.gt(a)},r.prototype.log10=function(){return this.e+Math.log10(this.m)},r.prototype.absLog10=function(){return this.e+Math.log10(Math.abs(this.m))},r.prototype.pLog10=function(){return this.m<=0||this.e<0?0:this.log10()},r.prototype.log=function(e){return Math.LN10/Math.log(e)*this.log10()},r.prototype.log2=function(){return 3.321928094887362*this.log10()},r.prototype.ln=function(){return 2.302585092994045*this.log10()},r.prototype.logarithm=function(e){return this.log(e)},r.prototype.pow=function(e){var i,a=e instanceof r?e.toNumber():e,l=this.e*a;if(Number.isSafeInteger(l)&&(i=Math.pow(this.m,a),isFinite(i)&&i!==0))return Nn(i,l);var d=Math.trunc(l),f=l-d;if(i=Math.pow(10,a*Math.log10(this.m)+f),isFinite(i)&&i!==0)return Nn(i,d);var y=r.pow10(a*this.absLog10());return this.sign()===-1?Math.abs(a%2)===1?y.neg():Math.abs(a%2)===0?y:new r(Number.NaN):y},r.prototype.pow_base=function(e){return ae(e).pow(this)},r.prototype.factorial=function(){var e=this.toNumber()+1;return r.pow(e/Math.E*Math.sqrt(e*Math.sinh(1/e)+1/(810*Math.pow(e,6))),e).mul(Math.sqrt(2*Math.PI/e))},r.prototype.exp=function(){var e=this.toNumber();return-706<e&&e<709?r.fromNumber(Math.exp(e)):r.pow(Math.E,e)},r.prototype.sqr=function(){return Nn(Math.pow(this.m,2),2*this.e)},r.prototype.sqrt=function(){return this.m<0?new r(Number.NaN):this.e%2!=0?Nn(3.16227766016838*Math.sqrt(this.m),Math.floor(this.e/2)):Nn(Math.sqrt(this.m),Math.floor(this.e/2))},r.prototype.cube=function(){return Nn(Math.pow(this.m,3),3*this.e)},r.prototype.cbrt=function(){var e=1,i=this.m;i<0&&(e=-1,i=-i);var a=e*Math.pow(i,1/3),l=this.e%3;return Nn(l===1||l===-1?2.154434690031883*a:l!==0?4.641588833612778*a:a,Math.floor(this.e/3))},r.prototype.sinh=function(){return this.exp().sub(this.negate().exp()).div(2)},r.prototype.cosh=function(){return this.exp().add(this.negate().exp()).div(2)},r.prototype.tanh=function(){return this.sinh().div(this.cosh())},r.prototype.asinh=function(){return r.ln(this.add(this.sqr().add(1).sqrt()))},r.prototype.acosh=function(){return r.ln(this.add(this.sqr().sub(1).sqrt()))},r.prototype.atanh=function(){return this.abs().gte(1)?Number.NaN:r.ln(this.add(1).div(new r(1).sub(this)))/2},r.prototype.ascensionPenalty=function(e){return e===0?this:this.pow(Math.pow(10,-e))},r.prototype.egg=function(){return this.add(9)},r.prototype.lessThanOrEqualTo=function(e){return this.cmp(e)<1},r.prototype.lessThan=function(e){return this.cmp(e)<0},r.prototype.greaterThanOrEqualTo=function(e){return this.cmp(e)>-1},r.prototype.greaterThan=function(e){return this.cmp(e)>0},r.prototype.decimalPlaces=function(){return this.dp()},r.prototype.dp=function(){if(!isFinite(this.mantissa))return NaN;if(this.exponent>=17)return 0;for(var e=this.mantissa,i=-this.exponent,a=1;Math.abs(Math.round(e*a)/a-e)>1e-10;)a*=10,i++;return i>0?i:0},Object.defineProperty(r,"MAX_VALUE",{get:function(){return tE},enumerable:!1,configurable:!0}),Object.defineProperty(r,"MIN_VALUE",{get:function(){return nE},enumerable:!1,configurable:!0}),Object.defineProperty(r,"NUMBER_MAX_VALUE",{get:function(){return iE},enumerable:!1,configurable:!0}),Object.defineProperty(r,"NUMBER_MIN_VALUE",{get:function(){return rE},enumerable:!1,configurable:!0}),r})(),tE=Fs(1,Li),nE=Fs(1,-Li),iE=ae(Number.MAX_VALUE),rE=ae(Number.MIN_VALUE);const m=r=>r instanceof Mn?r:new Mn(r),ii=m(1e3),Jy=[{version:"2.7.0",date:"Current",changes:["EMPIRE UPDATE: Wonders & Trade","Added 'Empire' menu (Unlocks with Castle).","Great Wonders: Build 3 massive multi-stage monuments for permanent bonuses.","Trade Routes: Invest gold and send caravans to distant lands.","New mechanics for spending excess Gold, Soldiers, and Elite Units."]},{version:"2.6.0",date:"Previous",changes:["ELITE ARMY UPDATE: Quality over Quantity","Added 'Royal Academy': Convert basic soldiers into Elite Units.","New Units: Knights, Paladins, and Void Sentinels.","Updated Crusades: High-level missions now require Elite Units to start.","Fixed 'Train 1M' button visibility."]},{version:"2.5.0",date:"Previous",changes:["WAR UPDATE: The Grand Army","New Crusades: toDecimal(5) new campaigns for massive armies (up to 1 Billion soldiers).","Replayability: Crusades can now be replayed for Gold rewards (Critical Success).","New Artifacts: Cosmic-tier relics providing up to x10,000 production.","Added 'Reality Defense' campaign for the ultimate challenge."]},{version:"2.4.0",date:"Previous",changes:["THE TRANSCENDENCE UPDATE","5 New God-Tier Buildings: Reaching up to 1e240 cost.","Renown Shop Expansion: Upgrades for the ultra-rich (up to 1e200 Renown).","New Advisor: The Time Keeper.","Achievement Extension: Gold and Renown tiers expanded significantly.","Endgame Balancing: New synergies for massive empires."]},{version:"2.3.0",date:"Previous",changes:["COSMIC EXPANSION: The Reality Engine","New Endgame Buildings: Chronosphere & Reality Engine.","Synergy Upgrades: Bonuses based on Achievements, Army, and Clicks.","New Renown Upgrades: Spend your prestige points on massive multipliers.","Progressive Unlocks: Buildings now appear only when you are ready.","Extended Achievement tiers for the ultimate tycoons."]},{version:"2.2.0",date:"Previous",changes:["ENDGAME EXPANSION: The Astral Age","New Building: Astral Rift. Harness the power of the void.","Renown Shop: Added powerful upgrades purchasable with Renown.","Quality of Life: 'Buy Amount' multiplier is now saved between sessions."]},{version:"2.1.0",date:"Previous",changes:["Advanced Design Studio: Customize every color!","Layout Control: Adjust the width of the 3 main columns.","Border Customization: Change border thickness and color.","Created the ultimate personalized experience."]},{version:"2.0.0",date:"Previous",changes:["Major Update: Full Interface Customization!","Added Interface settings for Font Size and Layout Density.","Added toggles for Animations, Floating Text, and Weather Widget.","Refined Settings menu organization."]},{version:"1.9.9",date:"Previous",changes:["Interface Update: Moved Statistics to a separate window.","Settings Update: Added ability to toggle 'Cinematic Idle Mode' on/off.","Settings Layout: Reorganized visual preferences."]},{version:"1.9.8",date:"Previous",changes:["Added Number Formatting Options.","Choose between 'Standard' (1k, 1M), 'Scientific' (1e6), or 'Plain' (1,000,000) notation.","Gold Per Second now displays with proper comma separators."]},{version:"1.9.7",date:"Previous",changes:["Added 'Cinematic Idle Mode'!","If you are inactive for 20 seconds, the UI clears away.","Enjoy procedural landscapes based on your kingdom's progress.","Weather effects are now fully visualized in Idle Mode.","Move your mouse to return to ruling."]},{version:"1.9.6",date:"Previous",changes:["Bug Fix: Click visual effect now shows correct gold amount.","The floating text now accounts for upgrades, renown, and decrees."]},{version:"1.9.5",date:"Previous",changes:["UI Update: Added dedicated 'Upgrades' tab.","Content: Added 6 new Upgrades to fill progression gaps.","Balance: Removed 'Divine Tithe' decree.","Upgrades are now sorted by cost."]},{version:"1.9.4",date:"Previous",changes:["Content Update: Added 2 new Click Upgrades.","Added 'Golden Gauntlet' (75k) and 'Hand of Midas' (3.5m).","Sorted all upgrades by price for better progression."]},{version:"1.9.3",date:"Previous",changes:["Army Update: Added bulk recruitment options.","You can now train 100 or 1,000 soldiers at once.","Improved war logistics for late-game empires."]},{version:"1.9.2",date:"Previous",changes:["UI Update: Detailed production stats.","Buildings now display both 'Per Unit' and 'Total' production.","Stats update in real-time with weather and buffs."]},{version:"1.9.1",date:"Previous",changes:["UI Update: Building stats now show REAL production per second.","Production display now accounts for Weather, Upgrades, Renown, and Artifacts.","Fixed descriptions to be more accurate."]},{version:"1.9.0",date:"Previous",changes:["Added Theme Support!","Choose between 'Royal Parchment', 'Dark Ages', and 'Midnight Realm' in Settings.","Improved visual comfort for different lighting conditions."]},{version:"1.8.1",date:"Previous",changes:["Balance Update: Decrees are no longer available immediately.","Added Unlock Conditions for all Decrees to prevent early-game exploits.","Added 'Emergency Draft' Decree (Unlock: toDecimal(100) Peasants).","Added 'Divine Tithe' Decree (Unlock: toDecimal(3) Cathedrals).","Royal Tax Audit now requires the Treasurer Advisor."]},{version:"1.8.0",date:"Previous",changes:["Added Bulk Buy Options: toDecimal(1)x, 10x, 100x, Max.","Expanded Conquest System: Crusades now have risk!","Risk Mechanics: Failure (Retreat), Success, and Critical Success.","Advisors Update: Warmaster now reduces Crusade risk."]},{version:"1.7.0",date:"Previous",changes:["Massive Achievement Update: Added 30 new achievements!","New Milestones: Early game, Prestige, Total Buildings, and Upgrades.","Can you reach 'Immortal Lineage' or build a 'Megalopolis'?"]},{version:"1.6.1",date:"Previous",changes:["Added 10 new hidden achievements.","Can you discover the requirements to unlock them?"]},{version:"1.6.0",date:"Previous",changes:["Added Dynamic Weather System!","Weather changes periodically, affecting production.","Sunny: Boosts Fields/Peasants.","Rainy: Boosts Mines/Alchemists.","Stormy: Major boost to Blacksmiths, penalty to Fields.","Windy: Speeds up Crusades and boosts Markets."]},{version:"1.5.0",date:"Previous",changes:["Added 'Royal Council' system.","Spend Renown to hire permanent Advisors.","4 Unique Advisors: Treasurer, Warmaster, Guildmaster, Alchemist.","Strategic choices for long-term kingdom planning."]},{version:"1.4.3",date:"Previous",changes:["Added 'Royal Tax Audit' decree.","Instantly collect 800s of production (10m cooldown)."]},{version:"1.4.2",date:"Previous",changes:["Added 10 new secret achievements.","Can you unlock them all?"]},{version:"1.4.1",date:"Previous",changes:["Removed sunburst/glow effect around the main button.","Cleaned up UI visual noise."]},{version:"1.4.0",date:"Previous",changes:["New Layout: Screen divided into 3 equal columns.","Left Column: Buildings & Decrees.","Middle Column: The Throne (Clicker & Stats).","Right Column: Army & Achievements.","Improved UI Organization."]},{version:"1.3.2",date:"Previous",changes:["Improved Auto-Save: Game now saves every 30 seconds.","Added Smart Save: Game immediately saves when tab is closed or refreshed.","Fixed issue where progress could be lost on quick exits."]},{version:"1.3.1",date:"Previous",changes:["Fixed Decree timer display: Now shows Active duration first, then Cooldown.","UI improvements for better timer readability."]},{version:"1.3.0",date:"Previous",changes:["Added 'Stables' building (35k cost)","Added 'Silver Mine' building (280k cost)","Made Prestige/Legacy button visible earlier (50k Gold)","Added explanation to Prestige menu"]},{version:"1.2.0",date:"Previous",changes:["Added Statistics tracking (Clicks, Dragon Kills, etc.)","Added 5 New Achievements","Added 'Updates' menu in Settings","Improved Save System stability"]},{version:"1.1.1",date:"Old",changes:["Added Grand Palace building","Added 'The Last Crusade' campaign","Added Notification System (Toasts)","Removed intrusive alerts"]},{version:"1.1.0",date:"Old",changes:["Added Market and Alchemist Guild buildings","Added Tavern Dice Game","Added Settings Menu","Added Hard Reset option"]},{version:"1.0.0",date:"Release",changes:["Initial Release","Basic Buildings & Upgrades","Prestige System","Day/Night Cycle"]}],ye=(r,e="standard")=>{const i=typeof r=="number"?m(r):r;if(i.eq(m(0)))return"0";if(e==="scientific")return i.abs().lt(m(1e3))?i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1}):i.toExponential(2);if(e==="plain")return i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1});if(i.abs().lt(1e3))return i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1});const a=["","k","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc","Ud","Dd","Td","Qd","Qn","Sx","St","Oa","Nn","Vg"],l=Math.floor(i.log10()/3);return l===0?i.toNumber().toLocaleString(void 0,{maximumFractionDigits:1}):l>=a.length?i.toExponential(2):i.dividedBy(m(10).pow(l*3)).toFixed(2)+a[l]},df={default:{id:"default",name:"Royal Parchment",colors:{"--bg-color":"#e8dcc5","--panel-bg":"#fdf6e3","--text-color":"#3e2723","--text-secondary":"#5d4037","--text-on-accent":"#ffffff","--accent-color":"#8d6e63","--accent-hover":"#6d4c41","--gold-color":"#bf9000","--border-color":"#a1887f","--success-color":"#2e7d32","--danger-color":"#c62828","--shadow":"4px 4px 0px rgba(62, 39, 35, 0.2)","--bg-image":`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23d7c9a8' fill-opacity='0.4' fill-rule='evenodd'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/svg%3E")`}},dark:{id:"dark",name:"Dark Ages",colors:{"--bg-color":"#262626","--panel-bg":"#333333","--text-color":"#e0e0e0","--text-secondary":"#bdbdbd","--text-on-accent":"#ffffff","--accent-color":"#8d6e63","--accent-hover":"#795548","--gold-color":"#ffd700","--border-color":"#555555","--success-color":"#66bb6a","--danger-color":"#ef5350","--shadow":"4px 4px 0px rgba(0, 0, 0, 0.5)","--bg-image":"none"}},midnight:{id:"midnight",name:"Midnight Realm",colors:{"--bg-color":"#0d1b2a","--panel-bg":"#1b263b","--text-color":"#e0e1dd","--text-secondary":"#778da9","--text-on-accent":"#ffffff","--accent-color":"#415a77","--accent-hover":"#778da9","--gold-color":"#ffcc00","--border-color":"#415a77","--success-color":"#00e676","--danger-color":"#ff1744","--shadow":"4px 4px 0px rgba(0, 0, 0, 0.5)","--bg-image":"none"}}},gv={clear:{id:"clear",name:"Clear Skies",icon:"",description:"A calm day. No special effects.",color:"rgba(255, 243, 224, 0.5)"},sunny:{id:"sunny",name:"Bountiful Sun",icon:"",description:"+20% Production for Peasants and Wheat Fields.",color:"rgba(255, 236, 179, 0.5)"},rainy:{id:"rainy",name:"Heavy Rain",icon:"",description:"+20% Production for Silver Mines and Alchemists.",color:"rgba(227, 242, 253, 0.5)"},stormy:{id:"stormy",name:"Thunderstorm",icon:"",description:"+30% Blacksmith production (Energy), but -20% Wheat Fields.",color:"rgba(207, 216, 220, 0.5)"},windy:{id:"windy",name:"High Winds",icon:"",description:"Crusades are 20% faster. Markets produce +15% more.",color:"rgba(224, 242, 241, 0.5)"}},pc=[{id:"knight",name:"Royal Knight",description:"Heavily armored elite infantry.",icon:"",goldCost:m(5e4),soldierCost:m(100)},{id:"paladin",name:"Divine Paladin",description:"Blessed warriors who fear no darkness.",icon:"",goldCost:m(5e6),soldierCost:m(1e3)},{id:"void_sentinel",name:"Void Sentinel",description:"Infused with cosmic energy to fight reality itself.",icon:"",goldCost:m(1e9),soldierCost:m(1e4)}];m(10),m(1),m(5),m(25),m(2),m(5),m(50),m(3),m(5),m(100),m(5),m(5),m(250),m(10),m(5),m(500),m(20),m(5);const Ys=[{id:"peasant",name:"Peasant",baseCost:m(15),baseProduction:m(.1),description:"A loyal subject to work the fields.",icon:""},{id:"field",name:"Wheat Field",baseCost:m(100),baseProduction:m(1),description:"Golden wheat to feed the kingdom.",icon:""},{id:"blacksmith",name:"Blacksmith",baseCost:m(1100),baseProduction:m(8),description:"Forging tools and weapons.",icon:""},{id:"market",name:"Market",baseCost:m(4200),baseProduction:m(22),description:"Trade hub for exotic goods.",icon:""},{id:"tavern",name:"Tavern",baseCost:m(12e3),baseProduction:m(47),description:"Where gold flows as freely as ale.",icon:""},{id:"stable",name:"Stables",baseCost:m(35e3),baseProduction:m(115),description:"Horses for trade and war.",icon:""},{id:"castle",name:"Castle",baseCost:m(13e4),baseProduction:m(260),description:"The seat of your power.",icon:""},{id:"silver_mine",name:"Silver Mine",baseCost:m(28e4),baseProduction:m(550),description:"Deep shafts rich with precious metal.",icon:""},{id:"alchemist",name:"Alchemist Guild",baseCost:m(55e4),baseProduction:m(800),description:"Transmuting lead into gold.",icon:""},{id:"cathedral",name:"Cathedral",baseCost:m(14e5),baseProduction:m(1400),description:"Divine blessings bring great fortune.",icon:""},{id:"palace",name:"Grand Palace",baseCost:m(2e7),baseProduction:m(25e3),description:"A wonder of the world to cement your legacy.",icon:""},{id:"astral_rift",name:"Astral Rift",baseCost:m(1e18),baseProduction:m(5e9),description:"Tear open reality to harvest void energy.",icon:""},{id:"chronosphere",name:"Chronosphere",baseCost:m(1e21),baseProduction:m(5e14),description:"Manipulate time to generate endless wealth.",icon:""},{id:"reality_engine",name:"Reality Engine",baseCost:m(1e24),baseProduction:m(1e17),description:"Rewrite the physical laws of the universe.",icon:""},{id:"quantum_computer",name:"Quantum Supercomputer",baseCost:m(1e50),baseProduction:m(1e50),description:"Simulate infinite universes for profit.",icon:""},{id:"multiverse_nexus",name:"Multiverse Nexus",baseCost:m(1e50),baseProduction:m(1e50),description:"Trade with parallel realities.",icon:""},{id:"dyson_sphere",name:"Dyson Sphere",baseCost:m(1e50),baseProduction:m(1e50),description:"Harness the entire energy of a star.",icon:""},{id:"matter_replicator",name:"Matter Replicator",baseCost:m(1e50),baseProduction:m(1e50),description:"Convert energy directly into gold.",icon:""},{id:"architect_quill",name:"The Architect's Quill",baseCost:m(1e50),baseProduction:m(1e50),description:"Rewrite the code of existence itself.",icon:""}],Bi=[{id:"rusty_pitchfork",name:"Rusty Pitchforks",description:"Peasants work 2x harder.",cost:m(500),triggerId:"peasant",triggerCount:m(1),type:"building",targetId:"peasant",multiplier:m(2)},{id:"royal_scepter",name:"Royal Scepter",description:"Clicking is 2x more effective.",cost:m(1e3),type:"click",multiplier:m(2)},{id:"iron_plough",name:"Iron Plough",description:"Fields produce +50% more.",cost:m(2500),triggerId:"field",triggerCount:m(10),type:"building",targetId:"field",multiplier:m(1.5)},{id:"heavy_anvil",name:"Heavy Anvil",description:"Blacksmiths produce 2x gold.",cost:m(11e3),triggerId:"blacksmith",triggerCount:m(10),type:"building",targetId:"blacksmith",multiplier:m(2)},{id:"steel_plough",name:"Steel Plough",description:"Fields produce 2x gold.",cost:m(15e3),triggerId:"field",triggerCount:m(25),type:"building",targetId:"field",multiplier:m(2)},{id:"merchant_guild",name:"Merchant Guild",description:"Markets generate +50% profit.",cost:m(25e3),triggerId:"market",triggerCount:m(15),type:"building",targetId:"market",multiplier:m(1.5)},{id:"ale_yeast",name:"Imported Yeast",description:"Taverns produce +50% more.",cost:m(45e3),triggerId:"tavern",triggerCount:m(5),type:"building",targetId:"tavern",multiplier:m(1.5)},{id:"golden_gauntlet",name:"Golden Gauntlet",description:"Clicking is 2x more effective.",cost:m(75e3),type:"click",multiplier:m(2)},{id:"thoroughbreds",name:"Thoroughbreds",description:"Stables produce 2x gold.",cost:m(85e3),triggerId:"stable",triggerCount:m(10),type:"building",targetId:"stable",multiplier:m(2)},{id:"tax_collector",name:"Tax Collector",description:"Global production +20%.",cost:m(1e5),type:"global",multiplier:m(1.2)},{id:"guild_charters",name:"Guild Charters",description:"Markets produce 2x gold.",cost:m(12e4),triggerId:"market",triggerCount:m(25),type:"building",targetId:"market",multiplier:m(2)},{id:"standing_army",name:"Standing Army",description:"Global production +10% (Security).",cost:m(15e4),type:"global",multiplier:m(1.1)},{id:"war_horses",name:"War Horses",description:"Stables produce +50% more.",cost:m(18e4),triggerId:"stable",triggerCount:m(20),type:"building",targetId:"stable",multiplier:m(1.5)},{id:"mining_safety",name:"Mining Safety",description:"Silver Mines produce 2x gold.",cost:m(45e4),triggerId:"silver_mine",triggerCount:m(5),type:"building",targetId:"silver_mine",multiplier:m(2)},{id:"deep_shafts",name:"Deep Shafts",description:"Silver Mines produce +50% more.",cost:m(6e5),triggerId:"silver_mine",triggerCount:m(10),type:"building",targetId:"silver_mine",multiplier:m(1.5)},{id:"royal_banner",name:"Royal Banner",description:"Global production +15%.",cost:m(12e5),type:"global",multiplier:m(1.15)},{id:"elixir_life",name:"Elixir of Wealth",description:"Alchemists triple their output.",cost:m(2e6),triggerId:"alchemist",triggerCount:m(5),type:"building",targetId:"alchemist",multiplier:m(3)},{id:"stained_glass",name:"Stained Glass",description:"Cathedrals inspire 2x donations.",cost:m(3e6),triggerId:"cathedral",triggerCount:m(5),type:"building",targetId:"cathedral",multiplier:m(2)},{id:"hand_of_midas",name:"Hand of Midas",description:"Clicking is 3x more effective.",cost:m(35e5),type:"click",multiplier:m(3)},{id:"diamond_click",name:"Diamond Touch",description:"Clicking is 5x more effective.",cost:m(1e7),type:"click",multiplier:m(5)},{id:"royal_treasury",name:"Royal Treasury",description:"Grand Palaces produce 2x gold.",cost:m(5e7),triggerId:"palace",triggerCount:m(1),type:"building",targetId:"palace",multiplier:m(2)},{id:"obsidian_walls",name:"Obsidian Walls",description:"Castles produce 5x gold.",cost:m(5e9),triggerId:"castle",triggerCount:m(200),type:"building",targetId:"castle",multiplier:m(5)},{id:"philosopher_stone",name:"Philosopher's Stone",description:"Alchemists produce 10x gold.",cost:m(25e9),triggerId:"alchemist",triggerCount:m(200),type:"building",targetId:"alchemist",multiplier:m(10)},{id:"divine_intervention",name:"Divine Intervention",description:"Cathedrals produce 10x gold.",cost:m(1e11),triggerId:"cathedral",triggerCount:m(250),type:"building",targetId:"cathedral",multiplier:m(10)},{id:"empire_bureaucracy",name:"Imperial Bureaucracy",description:"Global Production x2.",cost:m(1e12),triggerId:"peasant",triggerCount:m(1500),type:"global",multiplier:m(2)},{id:"void_harvesting",name:"Void Harvesting",description:"Astral Rifts produce x10 energy.",cost:m(1e20),triggerId:"astral_rift",triggerCount:m(10),type:"building",targetId:"astral_rift",multiplier:m(10)},{id:"temporal_batteries",name:"Temporal Batteries",description:"Chronospheres produce x2 Gold.",cost:m(1e23),triggerId:"chronosphere",triggerCount:m(5),type:"building",targetId:"chronosphere",multiplier:m(2)},{id:"reality_weave",name:"Reality Weave",description:"Reality Engines produce x2 Gold.",cost:m(1e26),triggerId:"reality_engine",triggerCount:m(5),type:"building",targetId:"reality_engine",multiplier:m(2)},{id:"army_synergy",name:"Conqueror's Tithe",description:"Global Production +1% for every 1000 Soldiers.",cost:m(1e15),triggerId:"castle",triggerCount:m(100),type:"global",multiplier:m(1)},{id:"achievement_synergy",name:"Hall of Fame",description:"Global Production +5% per Achievement unlocked.",cost:m(1e18),triggerId:"peasant",triggerCount:m(2e3),type:"global",multiplier:m(1)},{id:"click_synergy",name:"Finger of God",description:"Global Production +0.01% per Manual Click (Lifetime).",cost:m(1e20),triggerId:"peasant",triggerCount:m(2500),type:"global",multiplier:m(1)},{id:"legacy_of_kings",name:"Legacy of Kings",description:"Global Production x5 (Permanent)",cost:m(1e4),currency:"renown",type:"global",multiplier:m(5)},{id:"divine_right",name:"Divine Right",description:"Global Production x10 (Permanent)",cost:m(1e6),currency:"renown",type:"global",multiplier:m(10)},{id:"time_dilation",name:"Time Dilation",description:"Global Production x50 (Permanent)",cost:m(1e8),currency:"renown",type:"global",multiplier:m(50)},{id:"omniscience",name:"Omniscience",description:"Global Production x200 (Permanent)",cost:m(1e10),currency:"renown",type:"global",multiplier:m(200)},{id:"reality_bending",name:"Reality Bending",description:"Global Production x1000 (Permanent)",cost:m(1e12),currency:"renown",type:"global",multiplier:m(1e3)},{id:"ascended_knowledge",name:"Ascended Knowledge",description:"Global Production x10,000 (Permanent)",cost:m(1e15),currency:"renown",type:"global",multiplier:m(1e4)},{id:"universal_truth",name:"Universal Truth",description:"Global Production x1,000,000 (Permanent)",cost:m(1e50),currency:"renown",type:"global",multiplier:m(1e6)},{id:"god_mode",name:"Divinity",description:"Global Production x1e9 (Permanent)",cost:m(1e100),currency:"renown",type:"global",multiplier:m(1e9)},{id:"developer_access",name:"Creative Mode",description:"Global Production x1e12 (Permanent)",cost:m(1e150),currency:"renown",type:"global",multiplier:m(1e12)},{id:"the_end",name:"The End",description:"Global Production x1e20 (Permanent)",cost:m(1e200),currency:"renown",type:"global",multiplier:m(1e20)}],sE=(r,e)=>{const i=m(1.15);return r.times(i.pow(e)).floor()},Ya=(r,e,i)=>{const a=m(1.15),l=r.times(a.pow(e)),d=a.pow(i).minus(m(1)),f=a.minus(m(1));return l.times(d).dividedBy(f).floor()},e0=(r,e,i)=>{const a=m(1.15),l=r.times(a.pow(e));if(i.lt(l))return m(0);let d=m(0),f=m(1);for(;Ya(r,e,f).lte(i)&&(f=f.times(m(2)),!f.gt(m(1e9))););for(;f.minus(d).gt(m(1));){const y=d.plus(f).dividedBy(m(2)).floor();Ya(r,e,y).lte(i)?d=y:f=y}return d},ds=(r,e,i,a,l,d)=>e.map(f=>({id:`${r}_${f}`,name:i(f),description:a(f),icon:l,condition:y=>d(y,f)})),aE=[1,10,25,50,100,150,200,300,400,500,750,1e3,2e3,3e3],oE=Ys.flatMap(r=>ds(`build_${r.id}`,aE,e=>`${r.name} Owner ${e}`,e=>`Own ${e} ${r.name}s.`,r.icon,(e,i)=>(e.buildings[r.id]||m(0)).gte(m(i)))),lE=[100,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,5e6,1e7,5e7],uE=ds("clicks",lE,r=>`Finger Workout ${ye(r)}`,r=>`Click manually ${ye(r)} times.`,"",(r,e)=>r.stats.totalClicks.gte(m(e))),cE=()=>{const r=[];let e=m(1e3);for(let i=0;i<100;i++)r.push(e.toNumber()),e=e.times(i%2===0?m(5):m(2));return r},dE=ds("gold",cE(),r=>`Hoarder ${ye(r)}`,r=>`Amass a lifetime total of ${ye(r)} gold.`,"",(r,e)=>r.totalGold.gte(m(e))),hE=[10,25,50,100,200,300,400,500,750,1e3,1500,2e3,3e3,4e3,5e3,7500,1e4],fE=ds("total_builds",hE,r=>`Architect ${r}`,r=>`Own ${r} total buildings.`,"",(r,e)=>Object.values(r.buildings).reduce((i,a)=>i.plus(a),m(0)).gte(m(e))),mE=[10,50,100,500,1e3,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,25e5,5e6],gE=ds("soldiers",mE,r=>`Commander ${ye(r)}`,r=>`Train a standing army of ${ye(r)}.`,"",(r,e)=>r.soldiers.gte(m(e))),pE=[1,5,10,25,50,100,250,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,5e5,1e6,1e7,1e8,1e10,1e20,1e50,1e100,1e150,1e200,1e250],yE=ds("renown",pE,r=>`Legend ${ye(r)}`,r=>`Reach ${ye(r)} Renown (Prestige).`,"",(r,e)=>r.renown.gte(m(e))),vE=[1,5,10,20,50,100,200,300,400,500],_E=ds("dragons",vE,r=>`Slayer ${r}`,r=>`Defeat ${r} Dragons.`,"",(r,e)=>r.stats.dragonsKilled.gte(m(e))),bE=[1,10,25,50,100,250,500,1e3,2500,5e3],EE=ds("gambler",bE,r=>`High Roller ${r}`,r=>`Play ${r} games in the Tavern.`,"",(r,e)=>r.stats.tavernGamesPlayed.gte(m(e))),TE=[{id:"all_artifacts",name:"Museum Curator",description:"Collect all unique Artifacts.",icon:"",condition:r=>r.artifacts.length>=Lc.length}],yc=[...oE,...uE,...dE,...fE,...gE,...yE,..._E,...EE,...TE],pv=[{id:"royal_feast",name:"Royal Feast",description:"Production x2 for 30s.",duration:m(30),cooldown:m(300),icon:"",effectType:"production_mult",value:m(2),unlockCondition:r=>(r.buildings.tavern||m(0)).gte(m(1)),unlockDescription:"Build a Tavern"},{id:"call_to_arms",name:"Call to Arms",description:"Click Power x5 for 20s.",duration:m(20),cooldown:m(180),icon:"",effectType:"click_mult",value:m(5),unlockCondition:r=>(r.buildings.blacksmith||m(0)).gte(m(1)),unlockDescription:"Build a Blacksmith"},{id:"royal_tax_audit",name:"Royal Tax Audit",description:"Instantly collect 600s of production.",duration:m(0),cooldown:m(600),icon:"",effectType:"instant_gold",value:m(600),unlockCondition:r=>r.advisors.includes("treasurer"),unlockDescription:"Hire Treasurer Advisor"},{id:"emergency_draft",name:"Emergency Draft",description:"Recruit 50 Soldiers instantly.",duration:m(0),cooldown:m(300),icon:"",effectType:"add_soldiers",value:m(50),unlockCondition:r=>(r.buildings.peasant||m(0)).gte(m(100)),unlockDescription:"Own 100 Peasants"}],Lc=[{id:"ancient_crown",name:"Ancient Crown",description:"Global Production +50%.",icon:"",globalMultiplier:m(1.5)},{id:"blessed_chalice",name:"Blessed Chalice",description:"Global Production +25%.",icon:"",globalMultiplier:m(1.25)},{id:"dragon_scale",name:"Dragon Scale Shield",description:"Global Production +35%.",icon:"",globalMultiplier:m(1.35)},{id:"lunar_stone",name:"Lunar Stone",description:"Global Production x5.",icon:"",globalMultiplier:m(5)},{id:"solar_flare",name:"Solar Core",description:"Global Production x25.",icon:"",globalMultiplier:m(25)},{id:"void_essence",name:"Void Essence",description:"Global Production x100.",icon:"",globalMultiplier:m(100)},{id:"galactic_map",name:"Galactic Map",description:"Global Production x500.",icon:"",globalMultiplier:m(500)},{id:"reality_shard",name:"Reality Shard",description:"Global Production x10,000.",icon:"",globalMultiplier:m(1e4)}],vc=[{id:"goblin_lands",name:"Goblin Lands",description:"A short skirmish to reclaim borders.",duration:m(60),soldierCost:m(100),rewardArtifactId:"blessed_chalice",icon:"",baseRisk:m(.1)},{id:"forgotten_ruins",name:"Forgotten Ruins",description:"Explore the dangerous ruins of the old world.",duration:m(300),soldierCost:m(500),rewardArtifactId:"dragon_scale",icon:"",baseRisk:m(.3)},{id:"the_last_crusade",name:"The Last Crusade",description:"A legendary campaign for the ultimate prize.",duration:m(900),soldierCost:m(2500),rewardArtifactId:"ancient_crown",icon:"",baseRisk:m(.6)},{id:"lunar_vanguard",name:"Lunar Vanguard",description:"Establish a foothold on the moon.",duration:m(3600),soldierCost:m(5e5),rewardArtifactId:"lunar_stone",icon:"",baseRisk:m(.4)},{id:"solar_siege",name:"Solar Siege",description:"Harvest energy from the sun itself.",duration:m(7200),soldierCost:m(2e6),requiredUnits:{knight:m(50)},rewardArtifactId:"solar_flare",icon:"",baseRisk:m(.5)},{id:"galactic_conquest",name:"Galactic Conquest",description:"Expand the empire to new stars.",duration:m(18e3),soldierCost:m(1e7),requiredUnits:{knight:m(500),paladin:m(50)},rewardArtifactId:"void_essence",icon:"",baseRisk:m(.6)},{id:"dimensional_war",name:"Dimensional War",description:"Fight enemies from parallel universes.",duration:m(43200),soldierCost:m(5e7),requiredUnits:{paladin:m(500),void_sentinel:m(10)},rewardArtifactId:"galactic_map",icon:"",baseRisk:m(.7)},{id:"reality_defense",name:"Reality Defense",description:"Protect the fabric of existence itself.",duration:m(86400),soldierCost:m(1e9),requiredUnits:{void_sentinel:m(100)},rewardArtifactId:"reality_shard",icon:"",baseRisk:m(.8)}],yv=[{id:"treasurer",name:"Royal Treasurer",description:"Auto-clicks once every 5 seconds. Can be upgraded.",cost:m(5),icon:""},{id:"warmaster",name:"Warmaster",description:"Crusades are 25% faster and 50% safer. Can be upgraded.",cost:m(20),icon:""},{id:"guildmaster",name:"Guildmaster",description:"Buildings are 10% cheaper. Can be upgraded.",cost:m(50),icon:""},{id:"alchemist",name:"Court Alchemist",description:"Doubles chance of Random Events. Can be upgraded.",cost:m(100),icon:""},{id:"chronomancer",name:"Chronomancer",description:"Reduces decree cooldowns by 25%. Can be upgraded.",cost:m(1e3),icon:""},{id:"void_scholar",name:"Void Scholar",description:"Increases Renown gain by 20%. Can be upgraded.",cost:m(1e4),icon:""},{id:"cosmic_mage",name:"Cosmic Mage",description:"All production bonuses increased by 15%. Can be upgraded.",cost:m(1e5),icon:""},{id:"time_keeper",name:"Time Keeper",description:"Decree cooldowns are 50% shorter. Can be upgraded.",cost:m(1e8),icon:""}],vv=(r,e)=>r.cost.times(m(3).pow(e)),Wr=(r,e)=>{const a={treasurer:m(1),warmaster:m(.25),guildmaster:m(.1),alchemist:m(1),chronomancer:m(.25),void_scholar:m(.2),cosmic_mage:m(.15),time_keeper:m(.5)}[r]||m(1),l=r==="void_scholar"?m(1.2).pow(e):m(1.2).pow(e.minus(m(1)));return a.times(l)};m(10),m(25),m(50),m(100),m(250),m(500);const _c=[{id:"local_villages",name:"Local Villages",description:"Safe, quick trade with neighbors.",baseDuration:m(300),risk:m(.1),maxInvestment:m(1e6),rewardMultiplier:m(1.5),icon:""},{id:"iron_dwarves",name:"Iron Mountain Dwarves",description:"High risk, high reward trade for precious metals.",baseDuration:m(1800),risk:m(.4),maxInvestment:m(1e9),rewardMultiplier:m(3),icon:""},{id:"high_elves",name:"High Elven Spires",description:"Long expeditions for magical artifacts.",baseDuration:m(7200),risk:m(.6),maxInvestment:m(1e18),rewardMultiplier:m(10),icon:""},{id:"void_traders",name:"Void Walkers",description:"Inter-dimensional trade. Extreme danger.",baseDuration:m(21600),risk:m(.9),maxInvestment:m(1e18),rewardMultiplier:m(100),icon:""}],_v=[{id:"great_pyramid",name:"The Golden Pyramid",description:"A monument to eternal wealth.",icon:"",bonusDescription:"Trade Routes are 50% safer and 2x faster.",stages:[{name:"Foundation",description:"Lay the base of the massive structure.",cost:[{type:"gold",amount:m(1e18)},{type:"soldiers",amount:m(5e4)}]},{name:"Structure",description:"Build the limestone walls.",cost:[{type:"gold",amount:m(1e18)},{type:"soldiers",amount:m(25e4)},{type:"knight",amount:m(1e3)}]},{name:"Capstone",description:"Place the golden capstone.",cost:[{type:"gold",amount:m(1e18)},{type:"paladin",amount:m(500)},{type:"renown",amount:m(1e3)}]}]},{id:"sky_citadel",name:"Sky Citadel",description:"A floating fortress to rule the skies.",icon:"",bonusDescription:"Global Production x100 (Permanent).",stages:[{name:"Anti-Gravity Base",description:"Enchant the earth to float.",cost:[{type:"gold",amount:m(1e18)},{type:"soldiers",amount:m(1e18)}]},{name:"Cloud Towers",description:"Construct towers that pierce the heavens.",cost:[{type:"gold",amount:m(1e18)},{type:"paladin",amount:m(5e3)}]},{name:"Storm Core",description:"Harness lightning to power the city.",cost:[{type:"gold",amount:m(1e18)},{type:"void_sentinel",amount:m(100)},{type:"renown",amount:m(1e18)}]}]},{id:"void_gate",name:"Gate of Oblivion",description:"A portal to the source of all magic.",icon:"",bonusDescription:"Unlocks 'Dark Mirror' mode (Coming Soon) & Offline Gains 100%.",stages:[{name:"Rift Stabilizer",description:"Prevent reality from collapsing.",cost:[{type:"gold",amount:m(1e18)},{type:"void_sentinel",amount:m(1e3)}]},{name:"Event Horizon",description:"Expand the tear in space-time.",cost:[{type:"gold",amount:m(1e18)},{type:"renown",amount:m(1e18)}]},{name:"Void Anchor",description:"Bind the void to your will.",cost:[{type:"gold",amount:m(1e18)},{type:"void_sentinel",amount:m(1e4)},{type:"renown",amount:m(1e18)}]}]}],ef=100,jf=(r,e=!1,i=!1,a=!1)=>({display:"flex",alignItems:"center",padding:"var(--panel-padding)",background:i?"rgba(0,0,0,0.05)":e?"rgba(46, 125, 50, 0.1)":a?"#f3e5f5":"var(--panel-bg)",border:"1px solid",borderColor:i?"rgba(0,0,0,0.2)":a?"#7b1fa2":r?"var(--border-color)":"rgba(0,0,0,0.1)",borderRadius:"2px",cursor:r&&!i?"pointer":"default",opacity:r&&!i||e?1:.7,transition:"all 0.2s",boxShadow:r&&!i?"2px 2px 0 rgba(0,0,0,0.1)":"none",position:"relative",userSelect:"none",marginBottom:"var(--gap-size)",filter:i?"grayscale(1)":"none"}),bl={display:"flex",flexDirection:"column",gap:"var(--gap-size)",height:"100%",overflowY:"auto",padding:"var(--panel-padding)"},xE=({gameState:r,onBuyUpgrade:e})=>{const i=Bi.filter(a=>!(r.upgrades.includes(a.id)||a.triggerId&&(r.buildings[a.triggerId]||m(0)).lt(a.triggerCount||m(0))||a.currency==="renown"&&r.renown.lt(a.cost.times(m(.1)))));return i.length===0?p.jsxs("div",{style:{...bl,justifyContent:"center",alignItems:"center",color:"var(--text-secondary)"},children:[p.jsx("div",{children:"No upgrades available yet."}),p.jsx("div",{style:{fontSize:"0.8rem",marginTop:"5px"},children:"Build more structures to unlock new technologies!"})]}):(i.sort((a,l)=>a.currency==="renown"&&l.currency!=="renown"?-1:a.currency!=="renown"&&l.currency==="renown"?1:a.cost.cmp(l.cost)),p.jsx("div",{style:bl,children:i.map(a=>{const l=a.currency==="renown",d=l?r.renown.gte(a.cost):r.gold.gte(a.cost);return p.jsxs("div",{style:jf(d,!1,!1,l),onClick:()=>d&&e(a.id),"data-tooltip":`${a.name}: ${a.description}`,children:[p.jsx("div",{style:{fontSize:"1.4rem",marginRight:"15px",width:"30px",textAlign:"center"},children:""}),p.jsxs("div",{style:{flex:1},children:[p.jsx("div",{style:{fontWeight:"bold",color:l?"#4a148c":"var(--text-color)"},children:a.name}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:a.description})]}),p.jsxs("div",{style:{textAlign:"right",fontWeight:"bold",color:d?l?"#4a148c":"var(--accent-color)":"var(--text-secondary)"},children:[ye(a.cost,r.numberFormat)," ",l?"":"G"]})]},a.id)})}))},AE=({gameState:r,onBuyBuilding:e,onSetBuyAmount:i})=>{var _;const a=r.advisors.includes("guildmaster"),l=m(a?.9:1),d=((_=r.interface)==null?void 0:_.lastBuyAmount)||m(1),[f,y]=_e.useState(1);_e.useEffect(()=>{const x=U=>{U.ctrlKey?y(10):U.shiftKey?y(100):y(1)},A=U=>x(U),N=U=>x(U);return window.addEventListener("keydown",A),window.addEventListener("keyup",N),()=>{window.removeEventListener("keydown",A),window.removeEventListener("keyup",N)}},[]);const b=(x,A)=>{var pe;let N=A;const U=((pe=r.weather)==null?void 0:pe.current)||"clear";U==="sunny"&&(x==="peasant"||x==="field")||U==="rainy"&&(x==="silver_mine"||x==="alchemist")?N=N.times(m(1.2)):U==="stormy"?(x==="blacksmith"&&(N=N.times(m(1.3))),x==="field"&&(N=N.times(m(.8)))):U==="windy"&&x==="market"&&(N=N.times(m(1.15)));let ne=m(0);Bi.forEach(ie=>{r.upgrades.includes(ie.id)&&ie.type==="building"&&ie.targetId===x&&ie.multiplier&&(ne=ne.plus(A.times(ie.multiplier.minus(m(1)))))});let re=N.plus(ne),F=m(1);return Bi.forEach(ie=>{r.upgrades.includes(ie.id)&&ie.type==="global"&&ie.multiplier&&(F=F.times(ie.multiplier))}),r.artifacts.forEach(ie=>{const me=Lc.find(ve=>ve.id===ie);me&&(F=F.times(me.globalMultiplier))}),F=F.times(m(1).plus(r.renown.times(m(.01)))),(r.activeDecrees.royal_feast||m(0)).gt(m(Date.now()))&&(F=F.times(m(2))),x==="astral_rift"&&(r.upgrades.includes("void_harvesting")&&(F=F.times(m(10))),r.upgrades.includes("singularity")&&(F=F.times(m(5)))),re.times(F)};return p.jsxs("div",{style:bl,children:[p.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"10px",justifyContent:"center"},children:[m(1),m(10),m(100),m(500),m(1e3),m(-1)].map(x=>p.jsx("button",{onClick:()=>i(x),style:{padding:"5px 10px",border:"1px solid var(--accent-color)",background:d.equals(x)?"var(--accent-color)":"var(--panel-bg)",color:d.equals(x)?"var(--text-on-accent)":"var(--text-color)",cursor:"pointer",fontWeight:"bold",fontSize:"0.8rem"},children:x.equals(m(-1))?"Max":`${x.toString()}`},`amount-${x.toString()}`))}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center"},children:"Hold Ctrl: x10  Hold Shift: x100"}),p.jsxs("h3",{style:{fontSize:"1rem",color:"var(--text-secondary)",fontWeight:"bold",borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:["Estates ",a&&p.jsx("span",{style:{color:"var(--success-color)",fontSize:"0.8rem"},children:"(Guildmaster Discount Active)"})]}),Ys.map((x,A)=>{if(A>0){const Se=Ys[A-1].id,Te=r.buildings[Se]||m(0),I=r.buildings[x.id]||m(0);if(Te.lt(m(10))&&I.eq(m(0)))return null}const N=r.buildings[x.id]||m(0);let U=m(0),ne=m(0);d.equals(m(-1))?(U=e0(x.baseCost,N,r.gold.div(l)),U.eq(m(0))?(U=m(1),ne=sE(x.baseCost,N).times(l).floor()):ne=Ya(x.baseCost,N,U).times(l).floor()):(U=d,ne=Ya(x.baseCost,N,U).times(l).floor());const re=r.gold.gte(ne),F=d.equals(m(-1))&&e0(x.baseCost,N,r.gold.div(l)).eq(m(0)),pe=b(x.id,x.baseProduction);let ie=U,me=ne,ve=re;return d.equals(m(-1))||(ie=U.times(f),me=Ya(x.baseCost,N,ie).times(l).floor(),ve=r.gold.gte(me)),p.jsxs("div",{style:jf(ve&&!F),onClick:()=>{if(!(ve&&!F))return;const Se=d.equals(m(-1))?U:ie;e(x.id,Se.toNumber())},"data-tooltip":`${x.name}: ${x.description}`,children:[p.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:x.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[p.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:x.name}),p.jsx("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--accent-color)"},children:ye(N,r.numberFormat)})]}),p.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--success-color)",marginTop:"2px",display:"flex",flexDirection:"column"},children:[p.jsxs("span",{children:["Each: ",ye(pe,r.numberFormat),"/s"]}),N.gt(m(0))&&p.jsxs("span",{style:{fontSize:"0.75rem",opacity:.9,color:"var(--text-secondary)"},children:["Total: +",ye(pe.times(N),r.numberFormat),"/s"]})]})]}),p.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[p.jsx("div",{style:{color:ve&&!F?"#b8860b":"var(--text-secondary)",fontWeight:"bold"},children:ye(d.equals(m(-1))?ne:me,r.numberFormat)}),!d.equals(m(-1))&&p.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["for ",ye(ie,r.numberFormat)]})]})]},x.id)})]})},SE=({gameState:r,onActivateDecree:e})=>{const[i,a]=_e.useState(Date.now());return _e.useEffect(()=>{const l=setInterval(()=>a(Date.now()),1e3);return()=>clearInterval(l)},[]),p.jsxs("div",{style:bl,children:[p.jsx("div",{style:{marginBottom:"10px",fontSize:"0.9rem",fontStyle:"italic",color:"var(--text-secondary)"},children:"Issue Royal Decrees to boost your kingdom."}),pv.map(l=>{const d=m(i),f=r.activeDecrees[l.id]||m(0),y=r.decreeCooldowns[l.id]||m(0),b=l.unlockCondition?!l.unlockCondition(r):!1,_=f.gt(d),x=y.gt(d),A=!_&&!x&&!b;let N="Ready";return b?N="LOCKED":_?N="Active: "+f.minus(d).dividedBy(m(1e3)).ceil().toString()+"s":x&&(N="Wait: "+y.minus(d).dividedBy(m(1e3)).ceil().toString()+"s"),p.jsxs("div",{style:jf(A,_,b),onClick:()=>A&&e(l.id),"data-tooltip":b?`LOCKED: ${l.unlockDescription}`:`${l.name}: ${l.description}`,children:[p.jsx("div",{style:{fontSize:"1.8rem",marginRight:"15px"},children:b?"":l.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsx("div",{style:{fontWeight:"bold",color:b?"var(--text-secondary)":"var(--text-color)"},children:l.name}),p.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:l.description}),b&&p.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--danger-color)",marginTop:"2px",fontWeight:"bold"},children:["Requirement: ",l.unlockDescription]})]}),p.jsx("div",{style:{textAlign:"right",fontWeight:"bold",color:A?"var(--success-color)":_?"blue":b?"var(--text-secondary)":"var(--danger-color)",minWidth:"80px"},children:N})]},l.id)})]})},wE=({gameState:r,onTrainSoldier:e,onTrainElite:i})=>{const a=(r.buildings.castle||m(0)).gt(m(0)),[l,d]=_e.useState(1);return _e.useEffect(()=>{const f=_=>{_.ctrlKey?d(10):_.shiftKey?d(100):d(1)},y=_=>f(_),b=_=>f(_);return window.addEventListener("keydown",y),window.addEventListener("keyup",b),()=>{window.removeEventListener("keydown",y),window.removeEventListener("keyup",b)}},[]),p.jsxs("div",{style:bl,children:[p.jsxs("div",{style:{padding:"15px",background:"#e0f2f1",borderRadius:"4px",marginBottom:"10px",border:"1px solid #b2dfdb"},children:[p.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"5px",color:"#004d40"},children:" Royal Army"}),p.jsx("div",{style:{fontSize:"2rem",color:"#004d40"},children:ye(r.soldiers,r.numberFormat)}),p.jsx("div",{style:{fontSize:"0.8rem",color:"#00695c"},children:"Basic Soldiers Ready"})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"20px"},children:[p.jsxs("button",{className:"btn",disabled:r.gold.lt(ii.times(m(1*l))),onClick:()=>{e(1*l)},children:["Train 1 (",ye(ii.times(m(1*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",disabled:r.gold.lt(ii.times(m(10*l))),onClick:()=>{e(10*l)},children:["Train 10 (",ye(ii.times(m(10*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",disabled:r.gold.lt(ii.times(m(100*l))),onClick:()=>{e(100*l)},children:["Train 100 (",ye(ii.times(m(100*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",disabled:r.gold.lt(ii.times(m(1e3*l))),onClick:()=>{e(1e3*l)},children:["Train 1K (",ye(ii.times(m(1e3*l)),r.numberFormat)," G)"]}),p.jsxs("button",{className:"btn",style:{gridColumn:"1 / -1",background:"#e65100",borderColor:"#bf360c"},disabled:r.gold.lt(ii.times(m(1e6*l))),onClick:()=>{e(1e6*l)},children:["Train 1M (",ye(ii.times(m(1e6*l)),r.numberFormat)," G)"]})]}),p.jsxs("div",{style:{borderTop:"2px solid var(--border-color)",paddingTop:"15px"},children:[p.jsxs("h3",{style:{fontSize:"1rem",color:"#4a148c",fontWeight:"bold",marginBottom:"10px"},children:["Royal Academy ",p.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal",color:"var(--text-secondary)"},children:"(Convert Soldiers)"})]}),pc.map(f=>{const y=r.eliteUnits[f.id]||m(0),b=m(l),_=f.goldCost.times(b),x=f.soldierCost.times(b),A=r.gold.gte(_)&&r.soldiers.gte(x);return p.jsxs("div",{style:{marginBottom:"10px",padding:"10px",background:"#f3e5f5",border:"1px solid #7b1fa2",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px"},children:[p.jsx("div",{style:{fontSize:"2rem"},children:f.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsxs("div",{style:{fontWeight:"bold",color:"#4a148c",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[p.jsxs("span",{children:[f.name," ",p.jsxs("span",{style:{color:"#000"},children:["x",ye(y,r.numberFormat)]})]}),p.jsxs("button",{className:"btn",style:{padding:"5px 10px",fontSize:"0.8rem",background:A?"#7b1fa2":"#999"},disabled:!A,onClick:()=>i(f.id,l),children:["Train ",l>1?`x${l}`:""]})]}),p.jsx("div",{style:{fontSize:"0.85rem",color:"#4a148c",marginTop:"4px"},children:f.description}),p.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"2px"},children:["Requires ",ye(_,r.numberFormat)," Gold and ",ye(x,r.numberFormat)," Soldiers"]})]})]},f.id)})]}),p.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:a?"#fff8e1":"#ffebee",border:`1px solid ${a?"#ffb300":"#ef5350"}`,borderRadius:"4px"},children:[p.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px",color:a?"#f57f17":"#c62828"},children:a?" Orders Received":" Requirements Missing"}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:a?"Send your army on Crusades via the 'Conquest' menu. Elite units are required for high-level dimensions.":"You have soldiers, but no headquarters! You must build a **Castle** to command your troops."})]})]})},CE=({gameState:r,gps:e,onClick:i,onEventInteract:a,onOpenConquest:l,onOpenTavern:d,onOpenPrestige:f,onOpenSettings:y,onOpenCouncil:b,onOpenStatistics:_,onOpenLeaderboard:x,onOpenEmpire:A,isIdle:N})=>{var I,R,w,O;const[U,ne]=_e.useState([]),re=_e.useRef(null),F=r.interface||{showFloatingText:!0,showWeatherWidget:!0},pe=V=>{var z;if(F.showFloatingText){const D=(z=re.current)==null?void 0:z.getBoundingClientRect();if(D){const He=V.clientX-D.left+(Math.random()*40-20),st=V.clientY-D.top+(Math.random()*40-20);let Y=m(1);Bi.filter(ue=>ue.type==="click"&&r.upgrades.includes(ue.id)).forEach(ue=>{ue.multiplier&&(Y=Y.times(ue.multiplier))}),(r.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(Y=Y.times(m(5))),Y=Y.times(m(1).plus(r.renown.times(m(.01))));const de="+"+ye(Y,r.numberFormat),we={id:Date.now(),x:He,y:st,val:de};ne(ue=>[...ue,we]),setTimeout(()=>{ne(ue=>ue.filter(Fe=>Fe.id!==we.id))},1e3)}}i(V)},ie=gv[((I=r.weather)==null?void 0:I.current)||"clear"],me={transition:"all 0.8s ease-in-out"},ve=N?{position:"fixed",bottom:"120px",right:"30px",transform:"scale(0.8)",transformOrigin:"bottom right",textAlign:"right",zIndex:100,...me}:{transform:"scale(1)",marginBottom:"3rem",zIndex:10,textAlign:"center",...me},Se=N?{width:"80px",height:"80px",fontSize:"2rem",position:"fixed",bottom:"30px",right:"30px",borderRadius:"50%",border:"4px solid #b8860b",background:"radial-gradient(circle, #ffd700 0%, #daa520 100%)",boxShadow:"0 0 0 2px #8b4513, 0 5px 10px rgba(0,0,0,0.3)",zIndex:100,transform:"rotate(-10deg)",...me}:{width:"260px",height:"260px",fontSize:"6rem",borderRadius:"50%",border:"8px solid #b8860b",background:"radial-gradient(circle, #ffd700 0%, #daa520 100%)",boxShadow:"0 0 0 4px #8b4513, 0 10px 20px rgba(0,0,0,0.3)",position:"relative",transform:"rotate(0deg)",zIndex:5,...me},Te={opacity:N?0:1,transition:"opacity 0.5s ease-in-out",pointerEvents:N?"none":"auto"};return p.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--panel-padding)",height:"100%",overflow:"hidden"},children:[F.showWeatherWidget&&p.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:20,background:ie.color,padding:"8px 12px",borderRadius:"20px",border:"2px solid rgba(0,0,0,0.1)",boxShadow:"2px 2px 5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px",cursor:"help",...Te},"data-tooltip":`${ie.name}: ${ie.description}`,children:[p.jsx("span",{style:{fontSize:"1.5rem"},children:ie.icon}),p.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#222"},children:ie.name}),p.jsxs("div",{style:{fontSize:"0.7rem",color:"#444"},children:[m(Number(((R=r.weather)==null?void 0:R.timeLeft)||0)).ceil().toString(),"s remaining"]})]})]}),p.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:20,display:"flex",gap:"5px",...Te},children:[p.jsx("button",{onClick:x,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Leaderboard",children:""}),p.jsx("button",{onClick:_,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Statistics",children:""}),p.jsx("button",{onClick:y,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Kingdom Settings",children:""})]}),p.jsxs("div",{style:ve,children:[p.jsx("div",{style:{fontSize:"1rem",color:N?"var(--text-color)":"var(--text-secondary)",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"2px",textShadow:N?"1px 1px 2px #000":"none"},children:"Royal Treasury"}),p.jsx("div",{style:{fontSize:"3rem",fontFamily:"var(--font-main)",color:"var(--text-color)",textShadow:N?"2px 2px 4px #000":"2px 2px 0px rgba(255, 215, 0, 0.4)"},children:ye(r.gold,r.numberFormat)}),p.jsxs("div",{style:{marginTop:"5px",fontSize:"1.1rem",color:N?"#90ee90":"var(--success-color)",fontStyle:"italic",textShadow:N?"1px 1px 2px #000":"none"},children:["+",ye(e,r.numberFormat)," gold / sec"]}),p.jsxs("div",{style:{marginTop:"15px",padding:"5px 15px",background:N?"rgba(0,0,0,0.5)":"rgba(103, 58, 183, 0.1)",border:"1px solid rgba(103, 58, 183, 0.3)",borderRadius:"20px",display:"inline-block"},children:[p.jsxs("span",{style:{color:N?"#b39ddb":"#673ab7",fontWeight:"bold"},children:[" Renown: ",ye(r.renown,r.numberFormat)]}),!N&&p.jsxs("span",{style:{fontSize:"0.8rem",color:"#673ab7",marginLeft:"5px"},children:["(+",r.renown.times(m(1)).floor().toString(),"% Bonus)"]})]})]}),p.jsxs("div",{style:{position:"relative",marginBottom:N?0:"3rem"},children:[p.jsx("button",{ref:re,style:{...Se,display:"flex",alignItems:"center",justifyContent:"center",outline:"none",color:"#5d4037",cursor:"pointer"},onClick:pe,onMouseDown:V=>!N&&(V.currentTarget.style.transform="scale(0.96)"),onMouseUp:V=>!N&&(V.currentTarget.style.transform="scale(1)"),onMouseLeave:V=>!N&&(V.currentTarget.style.transform="scale(1)"),children:""}),!N&&U.map(V=>p.jsx("div",{className:"floating-text",style:{left:V.x,top:V.y},children:V.val},V.id))]}),p.jsxs("div",{style:{display:"flex",gap:"10px",zIndex:10,flexWrap:"wrap",justifyContent:"center",...Te},children:[(((w=r.buildings.castle)==null?void 0:w.gt(m(0)))||r.soldiers.gt(m(0)))&&p.jsx("button",{className:"btn",onClick:l,children:" Conquest"}),r.buildings.castle&&r.buildings.castle.gt(m(0))&&p.jsx("button",{className:"btn",style:{background:"#3e2723",borderColor:"#ffd700"},onClick:A,children:" Empire"}),((O=r.buildings.tavern)==null?void 0:O.gt(m(0)))&&p.jsx("button",{className:"btn",onClick:d,children:" Tavern"}),(r.renown.gt(m(0))||r.gold.gt(m(1e5)))&&p.jsx("button",{className:"btn",style:{background:"#4a148c"},onClick:b,children:" Council"}),(r.totalGold.gt(m(5e5))||r.renown.gt(m(0)))&&p.jsx("button",{className:"btn",style:{background:"#673ab7"},onClick:f,children:" Legacy"})]}),!N&&r.event&&r.event.type==="dragon"&&p.jsx("div",{className:"dragon-event",onMouseDown:()=>a(r.event),style:{top:"20%"},children:""}),!N&&r.event&&r.event.type==="merchant"&&p.jsxs("div",{style:{position:"absolute",right:"20px",top:"100px",background:"#fff3e0",padding:"10px",border:"2px solid orange",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>a(r.event),children:[p.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:""}),p.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Merchant"}),p.jsx("small",{style:{color:"#444"},children:"Click for gift"})]}),!N&&r.event&&r.event.type==="jester"&&p.jsxs("div",{style:{position:"absolute",left:"20px",top:"100px",background:"#fce4ec",padding:"10px",border:"2px solid pink",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>a(r.event),children:[p.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:""}),p.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Jester"}),p.jsx("small",{style:{color:"#444"},children:"Risk it all?"})]})]})},RE=({gameState:r})=>{const e={display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(60px, 1fr))",gap:"10px",padding:"10px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px",marginTop:"10px"},i=a=>({width:"100%",aspectRatio:"1",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",border:`2px solid ${a?"var(--gold-color)":"#ccc"}`,background:a?"#fff8e1":"#eee",borderRadius:"4px",opacity:a?1:.5,cursor:"help",position:"relative"});return p.jsxs("div",{style:{marginTop:"auto",padding:"10px"},children:[p.jsx("h3",{style:{fontSize:"1rem",margin:"0 0 5px 0"},children:"Royal Decree (Achievements)"}),p.jsx("div",{style:e,children:yc.map(a=>{const l=r.achievements.includes(a.id);return p.jsx("div",{style:i(l),"data-tooltip":l?`${a.name}: ${a.description}`:"Locked",children:p.jsx("div",{style:{fontSize:"1.5rem",filter:l?"none":"grayscale(100%)"},children:a.icon})},a.id)})}),p.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"5px",textAlign:"center"},children:[r.achievements.length," / ",yc.length," Unlocked"]})]})},DE=({gameState:r,onStartCrusade:e,onClose:i})=>{var b;const a=r.conquest.active?vc.find(_=>_.id===r.conquest.crusadeId):null,l=r.advisors.includes("warmaster"),d=m(l?.75:1),[f,y]=_e.useState(0);return _e.useEffect(()=>{if(a&&r.conquest.startTime){const _=setInterval(()=>{const x=m(Date.now()-m(r.conquest.startTime).toNumber()).dividedBy(m(1e3)),A=m(a.duration).times(d),N=m(100).min(x.dividedBy(A).times(m(100)));y(N.toNumber())},1e3);return()=>clearInterval(_)}},[a,r.conquest.startTime,d]),p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"600px"},children:[p.jsx("h2",{children:"War Room"}),p.jsxs("div",{style:{marginBottom:"20px",display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[r.artifacts.map(_=>{const x=Lc.find(A=>A.id===_);return p.jsx("div",{"data-tooltip":x==null?void 0:x.description,style:{fontSize:"2rem",width:"3.5rem",height:"3.5rem",display:"flex",justifyContent:"center",alignItems:"center",border:"2px solid gold",borderRadius:"50%",background:"rgba(255, 215, 0, 0.1)",flexShrink:0},children:x==null?void 0:x.icon},_)}),r.artifacts.length===0&&p.jsx("span",{style:{color:"var(--text-secondary)"},children:"No artifacts claimed yet."})]}),a?p.jsxs("div",{style:{textAlign:"center"},children:[p.jsxs("h3",{children:["Current Crusade: ",a.name]}),p.jsx("div",{style:{width:"100%",height:"20px",background:"#ccc",borderRadius:"10px",overflow:"hidden",margin:"20px 0"},children:p.jsx("div",{style:{width:`${f}%`,height:"100%",background:"var(--accent-color)",transition:"width 1s linear"}})}),l&&p.jsx("div",{style:{color:"var(--success-color)",fontSize:"0.8rem",marginBottom:"5px"},children:"Warmaster Active (Faster & Safer)"}),p.jsxs("div",{children:["Time remaining: ",Mn.max(m(0),m(a.duration).times(d).minus(m(Date.now()-(((b=r.conquest.startTime)==null?void 0:b.toNumber())||Date.now()))).dividedBy(m(1e3))).ceil().toString(),"s"]})]}):p.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:vc.map(_=>{var ve;const x=r.artifacts.includes(_.rewardArtifactId);let A=r.soldiers.gte(m(_.soldierCost)),N=[];if(_.requiredUnits){for(const[Se,Te]of Object.entries(_.requiredUnits))if((r.eliteUnits[Se]||m(0)).lt(Te)){A=!1;const R=((ve=pc.find(w=>w.id===Se))==null?void 0:ve.name)||Se;N.push(`${Te} ${R}`)}}const U=m(_.duration).times(d),ne=_.baseRisk||m(0),re=l?ne.times(m(.5)):ne,F=m(1).minus(re).times(m(100)).floor();let pe="var(--success-color)";re.gt(m(.1))&&(pe="orange"),re.gt(m(.3))&&(pe="var(--danger-color)");const ie=x?"#f0f4c3":"transparent",me=x?"gold":"var(--border-color)";return p.jsxs("div",{style:{border:`1px solid ${me}`,background:ie,padding:"10px",marginBottom:"10px",borderRadius:"4px",textAlign:"left",position:"relative"},children:[x&&p.jsx("div",{style:{position:"absolute",top:5,right:5,fontSize:"1.2rem"},children:""}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",paddingRight:"30px"},children:[p.jsxs("strong",{children:[_.icon," ",_.name]}),p.jsxs("span",{children:[U.gte(m(3600))?`${Math.floor(U.toNumber()/3600)}h `:"",Math.floor(U.toNumber()%3600/60),"m",U.toNumber()%60>0&&` ${Math.floor(U.toNumber()%60)}s`]})]}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:_.description}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"10px",fontSize:"0.85rem"},children:[p.jsxs("div",{children:["Cost: ",p.jsxs("strong",{children:[ye(_.soldierCost,r.numberFormat)," Soldiers"]})]}),p.jsxs("div",{style:{color:pe,fontWeight:"bold"},children:["Success Chance: ",F.toString(),"%"]})]}),_.requiredUnits&&p.jsxs("div",{style:{fontSize:"0.8rem",marginTop:"5px",color:N.length>0?"var(--danger-color)":"var(--success-color)"},children:["Requires: ",Object.entries(_.requiredUnits).map(([Se,Te])=>{var w;const I=((w=pc.find(O=>O.id===Se))==null?void 0:w.name)||Se,R=r.eliteUnits[Se]||m(0);return`${I} (${R.toString()}/${Te.toString()}) `})]}),re.gt(m(0))&&p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",marginTop:"2px"},children:"Failure refunds 50% soldiers."}),p.jsx("button",{className:"btn",style:{width:"100%",marginTop:"5px",background:x?"#827717":"var(--accent-color)"},disabled:!A,onClick:()=>e(_.id),children:x?"Replay Mission (Critical Chance)":"Start Campaign"})]},_.id)})}),p.jsx("button",{className:"btn",onClick:i,style:{marginTop:"20px"},children:"Close"})]})})},NE=({gameState:r,onGamble:e,onClose:i})=>{const[a,l]=_e.useState("coin"),[d,f]=_e.useState(10),[y,b]=_e.useState(""),[_,x]=_e.useState(null),A=()=>{if(r.gold.lt(m(d))){b("Not enough gold!");return}const U=Math.random()>.5;e(d,U),b(U?`Heads! You DOUBLED your money! (+${ye(d,r.numberFormat)} Profit)`:`Tails... You lost ${ye(d,r.numberFormat)} gold.`),x(null)},N=()=>{if(r.gold.lt(m(d))){b("Not enough gold!");return}const U=Math.floor(Math.random()*6)+1,ne=Math.floor(Math.random()*6)+1,re=U+ne;x(re);let F=0;if(re===7)b(`Rolled ${re}. A draw! Gold returned.`),e(0,!0);else if(re>7){re>=10?F=2:F=1.5;const pe=Math.floor(d*F);e(pe,!0),b(`Rolled ${re}! You won ${ye(pe,r.numberFormat)} gold!`)}else e(d,!1),b(`Rolled ${re}. You lost ${ye(d,r.numberFormat)} gold.`)};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{minHeight:"450px"},children:[p.jsx("h2",{style:{borderBottom:"none"},children:" The Rusty Tankard"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"center"},children:[p.jsx("button",{className:"btn ",style:{opacity:a==="coin"?1:.6},onClick:()=>l("coin"),children:"Coin Flip"}),p.jsx("button",{className:"btn ",style:{opacity:a==="dice"?1:.6},onClick:()=>l("dice"),children:"High Dice"})]}),p.jsxs("div",{style:{background:"#f9fbe7",padding:"20px",borderRadius:"8px",border:"1px solid #c0ca33"},children:[a==="coin"?p.jsxs("div",{style:{textAlign:"left",background:"rgba(255,255,255,0.5)",padding:"10px",borderRadius:"4px"},children:[p.jsx("strong",{children:"Rules:"}),p.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[p.jsx("li",{children:"50% Chance to Win."}),p.jsxs("li",{children:["Win: ",p.jsx("strong",{children:"+100% Profit"})," (Doubles your money)."]}),p.jsx("li",{children:"Lose: Lost the bet."})]})]}):p.jsxs("div",{style:{textAlign:"left",background:"rgba(255,255,255,0.5)",padding:"10px",borderRadius:"4px"},children:[p.jsx("strong",{children:"Dice Rules (Roll 2-12):"}),p.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:[p.jsxs("li",{children:[p.jsx("strong",{children:"7:"})," Draw (Bet returned)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"8-9:"})," Win +50% Profit (1.5x)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"10-12:"})," Win +100% Profit (2x)"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"2-6:"})," Loss"]})]})]}),p.jsxs("div",{style:{margin:"20px 0"},children:[p.jsx("label",{children:"Bet Amount: "}),p.jsx("input",{type:"number",value:d,onChange:U=>f(Math.max(1,parseInt(U.target.value)||0)),style:{padding:"8px",width:"120px",fontSize:"1rem",border:"1px solid #aaa"}})]}),a==="dice"&&_!==null&&p.jsxs("div",{style:{fontSize:"3rem",margin:"10px"},children:[" ",_]}),p.jsx("button",{className:"btn",style:{fontSize:"1.2rem",padding:"10px 30px"},onClick:a==="coin"?A:N,children:a==="coin"?"Flip Coin":"Roll Dice"}),y&&p.jsx("div",{style:{marginTop:"15px",fontWeight:"bold",fontSize:"1.1rem",color:y.includes("won")||y.includes("DOUBLED")||y.includes("draw")?"green":"red"},children:y})]}),p.jsx("div",{style:{marginTop:"30px"},children:p.jsx("button",{className:"btn",style:{backgroundColor:"#5d4037"},onClick:i,children:"Leave Tavern"})})]})})},IE=({gameState:r,onPrestige:e,onClose:i})=>{const a=Math.floor(r.gold.toNumber()/1e9),l=Math.max(0,a);return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{border:"4px solid #673ab7"},children:[p.jsx("h2",{style:{color:"#673ab7"},children:" Abdication"}),p.jsx("p",{children:"Are you ready to pass the crown to your heir?"}),p.jsxs("div",{style:{textAlign:"left",margin:"20px 0",background:"rgba(243, 229, 245, 0.5)",padding:"15px",borderRadius:"4px"},children:[p.jsx("div",{children:p.jsx("strong",{children:"You will lose:"})}),p.jsxs("ul",{children:[p.jsx("li",{children:"All Gold"}),p.jsx("li",{children:"All Buildings"}),p.jsx("li",{children:"All Upgrades"}),p.jsx("li",{children:"Current Soldiers"})]}),p.jsx("div",{children:p.jsx("strong",{children:"You will keep:"})}),p.jsxs("ul",{children:[p.jsx("li",{children:"Achievements"}),p.jsx("li",{children:"Artifacts"}),p.jsxs("li",{children:["Current Renown (",ye(r.renown,r.numberFormat),")"]})]})]}),p.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:[p.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)",fontStyle:"italic"},children:["Requirement: 1 Renown per 1,000,000,000 Current Gold (",ye(r.gold,r.numberFormat),")"]}),"You will gain: ",p.jsxs("strong",{children:[ye(l,r.numberFormat)," Renown"]}),p.jsxs("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:["(New Total Bonus: +",ye((r.renown.toNumber()+l)*1,r.numberFormat),"%)"]})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[p.jsx("button",{className:"btn",style:{background:"#666"},onClick:i,children:"Cancel"}),p.jsx("button",{className:"btn",style:{background:"#673ab7"},onClick:e,disabled:l<=0,children:l>0?"Abdicate":"Need more Gold"})]})]})})},ME=({gameState:r,onClose:e,onHardReset:i,onSave:a,onOpenChangelog:l,onSetTheme:d,onSetNumberFormat:f,onToggleIdleMode:y,onUpdateInterface:b})=>{var de,we,ue,Fe;const[_,x]=mv.useState(!1),A=r.interface||{density:"normal",fontSize:"medium",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,layout:{left:1,center:1,right:1},borderWidth:4,customColors:{enabled:!1,bg:"",panel:"",text:"",accent:"",border:"",secondaryText:"",accentHover:"",gold:"",success:"",danger:""}},N=(de=A.layout.left)!=null&&de.toNumber?A.layout.left.toNumber():Number(A.layout.left),U=(we=A.layout.center)!=null&&we.toNumber?A.layout.center.toNumber():Number(A.layout.center),ne=(ue=A.layout.right)!=null&&ue.toNumber?A.layout.right.toNumber():Number(A.layout.right),re=(Fe=A.borderWidth)!=null&&Fe.toNumber?A.borderWidth.toNumber():Number(A.borderWidth),F=A.customColors||{},pe=String(F.bg||""),ie=String(F.panel||""),me=String(F.text||""),ve=String(F.secondaryText||""),Se=String(F.accent||""),Te=String(F.accentHover||""),I=String(F.gold||""),R=String(F.border||""),w=String(F.success||""),O=String(F.danger||""),V=()=>{_?i():x(!0)},z=(C,$)=>{b({layout:{...A.layout,[C]:$}})},D=(C,$)=>{b({customColors:{...A.customColors,[C]:$}})},He={display:"flex",gap:"5px",flexWrap:"wrap",justifyContent:"center"},st={marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",background:"rgba(0,0,0,0.03)",borderRadius:"4px"},Y={width:"100%",marginBottom:"5px"};return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",children:[p.jsx("h2",{children:" Royal Settings"}),p.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",maxHeight:"60vh",overflowY:"auto",paddingRight:"5px"},children:[p.jsx("h3",{style:{marginBottom:"10px"},children:"Layout Configuration"}),p.jsxs("div",{style:{marginBottom:"15px",background:"rgba(0,0,0,0.03)",padding:"10px",borderRadius:"4px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Column Widths (Ratio)"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[p.jsx("span",{style:{fontSize:"0.8rem"},children:"Left"}),p.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:N,onChange:C=>z("left",parseFloat(C.target.value)),style:Y}),p.jsx("span",{style:{fontSize:"0.8rem"},children:N})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[p.jsx("span",{style:{fontSize:"0.8rem"},children:"Center"}),p.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:U,onChange:C=>z("center",parseFloat(C.target.value)),style:Y}),p.jsx("span",{style:{fontSize:"0.8rem"},children:U})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center"},children:[p.jsx("span",{style:{fontSize:"0.8rem"},children:"Right"}),p.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:ne,onChange:C=>z("right",parseFloat(C.target.value)),style:Y}),p.jsx("span",{style:{fontSize:"0.8rem"},children:ne})]})]}),p.jsx("h3",{style:{marginBottom:"10px"},children:"Design Studio"}),p.jsxs("div",{style:st,children:[p.jsx("div",{children:p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Border Thickness"})}),p.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[p.jsx("input",{type:"range",min:"1",max:"10",value:re,onChange:C=>b({borderWidth:parseInt(C.target.value)})}),p.jsxs("span",{children:[re,"px"]})]})]}),p.jsxs("div",{style:st,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Enable Custom Colors"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Override theme colors."})]}),p.jsx("input",{type:"checkbox",checked:A.customColors.enabled,onChange:C=>D("enabled",C.target.checked),style:{transform:"scale(1.5)"}})]}),A.customColors.enabled&&p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"},children:[p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Background",p.jsx("input",{type:"color",value:pe,onChange:C=>D("bg",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Panels",p.jsx("input",{type:"color",value:ie,onChange:C=>D("panel",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Borders",p.jsx("input",{type:"color",value:R,onChange:C=>D("border",C.target.value),style:{width:"100%"}})]}),p.jsx("div",{style:{gridColumn:"1 / -1",height:"1px",background:"#ccc",margin:"5px 0"}}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Primary Text",p.jsx("input",{type:"color",value:me,onChange:C=>D("text",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Secondary Text",p.jsx("input",{type:"color",value:ve,onChange:C=>D("secondaryText",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Gold/Value",p.jsx("input",{type:"color",value:I,onChange:C=>D("gold",C.target.value),style:{width:"100%"}})]}),p.jsx("div",{style:{gridColumn:"1 / -1",height:"1px",background:"#ccc",margin:"5px 0"}}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Accent/Buttons",p.jsx("input",{type:"color",value:Se,onChange:C=>D("accent",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Button Hover",p.jsx("input",{type:"color",value:Te,onChange:C=>D("accentHover",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Success/Green",p.jsx("input",{type:"color",value:w,onChange:C=>D("success",C.target.value),style:{width:"100%"}})]}),p.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Danger/Red",p.jsx("input",{type:"color",value:O,onChange:C=>D("danger",C.target.value),style:{width:"100%"}})]})]}),p.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),p.jsxs("div",{style:{marginBottom:"15px",opacity:A.customColors.enabled?.5:1,pointerEvents:A.customColors.enabled?"none":"auto"},children:[p.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:["Preset Themes ",A.customColors.enabled&&"(Disabled)"]}),p.jsx("div",{style:He,children:Object.values(df).map(C=>p.jsx("button",{className:"btn",style:{background:r.theme===C.id?"var(--accent-color)":"var(--panel-bg)",color:r.theme===C.id?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",padding:"5px 10px"},onClick:()=>d(C.id),children:C.name},C.id))})]}),p.jsxs("div",{style:{marginBottom:"15px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Font Size"}),p.jsx("div",{style:He,children:["small","medium","large"].map(C=>p.jsx("button",{className:"btn",style:{background:A.fontSize===C?"var(--accent-color)":"var(--panel-bg)",color:A.fontSize===C?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",textTransform:"capitalize"},onClick:()=>b({fontSize:C}),children:C},C))})]}),p.jsxs("div",{style:{marginBottom:"15px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Layout Density"}),p.jsx("div",{style:He,children:["compact","normal","spacious"].map(C=>p.jsx("button",{className:"btn",style:{background:A.density===C?"var(--accent-color)":"var(--panel-bg)",color:A.density===C?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",textTransform:"capitalize"},onClick:()=>b({density:C}),children:C},C))})]}),p.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),p.jsxs("div",{style:st,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Cinematic Idle Mode"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show landscape when inactive."})]}),p.jsx("button",{className:"btn",style:{background:r.idleModeEnabled?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:y,children:r.idleModeEnabled?"ON":"OFF"})]}),p.jsxs("div",{style:st,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Click Text"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show floating numbers on click."})]}),p.jsx("button",{className:"btn",style:{background:A.showFloatingText?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>b({showFloatingText:!A.showFloatingText}),children:A.showFloatingText?"ON":"OFF"})]}),p.jsxs("div",{style:st,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Weather Widget"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show weather info in top left."})]}),p.jsx("button",{className:"btn",style:{background:A.showWeatherWidget?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>b({showWeatherWidget:!A.showWeatherWidget}),children:A.showWeatherWidget?"ON":"OFF"})]}),p.jsxs("div",{style:st,children:[p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Reduce Motion"}),p.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Disable animations."})]}),p.jsx("button",{className:"btn",style:{background:A.reduceMotion?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>b({reduceMotion:!A.reduceMotion}),children:A.reduceMotion?"ON":"OFF"})]}),p.jsxs("div",{style:{marginTop:"15px"},children:[p.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Number Format"}),p.jsx("div",{style:He,children:["standard","scientific","plain"].map(C=>p.jsx("button",{className:"btn",style:{background:r.numberFormat===C?"var(--accent-color)":"var(--panel-bg)",color:r.numberFormat===C?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",padding:"5px 10px",textTransform:"capitalize"},onClick:()=>f(C),children:C},C))})]})]}),p.jsxs("div",{style:{borderTop:"2px solid #ccc",paddingTop:"15px",marginTop:"15px"},children:[p.jsx("h3",{children:"System"}),p.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[p.jsx("button",{className:"btn",onClick:a,children:"Force Save"}),p.jsx("button",{className:"btn",style:{background:"#0288d1"},onClick:l,children:"Update Logs"}),p.jsx("button",{className:"btn",style:{backgroundColor:_?"red":"#d32f2f"},onClick:V,children:_?"CONFIRM WIPE?":"Hard Reset"})]}),_&&p.jsx("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"5px"},children:"Warning: This will delete all progress permanently!"})]}),p.jsx("button",{className:"btn",style:{marginTop:"20px",background:"#5d4037",width:"100%"},onClick:e,children:"Return to Game"}),p.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"10px"},children:"v2.3.0 - Kingdom Clicker"})]})})},VE=({onClose:r})=>p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"600px",maxHeight:"80vh",display:"flex",flexDirection:"column"},children:[p.jsx("h2",{children:" Royal Chronicles"}),p.jsx("div",{style:{overflowY:"auto",textAlign:"left",padding:"0 20px",flex:1},children:Jy.map((e,i)=>p.jsxs("div",{style:{marginBottom:"20px",borderBottom:i<Jy.length-1?"1px dashed #ccc":"none",paddingBottom:"10px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"5px"},children:[p.jsxs("span",{style:{fontSize:"1.2rem",fontWeight:"bold",color:"var(--accent-color)"},children:["v",e.version]}),p.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:e.date})]}),p.jsx("ul",{style:{margin:"5px 0",paddingLeft:"20px"},children:e.changes.map((a,l)=>p.jsx("li",{style:{marginBottom:"3px"},children:a},l))})]},e.version))}),p.jsx("button",{className:"btn",style:{marginTop:"20px",alignSelf:"center"},onClick:r,children:"Close Chronicles"})]})}),OE=({gameState:r,onHireAdvisor:e,onClose:i})=>p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{border:"4px double #4a148c",maxWidth:"900px"},children:[p.jsx("h2",{style:{color:"#4a148c",borderBottomColor:"#4a148c"},children:" Royal Council"}),p.jsxs("div",{style:{marginBottom:"15px",color:"var(--text-secondary)",fontStyle:"italic"},children:["Hire permanent advisors with Renown. ",p.jsx("br",{}),"These buffs persist across abdications. Advisors can be upgraded for better effects."]}),p.jsxs("div",{style:{background:"rgba(103, 58, 183, 0.1)",padding:"10px",borderRadius:"4px",marginBottom:"20px",fontWeight:"bold",color:"#4a148c"},children:["Available Renown: ",ye(r.renown,r.numberFormat)," "]}),p.jsxs("div",{style:{marginBottom:"30px"},children:[p.jsx("h3",{style:{color:"#4a148c",marginBottom:"10px"},children:" Royal Advisors"}),p.jsx("div",{style:{display:"grid",gap:"10px",maxHeight:"350px",overflowY:"auto"},children:yv.map(a=>{const l=r.advisors.includes(a.id),d=r.advisorLevels[a.id]||m(0),f=vv(a,d),y=!l&&r.renown.gte(a.cost),b=l&&r.renown.gte(f),_=Wr(a.id,d);return p.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"15px",border:`2px solid ${l?"#4a148c":"var(--border-color)"}`,background:l?"rgba(237, 231, 246, 0.5)":"var(--panel-bg)",borderRadius:"8px",opacity:l||y?1:.6},children:[p.jsx("div",{style:{fontSize:"2.5rem",marginRight:"15px"},children:a.icon}),p.jsxs("div",{style:{flex:1,textAlign:"left"},children:[p.jsxs("div",{style:{fontSize:"1.2rem",fontWeight:"bold",color:l?"#4a148c":"var(--text-color)"},children:[a.name," ",l&&`(Level ${ye(d,r.numberFormat)})`]}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:a.description}),l&&p.jsxs("div",{style:{fontSize:"0.8rem",color:"#4a148c",marginTop:"5px"},children:[a.id==="treasurer"&&`Auto-clicks every ${Math.max(1,5-d.toNumber())} seconds`,a.id==="warmaster"&&`Speed: +${ye(_.times(m(100)),r.numberFormat)}%, Safety: +${ye(_.times(m(100)),r.numberFormat)}%`,a.id==="guildmaster"&&`Discount: ${ye(_.times(m(100)),r.numberFormat)}%`,a.id==="alchemist"&&`Event chance: x${ye(_.plus(m(1)),r.numberFormat)}`,(a.id==="chronomancer"||a.id==="time_keeper")&&`Cooldown reduction: ${ye(_.times(m(100)),r.numberFormat)}%`,a.id==="void_scholar"&&`Renown bonus: +${ye(_.times(m(100)),r.numberFormat)}%`,a.id==="cosmic_mage"&&`Production bonus: +${ye(_.times(m(100)),r.numberFormat)}%`]})]}),p.jsx("div",{style:{minWidth:"120px",textAlign:"right"},children:l?p.jsxs("button",{className:"btn",style:{background:b?"#4a148c":"var(--text-secondary)",fontSize:"0.8rem"},disabled:!b,onClick:()=>e(a.id),children:["Upgrade: ",ye(f,r.numberFormat)," "]}):p.jsxs("button",{className:"btn",style:{background:y?"#4a148c":"var(--text-secondary)"},disabled:!y,onClick:()=>e(a.id),children:["Hire: ",ye(a.cost,r.numberFormat)," "]})})]},a.id)})})]}),p.jsx("button",{className:"btn",style:{marginTop:"20px",background:"#5d4037"},onClick:i,children:"Close Council"})]})}),jE=({gameState:r,currentGps:e,onClose:i})=>{var me;const a=Object.values(r.buildings).reduce((ve,Se)=>ve.plus(Se),m(0)),l=r.upgrades.length,d=Bi.length,f=r.achievements.length,y=yc.length;let b="None",_="None",x=-1,A=m(0);Ys.forEach((ve,Se)=>{const Te=r.buildings[ve.id]||m(0);Te.gt(m(0))&&Se>x&&(x=Se,b=ve.name),Te.gt(A)&&(A=Te,_=ve.name)});const U=(()=>{let ve=m(1);return Bi.filter(Se=>Se.type==="click"&&r.upgrades.includes(Se.id)).forEach(Se=>{Se.multiplier&&(ve=ve.times(Se.multiplier))}),(r.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(ve=ve.times(m(5))),ve=ve.times(m(1).plus(r.renown.times(m(.01)))),ve})(),[ne,re]=_e.useState("");_e.useEffect(()=>{const ve=()=>{const Te=m(Date.now()).minus(r.startTime),I=Te.dividedBy(m(1e3)),R=I.minus(I.dividedBy(m(60)).floor().times(m(60))).floor(),w=Te.dividedBy(m(6e4)),O=w.minus(w.dividedBy(m(60)).floor().times(m(60))).floor(),V=Te.dividedBy(m(36e5)),z=V.minus(V.dividedBy(m(24)).floor().times(m(24))).floor(),D=Te.dividedBy(m(864e5)).floor();let He="";D.gt(m(0))&&(He+=`${D.toString()}d `),z.gt(m(0))&&(He+=`${z.toString()}h `),He+=`${O.toString()}m ${R.toString()}s`,re(He)};ve();const Se=setInterval(ve,1e3);return()=>clearInterval(Se)},[r.startTime]);const F={display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px dashed rgba(0,0,0,0.1)",fontSize:"0.9rem"},pe={fontSize:"1rem",color:"var(--accent-color)",marginTop:"15px",borderBottom:"2px solid var(--border-color)",paddingBottom:"2px",marginBottom:"5px"},ie=((me=gv[r.weather.current])==null?void 0:me.name)||"Unknown";return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"500px"},children:[p.jsx("h2",{children:" Royal Records"}),p.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",maxHeight:"60vh",overflowY:"auto",paddingRight:"10px"},children:[p.jsx("h3",{style:pe,children:" Current Status"}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Gold Per Second:"}),p.jsxs("strong",{style:{color:"var(--success-color)"},children:[ye(e,r.numberFormat)," / sec"]})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Click Power:"}),p.jsxs("strong",{style:{color:"var(--success-color)"},children:[ye(U,r.numberFormat)," / click"]})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Current Weather:"}),p.jsx("strong",{children:ie})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Renown Bonus:"}),p.jsxs("strong",{style:{color:"#673ab7"},children:["+",r.renown.times(m(1)).floor().toString(),"%"]})]}),p.jsx("h3",{style:pe,children:" Time & Legacy"}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Time Played:"}),p.jsx("strong",{children:ne})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Kingdom Founded:"}),p.jsx("span",{children:new Date(r.startTime.toNumber()).toLocaleDateString()})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Total Renown:"}),p.jsx("strong",{children:ye(r.renown,r.numberFormat)})]}),p.jsx("h3",{style:pe,children:" Economy Summary"}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Current Gold:"}),p.jsx("strong",{children:ye(r.gold,r.numberFormat)})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Lifetime Gold:"}),p.jsx("strong",{children:ye(r.totalGold,r.numberFormat)})]}),p.jsx("h3",{style:pe,children:" Dominion"}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Total Buildings:"}),p.jsx("strong",{children:ye(a,r.numberFormat)})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Highest Tech Building:"}),p.jsx("strong",{children:b})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Most Numerous:"}),p.jsxs("strong",{children:[_," (",ye(A,r.numberFormat),")"]})]}),p.jsx("h3",{style:pe,children:" Completion"}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Achievements:"}),p.jsxs("span",{children:[f," / ",y," (",Math.floor(f/y*100),"%)"]})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Upgrades:"}),p.jsxs("span",{children:[l," / ",d," (",Math.floor(l/d*100),"%)"]})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Artifacts:"}),p.jsxs("span",{children:[r.artifacts.length," Found"]})]}),p.jsx("h3",{style:pe,children:" Military & Court"}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Standing Army:"}),p.jsxs("strong",{children:[ye(r.soldiers,r.numberFormat)," Soldiers"]})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Royal Advisors:"}),p.jsxs("span",{children:[r.advisors.length," Hired"]})]}),p.jsx("h3",{style:pe,children:" Player Stats"}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Manual Clicks:"}),p.jsx("span",{children:ye(r.stats.totalClicks,r.numberFormat)})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Dragons Slain:"}),p.jsx("span",{children:ye(r.stats.dragonsKilled,r.numberFormat)})]}),p.jsxs("div",{style:F,children:[p.jsx("span",{children:"Tavern Games:"}),p.jsx("span",{children:ye(r.stats.tavernGamesPlayed,r.numberFormat)})]})]}),p.jsx("button",{className:"btn",style:{background:"#5d4037",width:"100%"},onClick:i,children:"Close Records"})]})})},zE=({gameState:r,onInvestTrade:e,onBuildWonder:i,onClose:a})=>{const[l,d]=_e.useState("trade"),f=(r.wonders.great_pyramid||0)>=3;return p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",width:"95%",height:"80vh",display:"flex",flexDirection:"column",padding:"0"},children:[p.jsxs("div",{style:{padding:"20px",background:"#3e2723",color:"#fff"},children:[p.jsx("h2",{style:{margin:0,border:"none",color:"#ffd700"},children:" Imperial Management"}),p.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"15px"},children:[p.jsx("button",{className:"tab-btn",style:{background:l==="trade"?"#ffd700":"rgba(255,255,255,0.1)",color:l==="trade"?"#000":"#fff"},onClick:()=>d("trade"),children:"Trade Routes"}),p.jsx("button",{className:"tab-btn",style:{background:l==="wonders"?"#ffd700":"rgba(255,255,255,0.1)",color:l==="wonders"?"#000":"#fff"},onClick:()=>d("wonders"),children:"Great Wonders"})]})]}),p.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",background:"var(--panel-bg)"},children:[l==="trade"&&p.jsx(kE,{gameState:r,onInvestTrade:e,hasPyramid:f}),l==="wonders"&&p.jsx(LE,{gameState:r,onBuildWonder:i})]}),p.jsx("div",{style:{padding:"15px",borderTop:"1px solid var(--border-color)",textAlign:"right",background:"var(--bg-color)"},children:p.jsx("button",{className:"btn",onClick:a,children:"Return to Kingdom"})})]})})},kE=({gameState:r,onInvestTrade:e,hasPyramid:i})=>{var ne,re,F,pe;const[a,l]=_e.useState(null),[d,f]=_e.useState(0),[y,b]=_e.useState(0),[_,x]=_e.useState(0),A=r.activeTradeRoutes||[],N=()=>{a&&(e(a.id,d,y,{knight:_}),l(null),f(0),b(0),x(0))},U=ie=>{const me=m(y).plus(m(_).times(m(50))),ve=m(Math.max(100,d/100)),Se=m(Math.min(.9,me.dividedBy(ve).toNumber()));let Te=ie.risk.times(m(1).minus(Se));return i&&(Te=Te.times(m(.5))),Te};return p.jsxs("div",{children:[p.jsx("h3",{style:{borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:"Active Caravans"}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"10px",marginBottom:"30px"},children:[A.length===0&&p.jsx("div",{style:{color:"var(--text-secondary)"},children:"No active trade routes."}),A.map(ie=>{var R,w;const me=_c.find(O=>O.id===ie.routeId);if(!me)return null;const ve=(R=ie.startTime)!=null&&R.toNumber?ie.startTime.toNumber():Number(ie.startTime),Se=(w=ie.duration)!=null&&w.toNumber?ie.duration.toNumber():Number(ie.duration),Te=(Date.now()-ve)/1e3,I=Math.min(100,Te/Se*100);return p.jsxs("div",{style:{padding:"10px",border:"1px solid var(--accent-color)",borderRadius:"4px",background:"#fff"},children:[p.jsxs("div",{style:{fontWeight:"bold"},children:[me.icon," ",me.name]}),p.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:["Invested: ",ye(ie.goldInvested,r.numberFormat)]}),p.jsx("div",{style:{width:"100%",height:"10px",background:"#eee",marginTop:"5px",borderRadius:"5px"},children:p.jsx("div",{style:{width:`${I}%`,height:"100%",background:"var(--success-color)",borderRadius:"5px",transition:"width 1s linear"}})}),p.jsxs("div",{style:{textAlign:"right",fontSize:"0.8rem"},children:[Math.ceil(Se-Te),"s left"]})]},ie.id)})]}),p.jsx("h3",{style:{borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:"Establish New Route"}),a?p.jsxs("div",{style:{padding:"20px",border:"2px solid var(--accent-color)",borderRadius:"8px",background:"#f9fbe7"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[p.jsxs("h4",{style:{margin:0},children:[a.icon," ",a.name]}),p.jsx("button",{className:"btn",style:{background:"#999",padding:"5px 10px",fontSize:"0.8rem"},onClick:()=>l(null),children:"Cancel"})]}),p.jsxs("div",{style:{marginBottom:"15px"},children:[p.jsxs("label",{style:{display:"block",fontWeight:"bold"},children:["Gold Investment (Max ",ye(a.maxInvestment,r.numberFormat),")"]}),p.jsx("input",{type:"range",min:"0",max:Math.min((ne=r.gold)!=null&&ne.toNumber?r.gold.toNumber():Number(r.gold),(re=a.maxInvestment)!=null&&re.toNumber?a.maxInvestment.toNumber():Number(a.maxInvestment)),value:d,onChange:ie=>f(parseInt(ie.target.value)),style:{width:"100%"}}),p.jsxs("div",{style:{textAlign:"right"},children:[ye(d,r.numberFormat)," G"]})]}),p.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"15px"},children:[p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",fontWeight:"bold"},children:"Soldier Escort"}),p.jsx("input",{type:"number",min:"0",max:(F=r.soldiers)!=null&&F.toNumber?r.soldiers.toNumber():Number(r.soldiers),value:y,onChange:ie=>b(parseInt(ie.target.value)),style:{width:"100%",padding:"5px"}}),p.jsxs("div",{style:{fontSize:"0.8rem"},children:["Available: ",ye(r.soldiers,r.numberFormat)]})]}),p.jsxs("div",{children:[p.jsx("label",{style:{display:"block",fontWeight:"bold"},children:"Knight Escort"}),p.jsx("input",{type:"number",min:"0",max:(pe=r.eliteUnits.knight)!=null&&pe.toNumber?r.eliteUnits.knight.toNumber():Number(r.eliteUnits.knight||0),value:_,onChange:ie=>x(parseInt(ie.target.value)),style:{width:"100%",padding:"5px"}}),p.jsxs("div",{style:{fontSize:"0.8rem"},children:["Available: ",ye(r.eliteUnits.knight||0,r.numberFormat)]})]})]}),p.jsxs("div",{style:{background:"#fff",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:[p.jsxs("div",{children:[p.jsx("strong",{children:"Projected Return:"})," ",ye(m(d).times(a.rewardMultiplier),r.numberFormat)," G"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Duration:"})," ",(()=>{var ve;const ie=(ve=a.baseDuration)!=null&&ve.toNumber?a.baseDuration.toNumber():Number(a.baseDuration),me=i?ie*.5:ie;return Math.ceil(me)/60})()," min"]}),p.jsxs("div",{children:[p.jsx("strong",{children:"Risk:"})," ",p.jsxs("span",{style:{color:U(a).gt(m(.3))?"red":"green"},children:[U(a).times(m(100)).toFixed(1),"%"]})]})]}),p.jsx("button",{className:"btn",style:{width:"100%"},disabled:d<=0||y===0&&_===0,onClick:N,children:"Dispatch Caravan"})]}):p.jsx("div",{style:{display:"grid",gap:"10px"},children:_c.map(ie=>p.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"15px",border:"1px solid var(--border-color)",borderRadius:"4px",cursor:"pointer",background:"#fff"},onClick:()=>l(ie),children:[p.jsx("div",{style:{fontSize:"2rem",marginRight:"15px"},children:ie.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsx("div",{style:{fontWeight:"bold"},children:ie.name}),p.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:ie.description}),p.jsxs("div",{style:{fontSize:"0.8rem",color:"green"},children:["Max Profit: ",ye(ie.rewardMultiplier,r.numberFormat),"x"]})]}),p.jsx("button",{className:"btn",style:{fontSize:"0.8rem"},children:"Select"})]},ie.id))})]})},LE=({gameState:r,onBuildWonder:e})=>{const i=l=>{for(const d of l)if(d.type==="gold"&&r.gold.lt(m(d.amount))||d.type==="soldiers"&&r.soldiers.lt(m(d.amount))||d.type==="renown"&&r.renown.lt(m(d.amount))||["knight","paladin","void_sentinel"].includes(d.type)&&(r.eliteUnits[d.type]||m(0)).lt(m(d.amount)))return!1;return!0},a=l=>l.map((d,f)=>p.jsxs("span",{style:{marginRight:"10px",color:i([d])?"green":"red"},children:[ye(d.amount,r.numberFormat)," ",d.type==="gold"?"G":d.type]},f));return p.jsx("div",{style:{display:"grid",gap:"20px"},children:_v.map(l=>{const d=r.wonders[l.id]||0,f=d>=l.stages.length,y=f?null:l.stages[d],b=y?i(y.cost):!1;return p.jsxs("div",{style:{border:"2px solid var(--accent-color)",borderRadius:"8px",overflow:"hidden"},children:[p.jsxs("div",{style:{background:f?"gold":"#f0f4c3",padding:"15px",display:"flex",alignItems:"center"},children:[p.jsx("div",{style:{fontSize:"3rem",marginRight:"15px"},children:l.icon}),p.jsxs("div",{style:{flex:1},children:[p.jsx("h3",{style:{margin:0,color:"#333"},children:l.name}),p.jsx("div",{style:{fontSize:"0.9rem"},children:l.description}),p.jsxs("div",{style:{marginTop:"5px",fontWeight:"bold",color:"#4a148c"},children:["Bonus: ",l.bonusDescription]})]}),p.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold"},children:f?"COMPLETED":`${d} / ${l.stages.length}`})]}),!f&&y&&p.jsxs("div",{style:{padding:"15px",background:"#fff"},children:[p.jsxs("h4",{style:{marginTop:0},children:["Next Stage: ",y.name]}),p.jsx("p",{style:{fontSize:"0.9rem",color:"#666"},children:y.description}),p.jsxs("div",{style:{background:"#eee",padding:"10px",borderRadius:"4px",marginBottom:"15px"},children:[p.jsx("strong",{children:"Requirements: "}),a(y.cost)]}),p.jsx("button",{className:"btn",style:{width:"100%",background:b?"var(--accent-color)":"#999"},disabled:!b,onClick:()=>e(l.id),children:"Construct Stage"})]}),f&&p.jsx("div",{style:{padding:"10px",background:"#fff8e1",textAlign:"center",color:"orange",fontWeight:"bold"},children:"This Wonder stands eternal."})]},l.id)})})},UE=({toasts:r})=>p.jsx("div",{className:"toast-container",children:r.map(e=>p.jsxs("div",{className:`toast ${e.type}`,children:[e.type==="success"&&"",e.type==="warning"&&"",e.type==="info"&&"",e.type==="error"&&"",p.jsx("span",{children:e.message})]},e.id))}),BE=()=>{const[r,e]=_e.useState(null);if(_e.useEffect(()=>{const a=f=>{const b=f.target.closest("[data-tooltip]");if(b){const _=b.getAttribute("data-tooltip");_&&e({text:_,x:f.clientX,y:f.clientY})}else e(null)},l=f=>{r&&e(y=>y?{...y,x:f.clientX,y:f.clientY}:null)},d=()=>{e(null)};return document.addEventListener("mouseover",a),document.addEventListener("mousemove",l),document.addEventListener("mouseout",d),()=>{document.removeEventListener("mouseover",a),document.removeEventListener("mousemove",l),document.removeEventListener("mouseout",d)}},[r]),!r)return null;const i={left:r.x+15,top:r.y+15};return r.x+250>window.innerWidth&&(i.left=r.x-260),r.y+100>window.innerHeight&&(i.top=r.y-50),p.jsx("div",{className:"game-tooltip",style:i,children:r.text})},PE=({gameState:r})=>{const{weather:e,buildings:i,totalGold:a}=r,l=N=>i[N]||0;let d="wilderness";l("palace")>0?d="empire":l("castle")>0||l("market")>0?d="city":(l("peasant")>20||l("field")>10||a>500)&&(d="hamlet");let f="",y="";switch(d){case"wilderness":f="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 60%, #556B2F 60%, #556B2F 100%)",y="     ";break;case"hamlet":f="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 65%, #8B4513 65%, #228B22 80%)",y="     ";break;case"city":f="linear-gradient(to bottom, #B0C4DE 0%, #B0C4DE 60%, #696969 60%, #808080 100%)",y="     ";break;case"empire":f="linear-gradient(to bottom, #191970 0%, #4B0082 50%, #FFD700 100%)",y="     ";break}const b=e.current;let _="none",x="",A=0;return b==="rainy"?(_="linear-gradient(to bottom, rgba(0,0,50,0.3), rgba(0,0,100,0.3))",x="    ",A=1):b==="stormy"?(_="linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(50,50,50,0.6))",x="    ",A=1):b==="sunny"?(_="radial-gradient(circle at top right, rgba(255,255,0,0.3), transparent)",x="",A=.6):b==="windy"&&(x="  ",A=.8),p.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:f,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",paddingBottom:"20vh",zIndex:0,overflow:"hidden",transition:"background 2s ease"},children:[p.jsx("div",{style:{position:"absolute",top:"10%",width:"100%",textAlign:"center",fontSize:"5rem",opacity:A,animation:b==="windy"?"float 3s infinite ease-in-out":"none"},children:x}),_!=="none"&&p.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:_,pointerEvents:"none"}}),p.jsx("div",{style:{fontSize:"4rem",textAlign:"center",zIndex:1,textShadow:"0 4px 4px rgba(0,0,0,0.3)",whiteSpace:"nowrap"},children:y}),p.jsx("div",{style:{marginTop:"20px",fontSize:"1.5rem",color:"#fff",textShadow:"2px 2px 4px #000",fontStyle:"italic",zIndex:2,background:"rgba(0,0,0,0.5)",padding:"5px 15px",borderRadius:"15px"},children:"The Kingdom sleeps..."}),p.jsx("style",{children:`
            @keyframes float {
                0% { transform: translateX(0px); }
                50% { transform: translateX(20px); }
                100% { transform: translateX(0px); }
            }
        `})]})},qE=()=>{};var t0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=function(r){const e=[];let i=0;for(let a=0;a<r.length;a++){let l=r.charCodeAt(a);l<128?e[i++]=l:l<2048?(e[i++]=l>>6|192,e[i++]=l&63|128):(l&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(l=65536+((l&1023)<<10)+(r.charCodeAt(++a)&1023),e[i++]=l>>18|240,e[i++]=l>>12&63|128,e[i++]=l>>6&63|128,e[i++]=l&63|128):(e[i++]=l>>12|224,e[i++]=l>>6&63|128,e[i++]=l&63|128)}return e},GE=function(r){const e=[];let i=0,a=0;for(;i<r.length;){const l=r[i++];if(l<128)e[a++]=String.fromCharCode(l);else if(l>191&&l<224){const d=r[i++];e[a++]=String.fromCharCode((l&31)<<6|d&63)}else if(l>239&&l<365){const d=r[i++],f=r[i++],y=r[i++],b=((l&7)<<18|(d&63)<<12|(f&63)<<6|y&63)-65536;e[a++]=String.fromCharCode(55296+(b>>10)),e[a++]=String.fromCharCode(56320+(b&1023))}else{const d=r[i++],f=r[i++];e[a++]=String.fromCharCode((l&15)<<12|(d&63)<<6|f&63)}}return e.join("")},Ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let l=0;l<r.length;l+=3){const d=r[l],f=l+1<r.length,y=f?r[l+1]:0,b=l+2<r.length,_=b?r[l+2]:0,x=d>>2,A=(d&3)<<4|y>>4;let N=(y&15)<<2|_>>6,U=_&63;b||(U=64,f||(N=64)),a.push(i[x],i[A],i[N],i[U])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(bv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):GE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let l=0;l<r.length;){const d=i[r.charAt(l++)],y=l<r.length?i[r.charAt(l)]:0;++l;const _=l<r.length?i[r.charAt(l)]:64;++l;const A=l<r.length?i[r.charAt(l)]:64;if(++l,d==null||y==null||_==null||A==null)throw new HE;const N=d<<2|y>>4;if(a.push(N),_!==64){const U=y<<4&240|_>>2;if(a.push(U),A!==64){const ne=_<<6&192|A;a.push(ne)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class HE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FE=function(r){const e=bv(r);return Ev.encodeByteArray(e,!0)},bc=function(r){return FE(r).replace(/\./g,"")},QE=function(r){try{return Ev.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=()=>YE().__FIREBASE_DEFAULTS__,XE=()=>{if(typeof process>"u"||typeof t0>"u")return;const r=t0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},$E=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&QE(r[1]);return e&&JSON.parse(e)},zf=()=>{try{return qE()||KE()||XE()||$E()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},WE=r=>{var e,i;return(i=(e=zf())==null?void 0:e.emulatorHosts)==null?void 0:i[r]},ZE=r=>{const e=WE(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),a]:[e.substring(0,i),a]},Tv=()=>{var r;return(r=zf())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,a)=>{i?this.reject(i):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eT(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},a=e||"demo-project",l=r.iat||0,d=r.sub||r.user_id;if(!d)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${a}`,aud:a,iat:l,exp:l+3600,auth_time:l,sub:d,user_id:d,firebase:{sign_in_provider:"custom",identities:{}},...r};return[bc(JSON.stringify(i)),bc(JSON.stringify(f)),""].join(".")}const ml={};function nT(){const r={prod:[],emulator:[]};for(const e of Object.keys(ml))ml[e]?r.emulator.push(e):r.prod.push(e);return r}function iT(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let n0=!1;function rT(r,e){if(typeof window>"u"||typeof document>"u"||!kf(window.location.host)||ml[r]===e||ml[r]||n0)return;ml[r]=e;function i(N){return`__firebase__banner__${N}`}const a="__firebase__banner",d=nT().prod.length>0;function f(){const N=document.getElementById(a);N&&N.remove()}function y(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function b(N,U){N.setAttribute("width","24"),N.setAttribute("id",U),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function _(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{n0=!0,f()},N}function x(N,U){N.setAttribute("id",U),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function A(){const N=iT(a),U=i("text"),ne=document.getElementById(U)||document.createElement("span"),re=i("learnmore"),F=document.getElementById(re)||document.createElement("a"),pe=i("preprendIcon"),ie=document.getElementById(pe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const me=N.element;y(me),x(F,re);const ve=_();b(ie,pe),me.append(ie,ne,F,ve),document.body.appendChild(me)}d?(ne.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,ne.innerText="Preview backend running in this workspace."),ne.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function aT(){var e;const r=(e=zf())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oT(){return!aT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lT(){try{return typeof indexedDB=="object"}catch{return!1}}function uT(){return new Promise((r,e)=>{try{let i=!0;const a="validate-browser-context-for-indexeddb-analytics-module",l=self.indexedDB.open(a);l.onsuccess=()=>{l.result.close(),i||self.indexedDB.deleteDatabase(a),r(!0)},l.onupgradeneeded=()=>{i=!1},l.onerror=()=>{var d;e(((d=l.error)==null?void 0:d.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="FirebaseError";class so extends Error{constructor(e,i,a){super(i),this.code=e,this.customData=a,this.name=cT,Object.setPrototypeOf(this,so.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xv.prototype.create)}}class xv{constructor(e,i,a){this.service=e,this.serviceName=i,this.errors=a}create(e,...i){const a=i[0]||{},l=`${this.service}/${e}`,d=this.errors[e],f=d?dT(d,a):"Error",y=`${this.serviceName}: ${f} (${l}).`;return new so(l,y,a)}}function dT(r,e){return r.replace(hT,(i,a)=>{const l=e[a];return l!=null?String(l):`<${a}?>`})}const hT=/\{\$([^}]+)}/g;function Ec(r,e){if(r===e)return!0;const i=Object.keys(r),a=Object.keys(e);for(const l of i){if(!a.includes(l))return!1;const d=r[l],f=e[l];if(i0(d)&&i0(f)){if(!Ec(d,f))return!1}else if(d!==f)return!1}for(const l of a)if(!i.includes(l))return!1;return!0}function i0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Za(r){return r&&r._delegate?r._delegate:r}class El{constructor(e,i,a){this.name=e,this.instanceFactory=i,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const a=new JE;if(this.instancesDeferred.set(i,a),this.isInitialized(i)||this.shouldAutoInitialize())try{const l=this.getOrInitializeService({instanceIdentifier:i});l&&a.resolve(l)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gT(e))try{this.getOrInitializeService({instanceIdentifier:Hs})}catch{}for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);try{const d=this.getOrInitializeService({instanceIdentifier:l});a.resolve(d)}catch{}}}}clearInstance(e=Hs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Hs){return this.instances.has(e)}getOptions(e=Hs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const l=this.getOrInitializeService({instanceIdentifier:a,options:i});for(const[d,f]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(d);a===y&&f.resolve(l)}return l}onInit(e,i){const a=this.normalizeInstanceIdentifier(i),l=this.onInitCallbacks.get(a)??new Set;l.add(e),this.onInitCallbacks.set(a,l);const d=this.instances.get(a);return d&&e(d,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,i){const a=this.onInitCallbacks.get(i);if(a)for(const l of a)try{l(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:mT(e),options:i}),this.instances.set(e,a),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Hs){return this.component?this.component.multipleInstances?e:Hs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function mT(r){return r===Hs?void 0:r}function gT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new fT(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(tt||(tt={}));const yT={debug:tt.DEBUG,verbose:tt.VERBOSE,info:tt.INFO,warn:tt.WARN,error:tt.ERROR,silent:tt.SILENT},vT=tt.INFO,_T={[tt.DEBUG]:"log",[tt.VERBOSE]:"log",[tt.INFO]:"info",[tt.WARN]:"warn",[tt.ERROR]:"error"},bT=(r,e,...i)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),l=_T[e];if(l)console[l](`[${a}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Av{constructor(e){this.name=e,this._logLevel=vT,this._logHandler=bT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,tt.DEBUG,...e),this._logHandler(this,tt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,tt.VERBOSE,...e),this._logHandler(this,tt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,tt.INFO,...e),this._logHandler(this,tt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,tt.WARN,...e),this._logHandler(this,tt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,tt.ERROR,...e),this._logHandler(this,tt.ERROR,...e)}}const ET=(r,e)=>e.some(i=>r instanceof i);let r0,s0;function TT(){return r0||(r0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xT(){return s0||(s0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Sv=new WeakMap,hf=new WeakMap,wv=new WeakMap,tf=new WeakMap,Lf=new WeakMap;function AT(r){const e=new Promise((i,a)=>{const l=()=>{r.removeEventListener("success",d),r.removeEventListener("error",f)},d=()=>{i(es(r.result)),l()},f=()=>{a(r.error),l()};r.addEventListener("success",d),r.addEventListener("error",f)});return e.then(i=>{i instanceof IDBCursor&&Sv.set(i,r)}).catch(()=>{}),Lf.set(e,r),e}function ST(r){if(hf.has(r))return;const e=new Promise((i,a)=>{const l=()=>{r.removeEventListener("complete",d),r.removeEventListener("error",f),r.removeEventListener("abort",f)},d=()=>{i(),l()},f=()=>{a(r.error||new DOMException("AbortError","AbortError")),l()};r.addEventListener("complete",d),r.addEventListener("error",f),r.addEventListener("abort",f)});hf.set(r,e)}let ff={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return hf.get(r);if(e==="objectStoreNames")return r.objectStoreNames||wv.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return es(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function wT(r){ff=r(ff)}function CT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const a=r.call(nf(this),e,...i);return wv.set(a,e.sort?e.sort():[e]),es(a)}:xT().includes(r)?function(...e){return r.apply(nf(this),e),es(Sv.get(this))}:function(...e){return es(r.apply(nf(this),e))}}function RT(r){return typeof r=="function"?CT(r):(r instanceof IDBTransaction&&ST(r),ET(r,TT())?new Proxy(r,ff):r)}function es(r){if(r instanceof IDBRequest)return AT(r);if(tf.has(r))return tf.get(r);const e=RT(r);return e!==r&&(tf.set(r,e),Lf.set(e,r)),e}const nf=r=>Lf.get(r);function DT(r,e,{blocked:i,upgrade:a,blocking:l,terminated:d}={}){const f=indexedDB.open(r,e),y=es(f);return a&&f.addEventListener("upgradeneeded",b=>{a(es(f.result),b.oldVersion,b.newVersion,es(f.transaction),b)}),i&&f.addEventListener("blocked",b=>i(b.oldVersion,b.newVersion,b)),y.then(b=>{d&&b.addEventListener("close",()=>d()),l&&b.addEventListener("versionchange",_=>l(_.oldVersion,_.newVersion,_))}).catch(()=>{}),y}const NT=["get","getKey","getAll","getAllKeys","count"],IT=["put","add","delete","clear"],rf=new Map;function a0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(rf.get(e))return rf.get(e);const i=e.replace(/FromIndex$/,""),a=e!==i,l=IT.includes(i);if(!(i in(a?IDBIndex:IDBObjectStore).prototype)||!(l||NT.includes(i)))return;const d=async function(f,...y){const b=this.transaction(f,l?"readwrite":"readonly");let _=b.store;return a&&(_=_.index(y.shift())),(await Promise.all([_[i](...y),l&&b.done]))[0]};return rf.set(e,d),d}wT(r=>({...r,get:(e,i,a)=>a0(e,i)||r.get(e,i,a),has:(e,i)=>!!a0(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(VT(i)){const a=i.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(i=>i).join(" ")}}function VT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mf="@firebase/app",o0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Av("@firebase/app"),OT="@firebase/app-compat",jT="@firebase/analytics-compat",zT="@firebase/analytics",kT="@firebase/app-check-compat",LT="@firebase/app-check",UT="@firebase/auth",BT="@firebase/auth-compat",PT="@firebase/database",qT="@firebase/data-connect",GT="@firebase/database-compat",HT="@firebase/functions",FT="@firebase/functions-compat",QT="@firebase/installations",YT="@firebase/installations-compat",KT="@firebase/messaging",XT="@firebase/messaging-compat",$T="@firebase/performance",WT="@firebase/performance-compat",ZT="@firebase/remote-config",JT="@firebase/remote-config-compat",ex="@firebase/storage",tx="@firebase/storage-compat",nx="@firebase/firestore",ix="@firebase/ai",rx="@firebase/firestore-compat",sx="firebase",ax="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="[DEFAULT]",ox={[mf]:"fire-core",[OT]:"fire-core-compat",[zT]:"fire-analytics",[jT]:"fire-analytics-compat",[LT]:"fire-app-check",[kT]:"fire-app-check-compat",[UT]:"fire-auth",[BT]:"fire-auth-compat",[PT]:"fire-rtdb",[qT]:"fire-data-connect",[GT]:"fire-rtdb-compat",[HT]:"fire-fn",[FT]:"fire-fn-compat",[QT]:"fire-iid",[YT]:"fire-iid-compat",[KT]:"fire-fcm",[XT]:"fire-fcm-compat",[$T]:"fire-perf",[WT]:"fire-perf-compat",[ZT]:"fire-rc",[JT]:"fire-rc-compat",[ex]:"fire-gcs",[tx]:"fire-gcs-compat",[nx]:"fire-fst",[rx]:"fire-fst-compat",[ix]:"fire-vertex","fire-js":"fire-js",[sx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Map,lx=new Map,pf=new Map;function l0(r,e){try{r.container.addComponent(e)}catch(i){mr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function xc(r){const e=r.name;if(pf.has(e))return mr.debug(`There were multiple attempts to register component ${e}.`),!1;pf.set(e,r);for(const i of Tc.values())l0(i,r);for(const i of lx.values())l0(i,r);return!0}function ux(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function cx(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ts=new xv("app","Firebase",dx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,i,a){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new El("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=ax;function Cv(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const a={name:gf,automaticDataCollectionEnabled:!0,...e},l=a.name;if(typeof l!="string"||!l)throw ts.create("bad-app-name",{appName:String(l)});if(i||(i=Tv()),!i)throw ts.create("no-options");const d=Tc.get(l);if(d){if(Ec(i,d.options)&&Ec(a,d.config))return d;throw ts.create("duplicate-app",{appName:l})}const f=new pT(l);for(const b of pf.values())f.addComponent(b);const y=new hx(i,a,f);return Tc.set(l,y),y}function mx(r=gf){const e=Tc.get(r);if(!e&&r===gf&&Tv())return Cv();if(!e)throw ts.create("no-app",{appName:r});return e}function Ka(r,e,i){let a=ox[r]??r;i&&(a+=`-${i}`);const l=a.match(/\s|\//),d=e.match(/\s|\//);if(l||d){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&d&&f.push("and"),d&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mr.warn(f.join(" "));return}xc(new El(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="firebase-heartbeat-database",px=1,Tl="firebase-heartbeat-store";let sf=null;function Rv(){return sf||(sf=DT(gx,px,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Tl)}catch(i){console.warn(i)}}}}).catch(r=>{throw ts.create("idb-open",{originalErrorMessage:r.message})})),sf}async function yx(r){try{const i=(await Rv()).transaction(Tl),a=await i.objectStore(Tl).get(Dv(r));return await i.done,a}catch(e){if(e instanceof so)mr.warn(e.message);else{const i=ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mr.warn(i.message)}}}async function u0(r,e){try{const a=(await Rv()).transaction(Tl,"readwrite");await a.objectStore(Tl).put(e,Dv(r)),await a.done}catch(i){if(i instanceof so)mr.warn(i.message);else{const a=ts.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});mr.warn(a.message)}}}function Dv(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx=1024,_x=30;class bx{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new Tx(i),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,i;try{const l=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),d=c0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===d||this._heartbeatsCache.heartbeats.some(f=>f.date===d))return;if(this._heartbeatsCache.heartbeats.push({date:d,agent:l}),this._heartbeatsCache.heartbeats.length>_x){const f=xx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(f,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){mr.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=c0(),{heartbeatsToSend:a,unsentEntries:l}=Ex(this._heartbeatsCache.heartbeats),d=bc(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=i,l.length>0?(this._heartbeatsCache.heartbeats=l,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),d}catch(i){return mr.warn(i),""}}}function c0(){return new Date().toISOString().substring(0,10)}function Ex(r,e=vx){const i=[];let a=r.slice();for(const l of r){const d=i.find(f=>f.agent===l.agent);if(d){if(d.dates.push(l.date),d0(i)>e){d.dates.pop();break}}else if(i.push({agent:l.agent,dates:[l.date]}),d0(i)>e){i.pop();break}a=a.slice(1)}return{heartbeatsToSend:i,unsentEntries:a}}class Tx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lT()?uT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await yx(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return u0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function d0(r){return bc(JSON.stringify({version:2,heartbeats:r})).length}function xx(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let a=1;a<r.length;a++)r[a].date<i&&(i=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(r){xc(new El("platform-logger",e=>new MT(e),"PRIVATE")),xc(new El("heartbeat",e=>new bx(e),"PRIVATE")),Ka(mf,o0,r),Ka(mf,o0,"esm2020"),Ka("fire-js","")}Ax("");var Sx="firebase",wx="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ka(Sx,wx,"app");var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ns,Nv;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function w(){}w.prototype=R.prototype,I.F=R.prototype,I.prototype=new w,I.prototype.constructor=I,I.D=function(O,V,z){for(var D=Array(arguments.length-2),He=2;He<arguments.length;He++)D[He-2]=arguments[He];return R.prototype[V].apply(O,D)}}function i(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,i),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function l(I,R,w){w||(w=0);const O=Array(16);if(typeof R=="string")for(var V=0;V<16;++V)O[V]=R.charCodeAt(w++)|R.charCodeAt(w++)<<8|R.charCodeAt(w++)<<16|R.charCodeAt(w++)<<24;else for(V=0;V<16;++V)O[V]=R[w++]|R[w++]<<8|R[w++]<<16|R[w++]<<24;R=I.g[0],w=I.g[1],V=I.g[2];let z=I.g[3],D;D=R+(z^w&(V^z))+O[0]+3614090360&4294967295,R=w+(D<<7&4294967295|D>>>25),D=z+(V^R&(w^V))+O[1]+3905402710&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(w^z&(R^w))+O[2]+606105819&4294967295,V=z+(D<<17&4294967295|D>>>15),D=w+(R^V&(z^R))+O[3]+3250441966&4294967295,w=V+(D<<22&4294967295|D>>>10),D=R+(z^w&(V^z))+O[4]+4118548399&4294967295,R=w+(D<<7&4294967295|D>>>25),D=z+(V^R&(w^V))+O[5]+1200080426&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(w^z&(R^w))+O[6]+2821735955&4294967295,V=z+(D<<17&4294967295|D>>>15),D=w+(R^V&(z^R))+O[7]+4249261313&4294967295,w=V+(D<<22&4294967295|D>>>10),D=R+(z^w&(V^z))+O[8]+1770035416&4294967295,R=w+(D<<7&4294967295|D>>>25),D=z+(V^R&(w^V))+O[9]+2336552879&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(w^z&(R^w))+O[10]+4294925233&4294967295,V=z+(D<<17&4294967295|D>>>15),D=w+(R^V&(z^R))+O[11]+2304563134&4294967295,w=V+(D<<22&4294967295|D>>>10),D=R+(z^w&(V^z))+O[12]+1804603682&4294967295,R=w+(D<<7&4294967295|D>>>25),D=z+(V^R&(w^V))+O[13]+4254626195&4294967295,z=R+(D<<12&4294967295|D>>>20),D=V+(w^z&(R^w))+O[14]+2792965006&4294967295,V=z+(D<<17&4294967295|D>>>15),D=w+(R^V&(z^R))+O[15]+1236535329&4294967295,w=V+(D<<22&4294967295|D>>>10),D=R+(V^z&(w^V))+O[1]+4129170786&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^V&(R^w))+O[6]+3225465664&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^w&(z^R))+O[11]+643717713&4294967295,V=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(V^z))+O[0]+3921069994&4294967295,w=V+(D<<20&4294967295|D>>>12),D=R+(V^z&(w^V))+O[5]+3593408605&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^V&(R^w))+O[10]+38016083&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^w&(z^R))+O[15]+3634488961&4294967295,V=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(V^z))+O[4]+3889429448&4294967295,w=V+(D<<20&4294967295|D>>>12),D=R+(V^z&(w^V))+O[9]+568446438&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^V&(R^w))+O[14]+3275163606&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^w&(z^R))+O[3]+4107603335&4294967295,V=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(V^z))+O[8]+1163531501&4294967295,w=V+(D<<20&4294967295|D>>>12),D=R+(V^z&(w^V))+O[13]+2850285829&4294967295,R=w+(D<<5&4294967295|D>>>27),D=z+(w^V&(R^w))+O[2]+4243563512&4294967295,z=R+(D<<9&4294967295|D>>>23),D=V+(R^w&(z^R))+O[7]+1735328473&4294967295,V=z+(D<<14&4294967295|D>>>18),D=w+(z^R&(V^z))+O[12]+2368359562&4294967295,w=V+(D<<20&4294967295|D>>>12),D=R+(w^V^z)+O[5]+4294588738&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^V)+O[8]+2272392833&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^w)+O[11]+1839030562&4294967295,V=z+(D<<16&4294967295|D>>>16),D=w+(V^z^R)+O[14]+4259657740&4294967295,w=V+(D<<23&4294967295|D>>>9),D=R+(w^V^z)+O[1]+2763975236&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^V)+O[4]+1272893353&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^w)+O[7]+4139469664&4294967295,V=z+(D<<16&4294967295|D>>>16),D=w+(V^z^R)+O[10]+3200236656&4294967295,w=V+(D<<23&4294967295|D>>>9),D=R+(w^V^z)+O[13]+681279174&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^V)+O[0]+3936430074&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^w)+O[3]+3572445317&4294967295,V=z+(D<<16&4294967295|D>>>16),D=w+(V^z^R)+O[6]+76029189&4294967295,w=V+(D<<23&4294967295|D>>>9),D=R+(w^V^z)+O[9]+3654602809&4294967295,R=w+(D<<4&4294967295|D>>>28),D=z+(R^w^V)+O[12]+3873151461&4294967295,z=R+(D<<11&4294967295|D>>>21),D=V+(z^R^w)+O[15]+530742520&4294967295,V=z+(D<<16&4294967295|D>>>16),D=w+(V^z^R)+O[2]+3299628645&4294967295,w=V+(D<<23&4294967295|D>>>9),D=R+(V^(w|~z))+O[0]+4096336452&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~V))+O[7]+1126891415&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~w))+O[14]+2878612391&4294967295,V=z+(D<<15&4294967295|D>>>17),D=w+(z^(V|~R))+O[5]+4237533241&4294967295,w=V+(D<<21&4294967295|D>>>11),D=R+(V^(w|~z))+O[12]+1700485571&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~V))+O[3]+2399980690&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~w))+O[10]+4293915773&4294967295,V=z+(D<<15&4294967295|D>>>17),D=w+(z^(V|~R))+O[1]+2240044497&4294967295,w=V+(D<<21&4294967295|D>>>11),D=R+(V^(w|~z))+O[8]+1873313359&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~V))+O[15]+4264355552&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~w))+O[6]+2734768916&4294967295,V=z+(D<<15&4294967295|D>>>17),D=w+(z^(V|~R))+O[13]+1309151649&4294967295,w=V+(D<<21&4294967295|D>>>11),D=R+(V^(w|~z))+O[4]+4149444226&4294967295,R=w+(D<<6&4294967295|D>>>26),D=z+(w^(R|~V))+O[11]+3174756917&4294967295,z=R+(D<<10&4294967295|D>>>22),D=V+(R^(z|~w))+O[2]+718787259&4294967295,V=z+(D<<15&4294967295|D>>>17),D=w+(z^(V|~R))+O[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(V+(D<<21&4294967295|D>>>11))&4294967295,I.g[2]=I.g[2]+V&4294967295,I.g[3]=I.g[3]+z&4294967295}a.prototype.v=function(I,R){R===void 0&&(R=I.length);const w=R-this.blockSize,O=this.C;let V=this.h,z=0;for(;z<R;){if(V==0)for(;z<=w;)l(this,I,z),z+=this.blockSize;if(typeof I=="string"){for(;z<R;)if(O[V++]=I.charCodeAt(z++),V==this.blockSize){l(this,O),V=0;break}}else for(;z<R;)if(O[V++]=I[z++],V==this.blockSize){l(this,O),V=0;break}}this.h=V,this.o+=R},a.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;R=this.o*8;for(var w=I.length-8;w<I.length;++w)I[w]=R&255,R/=256;for(this.v(I),I=Array(16),R=0,w=0;w<4;++w)for(let O=0;O<32;O+=8)I[R++]=this.g[w]>>>O&255;return I};function d(I,R){var w=y;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=R(I)}function f(I,R){this.h=R;const w=[];let O=!0;for(let V=I.length-1;V>=0;V--){const z=I[V]|0;O&&z==R||(w[V]=z,O=!1)}this.g=w}var y={};function b(I){return-128<=I&&I<128?d(I,function(R){return new f([R|0],R<0?-1:0)}):new f([I|0],I<0?-1:0)}function _(I){if(isNaN(I)||!isFinite(I))return A;if(I<0)return F(_(-I));const R=[];let w=1;for(let O=0;I>=w;O++)R[O]=I/w|0,w*=4294967296;return new f(R,0)}function x(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return F(x(I.substring(1),R));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=_(Math.pow(R,8));let O=A;for(let z=0;z<I.length;z+=8){var V=Math.min(8,I.length-z);const D=parseInt(I.substring(z,z+V),R);V<8?(V=_(Math.pow(R,V)),O=O.j(V).add(_(D))):(O=O.j(w),O=O.add(_(D)))}return O}var A=b(0),N=b(1),U=b(16777216);r=f.prototype,r.m=function(){if(re(this))return-F(this).m();let I=0,R=1;for(let w=0;w<this.g.length;w++){const O=this.i(w);I+=(O>=0?O:4294967296+O)*R,R*=4294967296}return I},r.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(ne(this))return"0";if(re(this))return"-"+F(this).toString(I);const R=_(Math.pow(I,6));var w=this;let O="";for(;;){const V=ve(w,R).g;w=pe(w,V.j(R));let z=((w.g.length>0?w.g[0]:w.h)>>>0).toString(I);if(w=V,ne(w))return z+O;for(;z.length<6;)z="0"+z;O=z+O}},r.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function ne(I){if(I.h!=0)return!1;for(let R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function re(I){return I.h==-1}r.l=function(I){return I=pe(this,I),re(I)?-1:ne(I)?0:1};function F(I){const R=I.g.length,w=[];for(let O=0;O<R;O++)w[O]=~I.g[O];return new f(w,~I.h).add(N)}r.abs=function(){return re(this)?F(this):this},r.add=function(I){const R=Math.max(this.g.length,I.g.length),w=[];let O=0;for(let V=0;V<=R;V++){let z=O+(this.i(V)&65535)+(I.i(V)&65535),D=(z>>>16)+(this.i(V)>>>16)+(I.i(V)>>>16);O=D>>>16,z&=65535,D&=65535,w[V]=D<<16|z}return new f(w,w[w.length-1]&-2147483648?-1:0)};function pe(I,R){return I.add(F(R))}r.j=function(I){if(ne(this)||ne(I))return A;if(re(this))return re(I)?F(this).j(F(I)):F(F(this).j(I));if(re(I))return F(this.j(F(I)));if(this.l(U)<0&&I.l(U)<0)return _(this.m()*I.m());const R=this.g.length+I.g.length,w=[];for(var O=0;O<2*R;O++)w[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<I.g.length;V++){const z=this.i(O)>>>16,D=this.i(O)&65535,He=I.i(V)>>>16,st=I.i(V)&65535;w[2*O+2*V]+=D*st,ie(w,2*O+2*V),w[2*O+2*V+1]+=z*st,ie(w,2*O+2*V+1),w[2*O+2*V+1]+=D*He,ie(w,2*O+2*V+1),w[2*O+2*V+2]+=z*He,ie(w,2*O+2*V+2)}for(I=0;I<R;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=R;I<2*R;I++)w[I]=0;return new f(w,0)};function ie(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function me(I,R){this.g=I,this.h=R}function ve(I,R){if(ne(R))throw Error("division by zero");if(ne(I))return new me(A,A);if(re(I))return R=ve(F(I),R),new me(F(R.g),F(R.h));if(re(R))return R=ve(I,F(R)),new me(F(R.g),R.h);if(I.g.length>30){if(re(I)||re(R))throw Error("slowDivide_ only works with positive integers.");for(var w=N,O=R;O.l(I)<=0;)w=Se(w),O=Se(O);var V=Te(w,1),z=Te(O,1);for(O=Te(O,2),w=Te(w,2);!ne(O);){var D=z.add(O);D.l(I)<=0&&(V=V.add(w),z=D),O=Te(O,1),w=Te(w,1)}return R=pe(I,V.j(R)),new me(V,R)}for(V=A;I.l(R)>=0;){for(w=Math.max(1,Math.floor(I.m()/R.m())),O=Math.ceil(Math.log(w)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),z=_(w),D=z.j(R);re(D)||D.l(I)>0;)w-=O,z=_(w),D=z.j(R);ne(z)&&(z=N),V=V.add(z),I=pe(I,D)}return new me(V,I)}r.B=function(I){return ve(this,I).h},r.and=function(I){const R=Math.max(this.g.length,I.g.length),w=[];for(let O=0;O<R;O++)w[O]=this.i(O)&I.i(O);return new f(w,this.h&I.h)},r.or=function(I){const R=Math.max(this.g.length,I.g.length),w=[];for(let O=0;O<R;O++)w[O]=this.i(O)|I.i(O);return new f(w,this.h|I.h)},r.xor=function(I){const R=Math.max(this.g.length,I.g.length),w=[];for(let O=0;O<R;O++)w[O]=this.i(O)^I.i(O);return new f(w,this.h^I.h)};function Se(I){const R=I.g.length+1,w=[];for(let O=0;O<R;O++)w[O]=I.i(O)<<1|I.i(O-1)>>>31;return new f(w,I.h)}function Te(I,R){const w=R>>5;R%=32;const O=I.g.length-w,V=[];for(let z=0;z<O;z++)V[z]=R>0?I.i(z+w)>>>R|I.i(z+w+1)<<32-R:I.i(z+w);return new f(V,I.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,Nv=a,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=_,f.fromString=x,ns=f}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Iv,dl,Mv,cc,yf,Vv,Ov,jv;(function(){var r,e=Object.defineProperty;function i(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var g=0;g<u.length;++g){var E=u[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var a=i(this);function l(u,g){if(g)e:{var E=a;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in E))break e;E=E[B]}u=u[u.length-1],S=E[u],g=g(S),g!=S&&g!=null&&e(E,u,{configurable:!0,writable:!0,value:g})}}l("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),l("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),l("Object.entries",function(u){return u||function(g){var E=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&E.push([S,g[S]]);return E}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},f=this||self;function y(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function b(u,g,E){return u.call.apply(u.bind,arguments)}function _(u,g,E){return _=b,_.apply(null,arguments)}function x(u,g){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function A(u,g){function E(){}E.prototype=g.prototype,u.Z=g.prototype,u.prototype=new E,u.prototype.constructor=u,u.Ob=function(S,B,Q){for(var he=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)he[Be-2]=arguments[Be];return g.prototype[B].apply(S,he)}}var N=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function U(u){const g=u.length;if(g>0){const E=Array(g);for(let S=0;S<g;S++)E[S]=u[S];return E}return[]}function ne(u,g){for(let S=1;S<arguments.length;S++){const B=arguments[S];var E=typeof B;if(E=E!="object"?E:B?Array.isArray(B)?"array":E:"null",E=="array"||E=="object"&&typeof B.length=="number"){E=u.length||0;const Q=B.length||0;u.length=E+Q;for(let he=0;he<Q;he++)u[E+he]=B[he]}else u.push(B)}}class re{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(u){f.setTimeout(()=>{throw u},0)}function pe(){var u=I;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class ie{constructor(){this.h=this.g=null}add(g,E){const S=me.get();S.set(g,E),this.h?this.h.next=S:this.g=S,this.h=S}}var me=new re(()=>new ve,u=>u.reset());class ve{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,Te=!1,I=new ie,R=()=>{const u=Promise.resolve(void 0);Se=()=>{u.then(w)}};function w(){for(var u;u=pe();){try{u.h.call(u.g)}catch(E){F(E)}var g=me;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Te=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var z=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const E=()=>{};f.addEventListener("test",E,g),f.removeEventListener("test",E,g)}catch{}return u})();function D(u){return/^[\s\xa0]*$/.test(u)}function He(u,g){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}A(He,V),He.prototype.init=function(u,g){const E=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(E=="mouseover"?g=u.fromElement:E=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&He.Z.h.call(this)},He.prototype.h=function(){He.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var st="closure_listenable_"+(Math.random()*1e6|0),Y=0;function de(u,g,E,S,B){this.listener=u,this.proxy=null,this.src=g,this.type=E,this.capture=!!S,this.ha=B,this.key=++Y,this.da=this.fa=!1}function we(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function ue(u,g,E){for(const S in u)g.call(E,u[S],S,u)}function Fe(u,g){for(const E in u)g.call(void 0,u[E],E,u)}function C(u){const g={};for(const E in u)g[E]=u[E];return g}const $="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(u,g){let E,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(E in S)u[E]=S[E];for(let Q=0;Q<$.length;Q++)E=$[Q],Object.prototype.hasOwnProperty.call(S,E)&&(u[E]=S[E])}}function Ee(u){this.src=u,this.g={},this.h=0}Ee.prototype.add=function(u,g,E,S,B){const Q=u.toString();u=this.g[Q],u||(u=this.g[Q]=[],this.h++);const he=je(u,g,S,B);return he>-1?(g=u[he],E||(g.fa=!1)):(g=new de(g,this.src,Q,!!S,B),g.fa=E,u.push(g)),g};function Ve(u,g){const E=g.type;if(E in u.g){var S=u.g[E],B=Array.prototype.indexOf.call(S,g,void 0),Q;(Q=B>=0)&&Array.prototype.splice.call(S,B,1),Q&&(we(g),u.g[E].length==0&&(delete u.g[E],u.h--))}}function je(u,g,E,S){for(let B=0;B<u.length;++B){const Q=u[B];if(!Q.da&&Q.listener==g&&Q.capture==!!E&&Q.ha==S)return B}return-1}var Ge="closure_lm_"+(Math.random()*1e6|0),Ct={};function lt(u,g,E,S,B){if(Array.isArray(g)){for(let Q=0;Q<g.length;Q++)lt(u,g[Q],E,S,B);return null}return E=gs(E),u&&u[st]?u.J(g,E,y(S)?!!S.capture:!1,B):ai(u,g,E,!1,S,B)}function ai(u,g,E,S,B,Q){if(!g)throw Error("Invalid event type");const he=y(B)?!!B.capture:!!B;let Be=Qi(u);if(Be||(u[Ge]=Be=new Ee(u)),E=Be.add(g,E,S,he,Q),E.proxy)return E;if(S=yr(),E.proxy=S,S.src=u,S.listener=E,u.addEventListener)z||(B=he),B===void 0&&(B=!1),u.addEventListener(g.toString(),S,B);else if(u.attachEvent)u.attachEvent(Gn(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function yr(){function u(E){return g.call(u.src,u.listener,E)}const g=fs;return u}function vr(u,g,E,S,B){if(Array.isArray(g))for(var Q=0;Q<g.length;Q++)vr(u,g[Q],E,S,B);else S=y(S)?!!S.capture:!!S,E=gs(E),u&&u[st]?(u=u.i,Q=String(g).toString(),Q in u.g&&(g=u.g[Q],E=je(g,E,S,B),E>-1&&(we(g[E]),Array.prototype.splice.call(g,E,1),g.length==0&&(delete u.g[Q],u.h--)))):u&&(u=Qi(u))&&(g=u.g[g.toString()],u=-1,g&&(u=je(g,E,S,B)),(E=u>-1?g[u]:null)&&_r(E))}function _r(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[st])Ve(g.i,u);else{var E=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(E,S,u.capture):g.detachEvent?g.detachEvent(Gn(E),S):g.addListener&&g.removeListener&&g.removeListener(S),(E=Qi(g))?(Ve(E,u),E.h==0&&(E.src=null,g[Ge]=null)):we(u)}}}function Gn(u){return u in Ct?Ct[u]:Ct[u]="on"+u}function fs(u,g){if(u.da)u=!0;else{g=new He(g,this);const E=u.listener,S=u.ha||u.src;u.fa&&_r(u),u=E.call(S,g)}return u}function Qi(u){return u=u[Ge],u instanceof Ee?u:null}var ms="__closure_events_fn_"+(Math.random()*1e9>>>0);function gs(u){return typeof u=="function"?u:(u[ms]||(u[ms]=function(g){return u.handleEvent(g)}),u[ms])}function Dt(){O.call(this),this.i=new Ee(this),this.M=this,this.G=null}A(Dt,O),Dt.prototype[st]=!0,Dt.prototype.removeEventListener=function(u,g,E,S){vr(this,u,g,E,S)};function Mt(u,g){var E,S=u.G;if(S)for(E=[];S;S=S.G)E.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new V(g,u);else if(g instanceof V)g.target=g.target||u;else{var B=g;g=new V(S,u),fe(g,B)}B=!0;let Q,he;if(E)for(he=E.length-1;he>=0;he--)Q=g.g=E[he],B=vi(Q,S,!0,g)&&B;if(Q=g.g=u,B=vi(Q,S,!0,g)&&B,B=vi(Q,S,!1,g)&&B,E)for(he=0;he<E.length;he++)Q=g.g=E[he],B=vi(Q,S,!1,g)&&B}Dt.prototype.N=function(){if(Dt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const E=u.g[g];for(let S=0;S<E.length;S++)we(E[S]);delete u.g[g],u.h--}}this.G=null},Dt.prototype.J=function(u,g,E,S){return this.i.add(String(u),g,!1,E,S)},Dt.prototype.K=function(u,g,E,S){return this.i.add(String(u),g,!0,E,S)};function vi(u,g,E,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let Q=0;Q<g.length;++Q){const he=g[Q];if(he&&!he.da&&he.capture==E){const Be=he.listener,Vt=he.ha||he.src;he.fa&&Ve(u.i,he),B=Be.call(Vt,S)!==!1&&B}}return B&&!S.defaultPrevented}function ea(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=_(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:f.setTimeout(u,g||0)}function ta(u){u.g=ea(()=>{u.g=null,u.i&&(u.i=!1,ta(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class tn extends O{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ta(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yi(u){O.call(this),this.h=u,this.g={}}A(Yi,O);var ps=[];function ys(u){ue(u.g,function(g,E){this.g.hasOwnProperty(E)&&_r(g)},u),u.g={}}Yi.prototype.N=function(){Yi.Z.N.call(this),ys(this)},Yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oi=f.JSON.stringify,P=f.JSON.parse,k=class{stringify(u){return f.JSON.stringify(u,void 0)}parse(u){return f.JSON.parse(u,void 0)}};function X(){}function oe(){}var ge={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ce(){V.call(this,"d")}A(ce,V);function le(){V.call(this,"c")}A(le,V);var Re={},se=null;function Ue(){return se=se||new Dt}Re.Ia="serverreachability";function xt(u){V.call(this,Re.Ia,u)}A(xt,V);function De(u){const g=Ue();Mt(g,new xt(g))}Re.STAT_EVENT="statevent";function Qe(u,g){V.call(this,Re.STAT_EVENT,u),this.stat=g}A(Qe,V);function ut(u){const g=Ue();Mt(g,new Qe(g,u))}Re.Ja="timingevent";function pn(u,g){V.call(this,Re.Ja,u),this.size=g}A(pn,V);function En(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){u()},g)}function yn(){this.g=!0}yn.prototype.ua=function(){this.g=!1};function nt(u,g,E,S,B,Q){u.info(function(){if(u.g)if(Q){var he="",Be=Q.split("&");for(let at=0;at<Be.length;at++){var Vt=Be[at].split("=");if(Vt.length>1){const St=Vt[0];Vt=Vt[1];const Kn=St.split("_");he=Kn.length>=2&&Kn[1]=="type"?he+(St+"="+Vt+"&"):he+(St+"=redacted&")}}}else he=null;else he=Q;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+E+`
`+he})}function Qt(u,g,E,S,B,Q,he){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+E+`
`+Q+" "+he})}function Xt(u,g,E,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+vs(u,E)+(S?" "+S:"")})}function Vn(u,g){u.info(function(){return"TIMEOUT: "+g})}yn.prototype.info=function(){};function vs(u,g){if(!u.g)return g;if(!g)return null;try{const Q=JSON.parse(g);if(Q){for(u=0;u<Q.length;u++)if(Array.isArray(Q[u])){var E=Q[u];if(!(E.length<2)){var S=E[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let he=1;he<S.length;he++)S[he]=""}}}}return oi(Q)}catch{return g}}var _i={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ki={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},bi;function Tn(){}A(Tn,X),Tn.prototype.g=function(){return new XMLHttpRequest},bi=new Tn;function nn(u){return encodeURIComponent(String(u))}function na(u){var g=1;u=u.split(":");const E=[];for(;g>0&&u.length;)E.push(u.shift()),g--;return u.length&&E.push(u.join(":")),E}function vn(u,g,E,S){this.j=u,this.i=g,this.l=E,this.S=S||1,this.V=new Yi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Hn}function Hn(){this.i=null,this.g="",this.h=!1}var At={},$t={};function Ei(u,g,E){u.M=1,u.A=_s(Lt(g)),u.u=E,u.R=!0,ia(u,null)}function ia(u,g){u.F=Date.now(),Ti(u),u.B=Lt(u.A);var E=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),oa(E.i,"t",S),u.C=0,E=u.j.L,u.h=new Hn,u.g=$l(u.j,E?g:null,!u.u),u.P>0&&(u.O=new tn(_(u.Y,u,u.g),u.P)),g=u.V,E=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(ps[0]=B.toString()),B=ps);for(let Q=0;Q<B.length;Q++){const he=lt(E,B[Q],S||g.handleEvent,!1,g.h||g);if(!he)break;g.g[he.key]=he}g=u.J?C(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),De(),nt(u.i,u.v,u.B,u.l,u.S,u.u)}vn.prototype.ba=function(u){u=u.target;const g=this.O;g&&ci(u)==3?g.j():this.Y(u)},vn.prototype.Y=function(u){try{if(u==this.g)e:{const Be=ci(this.g),Vt=this.g.ya(),at=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||rn(this.g)))){this.K||Be!=4||Vt==7||(Vt==8||at<=0?De(3):De(2)),xi(this);var g=this.g.ca();this.X=g;var E=Zc(this);if(this.o=g==200,Qt(this.i,this.v,this.B,this.l,this.S,Be,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var Q=S;break t}}Q=null}if(u=Q)Xt(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ai(this,u);else{this.o=!1,this.m=3,ut(12),On(this),Fn(this);break e}}if(this.R){u=!0;let St;for(;!this.K&&this.C<E.length;)if(St=kl(this,E),St==$t){Be==4&&(this.m=4,ut(14),u=!1),Xt(this.i,this.l,null,"[Incomplete Response]");break}else if(St==At){this.m=4,ut(15),Xt(this.i,this.l,E,"[Invalid Chunk]"),u=!1;break}else Xt(this.i,this.l,St,null),Ai(this,St);if(zl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||E.length!=0||this.h.h||(this.m=1,ut(16),u=!1),this.o=this.o&&u,!u)Xt(this.i,this.l,E,"[Invalid Chunked Response]"),On(this),Fn(this);else if(E.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),wo(he),he.P=!0,ut(11))}}else Xt(this.i,this.l,E,null),Ai(this,E);Be==4&&On(this),this.o&&!this.K&&(Be==4?Ql(this.j,this):(this.o=!1,Ti(this)))}else $i(this.g),g==400&&E.indexOf("Unknown SID")>0?(this.m=3,ut(12)):(this.m=0,ut(13)),On(this),Fn(this)}}}catch{}finally{}};function Zc(u){if(!zl(u))return u.g.la();const g=rn(u.g);if(g==="")return"";let E="";const S=g.length,B=ci(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return On(u),Fn(u),"";u.h.i=new f.TextDecoder}for(let Q=0;Q<S;Q++)u.h.h=!0,E+=u.h.i.decode(g[Q],{stream:!(B&&Q==S-1)});return g.length=0,u.h.g+=E,u.C=0,u.h.g}function zl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function kl(u,g){var E=u.C,S=g.indexOf(`
`,E);return S==-1?$t:(E=Number(g.substring(E,S)),isNaN(E)?At:(S+=1,S+E>g.length?$t:(g=g.slice(S,S+E),u.C=S+E,g)))}vn.prototype.cancel=function(){this.K=!0,On(this)};function Ti(u){u.T=Date.now()+u.H,ra(u,u.H)}function ra(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=En(_(u.aa,u),g)}function xi(u){u.D&&(f.clearTimeout(u.D),u.D=null)}vn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Vn(this.i,this.B),this.M!=2&&(De(),ut(17)),On(this),this.m=2,Fn(this)):ra(this,this.T-u)};function Fn(u){u.j.I==0||u.K||Ql(u.j,u)}function On(u){xi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,ys(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function Ai(u,g){try{var E=u.j;if(E.I!=0&&(E.g==u||wi(E.h,u))){if(!u.L&&wi(E.h,u)&&E.I==3){try{var S=E.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<u.F)ha(E),Cr(E);else break e;ws(E),ut(18)}}else E.xa=B[1],0<E.xa-E.K&&B[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=En(_(E.Va,E),6e3));Si(E.h)<=1&&E.ta&&(E.ta=void 0)}else Mi(E,11)}else if((u.L||E.g==u)&&ha(E),!D(g))for(B=E.Ba.g.parse(g),g=0;g<B.length;g++){let at=B[g];const St=at[0];if(!(St<=E.K))if(E.K=St,at=at[1],E.I==2)if(at[0]=="c"){E.M=at[1],E.ba=at[2];const Kn=at[3];Kn!=null&&(E.ka=Kn,E.j.info("VER="+E.ka));const Vi=at[4];Vi!=null&&(E.za=Vi,E.j.info("SVER="+E.za));const di=at[5];di!=null&&typeof di=="number"&&di>0&&(S=1.5*di,E.O=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const hi=u.g;if(hi){const Cs=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Cs){var Q=S.h;Q.g||Cs.indexOf("spdy")==-1&&Cs.indexOf("quic")==-1&&Cs.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(mo(Q,Q.h),Q.h=null))}if(S.G){const fa=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;fa&&(S.wa=fa,dt(S.J,S.G,fa))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-u.F,E.j.info("Handshake RTT: "+E.T+"ms")),S=E;var he=u;if(S.na=Xl(S,S.L?S.ba:null,S.W),he.L){go(S.h,he);var Be=he,Vt=S.O;Vt&&(Be.H=Vt),Be.D&&(xi(Be),Ti(Be)),S.g=he}else Hl(S);E.i.length>0&&Ii(E)}else at[0]!="stop"&&at[0]!="close"||Mi(E,7);else E.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?Mi(E,7):Ao(E):at[0]!="noop"&&E.l&&E.l.qa(at),E.A=0)}}De(4)}catch{}}var kt=class{constructor(u,g){this.g=u,this.map=g}};function ho(u){this.l=u||10,f.PerformanceNavigationTiming?(u=f.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function fo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Si(u){return u.h?1:u.g?u.g.size:0}function wi(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function mo(u,g){u.g?u.g.add(g):u.h=g}function go(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}ho.prototype.cancel=function(){if(this.i=po(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function po(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const E of u.g.values())g=g.concat(E.G);return g}return U(u.i)}var Ll=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sa(u,g){if(u){u=u.split("&");for(let E=0;E<u.length;E++){const S=u[E].indexOf("=");let B,Q=null;S>=0?(B=u[E].substring(0,S),Q=u[E].substring(S+1)):B=u[E],g(B,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function jn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof jn?(this.l=u.l,Wt(this,u.j),this.o=u.o,this.g=u.g,br(this,u.u),this.h=u.h,yo(this,ql(u.i)),this.m=u.m):u&&(g=String(u).match(Ll))?(this.l=!1,Wt(this,g[1]||"",!0),this.o=Ci(g[2]||""),this.g=Ci(g[3]||"",!0),br(this,g[4]),this.h=Ci(g[5]||"",!0),yo(this,g[6]||"",!0),this.m=Ci(g[7]||"")):(this.l=!1,this.i=new Tr(null,this.l))}jn.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(bs(g,aa,!0),":");var E=this.g;return(E||g=="file")&&(u.push("//"),(g=this.o)&&u.push(bs(g,aa,!0),"@"),u.push(nn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&u.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&u.push("/"),u.push(bs(E,E.charAt(0)=="/"?vo:Ul,!0))),(E=this.i.toString())&&u.push("?",E),(E=this.m)&&u.push("#",bs(E,Bl)),u.join("")},jn.prototype.resolve=function(u){const g=Lt(this);let E=!!u.j;E?Wt(g,u.j):E=!!u.o,E?g.o=u.o:E=!!u.g,E?g.g=u.g:E=u.u!=null;var S=u.h;if(E)br(g,u.u);else if(E=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=g.h.lastIndexOf("/");B!=-1&&(S=g.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const Q=[];for(let he=0;he<B.length;){const Be=B[he++];Be=="."?S&&he==B.length&&Q.push(""):Be==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),S&&he==B.length&&Q.push("")):(Q.push(Be),S=!0)}S=Q.join("/")}else S=B}return E?g.h=S:E=u.i.toString()!=="",E?yo(g,ql(u.i)):E=!!u.m,E&&(g.m=u.m),g};function Lt(u){return new jn(u)}function Wt(u,g,E){u.j=E?Ci(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function br(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function yo(u,g,E){g instanceof Tr?(u.i=g,la(u.i,u.l)):(E||(g=bs(g,Er)),u.i=new Tr(g,u.l))}function dt(u,g,E){u.i.set(g,E)}function _s(u){return dt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ci(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bs(u,g,E){return typeof u=="string"?(u=encodeURI(u).replace(g,xn),E&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var aa=/[#\/\?@]/g,Ul=/[#\?:]/g,vo=/[#\?]/g,Er=/[#\?@]/g,Bl=/#/g;function Tr(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function An(u){u.g||(u.g=new Map,u.h=0,u.i&&sa(u.i,function(g,E){u.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}r=Tr.prototype,r.add=function(u,g){An(this),this.i=null,u=xr(this,u);let E=this.g.get(u);return E||this.g.set(u,E=[]),E.push(g),this.h+=1,this};function Pl(u,g){An(u),g=xr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function _o(u,g){return An(u),g=xr(u,g),u.g.has(g)}r.forEach=function(u,g){An(this),this.g.forEach(function(E,S){E.forEach(function(B){u.call(g,B,S,this)},this)},this)};function bo(u,g){An(u);let E=[];if(typeof g=="string")_o(u,g)&&(E=E.concat(u.g.get(xr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)E=E.concat(u[g]);return E}r.set=function(u,g){return An(this),this.i=null,u=xr(this,u),_o(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},r.get=function(u,g){return u?(u=bo(this,u),u.length>0?String(u[0]):g):g};function oa(u,g,E){Pl(u,g),E.length>0&&(u.i=null,u.g.set(xr(u,g),U(E)),u.h+=E.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var E=g[S];const B=nn(E);E=bo(this,E);for(let Q=0;Q<E.length;Q++){let he=B;E[Q]!==""&&(he+="="+nn(E[Q])),u.push(he)}}return this.i=u.join("&")};function ql(u){const g=new Tr;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function xr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function la(u,g){g&&!u.j&&(An(u),u.i=null,u.g.forEach(function(E,S){const B=S.toLowerCase();S!=B&&(Pl(this,S),oa(this,B,E))},u)),u.j=g}function li(u,g){const E=new yn;if(f.Image){const S=new Image;S.onload=x(Qn,E,"TestLoadImage: loaded",!0,g,S),S.onerror=x(Qn,E,"TestLoadImage: error",!1,g,S),S.onabort=x(Qn,E,"TestLoadImage: abort",!1,g,S),S.ontimeout=x(Qn,E,"TestLoadImage: timeout",!1,g,S),f.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function Eo(u,g){const E=new yn,S=new AbortController,B=setTimeout(()=>{S.abort(),Qn(E,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(Q=>{clearTimeout(B),Q.ok?Qn(E,"TestPingServer: ok",!0,g):Qn(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Qn(E,"TestPingServer: error",!1,g)})}function Qn(u,g,E,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(E)}catch{}}function Ar(){this.g=new k}function Ri(u){this.i=u.Sb||null,this.h=u.ab||!1}A(Ri,X),Ri.prototype.g=function(){return new Es(this.i,this.h)};function Es(u,g){Dt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Es,Dt),r=Es.prototype,r.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,ui(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||f).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Sr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ui(this)),this.g&&(this.readyState=3,ui(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ua(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ua(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Sr(this):ui(this),this.readyState==3&&ua(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Sr(this))},r.Na=function(u){this.g&&(this.response=u,Sr(this))},r.ga=function(){this.g&&Sr(this)};function Sr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ui(u)}r.setRequestHeader=function(u,g){this.A.append(u,g)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,u.push(E[0]+": "+E[1]),E=g.next();return u.join(`\r
`)};function ui(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Es.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Yn(u){let g="";return ue(u,function(E,S){g+=S,g+=":",g+=E,g+=`\r
`}),g}function Ts(u,g,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=Yn(E),typeof u=="string"?E!=null&&nn(E):dt(u,g,E))}function mt(u){Dt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(mt,Dt);var Di=/^https?$/i,To=["POST","PUT"];r=mt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,g,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():bi.g(),this.g.onreadystatechange=N(_(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(Q){xs(this,Q);return}if(u=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)E.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Q of S.keys())E.set(Q,S.get(Q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(Q=>Q.toLowerCase()=="content-type"),B=f.FormData&&u instanceof f.FormData,!(Array.prototype.indexOf.call(To,g,void 0)>=0)||S||B||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of E)this.g.setRequestHeader(Q,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(Q){xs(this,Q)}};function xs(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,xo(u),Xi(u)}function xo(u){u.A||(u.A=!0,Mt(u,"complete"),Mt(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Mt(this,"complete"),Mt(this,"abort"),Xi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xi(this,!0)),mt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?As(this):this.Xa())},r.Xa=function(){As(this)};function As(u){if(u.h&&typeof d<"u"){if(u.v&&ci(u)==4)setTimeout(u.Ca.bind(u),0);else if(Mt(u,"readystatechange"),ci(u)==4){u.h=!1;try{const Q=u.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var S;if(S=Q===0){let he=String(u.D).match(Ll)[1]||null;!he&&f.self&&f.self.location&&(he=f.self.location.protocol.slice(0,-1)),S=!Di.test(he?he.toLowerCase():"")}E=S}if(E)Mt(u,"complete"),Mt(u,"success");else{u.o=6;try{var B=ci(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",xo(u)}}finally{Xi(u)}}}}function Xi(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const E=u.g;u.g=null,g||Mt(u,"ready");try{E.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ci(u){return u.g?u.g.readyState:0}r.ca=function(){try{return ci(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),P(g)}};function rn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $i(u){const g={};u=(u.g&&ci(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(D(u[S]))continue;var E=na(u[S]);const B=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Q=g[B]||[];g[B]=Q,Q.push(E)}Fe(g,function(S){return S.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ni(u,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[u]||g}function wr(u){this.za=0,this.i=[],this.j=new yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ni("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ni("baseRetryDelayMs",5e3,u),this.Za=Ni("retryDelaySeedMs",1e4,u),this.Ta=Ni("forwardChannelMaxRetries",2,u),this.va=Ni("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new ho(u&&u.concurrentRequestLimit),this.Ba=new Ar,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=wr.prototype,r.ka=8,r.I=1,r.connect=function(u,g,E,S){ut(0),this.W=u,this.H=g||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.J=Xl(this,null,this.W),Ii(this)};function Ao(u){if(ca(u),u.I==3){var g=u.V++,E=Lt(u.J);if(dt(E,"SID",u.M),dt(E,"RID",g),dt(E,"TYPE","terminate"),Ss(u,E),g=new vn(u,u.j,g),g.M=2,g.A=_s(Lt(E)),E=!1,f.navigator&&f.navigator.sendBeacon)try{E=f.navigator.sendBeacon(g.A.toString(),"")}catch{}!E&&f.Image&&(new Image().src=g.A,E=!0),E||(g.g=$l(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Ti(g)}Kl(u)}function Cr(u){u.g&&(wo(u),u.g.cancel(),u.g=null)}function ca(u){Cr(u),u.v&&(f.clearTimeout(u.v),u.v=null),ha(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&f.clearTimeout(u.m),u.m=null)}function Ii(u){if(!fo(u.h)&&!u.m){u.m=!0;var g=u.Ea;Se||R(),Te||(Se(),Te=!0),I.add(g,u),u.D=0}}function da(u,g){return Si(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=En(_(u.Ea,u,g),Yl(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new vn(this,this.j,u);let Q=this.o;if(this.U&&(Q?(Q=C(Q),fe(Q,this.U)):Q=this.U),this.u!==null||this.R||(B.J=Q,Q=null),this.S)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Gl(this,B,g),E=Lt(this.J),dt(E,"RID",u),dt(E,"CVER",22),this.G&&dt(E,"X-HTTP-Session-Id",this.G),Ss(this,E),Q&&(this.R?g="headers="+nn(Yn(Q))+"&"+g:this.u&&Ts(E,this.u,Q)),mo(this.h,B),this.Ra&&dt(E,"TYPE","init"),this.S?(dt(E,"$req",g),dt(E,"SID","null"),B.U=!0,Ei(B,E,null)):Ei(B,E,g),this.I=2}}else this.I==3&&(u?So(this,u):this.i.length==0||fo(this.h)||So(this))};function So(u,g){var E;g?E=g.l:E=u.V++;const S=Lt(u.J);dt(S,"SID",u.M),dt(S,"RID",E),dt(S,"AID",u.K),Ss(u,S),u.u&&u.o&&Ts(S,u.u,u.o),E=new vn(u,u.j,E,u.D+1),u.u===null&&(E.J=u.o),g&&(u.i=g.G.concat(u.i)),g=Gl(u,E,1e3),E.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),mo(u.h,E),Ei(E,S,g)}function Ss(u,g){u.H&&ue(u.H,function(E,S){dt(g,S,E)}),u.l&&ue({},function(E,S){dt(g,S,E)})}function Gl(u,g,E){E=Math.min(u.i.length,E);const S=u.l?_(u.l.Ka,u.l,u):null;e:{var B=u.i;let Be=-1;for(;;){const Vt=["count="+E];Be==-1?E>0?(Be=B[0].g,Vt.push("ofs="+Be)):Be=0:Vt.push("ofs="+Be);let at=!0;for(let St=0;St<E;St++){var Q=B[St].g;const Kn=B[St].map;if(Q-=Be,Q<0)Be=Math.max(0,B[St].g-100),at=!1;else try{Q="req"+Q+"_"||"";try{var he=Kn instanceof Map?Kn:Object.entries(Kn);for(const[Vi,di]of he){let hi=di;y(di)&&(hi=oi(di)),Vt.push(Q+Vi+"="+encodeURIComponent(hi))}}catch(Vi){throw Vt.push(Q+"type="+encodeURIComponent("_badmap")),Vi}}catch{S&&S(Kn)}}if(at){he=Vt.join("&");break e}}he=void 0}return u=u.i.splice(0,E),g.G=u,he}function Hl(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;Se||R(),Te||(Se(),Te=!0),I.add(g,u),u.A=0}}function ws(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=En(_(u.Da,u),Yl(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Fl(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=En(_(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ut(10),Cr(this),Fl(this))};function wo(u){u.B!=null&&(f.clearTimeout(u.B),u.B=null)}function Fl(u){u.g=new vn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Lt(u.na);dt(g,"RID","rpc"),dt(g,"SID",u.M),dt(g,"AID",u.K),dt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&dt(g,"TO",u.ia),dt(g,"TYPE","xmlhttp"),Ss(u,g),u.u&&u.o&&Ts(g,u.u,u.o),u.O&&(u.g.H=u.O);var E=u.g;u=u.ba,E.M=1,E.A=_s(Lt(g)),E.u=null,E.R=!0,ia(E,u)}r.Va=function(){this.C!=null&&(this.C=null,Cr(this),ws(this),ut(19))};function ha(u){u.C!=null&&(f.clearTimeout(u.C),u.C=null)}function Ql(u,g){var E=null;if(u.g==g){ha(u),wo(u),u.g=null;var S=2}else if(wi(u.h,g))E=g.G,go(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){E=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;S=Ue(),Mt(S,new pn(S,E)),Ii(u)}else Hl(u);else if(B=g.m,B==3||B==0&&g.X>0||!(S==1&&da(u,g)||S==2&&ws(u)))switch(E&&E.length>0&&(g=u.h,g.i=g.i.concat(E)),B){case 1:Mi(u,5);break;case 4:Mi(u,10);break;case 3:Mi(u,6);break;default:Mi(u,2)}}}function Yl(u,g){let E=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(E*=2),E*g}function Mi(u,g){if(u.j.info("Error code "+g),g==2){var E=_(u.bb,u),S=u.Ua;const B=!S;S=new jn(S||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||Wt(S,"https"),_s(S),B?li(S.toString(),E):Eo(S.toString(),E)}else ut(2);u.I=0,u.l&&u.l.pa(g),Kl(u),ca(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function Kl(u){if(u.I=0,u.ja=[],u.l){const g=po(u.h);(g.length!=0||u.i.length!=0)&&(ne(u.ja,g),ne(u.ja,u.i),u.h.i.length=0,U(u.i),u.i.length=0),u.l.oa()}}function Xl(u,g,E){var S=E instanceof jn?Lt(E):new jn(E);if(S.g!="")g&&(S.g=g+"."+S.g),br(S,S.u);else{var B=f.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const Q=new jn(null);S&&Wt(Q,S),g&&(Q.g=g),B&&br(Q,B),E&&(Q.h=E),S=Q}return E=u.G,g=u.wa,E&&g&&dt(S,E,g),dt(S,"VER",u.ka),Ss(u,S),S}function $l(u,g,E){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new mt(new Ri({ab:E})):new mt(u.ma),g.Fa(u.L),g}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wl(){}r=Wl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Rr(){}Rr.prototype.g=function(u,g){return new _n(u,g)};function _n(u,g){Dt.call(this),this.g=new wr(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!D(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new Wi(this)}A(_n,Dt),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Ao(this.g)},_n.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var E={};E.__data__=u,u=E}else this.v&&(E={},E.__data__=oi(u),u=E);g.i.push(new kt(g.Ya++,u)),g.I==3&&Ii(g)},_n.prototype.N=function(){this.g.l=null,delete this.j,Ao(this.g),delete this.g,_n.Z.N.call(this)};function Zl(u){ce.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const E in g){u=E;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}A(Zl,ce);function Jl(){le.call(this),this.status=1}A(Jl,le);function Wi(u){this.g=u}A(Wi,Wl),Wi.prototype.ra=function(){Mt(this.g,"a")},Wi.prototype.qa=function(u){Mt(this.g,new Zl(u))},Wi.prototype.pa=function(u){Mt(this.g,new Jl)},Wi.prototype.oa=function(){Mt(this.g,"b")},Rr.prototype.createWebChannel=Rr.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,jv=function(){return new Rr},Ov=function(){return Ue()},Vv=Re,yf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,cc=_i,Ki.COMPLETE="complete",Mv=Ki,oe.EventType=ge,ge.OPEN="a",ge.CLOSE="b",ge.ERROR="c",ge.MESSAGE="d",Dt.prototype.listen=Dt.prototype.J,dl=oe,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,Iv=mt}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});const f0="@firebase/firestore",m0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ao="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Av("@firebase/firestore");function Ga(){return Ks.logLevel}function xe(r,...e){if(Ks.logLevel<=tt.DEBUG){const i=e.map(Uf);Ks.debug(`Firestore (${ao}): ${r}`,...i)}}function gr(r,...e){if(Ks.logLevel<=tt.ERROR){const i=e.map(Uf);Ks.error(`Firestore (${ao}): ${r}`,...i)}}function Ja(r,...e){if(Ks.logLevel<=tt.WARN){const i=e.map(Uf);Ks.warn(`Firestore (${ao}): ${r}`,...i)}}function Uf(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(i){return JSON.stringify(i)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(r,e,i){let a="Unexpected state";typeof e=="string"?a=e:i=e,zv(r,a,i)}function zv(r,e,i){let a=`FIRESTORE (${ao}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(i!==void 0)try{a+=" CONTEXT: "+JSON.stringify(i)}catch{a+=" CONTEXT: "+i}throw gr(a),new Error(a)}function ct(r,e,i,a){let l="Unexpected state";typeof i=="string"?l=i:a=i,r||zv(e,l,a)}function Le(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends so{constructor(e,i){super(e,i),this.code=e,this.message=i,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(){this.promise=new Promise(((e,i)=>{this.resolve=e,this.reject=i}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(e,i){this.user=i,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Cx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,i){e.enqueueRetryable((()=>i(mn.UNAUTHENTICATED)))}shutdown(){}}class Rx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,i){this.changeListener=i,e.enqueueRetryable((()=>i(this.token.user)))}shutdown(){this.changeListener=null}}class Dx{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,i){ct(this.o===void 0,42304);let a=this.i;const l=b=>this.i!==a?(a=this.i,i(b)):Promise.resolve();let d=new is;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new is,e.enqueueRetryable((()=>l(this.currentUser)))};const f=()=>{const b=d;e.enqueueRetryable((async()=>{await b.promise,await l(this.currentUser)}))},y=b=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((b=>y(b))),setTimeout((()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?y(b):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new is)}}),0),f()}getToken(){const e=this.i,i=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(i).then((a=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(ct(typeof a.accessToken=="string",31837,{l:a}),new kv(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ct(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class Nx{constructor(e,i,a){this.P=e,this.T=i,this.I=a,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ix{constructor(e,i,a){this.P=e,this.T=i,this.I=a}getToken(){return Promise.resolve(new Nx(this.P,this.T,this.I))}start(e,i){e.enqueueRetryable((()=>i(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class g0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mx{constructor(e,i){this.V=i,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,cx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,i){ct(this.o===void 0,3512);const a=d=>{d.error!=null&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${d.error.message}`);const f=d.token!==this.m;return this.m=d.token,xe("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?i(d.token):Promise.resolve()};this.o=d=>{e.enqueueRetryable((()=>a(d)))};const l=d=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((d=>l(d))),setTimeout((()=>{if(!this.appCheck){const d=this.V.getImmediate({optional:!0});d?l(d):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new g0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((i=>i?(ct(typeof i.token=="string",44558,{tokenResult:i}),this.m=i.token,new g0(i.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),i=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(i);else for(let a=0;a<r;a++)i[a]=Math.floor(256*Math.random());return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const l=Vx(40);for(let d=0;d<l.length;++d)a.length<20&&l[d]<i&&(a+=e.charAt(l[d]%62))}return a}}function We(r,e){return r<e?-1:r>e?1:0}function vf(r,e){const i=Math.min(r.length,e.length);for(let a=0;a<i;a++){const l=r.charAt(a),d=e.charAt(a);if(l!==d)return af(l)===af(d)?We(l,d):af(l)?1:-1}return We(r.length,e.length)}const Ox=55296,jx=57343;function af(r){const e=r.charCodeAt(0);return e>=Ox&&e<=jx}function eo(r,e,i){return r.length===e.length&&r.every(((a,l)=>i(a,e[l])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="__name__";class Ui{constructor(e,i,a){i===void 0?i=0:i>e.length&&Oe(637,{offset:i,range:e.length}),a===void 0?a=e.length-i:a>e.length-i&&Oe(1746,{length:a,range:e.length-i}),this.segments=e,this.offset=i,this.len=a}get length(){return this.len}isEqual(e){return Ui.comparator(this,e)===0}child(e){const i=this.segments.slice(this.offset,this.limit());return e instanceof Ui?e.forEach((a=>{i.push(a)})):i.push(e),this.construct(i)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let i=0;i<this.length;i++)if(this.get(i)!==e.get(i))return!1;return!0}forEach(e){for(let i=this.offset,a=this.limit();i<a;i++)e(this.segments[i])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,i){const a=Math.min(e.length,i.length);for(let l=0;l<a;l++){const d=Ui.compareSegments(e.get(l),i.get(l));if(d!==0)return d}return We(e.length,i.length)}static compareSegments(e,i){const a=Ui.isNumericId(e),l=Ui.isNumericId(i);return a&&!l?-1:!a&&l?1:a&&l?Ui.extractNumericId(e).compare(Ui.extractNumericId(i)):vf(e,i)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ns.fromString(e.substring(4,e.length-2))}}class _t extends Ui{construct(e,i,a){return new _t(e,i,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const i=[];for(const a of e){if(a.indexOf("//")>=0)throw new be(ee.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);i.push(...a.split("/").filter((l=>l.length>0)))}return new _t(i)}static emptyPath(){return new _t([])}}const zx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Ui{construct(e,i,a){return new cn(e,i,a)}static isValidIdentifier(e){return zx.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===p0}static keyField(){return new cn([p0])}static fromServerFormat(e){const i=[];let a="",l=0;const d=()=>{if(a.length===0)throw new be(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);i.push(a),a=""};let f=!1;for(;l<e.length;){const y=e[l];if(y==="\\"){if(l+1===e.length)throw new be(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const b=e[l+1];if(b!=="\\"&&b!=="."&&b!=="`")throw new be(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=b,l+=2}else y==="`"?(f=!f,l++):y!=="."||f?(a+=y,l++):(d(),l++)}if(d(),f)throw new be(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(i)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(_t.fromString(e))}static fromName(e){return new Ie(_t.fromString(e).popFirst(5))}static empty(){return new Ie(_t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&_t.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,i){return _t.comparator(e.path,i.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new _t(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lv(r,e,i){if(!i)throw new be(ee.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function kx(r,e,i,a){if(e===!0&&a===!0)throw new be(ee.INVALID_ARGUMENT,`${r} and ${i} cannot be used together.`)}function y0(r){if(!Ie.isDocumentKey(r))throw new be(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function v0(r){if(Ie.isDocumentKey(r))throw new be(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Uv(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Uc(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Oe(12329,{type:typeof r})}function Ac(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new be(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const i=Uc(r);throw new be(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${i}`)}}return r}function Lx(r,e){if(e<=0)throw new be(ee.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(r,e){const i={typeString:r};return e&&(i.value=e),i}function Il(r,e){if(!Uv(r))throw new be(ee.INVALID_ARGUMENT,"JSON must be an object");let i;for(const a in e)if(e[a]){const l=e[a].typeString,d="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){i=`JSON missing required field: '${a}'`;break}const f=r[a];if(l&&typeof f!==l){i=`JSON field '${a}' must be a ${l}.`;break}if(d!==void 0&&f!==d.value){i=`Expected '${a}' field to equal '${d.value}'`;break}}if(i)throw new be(ee.INVALID_ARGUMENT,i);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0=-62135596800,b0=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const i=Math.floor(e/1e3),a=Math.floor((e-1e3*i)*b0);return new Tt(i,a)}constructor(e,i){if(this.seconds=e,this.nanoseconds=i,i<0)throw new be(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(i>=1e9)throw new be(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+i);if(e<_0)throw new be(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/b0}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Tt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Il(e,Tt._jsonSchema))return new Tt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Tt._jsonSchemaVersion="firestore/timestamp/1.0",Tt._jsonSchema={type:Ft("string",Tt._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{static fromTimestamp(e){return new ze(e)}static min(){return new ze(new Tt(0,0))}static max(){return new ze(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xl=-1;function Ux(r,e){const i=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,l=ze.fromTimestamp(a===1e9?new Tt(i+1,0):new Tt(i,a));return new ss(l,Ie.empty(),e)}function Bx(r){return new ss(r.readTime,r.key,xl)}class ss{constructor(e,i,a){this.readTime=e,this.documentKey=i,this.largestBatchId=a}static min(){return new ss(ze.min(),Ie.empty(),xl)}static max(){return new ss(ze.max(),Ie.empty(),xl)}}function Px(r,e){let i=r.readTime.compareTo(e.readTime);return i!==0?i:(i=Ie.comparator(r.documentKey,e.documentKey),i!==0?i:We(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Gx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(r){if(r.code!==ee.FAILED_PRECONDITION||r.message!==qx)throw r;xe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((i=>{this.isDone=!0,this.result=i,this.nextCallback&&this.nextCallback(i)}),(i=>{this.isDone=!0,this.error=i,this.catchCallback&&this.catchCallback(i)}))}catch(e){return this.next(void 0,e)}next(e,i){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(e,this.result):new te(((a,l)=>{this.nextCallback=d=>{this.wrapSuccess(e,d).next(a,l)},this.catchCallback=d=>{this.wrapFailure(i,d).next(a,l)}}))}toPromise(){return new Promise(((e,i)=>{this.next(e,i)}))}wrapUserFunction(e){try{const i=e();return i instanceof te?i:te.resolve(i)}catch(i){return te.reject(i)}}wrapSuccess(e,i){return e?this.wrapUserFunction((()=>e(i))):te.resolve(i)}wrapFailure(e,i){return e?this.wrapUserFunction((()=>e(i))):te.reject(i)}static resolve(e){return new te(((i,a)=>{i(e)}))}static reject(e){return new te(((i,a)=>{a(e)}))}static waitFor(e){return new te(((i,a)=>{let l=0,d=0,f=!1;e.forEach((y=>{++l,y.next((()=>{++d,f&&d===l&&i()}),(b=>a(b)))})),f=!0,d===l&&i()}))}static or(e){let i=te.resolve(!1);for(const a of e)i=i.next((l=>l?te.resolve(l):a()));return i}static forEach(e,i){const a=[];return e.forEach(((l,d)=>{a.push(i.call(this,l,d))})),this.waitFor(a)}static mapArray(e,i){return new te(((a,l)=>{const d=e.length,f=new Array(d);let y=0;for(let b=0;b<d;b++){const _=b;i(e[_]).next((x=>{f[_]=x,++y,y===d&&a(f)}),(x=>l(x)))}}))}static doWhile(e,i){return new te(((a,l)=>{const d=()=>{e()===!0?i().next((()=>{d()}),l):a()};d()}))}}function Hx(r){const e=r.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}function lo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>i.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=-1;function Pc(r){return r==null}function Sc(r){return r===0&&1/r==-1/0}function Fx(r){return typeof r=="number"&&Number.isInteger(r)&&!Sc(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="";function Qx(r){let e="";for(let i=0;i<r.length;i++)e.length>0&&(e=E0(e)),e=Yx(r.get(i),e);return E0(e)}function Yx(r,e){let i=e;const a=r.length;for(let l=0;l<a;l++){const d=r.charAt(l);switch(d){case"\0":i+="";break;case Bv:i+="";break;default:i+=d}}return i}function E0(r){return r+Bv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T0(r){let e=0;for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e++;return e}function $s(r,e){for(const i in r)Object.prototype.hasOwnProperty.call(r,i)&&e(i,r[i])}function Pv(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,i){this.comparator=e,this.root=i||un.EMPTY}insert(e,i){return new Rt(this.comparator,this.root.insert(e,i,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return i.value;a<0?i=i.left:a>0&&(i=i.right)}return null}indexOf(e){let i=0,a=this.root;for(;!a.isEmpty();){const l=this.comparator(e,a.key);if(l===0)return i+a.left.size;l<0?a=a.left:(i+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((i,a)=>(e(i,a),!1)))}toString(){const e=[];return this.inorderTraversal(((i,a)=>(e.push(`${i}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sc(this.root,e,this.comparator,!0)}}class sc{constructor(e,i,a,l){this.isReverse=l,this.nodeStack=[];let d=1;for(;!e.isEmpty();)if(d=i?a(e.key,i):1,i&&l&&(d*=-1),d<0)e=this.isReverse?e.left:e.right;else{if(d===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const i={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return i}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,i,a,l,d){this.key=e,this.value=i,this.color=a??un.RED,this.left=l??un.EMPTY,this.right=d??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,i,a,l,d){return new un(e??this.key,i??this.value,a??this.color,l??this.left,d??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,a){let l=this;const d=a(e,l.key);return l=d<0?l.copy(null,null,null,l.left.insert(e,i,a),null):d===0?l.copy(null,i,null,null,null):l.copy(null,null,null,null,l.right.insert(e,i,a)),l.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,i){let a,l=this;if(i(e,l.key)<0)l.left.isEmpty()||l.left.isRed()||l.left.left.isRed()||(l=l.moveRedLeft()),l=l.copy(null,null,null,l.left.remove(e,i),null);else{if(l.left.isRed()&&(l=l.rotateRight()),l.right.isEmpty()||l.right.isRed()||l.right.left.isRed()||(l=l.moveRedRight()),i(e,l.key)===0){if(l.right.isEmpty())return un.EMPTY;a=l.right.min(),l=l.copy(a.key,a.value,null,null,l.right.removeMin())}l=l.copy(null,null,null,null,l.right.remove(e,i))}return l.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,i,a,l,d){return this}insert(e,i,a){return new un(e,i)}remove(e,i){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((i,a)=>(e(i),!1)))}forEachInRange(e,i){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const l=a.getNext();if(this.comparator(l.key,e[1])>=0)return;i(l.key)}}forEachWhile(e,i){let a;for(a=i!==void 0?this.data.getIteratorFrom(i):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const i=this.data.getIteratorFrom(e);return i.hasNext()?i.getNext().key:null}getIterator(){return new x0(this.data.getIterator())}getIteratorFrom(e){return new x0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let i=this;return i.size<e.size&&(i=e,e=this),e.forEach((a=>{i=i.add(a)})),i}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const i=this.data.getIterator(),a=e.data.getIterator();for(;i.hasNext();){const l=i.getNext().key,d=a.getNext().key;if(this.comparator(l,d)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((i=>{e.push(i)})),e}toString(){const e=[];return this.forEach((i=>e.push(i))),"SortedSet("+e.toString()+")"}copy(e){const i=new Kt(this.comparator);return i.data=e,i}}class x0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new pi([])}unionWith(e){let i=new Kt(cn.comparator);for(const a of this.fields)i=i.add(a);for(const a of e)i=i.add(a);return new pi(i.toArray())}covers(e){for(const i of this.fields)if(i.isPrefixOf(e))return!0;return!1}isEqual(e){return eo(this.fields,e.fields,((i,a)=>i.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const i=(function(l){try{return atob(l)}catch(d){throw typeof DOMException<"u"&&d instanceof DOMException?new qv("Invalid base64 string: "+d):d}})(e);return new dn(i)}static fromUint8Array(e){const i=(function(l){let d="";for(let f=0;f<l.length;++f)d+=String.fromCharCode(l[f]);return d})(e);return new dn(i)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(i){return btoa(i)})(this.binaryString)}toUint8Array(){return(function(i){const a=new Uint8Array(i.length);for(let l=0;l<i.length;l++)a[l]=i.charCodeAt(l);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const Kx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function as(r){if(ct(!!r,39018),typeof r=="string"){let e=0;const i=Kx.exec(r);if(ct(!!i,46558,{timestamp:r}),i[1]){let l=i[1];l=(l+"000000000").substr(0,9),e=Number(l)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function os(r){return typeof r=="string"?dn.fromBase64String(r):dn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="server_timestamp",Hv="__type__",Fv="__previous_value__",Qv="__local_write_time__";function qf(r){var i,a;return((a=(((i=r==null?void 0:r.mapValue)==null?void 0:i.fields)||{})[Hv])==null?void 0:a.stringValue)===Gv}function qc(r){const e=r.mapValue.fields[Fv];return qf(e)?qc(e):e}function Al(r){const e=as(r.mapValue.fields[Qv].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e,i,a,l,d,f,y,b,_,x){this.databaseId=e,this.appId=i,this.persistenceKey=a,this.host=l,this.ssl=d,this.forceLongPolling=f,this.autoDetectLongPolling=y,this.longPollingOptions=b,this.useFetchStreams=_,this.isUsingEmulator=x}}const wc="(default)";class Sl{constructor(e,i){this.projectId=e,this.database=i||wc}static empty(){return new Sl("","")}get isDefaultDatabase(){return this.database===wc}isEqual(e){return e instanceof Sl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="__type__",$x="__max__",ac={mapValue:{}},Kv="__vector__",Cc="value";function ls(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qf(r)?4:Zx(r)?9007199254740991:Wx(r)?10:11:Oe(28295,{value:r})}function Fi(r,e){if(r===e)return!0;const i=ls(r);if(i!==ls(e))return!1;switch(i){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Al(r).isEqual(Al(e));case 3:return(function(l,d){if(typeof l.timestampValue=="string"&&typeof d.timestampValue=="string"&&l.timestampValue.length===d.timestampValue.length)return l.timestampValue===d.timestampValue;const f=as(l.timestampValue),y=as(d.timestampValue);return f.seconds===y.seconds&&f.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(l,d){return os(l.bytesValue).isEqual(os(d.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(l,d){return zt(l.geoPointValue.latitude)===zt(d.geoPointValue.latitude)&&zt(l.geoPointValue.longitude)===zt(d.geoPointValue.longitude)})(r,e);case 2:return(function(l,d){if("integerValue"in l&&"integerValue"in d)return zt(l.integerValue)===zt(d.integerValue);if("doubleValue"in l&&"doubleValue"in d){const f=zt(l.doubleValue),y=zt(d.doubleValue);return f===y?Sc(f)===Sc(y):isNaN(f)&&isNaN(y)}return!1})(r,e);case 9:return eo(r.arrayValue.values||[],e.arrayValue.values||[],Fi);case 10:case 11:return(function(l,d){const f=l.mapValue.fields||{},y=d.mapValue.fields||{};if(T0(f)!==T0(y))return!1;for(const b in f)if(f.hasOwnProperty(b)&&(y[b]===void 0||!Fi(f[b],y[b])))return!1;return!0})(r,e);default:return Oe(52216,{left:r})}}function wl(r,e){return(r.values||[]).find((i=>Fi(i,e)))!==void 0}function to(r,e){if(r===e)return 0;const i=ls(r),a=ls(e);if(i!==a)return We(i,a);switch(i){case 0:case 9007199254740991:return 0;case 1:return We(r.booleanValue,e.booleanValue);case 2:return(function(d,f){const y=zt(d.integerValue||d.doubleValue),b=zt(f.integerValue||f.doubleValue);return y<b?-1:y>b?1:y===b?0:isNaN(y)?isNaN(b)?0:-1:1})(r,e);case 3:return A0(r.timestampValue,e.timestampValue);case 4:return A0(Al(r),Al(e));case 5:return vf(r.stringValue,e.stringValue);case 6:return(function(d,f){const y=os(d),b=os(f);return y.compareTo(b)})(r.bytesValue,e.bytesValue);case 7:return(function(d,f){const y=d.split("/"),b=f.split("/");for(let _=0;_<y.length&&_<b.length;_++){const x=We(y[_],b[_]);if(x!==0)return x}return We(y.length,b.length)})(r.referenceValue,e.referenceValue);case 8:return(function(d,f){const y=We(zt(d.latitude),zt(f.latitude));return y!==0?y:We(zt(d.longitude),zt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return S0(r.arrayValue,e.arrayValue);case 10:return(function(d,f){var N,U,ne,re;const y=d.fields||{},b=f.fields||{},_=(N=y[Cc])==null?void 0:N.arrayValue,x=(U=b[Cc])==null?void 0:U.arrayValue,A=We(((ne=_==null?void 0:_.values)==null?void 0:ne.length)||0,((re=x==null?void 0:x.values)==null?void 0:re.length)||0);return A!==0?A:S0(_,x)})(r.mapValue,e.mapValue);case 11:return(function(d,f){if(d===ac.mapValue&&f===ac.mapValue)return 0;if(d===ac.mapValue)return 1;if(f===ac.mapValue)return-1;const y=d.fields||{},b=Object.keys(y),_=f.fields||{},x=Object.keys(_);b.sort(),x.sort();for(let A=0;A<b.length&&A<x.length;++A){const N=vf(b[A],x[A]);if(N!==0)return N;const U=to(y[b[A]],_[x[A]]);if(U!==0)return U}return We(b.length,x.length)})(r.mapValue,e.mapValue);default:throw Oe(23264,{he:i})}}function A0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return We(r,e);const i=as(r),a=as(e),l=We(i.seconds,a.seconds);return l!==0?l:We(i.nanos,a.nanos)}function S0(r,e){const i=r.values||[],a=e.values||[];for(let l=0;l<i.length&&l<a.length;++l){const d=to(i[l],a[l]);if(d)return d}return We(i.length,a.length)}function no(r){return _f(r)}function _f(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(i){const a=as(i);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(i){return os(i).toBase64()})(r.bytesValue):"referenceValue"in r?(function(i){return Ie.fromName(i).toString()})(r.referenceValue):"geoPointValue"in r?(function(i){return`geo(${i.latitude},${i.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(i){let a="[",l=!0;for(const d of i.values||[])l?l=!1:a+=",",a+=_f(d);return a+"]"})(r.arrayValue):"mapValue"in r?(function(i){const a=Object.keys(i.fields||{}).sort();let l="{",d=!0;for(const f of a)d?d=!1:l+=",",l+=`${f}:${_f(i.fields[f])}`;return l+"}"})(r.mapValue):Oe(61005,{value:r})}function dc(r){switch(ls(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qc(r);return e?16+dc(e):16;case 5:return 2*r.stringValue.length;case 6:return os(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((l,d)=>l+dc(d)),0)})(r.arrayValue);case 10:case 11:return(function(a){let l=0;return $s(a.fields,((d,f)=>{l+=d.length+dc(f)})),l})(r.mapValue);default:throw Oe(13486,{value:r})}}function w0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function bf(r){return!!r&&"integerValue"in r}function Gf(r){return!!r&&"arrayValue"in r}function C0(r){return!!r&&"nullValue"in r}function R0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function hc(r){return!!r&&"mapValue"in r}function Wx(r){var i,a;return((a=(((i=r==null?void 0:r.mapValue)==null?void 0:i.fields)||{})[Yv])==null?void 0:a.stringValue)===Kv}function gl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return $s(r.mapValue.fields,((i,a)=>e.mapValue.fields[i]=gl(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let i=0;i<(r.arrayValue.values||[]).length;++i)e.arrayValue.values[i]=gl(r.arrayValue.values[i]);return e}return{...r}}function Zx(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===$x}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let i=this.value;for(let a=0;a<e.length-1;++a)if(i=(i.mapValue.fields||{})[e.get(a)],!hc(i))return null;return i=(i.mapValue.fields||{})[e.lastSegment()],i||null}}set(e,i){this.getFieldsMap(e.popLast())[e.lastSegment()]=gl(i)}setAll(e){let i=cn.emptyPath(),a={},l=[];e.forEach(((f,y)=>{if(!i.isImmediateParentOf(y)){const b=this.getFieldsMap(i);this.applyChanges(b,a,l),a={},l=[],i=y.popLast()}f?a[y.lastSegment()]=gl(f):l.push(y.lastSegment())}));const d=this.getFieldsMap(i);this.applyChanges(d,a,l)}delete(e){const i=this.field(e.popLast());hc(i)&&i.mapValue.fields&&delete i.mapValue.fields[e.lastSegment()]}isEqual(e){return Fi(this.value,e.value)}getFieldsMap(e){let i=this.value;i.mapValue.fields||(i.mapValue={fields:{}});for(let a=0;a<e.length;++a){let l=i.mapValue.fields[e.get(a)];hc(l)&&l.mapValue.fields||(l={mapValue:{fields:{}}},i.mapValue.fields[e.get(a)]=l),i=l}return i.mapValue.fields}applyChanges(e,i,a){$s(i,((l,d)=>e[l]=d));for(const l of a)delete e[l]}clone(){return new ri(gl(this.value))}}function Xv(r){const e=[];return $s(r.fields,((i,a)=>{const l=new cn([i]);if(hc(a)){const d=Xv(a.mapValue).fields;if(d.length===0)e.push(l);else for(const f of d)e.push(l.child(f))}else e.push(l)})),new pi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,i,a,l,d,f,y){this.key=e,this.documentType=i,this.version=a,this.readTime=l,this.createTime=d,this.data=f,this.documentState=y}static newInvalidDocument(e){return new gn(e,0,ze.min(),ze.min(),ze.min(),ri.empty(),0)}static newFoundDocument(e,i,a,l){return new gn(e,1,i,ze.min(),a,l,0)}static newNoDocument(e,i){return new gn(e,2,i,ze.min(),ze.min(),ri.empty(),0)}static newUnknownDocument(e,i){return new gn(e,3,i,ze.min(),ze.min(),ri.empty(),2)}convertToFoundDocument(e,i){return!this.createTime.isEqual(ze.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=i,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ze.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,i){this.position=e,this.inclusive=i}}function D0(r,e,i){let a=0;for(let l=0;l<r.position.length;l++){const d=e[l],f=r.position[l];if(d.field.isKeyField()?a=Ie.comparator(Ie.fromName(f.referenceValue),i.key):a=to(f,i.data.field(d.field)),d.dir==="desc"&&(a*=-1),a!==0)break}return a}function N0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let i=0;i<r.position.length;i++)if(!Fi(r.position[i],e.position[i]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl{constructor(e,i="asc"){this.field=e,this.dir=i}}function Jx(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{}class Ht extends $v{constructor(e,i,a){super(),this.field=e,this.op=i,this.value=a}static create(e,i,a){return e.isKeyField()?i==="in"||i==="not-in"?this.createKeyFieldInFilter(e,i,a):new tA(e,i,a):i==="array-contains"?new rA(e,a):i==="in"?new sA(e,a):i==="not-in"?new aA(e,a):i==="array-contains-any"?new oA(e,a):new Ht(e,i,a)}static createKeyFieldInFilter(e,i,a){return i==="in"?new nA(e,a):new iA(e,a)}matches(e){const i=e.data.field(this.field);return this.op==="!="?i!==null&&i.nullValue===void 0&&this.matchesComparison(to(i,this.value)):i!==null&&ls(this.value)===ls(i)&&this.matchesComparison(to(i,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yi extends $v{constructor(e,i){super(),this.filters=e,this.op=i,this.Pe=null}static create(e,i){return new yi(e,i)}matches(e){return Wv(this)?this.filters.find((i=>!i.matches(e)))===void 0:this.filters.find((i=>i.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,i)=>e.concat(i.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wv(r){return r.op==="and"}function Zv(r){return eA(r)&&Wv(r)}function eA(r){for(const e of r.filters)if(e instanceof yi)return!1;return!0}function Ef(r){if(r instanceof Ht)return r.field.canonicalString()+r.op.toString()+no(r.value);if(Zv(r))return r.filters.map((e=>Ef(e))).join(",");{const e=r.filters.map((i=>Ef(i))).join(",");return`${r.op}(${e})`}}function Jv(r,e){return r instanceof Ht?(function(a,l){return l instanceof Ht&&a.op===l.op&&a.field.isEqual(l.field)&&Fi(a.value,l.value)})(r,e):r instanceof yi?(function(a,l){return l instanceof yi&&a.op===l.op&&a.filters.length===l.filters.length?a.filters.reduce(((d,f,y)=>d&&Jv(f,l.filters[y])),!0):!1})(r,e):void Oe(19439)}function e_(r){return r instanceof Ht?(function(i){return`${i.field.canonicalString()} ${i.op} ${no(i.value)}`})(r):r instanceof yi?(function(i){return i.op.toString()+" {"+i.getFilters().map(e_).join(" ,")+"}"})(r):"Filter"}class tA extends Ht{constructor(e,i,a){super(e,i,a),this.key=Ie.fromName(a.referenceValue)}matches(e){const i=Ie.comparator(e.key,this.key);return this.matchesComparison(i)}}class nA extends Ht{constructor(e,i){super(e,"in",i),this.keys=t_("in",i)}matches(e){return this.keys.some((i=>i.isEqual(e.key)))}}class iA extends Ht{constructor(e,i){super(e,"not-in",i),this.keys=t_("not-in",i)}matches(e){return!this.keys.some((i=>i.isEqual(e.key)))}}function t_(r,e){var i;return(((i=e.arrayValue)==null?void 0:i.values)||[]).map((a=>Ie.fromName(a.referenceValue)))}class rA extends Ht{constructor(e,i){super(e,"array-contains",i)}matches(e){const i=e.data.field(this.field);return Gf(i)&&wl(i.arrayValue,this.value)}}class sA extends Ht{constructor(e,i){super(e,"in",i)}matches(e){const i=e.data.field(this.field);return i!==null&&wl(this.value.arrayValue,i)}}class aA extends Ht{constructor(e,i){super(e,"not-in",i)}matches(e){if(wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const i=e.data.field(this.field);return i!==null&&i.nullValue===void 0&&!wl(this.value.arrayValue,i)}}class oA extends Ht{constructor(e,i){super(e,"array-contains-any",i)}matches(e){const i=e.data.field(this.field);return!(!Gf(i)||!i.arrayValue.values)&&i.arrayValue.values.some((a=>wl(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,i=null,a=[],l=[],d=null,f=null,y=null){this.path=e,this.collectionGroup=i,this.orderBy=a,this.filters=l,this.limit=d,this.startAt=f,this.endAt=y,this.Te=null}}function I0(r,e=null,i=[],a=[],l=null,d=null,f=null){return new lA(r,e,i,a,l,d,f)}function Hf(r){const e=Le(r);if(e.Te===null){let i=e.path.canonicalString();e.collectionGroup!==null&&(i+="|cg:"+e.collectionGroup),i+="|f:",i+=e.filters.map((a=>Ef(a))).join(","),i+="|ob:",i+=e.orderBy.map((a=>(function(d){return d.field.canonicalString()+d.dir})(a))).join(","),Pc(e.limit)||(i+="|l:",i+=e.limit),e.startAt&&(i+="|lb:",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map((a=>no(a))).join(",")),e.endAt&&(i+="|ub:",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map((a=>no(a))).join(",")),e.Te=i}return e.Te}function Ff(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<r.orderBy.length;i++)if(!Jx(r.orderBy[i],e.orderBy[i]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let i=0;i<r.filters.length;i++)if(!Jv(r.filters[i],e.filters[i]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!N0(r.startAt,e.startAt)&&N0(r.endAt,e.endAt)}function Tf(r){return Ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,i=null,a=[],l=[],d=null,f="F",y=null,b=null){this.path=e,this.collectionGroup=i,this.explicitOrderBy=a,this.filters=l,this.limit=d,this.limitType=f,this.startAt=y,this.endAt=b,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function uA(r,e,i,a,l,d,f,y){return new uo(r,e,i,a,l,d,f,y)}function n_(r){return new uo(r)}function M0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function i_(r){return r.collectionGroup!==null}function pl(r){const e=Le(r);if(e.Ie===null){e.Ie=[];const i=new Set;for(const d of e.explicitOrderBy)e.Ie.push(d),i.add(d.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let y=new Kt(cn.comparator);return f.filters.forEach((b=>{b.getFlattenedFilters().forEach((_=>{_.isInequality()&&(y=y.add(_.field))}))})),y})(e).forEach((d=>{i.has(d.canonicalString())||d.isKeyField()||e.Ie.push(new Cl(d,a))})),i.has(cn.keyField().canonicalString())||e.Ie.push(new Cl(cn.keyField(),a))}return e.Ie}function Pi(r){const e=Le(r);return e.Ee||(e.Ee=cA(e,pl(r))),e.Ee}function cA(r,e){if(r.limitType==="F")return I0(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((l=>{const d=l.dir==="desc"?"asc":"desc";return new Cl(l.field,d)}));const i=r.endAt?new Rc(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Rc(r.startAt.position,r.startAt.inclusive):null;return I0(r.path,r.collectionGroup,e,r.filters,r.limit,i,a)}}function xf(r,e){const i=r.filters.concat([e]);return new uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),i,r.limit,r.limitType,r.startAt,r.endAt)}function Dc(r,e,i){return new uo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,i,r.startAt,r.endAt)}function Gc(r,e){return Ff(Pi(r),Pi(e))&&r.limitType===e.limitType}function r_(r){return`${Hf(Pi(r))}|lt:${r.limitType}`}function Ha(r){return`Query(target=${(function(i){let a=i.path.canonicalString();return i.collectionGroup!==null&&(a+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(a+=`, filters: [${i.filters.map((l=>e_(l))).join(", ")}]`),Pc(i.limit)||(a+=", limit: "+i.limit),i.orderBy.length>0&&(a+=`, orderBy: [${i.orderBy.map((l=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(l))).join(", ")}]`),i.startAt&&(a+=", startAt: ",a+=i.startAt.inclusive?"b:":"a:",a+=i.startAt.position.map((l=>no(l))).join(",")),i.endAt&&(a+=", endAt: ",a+=i.endAt.inclusive?"a:":"b:",a+=i.endAt.position.map((l=>no(l))).join(",")),`Target(${a})`})(Pi(r))}; limitType=${r.limitType})`}function Hc(r,e){return e.isFoundDocument()&&(function(a,l){const d=l.key.path;return a.collectionGroup!==null?l.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(d):Ie.isDocumentKey(a.path)?a.path.isEqual(d):a.path.isImmediateParentOf(d)})(r,e)&&(function(a,l){for(const d of pl(a))if(!d.field.isKeyField()&&l.data.field(d.field)===null)return!1;return!0})(r,e)&&(function(a,l){for(const d of a.filters)if(!d.matches(l))return!1;return!0})(r,e)&&(function(a,l){return!(a.startAt&&!(function(f,y,b){const _=D0(f,y,b);return f.inclusive?_<=0:_<0})(a.startAt,pl(a),l)||a.endAt&&!(function(f,y,b){const _=D0(f,y,b);return f.inclusive?_>=0:_>0})(a.endAt,pl(a),l))})(r,e)}function dA(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function s_(r){return(e,i)=>{let a=!1;for(const l of pl(r)){const d=hA(l,e,i);if(d!==0)return d;a=a||l.field.isKeyField()}return 0}}function hA(r,e,i){const a=r.field.isKeyField()?Ie.comparator(e.key,i.key):(function(d,f,y){const b=f.data.field(d),_=y.data.field(d);return b!==null&&_!==null?to(b,_):Oe(42886)})(r.field,e,i);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Oe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,i){this.mapKeyFn=e,this.equalsFn=i,this.inner={},this.innerSize=0}get(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a!==void 0){for(const[l,d]of a)if(this.equalsFn(l,e))return d}}has(e){return this.get(e)!==void 0}set(e,i){const a=this.mapKeyFn(e),l=this.inner[a];if(l===void 0)return this.inner[a]=[[e,i]],void this.innerSize++;for(let d=0;d<l.length;d++)if(this.equalsFn(l[d][0],e))return void(l[d]=[e,i]);l.push([e,i]),this.innerSize++}delete(e){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return!1;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return a.length===1?delete this.inner[i]:a.splice(l,1),this.innerSize--,!0;return!1}forEach(e){$s(this.inner,((i,a)=>{for(const[l,d]of a)e(l,d)}))}isEmpty(){return Pv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA=new Rt(Ie.comparator);function pr(){return fA}const a_=new Rt(Ie.comparator);function hl(...r){let e=a_;for(const i of r)e=e.insert(i.key,i);return e}function o_(r){let e=a_;return r.forEach(((i,a)=>e=e.insert(i,a.overlayedDocument))),e}function Qs(){return yl()}function l_(){return yl()}function yl(){return new Ws((r=>r.toString()),((r,e)=>r.isEqual(e)))}const mA=new Rt(Ie.comparator),gA=new Kt(Ie.comparator);function Ze(...r){let e=gA;for(const i of r)e=e.add(i);return e}const pA=new Kt(We);function yA(){return pA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sc(e)?"-0":e}}function u_(r){return{integerValue:""+r}}function vA(r,e){return Fx(e)?u_(e):Qf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(){this._=void 0}}function _A(r,e,i){return r instanceof Rl?(function(l,d){const f={fields:{[Hv]:{stringValue:Gv},[Qv]:{timestampValue:{seconds:l.seconds,nanos:l.nanoseconds}}}};return d&&qf(d)&&(d=qc(d)),d&&(f.fields[Fv]=d),{mapValue:f}})(i,e):r instanceof Dl?d_(r,e):r instanceof Nl?h_(r,e):(function(l,d){const f=c_(l,d),y=V0(f)+V0(l.Ae);return bf(f)&&bf(l.Ae)?u_(y):Qf(l.serializer,y)})(r,e)}function bA(r,e,i){return r instanceof Dl?d_(r,e):r instanceof Nl?h_(r,e):i}function c_(r,e){return r instanceof Nc?(function(a){return bf(a)||(function(d){return!!d&&"doubleValue"in d})(a)})(e)?e:{integerValue:0}:null}class Rl extends Fc{}class Dl extends Fc{constructor(e){super(),this.elements=e}}function d_(r,e){const i=f_(e);for(const a of r.elements)i.some((l=>Fi(l,a)))||i.push(a);return{arrayValue:{values:i}}}class Nl extends Fc{constructor(e){super(),this.elements=e}}function h_(r,e){let i=f_(e);for(const a of r.elements)i=i.filter((l=>!Fi(l,a)));return{arrayValue:{values:i}}}class Nc extends Fc{constructor(e,i){super(),this.serializer=e,this.Ae=i}}function V0(r){return zt(r.integerValue||r.doubleValue)}function f_(r){return Gf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,i){this.field=e,this.transform=i}}function TA(r,e){return r.field.isEqual(e.field)&&(function(a,l){return a instanceof Dl&&l instanceof Dl||a instanceof Nl&&l instanceof Nl?eo(a.elements,l.elements,Fi):a instanceof Nc&&l instanceof Nc?Fi(a.Ae,l.Ae):a instanceof Rl&&l instanceof Rl})(r.transform,e.transform)}class xA{constructor(e,i){this.version=e,this.transformResults=i}}class fr{constructor(e,i){this.updateTime=e,this.exists=i}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Qc{}function m_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new p_(r.key,fr.none()):new Ml(r.key,r.data,fr.none());{const i=r.data,a=ri.empty();let l=new Kt(cn.comparator);for(let d of e.fields)if(!l.has(d)){let f=i.field(d);f===null&&d.length>1&&(d=d.popLast(),f=i.field(d)),f===null?a.delete(d):a.set(d,f),l=l.add(d)}return new Zs(r.key,a,new pi(l.toArray()),fr.none())}}function AA(r,e,i){r instanceof Ml?(function(l,d,f){const y=l.value.clone(),b=j0(l.fieldTransforms,d,f.transformResults);y.setAll(b),d.convertToFoundDocument(f.version,y).setHasCommittedMutations()})(r,e,i):r instanceof Zs?(function(l,d,f){if(!fc(l.precondition,d))return void d.convertToUnknownDocument(f.version);const y=j0(l.fieldTransforms,d,f.transformResults),b=d.data;b.setAll(g_(l)),b.setAll(y),d.convertToFoundDocument(f.version,b).setHasCommittedMutations()})(r,e,i):(function(l,d,f){d.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,i)}function vl(r,e,i,a){return r instanceof Ml?(function(d,f,y,b){if(!fc(d.precondition,f))return y;const _=d.value.clone(),x=z0(d.fieldTransforms,b,f);return _.setAll(x),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),null})(r,e,i,a):r instanceof Zs?(function(d,f,y,b){if(!fc(d.precondition,f))return y;const _=z0(d.fieldTransforms,b,f),x=f.data;return x.setAll(g_(d)),x.setAll(_),f.convertToFoundDocument(f.version,x).setHasLocalMutations(),y===null?null:y.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map((A=>A.field)))})(r,e,i,a):(function(d,f,y){return fc(d.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):y})(r,e,i)}function SA(r,e){let i=null;for(const a of r.fieldTransforms){const l=e.data.field(a.field),d=c_(a.transform,l||null);d!=null&&(i===null&&(i=ri.empty()),i.set(a.field,d))}return i||null}function O0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,l){return a===void 0&&l===void 0||!(!a||!l)&&eo(a,l,((d,f)=>TA(d,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ml extends Qc{constructor(e,i,a,l=[]){super(),this.key=e,this.value=i,this.precondition=a,this.fieldTransforms=l,this.type=0}getFieldMask(){return null}}class Zs extends Qc{constructor(e,i,a,l,d=[]){super(),this.key=e,this.data=i,this.fieldMask=a,this.precondition=l,this.fieldTransforms=d,this.type=1}getFieldMask(){return this.fieldMask}}function g_(r){const e=new Map;return r.fieldMask.fields.forEach((i=>{if(!i.isEmpty()){const a=r.data.field(i);e.set(i,a)}})),e}function j0(r,e,i){const a=new Map;ct(r.length===i.length,32656,{Re:i.length,Ve:r.length});for(let l=0;l<i.length;l++){const d=r[l],f=d.transform,y=e.data.field(d.field);a.set(d.field,bA(f,y,i[l]))}return a}function z0(r,e,i){const a=new Map;for(const l of r){const d=l.transform,f=i.data.field(l.field);a.set(l.field,_A(d,f,e))}return a}class p_ extends Qc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wA extends Qc{constructor(e,i){super(),this.key=e,this.precondition=i,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,i,a,l){this.batchId=e,this.localWriteTime=i,this.baseMutations=a,this.mutations=l}applyToRemoteDocument(e,i){const a=i.mutationResults;for(let l=0;l<this.mutations.length;l++){const d=this.mutations[l];d.key.isEqual(e.key)&&AA(d,e,a[l])}}applyToLocalView(e,i){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(i=vl(a,e,i,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(i=vl(a,e,i,this.localWriteTime));return i}applyToLocalDocumentSet(e,i){const a=l_();return this.mutations.forEach((l=>{const d=e.get(l.key),f=d.overlayedDocument;let y=this.applyToLocalView(f,d.mutatedFields);y=i.has(l.key)?null:y;const b=m_(f,y);b!==null&&a.set(l.key,b),f.isValidDocument()||f.convertToNoDocument(ze.min())})),a}keys(){return this.mutations.reduce(((e,i)=>e.add(i.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&eo(this.mutations,e.mutations,((i,a)=>O0(i,a)))&&eo(this.baseMutations,e.baseMutations,((i,a)=>O0(i,a)))}}class Yf{constructor(e,i,a,l){this.batch=e,this.commitVersion=i,this.mutationResults=a,this.docVersions=l}static from(e,i,a){ct(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let l=(function(){return mA})();const d=e.mutations;for(let f=0;f<d.length;f++)l=l.insert(d[f].key,a[f].version);return new Yf(e,i,a,l)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,i){this.largestBatchId=e,this.mutation=i}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,i){this.count=e,this.unchangedNames=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gt,et;function NA(r){switch(r){case ee.OK:return Oe(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Oe(15467,{code:r})}}function y_(r){if(r===void 0)return gr("GRPC error has no .code"),ee.UNKNOWN;switch(r){case Gt.OK:return ee.OK;case Gt.CANCELLED:return ee.CANCELLED;case Gt.UNKNOWN:return ee.UNKNOWN;case Gt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Gt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Gt.INTERNAL:return ee.INTERNAL;case Gt.UNAVAILABLE:return ee.UNAVAILABLE;case Gt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Gt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Gt.NOT_FOUND:return ee.NOT_FOUND;case Gt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Gt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Gt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Gt.ABORTED:return ee.ABORTED;case Gt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Gt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Gt.DATA_LOSS:return ee.DATA_LOSS;default:return Oe(39323,{code:r})}}(et=Gt||(Gt={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MA=new ns([4294967295,4294967295],0);function k0(r){const e=IA().encode(r),i=new Nv;return i.update(e),new Uint8Array(i.digest())}function L0(r){const e=new DataView(r.buffer),i=e.getUint32(0,!0),a=e.getUint32(4,!0),l=e.getUint32(8,!0),d=e.getUint32(12,!0);return[new ns([i,a],0),new ns([l,d],0)]}class Kf{constructor(e,i,a){if(this.bitmap=e,this.padding=i,this.hashCount=a,i<0||i>=8)throw new fl(`Invalid padding: ${i}`);if(a<0)throw new fl(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new fl(`Invalid hash count: ${a}`);if(e.length===0&&i!==0)throw new fl(`Invalid padding when bitmap length is 0: ${i}`);this.ge=8*e.length-i,this.pe=ns.fromNumber(this.ge)}ye(e,i,a){let l=e.add(i.multiply(ns.fromNumber(a)));return l.compare(MA)===1&&(l=new ns([l.getBits(0),l.getBits(1)],0)),l.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const i=k0(e),[a,l]=L0(i);for(let d=0;d<this.hashCount;d++){const f=this.ye(a,l,d);if(!this.we(f))return!1}return!0}static create(e,i,a){const l=e%8==0?0:8-e%8,d=new Uint8Array(Math.ceil(e/8)),f=new Kf(d,l,i);return a.forEach((y=>f.insert(y))),f}insert(e){if(this.ge===0)return;const i=k0(e),[a,l]=L0(i);for(let d=0;d<this.hashCount;d++){const f=this.ye(a,l,d);this.Se(f)}}Se(e){const i=Math.floor(e/8),a=e%8;this.bitmap[i]|=1<<a}}class fl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,i,a,l,d){this.snapshotVersion=e,this.targetChanges=i,this.targetMismatches=a,this.documentUpdates=l,this.resolvedLimboDocuments=d}static createSynthesizedRemoteEventForCurrentChange(e,i,a){const l=new Map;return l.set(e,Vl.createSynthesizedTargetChangeForCurrentChange(e,i,a)),new Yc(ze.min(),l,new Rt(We),pr(),Ze())}}class Vl{constructor(e,i,a,l,d){this.resumeToken=e,this.current=i,this.addedDocuments=a,this.modifiedDocuments=l,this.removedDocuments=d}static createSynthesizedTargetChangeForCurrentChange(e,i,a){return new Vl(a,i,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,i,a,l){this.be=e,this.removedTargetIds=i,this.key=a,this.De=l}}class v_{constructor(e,i){this.targetId=e,this.Ce=i}}class __{constructor(e,i,a=dn.EMPTY_BYTE_STRING,l=null){this.state=e,this.targetIds=i,this.resumeToken=a,this.cause=l}}class U0{constructor(){this.ve=0,this.Fe=B0(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),i=Ze(),a=Ze();return this.Fe.forEach(((l,d)=>{switch(d){case 0:e=e.add(l);break;case 2:i=i.add(l);break;case 1:a=a.add(l);break;default:Oe(38017,{changeType:d})}})),new Vl(this.Me,this.xe,e,i,a)}qe(){this.Oe=!1,this.Fe=B0()}Qe(e,i){this.Oe=!0,this.Fe=this.Fe.insert(e,i)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ct(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class VA{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=oc(),this.He=oc(),this.Ye=new Rt(We)}Ze(e){for(const i of e.be)e.De&&e.De.isFoundDocument()?this.Xe(i,e.De):this.et(i,e.key,e.De);for(const i of e.removedTargetIds)this.et(i,e.key,e.De)}tt(e){this.forEachTarget(e,(i=>{const a=this.nt(i);switch(e.state){case 0:this.rt(i)&&a.Le(e.resumeToken);break;case 1:a.Ke(),a.Ne||a.qe(),a.Le(e.resumeToken);break;case 2:a.Ke(),a.Ne||this.removeTarget(i);break;case 3:this.rt(i)&&(a.We(),a.Le(e.resumeToken));break;case 4:this.rt(i)&&(this.it(i),a.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,i){e.targetIds.length>0?e.targetIds.forEach(i):this.ze.forEach(((a,l)=>{this.rt(l)&&i(l)}))}st(e){const i=e.targetId,a=e.Ce.count,l=this.ot(i);if(l){const d=l.target;if(Tf(d))if(a===0){const f=new Ie(d.path);this.et(i,f,gn.newNoDocument(f,ze.min()))}else ct(a===1,20013,{expectedCount:a});else{const f=this._t(i);if(f!==a){const y=this.ut(e),b=y?this.ct(y,e,f):1;if(b!==0){this.it(i);const _=b===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(i,_)}}}}}ut(e){const i=e.Ce.unchangedNames;if(!i||!i.bits)return null;const{bits:{bitmap:a="",padding:l=0},hashCount:d=0}=i;let f,y;try{f=os(a).toUint8Array()}catch(b){if(b instanceof qv)return Ja("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw b}try{y=new Kf(f,l,d)}catch(b){return Ja(b instanceof fl?"BloomFilter error: ":"Applying bloom filter failed: ",b),null}return y.ge===0?null:y}ct(e,i,a){return i.Ce.count===a-this.Pt(e,i.targetId)?0:2}Pt(e,i){const a=this.Ge.getRemoteKeysForTarget(i);let l=0;return a.forEach((d=>{const f=this.Ge.ht(),y=`projects/${f.projectId}/databases/${f.database}/documents/${d.path.canonicalString()}`;e.mightContain(y)||(this.et(i,d,null),l++)})),l}Tt(e){const i=new Map;this.ze.forEach(((d,f)=>{const y=this.ot(f);if(y){if(d.current&&Tf(y.target)){const b=new Ie(y.target.path);this.It(b).has(f)||this.Et(f,b)||this.et(f,b,gn.newNoDocument(b,e))}d.Be&&(i.set(f,d.ke()),d.qe())}}));let a=Ze();this.He.forEach(((d,f)=>{let y=!0;f.forEachWhile((b=>{const _=this.ot(b);return!_||_.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(a=a.add(d))})),this.je.forEach(((d,f)=>f.setReadTime(e)));const l=new Yc(e,i,this.Ye,this.je,a);return this.je=pr(),this.Je=oc(),this.He=oc(),this.Ye=new Rt(We),l}Xe(e,i){if(!this.rt(e))return;const a=this.Et(e,i.key)?2:0;this.nt(e).Qe(i.key,a),this.je=this.je.insert(i.key,i),this.Je=this.Je.insert(i.key,this.It(i.key).add(e)),this.He=this.He.insert(i.key,this.dt(i.key).add(e))}et(e,i,a){if(!this.rt(e))return;const l=this.nt(e);this.Et(e,i)?l.Qe(i,1):l.$e(i),this.He=this.He.insert(i,this.dt(i).delete(e)),this.He=this.He.insert(i,this.dt(i).add(e)),a&&(this.je=this.je.insert(i,a))}removeTarget(e){this.ze.delete(e)}_t(e){const i=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+i.addedDocuments.size-i.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let i=this.ze.get(e);return i||(i=new U0,this.ze.set(e,i)),i}dt(e){let i=this.He.get(e);return i||(i=new Kt(We),this.He=this.He.insert(e,i)),i}It(e){let i=this.Je.get(e);return i||(i=new Kt(We),this.Je=this.Je.insert(e,i)),i}rt(e){const i=this.ot(e)!==null;return i||xe("WatchChangeAggregator","Detected inactive target",e),i}ot(e){const i=this.ze.get(e);return i&&i.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new U0),this.Ge.getRemoteKeysForTarget(e).forEach((i=>{this.et(e,i,null)}))}Et(e,i){return this.Ge.getRemoteKeysForTarget(e).has(i)}}function oc(){return new Rt(Ie.comparator)}function B0(){return new Rt(Ie.comparator)}const OA={asc:"ASCENDING",desc:"DESCENDING"},jA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zA={and:"AND",or:"OR"};class kA{constructor(e,i){this.databaseId=e,this.useProto3Json=i}}function Af(r,e){return r.useProto3Json||Pc(e)?e:{value:e}}function Ic(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function b_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function LA(r,e){return Ic(r,e.toTimestamp())}function qi(r){return ct(!!r,49232),ze.fromTimestamp((function(i){const a=as(i);return new Tt(a.seconds,a.nanos)})(r))}function Xf(r,e){return Sf(r,e).canonicalString()}function Sf(r,e){const i=(function(l){return new _t(["projects",l.projectId,"databases",l.database])})(r).child("documents");return e===void 0?i:i.child(e)}function E_(r){const e=_t.fromString(r);return ct(w_(e),10190,{key:e.toString()}),e}function wf(r,e){return Xf(r.databaseId,e.path)}function of(r,e){const i=E_(e);if(i.get(1)!==r.databaseId.projectId)throw new be(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+i.get(1)+" vs "+r.databaseId.projectId);if(i.get(3)!==r.databaseId.database)throw new be(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+i.get(3)+" vs "+r.databaseId.database);return new Ie(x_(i))}function T_(r,e){return Xf(r.databaseId,e)}function UA(r){const e=E_(r);return e.length===4?_t.emptyPath():x_(e)}function Cf(r){return new _t(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function x_(r){return ct(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function P0(r,e,i){return{name:wf(r,e),fields:i.value.mapValue.fields}}function BA(r,e){let i;if("targetChange"in e){e.targetChange;const a=(function(_){return _==="NO_CHANGE"?0:_==="ADD"?1:_==="REMOVE"?2:_==="CURRENT"?3:_==="RESET"?4:Oe(39313,{state:_})})(e.targetChange.targetChangeType||"NO_CHANGE"),l=e.targetChange.targetIds||[],d=(function(_,x){return _.useProto3Json?(ct(x===void 0||typeof x=="string",58123),dn.fromBase64String(x||"")):(ct(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),dn.fromUint8Array(x||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,y=f&&(function(_){const x=_.code===void 0?ee.UNKNOWN:y_(_.code);return new be(x,_.message||"")})(f);i=new __(a,l,d,y||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const l=of(r,a.document.name),d=qi(a.document.updateTime),f=a.document.createTime?qi(a.document.createTime):ze.min(),y=new ri({mapValue:{fields:a.document.fields}}),b=gn.newFoundDocument(l,d,f,y),_=a.targetIds||[],x=a.removedTargetIds||[];i=new mc(_,x,b.key,b)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const l=of(r,a.document),d=a.readTime?qi(a.readTime):ze.min(),f=gn.newNoDocument(l,d),y=a.removedTargetIds||[];i=new mc([],y,f.key,f)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const l=of(r,a.document),d=a.removedTargetIds||[];i=new mc([],d,l,null)}else{if(!("filter"in e))return Oe(11601,{Rt:e});{e.filter;const a=e.filter;a.targetId;const{count:l=0,unchangedNames:d}=a,f=new DA(l,d),y=a.targetId;i=new v_(y,f)}}return i}function PA(r,e){let i;if(e instanceof Ml)i={update:P0(r,e.key,e.value)};else if(e instanceof p_)i={delete:wf(r,e.key)};else if(e instanceof Zs)i={update:P0(r,e.key,e.data),updateMask:$A(e.fieldMask)};else{if(!(e instanceof wA))return Oe(16599,{Vt:e.type});i={verify:wf(r,e.key)}}return e.fieldTransforms.length>0&&(i.updateTransforms=e.fieldTransforms.map((a=>(function(d,f){const y=f.transform;if(y instanceof Rl)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Dl)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Nl)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Nc)return{fieldPath:f.field.canonicalString(),increment:y.Ae};throw Oe(20930,{transform:f.transform})})(0,a)))),e.precondition.isNone||(i.currentDocument=(function(l,d){return d.updateTime!==void 0?{updateTime:LA(l,d.updateTime)}:d.exists!==void 0?{exists:d.exists}:Oe(27497)})(r,e.precondition)),i}function qA(r,e){return r&&r.length>0?(ct(e!==void 0,14353),r.map((i=>(function(l,d){let f=l.updateTime?qi(l.updateTime):qi(d);return f.isEqual(ze.min())&&(f=qi(d)),new xA(f,l.transformResults||[])})(i,e)))):[]}function GA(r,e){return{documents:[T_(r,e.path)]}}function HA(r,e){const i={structuredQuery:{}},a=e.path;let l;e.collectionGroup!==null?(l=a,i.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(l=a.popLast(),i.structuredQuery.from=[{collectionId:a.lastSegment()}]),i.parent=T_(r,l);const d=(function(_){if(_.length!==0)return S_(yi.create(_,"and"))})(e.filters);d&&(i.structuredQuery.where=d);const f=(function(_){if(_.length!==0)return _.map((x=>(function(N){return{field:Fa(N.field),direction:YA(N.dir)}})(x)))})(e.orderBy);f&&(i.structuredQuery.orderBy=f);const y=Af(r,e.limit);return y!==null&&(i.structuredQuery.limit=y),e.startAt&&(i.structuredQuery.startAt=(function(_){return{before:_.inclusive,values:_.position}})(e.startAt)),e.endAt&&(i.structuredQuery.endAt=(function(_){return{before:!_.inclusive,values:_.position}})(e.endAt)),{ft:i,parent:l}}function FA(r){let e=UA(r.parent);const i=r.structuredQuery,a=i.from?i.from.length:0;let l=null;if(a>0){ct(a===1,65062);const x=i.from[0];x.allDescendants?l=x.collectionId:e=e.child(x.collectionId)}let d=[];i.where&&(d=(function(A){const N=A_(A);return N instanceof yi&&Zv(N)?N.getFilters():[N]})(i.where));let f=[];i.orderBy&&(f=(function(A){return A.map((N=>(function(ne){return new Cl(Qa(ne.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(ne.direction))})(N)))})(i.orderBy));let y=null;i.limit&&(y=(function(A){let N;return N=typeof A=="object"?A.value:A,Pc(N)?null:N})(i.limit));let b=null;i.startAt&&(b=(function(A){const N=!!A.before,U=A.values||[];return new Rc(U,N)})(i.startAt));let _=null;return i.endAt&&(_=(function(A){const N=!A.before,U=A.values||[];return new Rc(U,N)})(i.endAt)),uA(e,l,f,d,y,"F",b,_)}function QA(r,e){const i=(function(l){switch(l){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:l})}})(e.purpose);return i==null?null:{"goog-listen-tags":i}}function A_(r){return r.unaryFilter!==void 0?(function(i){switch(i.unaryFilter.op){case"IS_NAN":const a=Qa(i.unaryFilter.field);return Ht.create(a,"==",{doubleValue:NaN});case"IS_NULL":const l=Qa(i.unaryFilter.field);return Ht.create(l,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const d=Qa(i.unaryFilter.field);return Ht.create(d,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=Qa(i.unaryFilter.field);return Ht.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(r):r.fieldFilter!==void 0?(function(i){return Ht.create(Qa(i.fieldFilter.field),(function(l){switch(l){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(i.fieldFilter.op),i.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(i){return yi.create(i.compositeFilter.filters.map((a=>A_(a))),(function(l){switch(l){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(i.compositeFilter.op))})(r):Oe(30097,{filter:r})}function YA(r){return OA[r]}function KA(r){return jA[r]}function XA(r){return zA[r]}function Fa(r){return{fieldPath:r.canonicalString()}}function Qa(r){return cn.fromServerFormat(r.fieldPath)}function S_(r){return r instanceof Ht?(function(i){if(i.op==="=="){if(R0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NAN"}};if(C0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(R0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NOT_NAN"}};if(C0(i.value))return{unaryFilter:{field:Fa(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fa(i.field),op:KA(i.op),value:i.value}}})(r):r instanceof yi?(function(i){const a=i.getFilters().map((l=>S_(l)));return a.length===1?a[0]:{compositeFilter:{op:XA(i.op),filters:a}}})(r):Oe(54877,{filter:r})}function $A(r){const e=[];return r.fields.forEach((i=>e.push(i.canonicalString()))),{fieldPaths:e}}function w_(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e,i,a,l,d=ze.min(),f=ze.min(),y=dn.EMPTY_BYTE_STRING,b=null){this.target=e,this.targetId=i,this.purpose=a,this.sequenceNumber=l,this.snapshotVersion=d,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=y,this.expectedCount=b}withSequenceNumber(e){return new Jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,i){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,i,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(e){this.yt=e}}function ZA(r){const e=FA({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(){this.Cn=new eS}addToCollectionParentIndex(e,i){return this.Cn.add(i),te.resolve()}getCollectionParents(e,i){return te.resolve(this.Cn.getEntries(i))}addFieldIndex(e,i){return te.resolve()}deleteFieldIndex(e,i){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,i){return te.resolve()}getDocumentsMatchingTarget(e,i){return te.resolve(null)}getIndexType(e,i){return te.resolve(0)}getFieldIndexes(e,i){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,i){return te.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,i){return te.resolve(ss.min())}updateCollectionGroup(e,i,a){return te.resolve()}updateIndexEntries(e,i){return te.resolve()}}class eS{constructor(){this.index={}}add(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i]||new Kt(_t.comparator),d=!l.has(a);return this.index[i]=l.add(a),d}has(e){const i=e.lastSegment(),a=e.popLast(),l=this.index[i];return l&&l.has(a)}getEntries(e){return(this.index[e]||new Kt(_t.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},C_=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,i,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=i,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(C_,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new io(0)}static cr(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="LruGarbageCollector",tS=1048576;function H0([r,e],[i,a]){const l=We(r,i);return l===0?We(e,a):l}class nS{constructor(e){this.Ir=e,this.buffer=new Kt(H0),this.Er=0}dr(){return++this.Er}Ar(e){const i=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(i);else{const a=this.buffer.last();H0(i,a)<0&&(this.buffer=this.buffer.delete(a).add(i))}}get maxValue(){return this.buffer.last()[0]}}class iS{constructor(e,i,a){this.garbageCollector=e,this.asyncQueue=i,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){xe(G0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(i){lo(i)?xe(G0,"Ignoring IndexedDB error during garbage collection: ",i):await oo(i)}await this.Vr(3e5)}))}}class rS{constructor(e,i){this.mr=e,this.params=i}calculateTargetCount(e,i){return this.mr.gr(e).next((a=>Math.floor(i/100*a)))}nthSequenceNumber(e,i){if(i===0)return te.resolve(Bc.ce);const a=new nS(i);return this.mr.forEachTarget(e,(l=>a.Ar(l.sequenceNumber))).next((()=>this.mr.pr(e,(l=>a.Ar(l))))).next((()=>a.maxValue))}removeTargets(e,i,a){return this.mr.removeTargets(e,i,a)}removeOrphanedDocuments(e,i){return this.mr.removeOrphanedDocuments(e,i)}collect(e,i){return this.params.cacheSizeCollectionThreshold===-1?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(q0)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),q0):this.yr(e,i)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,i){let a,l,d,f,y,b,_;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),l=this.params.maximumSequenceNumbersToCollect):l=A,f=Date.now(),this.nthSequenceNumber(e,l)))).next((A=>(a=A,y=Date.now(),this.removeTargets(e,a,i)))).next((A=>(d=A,b=Date.now(),this.removeOrphanedDocuments(e,a)))).next((A=>(_=Date.now(),Ga()<=tt.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-x}ms
	Determined least recently used ${l} in `+(y-f)+`ms
	Removed ${d} targets in `+(b-y)+`ms
	Removed ${A} documents in `+(_-b)+`ms
Total Duration: ${_-x}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:l,targetsRemoved:d,documentsRemoved:A}))))}}function sS(r,e){return new rS(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.changes=new Ws((e=>e.toString()),((e,i)=>e.isEqual(i))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,i){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(i))}getEntry(e,i){this.assertNotApplied();const a=this.changes.get(i);return a!==void 0?te.resolve(a):this.getFromCache(e,i)}getEntries(e,i){return this.getAllFromCache(e,i)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,i){this.overlayedDocument=e,this.mutatedFields=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,i,a,l){this.remoteDocumentCache=e,this.mutationQueue=i,this.documentOverlayCache=a,this.indexManager=l}getDocument(e,i){let a=null;return this.documentOverlayCache.getOverlay(e,i).next((l=>(a=l,this.remoteDocumentCache.getEntry(e,i)))).next((l=>(a!==null&&vl(a.mutation,l,pi.empty(),Tt.now()),l)))}getDocuments(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.getLocalViewOfDocuments(e,a,Ze()).next((()=>a))))}getLocalViewOfDocuments(e,i,a=Ze()){const l=Qs();return this.populateOverlays(e,l,i).next((()=>this.computeViews(e,i,l,a).next((d=>{let f=hl();return d.forEach(((y,b)=>{f=f.insert(y,b.overlayedDocument)})),f}))))}getOverlayedDocuments(e,i){const a=Qs();return this.populateOverlays(e,a,i).next((()=>this.computeViews(e,i,a,Ze())))}populateOverlays(e,i,a){const l=[];return a.forEach((d=>{i.has(d)||l.push(d)})),this.documentOverlayCache.getOverlays(e,l).next((d=>{d.forEach(((f,y)=>{i.set(f,y)}))}))}computeViews(e,i,a,l){let d=pr();const f=yl(),y=(function(){return yl()})();return i.forEach(((b,_)=>{const x=a.get(_.key);l.has(_.key)&&(x===void 0||x.mutation instanceof Zs)?d=d.insert(_.key,_):x!==void 0?(f.set(_.key,x.mutation.getFieldMask()),vl(x.mutation,_,x.mutation.getFieldMask(),Tt.now())):f.set(_.key,pi.empty())})),this.recalculateAndSaveOverlays(e,d).next((b=>(b.forEach(((_,x)=>f.set(_,x))),i.forEach(((_,x)=>y.set(_,new oS(x,f.get(_)??null)))),y)))}recalculateAndSaveOverlays(e,i){const a=yl();let l=new Rt(((f,y)=>f-y)),d=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,i).next((f=>{for(const y of f)y.keys().forEach((b=>{const _=i.get(b);if(_===null)return;let x=a.get(b)||pi.empty();x=y.applyToLocalView(_,x),a.set(b,x);const A=(l.get(y.batchId)||Ze()).add(b);l=l.insert(y.batchId,A)}))})).next((()=>{const f=[],y=l.getReverseIterator();for(;y.hasNext();){const b=y.getNext(),_=b.key,x=b.value,A=l_();x.forEach((N=>{if(!d.has(N)){const U=m_(i.get(N),a.get(N));U!==null&&A.set(N,U),d=d.add(N)}})),f.push(this.documentOverlayCache.saveOverlays(e,_,A))}return te.waitFor(f)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,i){return this.remoteDocumentCache.getEntries(e,i).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,i,a,l){return(function(f){return Ie.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(i)?this.getDocumentsMatchingDocumentQuery(e,i.path):i_(i)?this.getDocumentsMatchingCollectionGroupQuery(e,i,a,l):this.getDocumentsMatchingCollectionQuery(e,i,a,l)}getNextDocuments(e,i,a,l){return this.remoteDocumentCache.getAllFromCollectionGroup(e,i,a,l).next((d=>{const f=l-d.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,i,a.largestBatchId,l-d.size):te.resolve(Qs());let y=xl,b=d;return f.next((_=>te.forEach(_,((x,A)=>(y<A.largestBatchId&&(y=A.largestBatchId),d.get(x)?te.resolve():this.remoteDocumentCache.getEntry(e,x).next((N=>{b=b.insert(x,N)}))))).next((()=>this.populateOverlays(e,_,d))).next((()=>this.computeViews(e,b,_,Ze()))).next((x=>({batchId:y,changes:o_(x)})))))}))}getDocumentsMatchingDocumentQuery(e,i){return this.getDocument(e,new Ie(i)).next((a=>{let l=hl();return a.isFoundDocument()&&(l=l.insert(a.key,a)),l}))}getDocumentsMatchingCollectionGroupQuery(e,i,a,l){const d=i.collectionGroup;let f=hl();return this.indexManager.getCollectionParents(e,d).next((y=>te.forEach(y,(b=>{const _=(function(A,N){return new uo(N,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(i,b.child(d));return this.getDocumentsMatchingCollectionQuery(e,_,a,l).next((x=>{x.forEach(((A,N)=>{f=f.insert(A,N)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,i,a,l){let d;return this.documentOverlayCache.getOverlaysForCollection(e,i.path,a.largestBatchId).next((f=>(d=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,i,a,d,l)))).next((f=>{d.forEach(((b,_)=>{const x=_.getKey();f.get(x)===null&&(f=f.insert(x,gn.newInvalidDocument(x)))}));let y=hl();return f.forEach(((b,_)=>{const x=d.get(b);x!==void 0&&vl(x.mutation,_,pi.empty(),Tt.now()),Hc(i,_)&&(y=y.insert(b,_))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,i){return te.resolve(this.Lr.get(i))}saveBundleMetadata(e,i){return this.Lr.set(i.id,(function(l){return{id:l.id,version:l.version,createTime:qi(l.createTime)}})(i)),te.resolve()}getNamedQuery(e,i){return te.resolve(this.kr.get(i))}saveNamedQuery(e,i){return this.kr.set(i.name,(function(l){return{name:l.name,query:ZA(l.bundledQuery),readTime:qi(l.readTime)}})(i)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(){this.overlays=new Rt(Ie.comparator),this.qr=new Map}getOverlay(e,i){return te.resolve(this.overlays.get(i))}getOverlays(e,i){const a=Qs();return te.forEach(i,(l=>this.getOverlay(e,l).next((d=>{d!==null&&a.set(l,d)})))).next((()=>a))}saveOverlays(e,i,a){return a.forEach(((l,d)=>{this.St(e,i,d)})),te.resolve()}removeOverlaysForBatchId(e,i,a){const l=this.qr.get(a);return l!==void 0&&(l.forEach((d=>this.overlays=this.overlays.remove(d))),this.qr.delete(a)),te.resolve()}getOverlaysForCollection(e,i,a){const l=Qs(),d=i.length+1,f=new Ie(i.child("")),y=this.overlays.getIteratorFrom(f);for(;y.hasNext();){const b=y.getNext().value,_=b.getKey();if(!i.isPrefixOf(_.path))break;_.path.length===d&&b.largestBatchId>a&&l.set(b.getKey(),b)}return te.resolve(l)}getOverlaysForCollectionGroup(e,i,a,l){let d=new Rt(((_,x)=>_-x));const f=this.overlays.getIterator();for(;f.hasNext();){const _=f.getNext().value;if(_.getKey().getCollectionGroup()===i&&_.largestBatchId>a){let x=d.get(_.largestBatchId);x===null&&(x=Qs(),d=d.insert(_.largestBatchId,x)),x.set(_.getKey(),_)}}const y=Qs(),b=d.getIterator();for(;b.hasNext()&&(b.getNext().value.forEach(((_,x)=>y.set(_,x))),!(y.size()>=l)););return te.resolve(y)}St(e,i,a){const l=this.overlays.get(a.key);if(l!==null){const f=this.qr.get(l.largestBatchId).delete(a.key);this.qr.set(l.largestBatchId,f)}this.overlays=this.overlays.insert(a.key,new RA(i,a));let d=this.qr.get(i);d===void 0&&(d=Ze(),this.qr.set(i,d)),this.qr.set(i,d.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,i){return this.sessionToken=i,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(){this.Qr=new Kt(Jt.$r),this.Ur=new Kt(Jt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,i){const a=new Jt(e,i);this.Qr=this.Qr.add(a),this.Ur=this.Ur.add(a)}Wr(e,i){e.forEach((a=>this.addReference(a,i)))}removeReference(e,i){this.Gr(new Jt(e,i))}zr(e,i){e.forEach((a=>this.removeReference(a,i)))}jr(e){const i=new Ie(new _t([])),a=new Jt(i,e),l=new Jt(i,e+1),d=[];return this.Ur.forEachInRange([a,l],(f=>{this.Gr(f),d.push(f.key)})),d}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const i=new Ie(new _t([])),a=new Jt(i,e),l=new Jt(i,e+1);let d=Ze();return this.Ur.forEachInRange([a,l],(f=>{d=d.add(f.key)})),d}containsKey(e){const i=new Jt(e,0),a=this.Qr.firstAfterOrEqual(i);return a!==null&&e.isEqual(a.key)}}class Jt{constructor(e,i){this.key=e,this.Yr=i}static $r(e,i){return Ie.comparator(e.key,i.key)||We(e.Yr,i.Yr)}static Kr(e,i){return We(e.Yr,i.Yr)||Ie.comparator(e.key,i.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,i){this.indexManager=e,this.referenceDelegate=i,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Jt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,i,a,l){const d=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new CA(d,i,a,l);this.mutationQueue.push(f);for(const y of l)this.Zr=this.Zr.add(new Jt(y.key,d)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return te.resolve(f)}lookupMutationBatch(e,i){return te.resolve(this.Xr(i))}getNextMutationBatchAfterBatchId(e,i){const a=i+1,l=this.ei(a),d=l<0?0:l;return te.resolve(this.mutationQueue.length>d?this.mutationQueue[d]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?Pf:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,i){const a=new Jt(i,0),l=new Jt(i,Number.POSITIVE_INFINITY),d=[];return this.Zr.forEachInRange([a,l],(f=>{const y=this.Xr(f.Yr);d.push(y)})),te.resolve(d)}getAllMutationBatchesAffectingDocumentKeys(e,i){let a=new Kt(We);return i.forEach((l=>{const d=new Jt(l,0),f=new Jt(l,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([d,f],(y=>{a=a.add(y.Yr)}))})),te.resolve(this.ti(a))}getAllMutationBatchesAffectingQuery(e,i){const a=i.path,l=a.length+1;let d=a;Ie.isDocumentKey(d)||(d=d.child(""));const f=new Jt(new Ie(d),0);let y=new Kt(We);return this.Zr.forEachWhile((b=>{const _=b.key.path;return!!a.isPrefixOf(_)&&(_.length===l&&(y=y.add(b.Yr)),!0)}),f),te.resolve(this.ti(y))}ti(e){const i=[];return e.forEach((a=>{const l=this.Xr(a);l!==null&&i.push(l)})),i}removeMutationBatch(e,i){ct(this.ni(i.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Zr;return te.forEach(i.mutations,(l=>{const d=new Jt(l.key,i.batchId);return a=a.delete(d),this.referenceDelegate.markPotentiallyOrphaned(e,l.key)})).next((()=>{this.Zr=a}))}ir(e){}containsKey(e,i){const a=new Jt(i,0),l=this.Zr.firstAfterOrEqual(a);return te.resolve(i.isEqual(l&&l.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,i){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const i=this.ei(e);return i<0||i>=this.mutationQueue.length?null:this.mutationQueue[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fS{constructor(e){this.ri=e,this.docs=(function(){return new Rt(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,i){const a=i.key,l=this.docs.get(a),d=l?l.size:0,f=this.ri(i);return this.docs=this.docs.insert(a,{document:i.mutableCopy(),size:f}),this.size+=f-d,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const i=this.docs.get(e);i&&(this.docs=this.docs.remove(e),this.size-=i.size)}getEntry(e,i){const a=this.docs.get(i);return te.resolve(a?a.document.mutableCopy():gn.newInvalidDocument(i))}getEntries(e,i){let a=pr();return i.forEach((l=>{const d=this.docs.get(l);a=a.insert(l,d?d.document.mutableCopy():gn.newInvalidDocument(l))})),te.resolve(a)}getDocumentsMatchingQuery(e,i,a,l){let d=pr();const f=i.path,y=new Ie(f.child("__id-9223372036854775808__")),b=this.docs.getIteratorFrom(y);for(;b.hasNext();){const{key:_,value:{document:x}}=b.getNext();if(!f.isPrefixOf(_.path))break;_.path.length>f.length+1||Px(Bx(x),a)<=0||(l.has(x.key)||Hc(i,x))&&(d=d.insert(x.key,x.mutableCopy()))}return te.resolve(d)}getAllFromCollectionGroup(e,i,a,l){Oe(9500)}ii(e,i){return te.forEach(this.docs,(a=>i(a)))}newChangeBuffer(e){return new mS(this)}getSize(e){return te.resolve(this.size)}}class mS extends aS{constructor(e){super(),this.Nr=e}applyChanges(e){const i=[];return this.changes.forEach(((a,l)=>{l.isValidDocument()?i.push(this.Nr.addEntry(e,l)):this.Nr.removeEntry(a)})),te.waitFor(i)}getFromCache(e,i){return this.Nr.getEntry(e,i)}getAllFromCache(e,i){return this.Nr.getEntries(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.persistence=e,this.si=new Ws((i=>Hf(i)),Ff),this.lastRemoteSnapshotVersion=ze.min(),this.highestTargetId=0,this.oi=0,this._i=new $f,this.targetCount=0,this.ai=io.ur()}forEachTarget(e,i){return this.si.forEach(((a,l)=>i(l))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,i,a){return a&&(this.lastRemoteSnapshotVersion=a),i>this.oi&&(this.oi=i),te.resolve()}Pr(e){this.si.set(e.target,e);const i=e.targetId;i>this.highestTargetId&&(this.ai=new io(i),this.highestTargetId=i),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,i){return this.Pr(i),this.targetCount+=1,te.resolve()}updateTargetData(e,i){return this.Pr(i),te.resolve()}removeTargetData(e,i){return this.si.delete(i.target),this._i.jr(i.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,i,a){let l=0;const d=[];return this.si.forEach(((f,y)=>{y.sequenceNumber<=i&&a.get(y.targetId)===null&&(this.si.delete(f),d.push(this.removeMatchingKeysForTargetId(e,y.targetId)),l++)})),te.waitFor(d).next((()=>l))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,i){const a=this.si.get(i)||null;return te.resolve(a)}addMatchingKeys(e,i,a){return this._i.Wr(i,a),te.resolve()}removeMatchingKeys(e,i,a){this._i.zr(i,a);const l=this.persistence.referenceDelegate,d=[];return l&&i.forEach((f=>{d.push(l.markPotentiallyOrphaned(e,f))})),te.waitFor(d)}removeMatchingKeysForTargetId(e,i){return this._i.jr(i),te.resolve()}getMatchingKeysForTargetId(e,i){const a=this._i.Hr(i);return te.resolve(a)}containsKey(e,i){return te.resolve(this._i.containsKey(i))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,i){this.ui={},this.overlays={},this.ci=new Bc(0),this.li=!1,this.li=!0,this.hi=new dS,this.referenceDelegate=e(this),this.Pi=new gS(this),this.indexManager=new JA,this.remoteDocumentCache=(function(l){return new fS(l)})((a=>this.referenceDelegate.Ti(a))),this.serializer=new WA(i),this.Ii=new uS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let i=this.overlays[e.toKey()];return i||(i=new cS,this.overlays[e.toKey()]=i),i}getMutationQueue(e,i){let a=this.ui[e.toKey()];return a||(a=new hS(i,this.referenceDelegate),this.ui[e.toKey()]=a),a}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,i,a){xe("MemoryPersistence","Starting transaction:",e);const l=new pS(this.ci.next());return this.referenceDelegate.Ei(),a(l).next((d=>this.referenceDelegate.di(l).next((()=>d)))).toPromise().then((d=>(l.raiseOnCommittedEvent(),d)))}Ai(e,i){return te.or(Object.values(this.ui).map((a=>()=>a.containsKey(e,i))))}}class pS extends Gx{constructor(e){super(),this.currentSequenceNumber=e}}class Wf{constructor(e){this.persistence=e,this.Ri=new $f,this.Vi=null}static mi(e){return new Wf(e)}get fi(){if(this.Vi)return this.Vi;throw Oe(60996)}addReference(e,i,a){return this.Ri.addReference(a,i),this.fi.delete(a.toString()),te.resolve()}removeReference(e,i,a){return this.Ri.removeReference(a,i),this.fi.add(a.toString()),te.resolve()}markPotentiallyOrphaned(e,i){return this.fi.add(i.toString()),te.resolve()}removeTarget(e,i){this.Ri.jr(i.targetId).forEach((l=>this.fi.add(l.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,i.targetId).next((l=>{l.forEach((d=>this.fi.add(d.toString())))})).next((()=>a.removeTargetData(e,i)))}Ei(){this.Vi=new Set}di(e){const i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,(a=>{const l=Ie.fromPath(a);return this.gi(e,l).next((d=>{d||i.removeEntry(l,ze.min())}))})).next((()=>(this.Vi=null,i.apply(e))))}updateLimboDocument(e,i){return this.gi(e,i).next((a=>{a?this.fi.delete(i.toString()):this.fi.add(i.toString())}))}Ti(e){return 0}gi(e,i){return te.or([()=>te.resolve(this.Ri.containsKey(i)),()=>this.persistence.getTargetCache().containsKey(e,i),()=>this.persistence.Ai(e,i)])}}class Mc{constructor(e,i){this.persistence=e,this.pi=new Ws((a=>Qx(a.path)),((a,l)=>a.isEqual(l))),this.garbageCollector=sS(this,i)}static mi(e,i){return new Mc(e,i)}Ei(){}di(e){return te.resolve()}forEachTarget(e,i){return this.persistence.getTargetCache().forEachTarget(e,i)}gr(e){const i=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>i.next((l=>a+l))))}wr(e){let i=0;return this.pr(e,(a=>{i++})).next((()=>i))}pr(e,i){return te.forEach(this.pi,((a,l)=>this.br(e,a,l).next((d=>d?te.resolve():i(l)))))}removeTargets(e,i,a){return this.persistence.getTargetCache().removeTargets(e,i,a)}removeOrphanedDocuments(e,i){let a=0;const l=this.persistence.getRemoteDocumentCache(),d=l.newChangeBuffer();return l.ii(e,(f=>this.br(e,f,i).next((y=>{y||(a++,d.removeEntry(f,ze.min()))})))).next((()=>d.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}removeTarget(e,i){const a=i.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),te.resolve()}removeReference(e,i,a){return this.pi.set(a,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,i){return this.pi.set(i,e.currentSequenceNumber),te.resolve()}Ti(e){let i=e.key.toString().length;return e.isFoundDocument()&&(i+=dc(e.data.value)),i}br(e,i,a){return te.or([()=>this.persistence.Ai(e,i),()=>this.persistence.getTargetCache().containsKey(e,i),()=>{const l=this.pi.get(i);return te.resolve(l!==void 0&&l>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,i,a,l){this.targetId=e,this.fromCache=i,this.Es=a,this.ds=l}static As(e,i){let a=Ze(),l=Ze();for(const d of i.docChanges)switch(d.type){case 0:a=a.add(d.doc.key);break;case 1:l=l.add(d.doc.key)}return new Zf(e,i.fromCache,a,l)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vS{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oT()?8:Hx(sT())>0?6:4})()}initialize(e,i){this.ps=e,this.indexManager=i,this.Rs=!0}getDocumentsMatchingQuery(e,i,a,l){const d={result:null};return this.ys(e,i).next((f=>{d.result=f})).next((()=>{if(!d.result)return this.ws(e,i,l,a).next((f=>{d.result=f}))})).next((()=>{if(d.result)return;const f=new yS;return this.Ss(e,i,f).next((y=>{if(d.result=y,this.Vs)return this.bs(e,i,f,y.size)}))})).next((()=>d.result))}bs(e,i,a,l){return a.documentReadCount<this.fs?(Ga()<=tt.DEBUG&&xe("QueryEngine","SDK will not create cache indexes for query:",Ha(i),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Ga()<=tt.DEBUG&&xe("QueryEngine","Query:",Ha(i),"scans",a.documentReadCount,"local documents and returns",l,"documents as results."),a.documentReadCount>this.gs*l?(Ga()<=tt.DEBUG&&xe("QueryEngine","The SDK decides to create cache indexes for query:",Ha(i),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(i))):te.resolve())}ys(e,i){if(M0(i))return te.resolve(null);let a=Pi(i);return this.indexManager.getIndexType(e,a).next((l=>l===0?null:(i.limit!==null&&l===1&&(i=Dc(i,null,"F"),a=Pi(i)),this.indexManager.getDocumentsMatchingTarget(e,a).next((d=>{const f=Ze(...d);return this.ps.getDocuments(e,f).next((y=>this.indexManager.getMinOffset(e,a).next((b=>{const _=this.Ds(i,y);return this.Cs(i,_,f,b.readTime)?this.ys(e,Dc(i,null,"F")):this.vs(e,_,i,b)}))))})))))}ws(e,i,a,l){return M0(i)||l.isEqual(ze.min())?te.resolve(null):this.ps.getDocuments(e,a).next((d=>{const f=this.Ds(i,d);return this.Cs(i,f,a,l)?te.resolve(null):(Ga()<=tt.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",l.toString(),Ha(i)),this.vs(e,f,i,Ux(l,xl)).next((y=>y)))}))}Ds(e,i){let a=new Kt(s_(e));return i.forEach(((l,d)=>{Hc(e,d)&&(a=a.add(d))})),a}Cs(e,i,a,l){if(e.limit===null)return!1;if(a.size!==i.size)return!0;const d=e.limitType==="F"?i.last():i.first();return!!d&&(d.hasPendingWrites||d.version.compareTo(l)>0)}Ss(e,i,a){return Ga()<=tt.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",Ha(i)),this.ps.getDocumentsMatchingQuery(e,i,ss.min(),a)}vs(e,i,a,l){return this.ps.getDocumentsMatchingQuery(e,a,l).next((d=>(i.forEach((f=>{d=d.insert(f.key,f)})),d)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jf="LocalStore",_S=3e8;class bS{constructor(e,i,a,l){this.persistence=e,this.Fs=i,this.serializer=l,this.Ms=new Rt(We),this.xs=new Ws((d=>Hf(d)),Ff),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(a)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lS(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(i=>e.collect(i,this.Ms)))}}function ES(r,e,i,a){return new bS(r,e,i,a)}async function D_(r,e){const i=Le(r);return await i.persistence.runTransaction("Handle user change","readonly",(a=>{let l;return i.mutationQueue.getAllMutationBatches(a).next((d=>(l=d,i.Bs(e),i.mutationQueue.getAllMutationBatches(a)))).next((d=>{const f=[],y=[];let b=Ze();for(const _ of l){f.push(_.batchId);for(const x of _.mutations)b=b.add(x.key)}for(const _ of d){y.push(_.batchId);for(const x of _.mutations)b=b.add(x.key)}return i.localDocuments.getDocuments(a,b).next((_=>({Ls:_,removedBatchIds:f,addedBatchIds:y})))}))}))}function TS(r,e){const i=Le(r);return i.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const l=e.batch.keys(),d=i.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,b,_,x){const A=_.batch,N=A.keys();let U=te.resolve();return N.forEach((ne=>{U=U.next((()=>x.getEntry(b,ne))).next((re=>{const F=_.docVersions.get(ne);ct(F!==null,48541),re.version.compareTo(F)<0&&(A.applyToRemoteDocument(re,_),re.isValidDocument()&&(re.setReadTime(_.commitVersion),x.addEntry(re)))}))})),U.next((()=>y.mutationQueue.removeMutationBatch(b,A)))})(i,a,e,d).next((()=>d.apply(a))).next((()=>i.mutationQueue.performConsistencyCheck(a))).next((()=>i.documentOverlayCache.removeOverlaysForBatchId(a,l,e.batch.batchId))).next((()=>i.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(y){let b=Ze();for(let _=0;_<y.mutationResults.length;++_)y.mutationResults[_].transformResults.length>0&&(b=b.add(y.batch.mutations[_].key));return b})(e)))).next((()=>i.localDocuments.getDocuments(a,l)))}))}function N_(r){const e=Le(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(i=>e.Pi.getLastRemoteSnapshotVersion(i)))}function xS(r,e){const i=Le(r),a=e.snapshotVersion;let l=i.Ms;return i.persistence.runTransaction("Apply remote event","readwrite-primary",(d=>{const f=i.Ns.newChangeBuffer({trackRemovals:!0});l=i.Ms;const y=[];e.targetChanges.forEach(((x,A)=>{const N=l.get(A);if(!N)return;y.push(i.Pi.removeMatchingKeys(d,x.removedDocuments,A).next((()=>i.Pi.addMatchingKeys(d,x.addedDocuments,A))));let U=N.withSequenceNumber(d.currentSequenceNumber);e.targetMismatches.get(A)!==null?U=U.withResumeToken(dn.EMPTY_BYTE_STRING,ze.min()).withLastLimboFreeSnapshotVersion(ze.min()):x.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(x.resumeToken,a)),l=l.insert(A,U),(function(re,F,pe){return re.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-re.snapshotVersion.toMicroseconds()>=_S?!0:pe.addedDocuments.size+pe.modifiedDocuments.size+pe.removedDocuments.size>0})(N,U,x)&&y.push(i.Pi.updateTargetData(d,U))}));let b=pr(),_=Ze();if(e.documentUpdates.forEach((x=>{e.resolvedLimboDocuments.has(x)&&y.push(i.persistence.referenceDelegate.updateLimboDocument(d,x))})),y.push(AS(d,f,e.documentUpdates).next((x=>{b=x.ks,_=x.qs}))),!a.isEqual(ze.min())){const x=i.Pi.getLastRemoteSnapshotVersion(d).next((A=>i.Pi.setTargetsMetadata(d,d.currentSequenceNumber,a)));y.push(x)}return te.waitFor(y).next((()=>f.apply(d))).next((()=>i.localDocuments.getLocalViewOfDocuments(d,b,_))).next((()=>b))})).then((d=>(i.Ms=l,d)))}function AS(r,e,i){let a=Ze(),l=Ze();return i.forEach((d=>a=a.add(d))),e.getEntries(r,a).next((d=>{let f=pr();return i.forEach(((y,b)=>{const _=d.get(y);b.isFoundDocument()!==_.isFoundDocument()&&(l=l.add(y)),b.isNoDocument()&&b.version.isEqual(ze.min())?(e.removeEntry(y,b.readTime),f=f.insert(y,b)):!_.isValidDocument()||b.version.compareTo(_.version)>0||b.version.compareTo(_.version)===0&&_.hasPendingWrites?(e.addEntry(b),f=f.insert(y,b)):xe(Jf,"Ignoring outdated watch update for ",y,". Current version:",_.version," Watch version:",b.version)})),{ks:f,qs:l}}))}function SS(r,e){const i=Le(r);return i.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Pf),i.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function wS(r,e){const i=Le(r);return i.persistence.runTransaction("Allocate target","readwrite",(a=>{let l;return i.Pi.getTargetData(a,e).next((d=>d?(l=d,te.resolve(l)):i.Pi.allocateTargetId(a).next((f=>(l=new Jr(e,f,"TargetPurposeListen",a.currentSequenceNumber),i.Pi.addTargetData(a,l).next((()=>l)))))))})).then((a=>{const l=i.Ms.get(a.targetId);return(l===null||a.snapshotVersion.compareTo(l.snapshotVersion)>0)&&(i.Ms=i.Ms.insert(a.targetId,a),i.xs.set(e,a.targetId)),a}))}async function Rf(r,e,i){const a=Le(r),l=a.Ms.get(e),d=i?"readwrite":"readwrite-primary";try{i||await a.persistence.runTransaction("Release target",d,(f=>a.persistence.referenceDelegate.removeTarget(f,l)))}catch(f){if(!lo(f))throw f;xe(Jf,`Failed to update sequence numbers for target ${e}: ${f}`)}a.Ms=a.Ms.remove(e),a.xs.delete(l.target)}function F0(r,e,i){const a=Le(r);let l=ze.min(),d=Ze();return a.persistence.runTransaction("Execute query","readwrite",(f=>(function(b,_,x){const A=Le(b),N=A.xs.get(x);return N!==void 0?te.resolve(A.Ms.get(N)):A.Pi.getTargetData(_,x)})(a,f,Pi(e)).next((y=>{if(y)return l=y.lastLimboFreeSnapshotVersion,a.Pi.getMatchingKeysForTargetId(f,y.targetId).next((b=>{d=b}))})).next((()=>a.Fs.getDocumentsMatchingQuery(f,e,i?l:ze.min(),i?d:Ze()))).next((y=>(CS(a,dA(e),y),{documents:y,Qs:d})))))}function CS(r,e,i){let a=r.Os.get(e)||ze.min();i.forEach(((l,d)=>{d.readTime.compareTo(a)>0&&(a=d.readTime)})),r.Os.set(e,a)}class Q0{constructor(){this.activeTargetIds=yA()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RS{constructor(){this.Mo=new Q0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,i,a){}addLocalQueryTarget(e,i=!0){return i&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,i,a){this.xo[e]=i}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Q0,Promise.resolve()}handleUserChange(e,i,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="ConnectivityMonitor";class K0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){xe(Y0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){xe(Y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lc=null;function Df(){return lc===null?lc=(function(){return 268435456+Math.round(2147483648*Math.random())})():lc++,"0x"+lc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="RestConnection",NS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IS{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const i=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),l=encodeURIComponent(this.databaseId.database);this.Uo=i+"://"+e.host,this.Ko=`projects/${a}/databases/${l}`,this.Wo=this.databaseId.database===wc?`project_id=${a}`:`project_id=${a}&database_id=${l}`}Go(e,i,a,l,d){const f=Df(),y=this.zo(e,i.toUriEncodedString());xe(lf,`Sending RPC '${e}' ${f}:`,y,a);const b={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(b,l,d);const{host:_}=new URL(y),x=kf(_);return this.Jo(e,y,b,a,x).then((A=>(xe(lf,`Received RPC '${e}' ${f}: `,A),A)),(A=>{throw Ja(lf,`RPC '${e}' ${f} failed with error: `,A,"url: ",y,"request:",a),A}))}Ho(e,i,a,l,d,f){return this.Go(e,i,a,l,d)}jo(e,i,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ao})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach(((l,d)=>e[d]=l)),a&&a.headers.forEach(((l,d)=>e[d]=l))}zo(e,i){const a=NS[e];return`${this.Uo}/v1/${i}:${a}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class VS extends IS{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,i,a,l,d){const f=Df();return new Promise(((y,b)=>{const _=new Iv;_.setWithCredentials(!0),_.listenOnce(Mv.COMPLETE,(()=>{try{switch(_.getLastErrorCode()){case cc.NO_ERROR:const A=_.getResponseJson();xe(fn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(A)),y(A);break;case cc.TIMEOUT:xe(fn,`RPC '${e}' ${f} timed out`),b(new be(ee.DEADLINE_EXCEEDED,"Request time out"));break;case cc.HTTP_ERROR:const N=_.getStatus();if(xe(fn,`RPC '${e}' ${f} failed with status:`,N,"response text:",_.getResponseText()),N>0){let U=_.getResponseJson();Array.isArray(U)&&(U=U[0]);const ne=U==null?void 0:U.error;if(ne&&ne.status&&ne.message){const re=(function(pe){const ie=pe.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(ie)>=0?ie:ee.UNKNOWN})(ne.status);b(new be(re,ne.message))}else b(new be(ee.UNKNOWN,"Server responded with status "+_.getStatus()))}else b(new be(ee.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:f,h_:_.getLastErrorCode(),P_:_.getLastError()})}}finally{xe(fn,`RPC '${e}' ${f} completed.`)}}));const x=JSON.stringify(l);xe(fn,`RPC '${e}' ${f} sending request:`,l),_.send(i,"POST",x,a,15)}))}T_(e,i,a){const l=Df(),d=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=jv(),y=Ov(),b={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},_=this.longPollingOptions.timeoutSeconds;_!==void 0&&(b.longPollingTimeout=Math.round(1e3*_)),this.useFetchStreams&&(b.useFetchStreams=!0),this.jo(b.initMessageHeaders,i,a),b.encodeInitMessageHeaders=!0;const x=d.join("");xe(fn,`Creating RPC '${e}' stream ${l}: ${x}`,b);const A=f.createWebChannel(x,b);this.I_(A);let N=!1,U=!1;const ne=new MS({Yo:F=>{U?xe(fn,`Not sending because RPC '${e}' stream ${l} is closed:`,F):(N||(xe(fn,`Opening RPC '${e}' stream ${l} transport.`),A.open(),N=!0),xe(fn,`RPC '${e}' stream ${l} sending:`,F),A.send(F))},Zo:()=>A.close()}),re=(F,pe,ie)=>{F.listen(pe,(me=>{try{ie(me)}catch(ve){setTimeout((()=>{throw ve}),0)}}))};return re(A,dl.EventType.OPEN,(()=>{U||(xe(fn,`RPC '${e}' stream ${l} transport opened.`),ne.o_())})),re(A,dl.EventType.CLOSE,(()=>{U||(U=!0,xe(fn,`RPC '${e}' stream ${l} transport closed`),ne.a_(),this.E_(A))})),re(A,dl.EventType.ERROR,(F=>{U||(U=!0,Ja(fn,`RPC '${e}' stream ${l} transport errored. Name:`,F.name,"Message:",F.message),ne.a_(new be(ee.UNAVAILABLE,"The operation could not be completed")))})),re(A,dl.EventType.MESSAGE,(F=>{var pe;if(!U){const ie=F.data[0];ct(!!ie,16349);const me=ie,ve=(me==null?void 0:me.error)||((pe=me[0])==null?void 0:pe.error);if(ve){xe(fn,`RPC '${e}' stream ${l} received error:`,ve);const Se=ve.status;let Te=(function(w){const O=Gt[w];if(O!==void 0)return y_(O)})(Se),I=ve.message;Te===void 0&&(Te=ee.INTERNAL,I="Unknown error status: "+Se+" with message "+ve.message),U=!0,ne.a_(new be(Te,I)),A.close()}else xe(fn,`RPC '${e}' stream ${l} received:`,ie),ne.u_(ie)}})),re(y,Vv.STAT_EVENT,(F=>{F.stat===yf.PROXY?xe(fn,`RPC '${e}' stream ${l} detected buffering proxy`):F.stat===yf.NOPROXY&&xe(fn,`RPC '${e}' stream ${l} detected no buffering proxy`)})),setTimeout((()=>{ne.__()}),0),ne}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((i=>i===e))}}function uf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(r){return new kA(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,i,a=1e3,l=1.5,d=6e4){this.Mi=e,this.timerId=i,this.d_=a,this.A_=l,this.R_=d,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const i=Math.floor(this.V_+this.y_()),a=Math.max(0,Date.now()-this.f_),l=Math.max(0,i-a);l>0&&xe("ExponentialBackoff",`Backing off for ${l} ms (base delay: ${this.V_} ms, delay with jitter: ${i} ms, last attempt: ${a} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,l,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="PersistentStream";class M_{constructor(e,i,a,l,d,f,y,b){this.Mi=e,this.S_=a,this.b_=l,this.connection=d,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=y,this.listener=b,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new I_(e,i)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,i){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():i&&i.code===ee.RESOURCE_EXHAUSTED?(gr(i.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):i&&i.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(i)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),i=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,l])=>{this.D_===i&&this.G_(a,l)}),(a=>{e((()=>{const l=new be(ee.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(l)}))}))}G_(e,i){const a=this.W_(this.D_);this.stream=this.j_(e,i),this.stream.Xo((()=>{a((()=>this.listener.Xo()))})),this.stream.t_((()=>{a((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((l=>{a((()=>this.z_(l)))})),this.stream.onMessage((l=>{a((()=>++this.F_==1?this.J_(l):this.onNext(l)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return xe(X0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return i=>{this.Mi.enqueueAndForget((()=>this.D_===e?i():(xe(X0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class OS extends M_{constructor(e,i,a,l,d,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",i,a,l,f),this.serializer=d}j_(e,i){return this.connection.T_("Listen",e,i)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const i=BA(this.serializer,e),a=(function(d){if(!("targetChange"in d))return ze.min();const f=d.targetChange;return f.targetIds&&f.targetIds.length?ze.min():f.readTime?qi(f.readTime):ze.min()})(e);return this.listener.H_(i,a)}Y_(e){const i={};i.database=Cf(this.serializer),i.addTarget=(function(d,f){let y;const b=f.target;if(y=Tf(b)?{documents:GA(d,b)}:{query:HA(d,b).ft},y.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){y.resumeToken=b_(d,f.resumeToken);const _=Af(d,f.expectedCount);_!==null&&(y.expectedCount=_)}else if(f.snapshotVersion.compareTo(ze.min())>0){y.readTime=Ic(d,f.snapshotVersion.toTimestamp());const _=Af(d,f.expectedCount);_!==null&&(y.expectedCount=_)}return y})(this.serializer,e);const a=QA(this.serializer,e);a&&(i.labels=a),this.q_(i)}Z_(e){const i={};i.database=Cf(this.serializer),i.removeTarget=e,this.q_(i)}}class jS extends M_{constructor(e,i,a,l,d,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",i,a,l,f),this.serializer=d}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,i){return this.connection.T_("Write",e,i)}J_(e){return ct(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ct(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ct(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const i=qA(e.writeResults,e.commitTime),a=qi(e.commitTime);return this.listener.na(a,i)}ra(){const e={};e.database=Cf(this.serializer),this.q_(e)}ea(e){const i={streamToken:this.lastStreamToken,writes:e.map((a=>PA(this.serializer,a)))};this.q_(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{}class kS extends zS{constructor(e,i,a,l){super(),this.authCredentials=e,this.appCheckCredentials=i,this.connection=a,this.serializer=l,this.ia=!1}sa(){if(this.ia)throw new be(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,f])=>this.connection.Go(e,Sf(i,a),l,d,f))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new be(ee.UNKNOWN,d.toString())}))}Ho(e,i,a,l,d){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,y])=>this.connection.Ho(e,Sf(i,a),l,f,y,d))).catch((f=>{throw f.name==="FirebaseError"?(f.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new be(ee.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LS{constructor(e,i){this.asyncQueue=e,this.onlineStateHandler=i,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const i=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(i),this.aa=!1):xe("OnlineStateTracker",i)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="RemoteStore";class US{constructor(e,i,a,l,d){this.localStore=e,this.datastore=i,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=d,this.Aa.Oo((f=>{a.enqueueAndForget((async()=>{Js(this)&&(xe(Xs,"Restarting streams for network reachability change."),await(async function(b){const _=Le(b);_.Ea.add(4),await Ol(_),_.Ra.set("Unknown"),_.Ea.delete(4),await Xc(_)})(this))}))})),this.Ra=new LS(a,l)}}async function Xc(r){if(Js(r))for(const e of r.da)await e(!0)}async function Ol(r){for(const e of r.da)await e(!1)}function V_(r,e){const i=Le(r);i.Ia.has(e.targetId)||(i.Ia.set(e.targetId,e),im(i)?nm(i):co(i).O_()&&tm(i,e))}function em(r,e){const i=Le(r),a=co(i);i.Ia.delete(e),a.O_()&&O_(i,e),i.Ia.size===0&&(a.O_()?a.L_():Js(i)&&i.Ra.set("Unknown"))}function tm(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ze.min())>0){const i=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(i)}co(r).Y_(e)}function O_(r,e){r.Va.Ue(e),co(r).Z_(e)}function nm(r){r.Va=new VA({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),co(r).start(),r.Ra.ua()}function im(r){return Js(r)&&!co(r).x_()&&r.Ia.size>0}function Js(r){return Le(r).Ea.size===0}function j_(r){r.Va=void 0}async function BS(r){r.Ra.set("Online")}async function PS(r){r.Ia.forEach(((e,i)=>{tm(r,e)}))}async function qS(r,e){j_(r),im(r)?(r.Ra.ha(e),nm(r)):r.Ra.set("Unknown")}async function GS(r,e,i){if(r.Ra.set("Online"),e instanceof __&&e.state===2&&e.cause)try{await(async function(l,d){const f=d.cause;for(const y of d.targetIds)l.Ia.has(y)&&(await l.remoteSyncer.rejectListen(y,f),l.Ia.delete(y),l.Va.removeTarget(y))})(r,e)}catch(a){xe(Xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Vc(r,a)}else if(e instanceof mc?r.Va.Ze(e):e instanceof v_?r.Va.st(e):r.Va.tt(e),!i.isEqual(ze.min()))try{const a=await N_(r.localStore);i.compareTo(a)>=0&&await(function(d,f){const y=d.Va.Tt(f);return y.targetChanges.forEach(((b,_)=>{if(b.resumeToken.approximateByteSize()>0){const x=d.Ia.get(_);x&&d.Ia.set(_,x.withResumeToken(b.resumeToken,f))}})),y.targetMismatches.forEach(((b,_)=>{const x=d.Ia.get(b);if(!x)return;d.Ia.set(b,x.withResumeToken(dn.EMPTY_BYTE_STRING,x.snapshotVersion)),O_(d,b);const A=new Jr(x.target,b,_,x.sequenceNumber);tm(d,A)})),d.remoteSyncer.applyRemoteEvent(y)})(r,i)}catch(a){xe(Xs,"Failed to raise snapshot:",a),await Vc(r,a)}}async function Vc(r,e,i){if(!lo(e))throw e;r.Ea.add(1),await Ol(r),r.Ra.set("Offline"),i||(i=()=>N_(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{xe(Xs,"Retrying IndexedDB access"),await i(),r.Ea.delete(1),await Xc(r)}))}function z_(r,e){return e().catch((i=>Vc(r,i,e)))}async function $c(r){const e=Le(r),i=us(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pf;for(;HS(e);)try{const l=await SS(e.localStore,a);if(l===null){e.Ta.length===0&&i.L_();break}a=l.batchId,FS(e,l)}catch(l){await Vc(e,l)}k_(e)&&L_(e)}function HS(r){return Js(r)&&r.Ta.length<10}function FS(r,e){r.Ta.push(e);const i=us(r);i.O_()&&i.X_&&i.ea(e.mutations)}function k_(r){return Js(r)&&!us(r).x_()&&r.Ta.length>0}function L_(r){us(r).start()}async function QS(r){us(r).ra()}async function YS(r){const e=us(r);for(const i of r.Ta)e.ea(i.mutations)}async function KS(r,e,i){const a=r.Ta.shift(),l=Yf.from(a,e,i);await z_(r,(()=>r.remoteSyncer.applySuccessfulWrite(l))),await $c(r)}async function XS(r,e){e&&us(r).X_&&await(async function(a,l){if((function(f){return NA(f)&&f!==ee.ABORTED})(l.code)){const d=a.Ta.shift();us(a).B_(),await z_(a,(()=>a.remoteSyncer.rejectFailedWrite(d.batchId,l))),await $c(a)}})(r,e),k_(r)&&L_(r)}async function $0(r,e){const i=Le(r);i.asyncQueue.verifyOperationInProgress(),xe(Xs,"RemoteStore received new credentials");const a=Js(i);i.Ea.add(3),await Ol(i),a&&i.Ra.set("Unknown"),await i.remoteSyncer.handleCredentialChange(e),i.Ea.delete(3),await Xc(i)}async function $S(r,e){const i=Le(r);e?(i.Ea.delete(2),await Xc(i)):e||(i.Ea.add(2),await Ol(i),i.Ra.set("Unknown"))}function co(r){return r.ma||(r.ma=(function(i,a,l){const d=Le(i);return d.sa(),new OS(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,l)})(r.datastore,r.asyncQueue,{Xo:BS.bind(null,r),t_:PS.bind(null,r),r_:qS.bind(null,r),H_:GS.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),im(r)?nm(r):r.Ra.set("Unknown")):(await r.ma.stop(),j_(r))}))),r.ma}function us(r){return r.fa||(r.fa=(function(i,a,l){const d=Le(i);return d.sa(),new jS(a,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,l)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:QS.bind(null,r),r_:XS.bind(null,r),ta:YS.bind(null,r),na:KS.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await $c(r)):(await r.fa.stop(),r.Ta.length>0&&(xe(Xs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,i,a,l,d){this.asyncQueue=e,this.timerId=i,this.targetTimeMs=a,this.op=l,this.removalCallback=d,this.deferred=new is,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,i,a,l,d){const f=Date.now()+a,y=new rm(e,i,f,l,d);return y.start(a),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sm(r,e){if(gr("AsyncQueue",`${e}: ${r}`),lo(r))return new be(ee.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{static emptySet(e){return new Xa(e.comparator)}constructor(e){this.comparator=e?(i,a)=>e(i,a)||Ie.comparator(i.key,a.key):(i,a)=>Ie.comparator(i.key,a.key),this.keyedMap=hl(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const i=this.keyedMap.get(e);return i?this.sortedSet.indexOf(i):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((i,a)=>(e(i),!1)))}add(e){const i=this.delete(e.key);return i.copy(i.keyedMap.insert(e.key,e),i.sortedSet.insert(e,null))}delete(e){const i=this.get(e);return i?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(i)):this}isEqual(e){if(!(e instanceof Xa)||this.size!==e.size)return!1;const i=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;i.hasNext();){const l=i.getNext().key,d=a.getNext().key;if(!l.isEqual(d))return!1}return!0}toString(){const e=[];return this.forEach((i=>{e.push(i.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,i){const a=new Xa;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=i,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.ga=new Rt(Ie.comparator)}track(e){const i=e.doc.key,a=this.ga.get(i);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(i,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(i,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(i,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(i):e.type===1&&a.type===2?this.ga=this.ga.insert(i,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(i,{type:2,doc:e.doc}):Oe(63341,{Rt:e,pa:a}):this.ga=this.ga.insert(i,e)}ya(){const e=[];return this.ga.inorderTraversal(((i,a)=>{e.push(a)})),e}}class ro{constructor(e,i,a,l,d,f,y,b,_){this.query=e,this.docs=i,this.oldDocs=a,this.docChanges=l,this.mutatedKeys=d,this.fromCache=f,this.syncStateChanged=y,this.excludesMetadataChanges=b,this.hasCachedResults=_}static fromInitialDocuments(e,i,a,l,d){const f=[];return i.forEach((y=>{f.push({type:0,doc:y})})),new ro(e,i,Xa.emptySet(i),f,a,l,!0,!1,d)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const i=this.docChanges,a=e.docChanges;if(i.length!==a.length)return!1;for(let l=0;l<i.length;l++)if(i[l].type!==a[l].type||!i[l].doc.isEqual(a[l].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class ZS{constructor(){this.queries=Z0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(i,a){const l=Le(i),d=l.queries;l.queries=Z0(),d.forEach(((f,y)=>{for(const b of y.Sa)b.onError(a)}))})(this,new be(ee.ABORTED,"Firestore shutting down"))}}function Z0(){return new Ws((r=>r_(r)),Gc)}async function JS(r,e){const i=Le(r);let a=3;const l=e.query;let d=i.queries.get(l);d?!d.ba()&&e.Da()&&(a=2):(d=new WS,a=e.Da()?0:1);try{switch(a){case 0:d.wa=await i.onListen(l,!0);break;case 1:d.wa=await i.onListen(l,!1);break;case 2:await i.onFirstRemoteStoreListen(l)}}catch(f){const y=sm(f,`Initialization of query '${Ha(e.query)}' failed`);return void e.onError(y)}i.queries.set(l,d),d.Sa.push(e),e.va(i.onlineState),d.wa&&e.Fa(d.wa)&&am(i)}async function e2(r,e){const i=Le(r),a=e.query;let l=3;const d=i.queries.get(a);if(d){const f=d.Sa.indexOf(e);f>=0&&(d.Sa.splice(f,1),d.Sa.length===0?l=e.Da()?0:1:!d.ba()&&e.Da()&&(l=2))}switch(l){case 0:return i.queries.delete(a),i.onUnlisten(a,!0);case 1:return i.queries.delete(a),i.onUnlisten(a,!1);case 2:return i.onLastRemoteStoreUnlisten(a);default:return}}function t2(r,e){const i=Le(r);let a=!1;for(const l of e){const d=l.query,f=i.queries.get(d);if(f){for(const y of f.Sa)y.Fa(l)&&(a=!0);f.wa=l}}a&&am(i)}function n2(r,e,i){const a=Le(r),l=a.queries.get(e);if(l)for(const d of l.Sa)d.onError(i);a.queries.delete(e)}function am(r){r.Ca.forEach((e=>{e.next()}))}var Nf,J0;(J0=Nf||(Nf={})).Ma="default",J0.Cache="cache";class i2{constructor(e,i,a){this.query=e,this.xa=i,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const l of e.docChanges)l.type!==3&&a.push(l);e=new ro(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let i=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),i=!0):this.La(e,this.onlineState)&&(this.ka(e),i=!0),this.Na=e,i}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let i=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),i=!0),i}La(e,i){if(!e.fromCache||!this.Da())return!0;const a=i!=="Offline";return(!this.options.qa||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||i==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const i=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!i)&&this.options.includeMetadataChanges===!0}ka(e){e=ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Nf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e){this.key=e}}class B_{constructor(e){this.key=e}}class r2{constructor(e,i){this.query=e,this.Ya=i,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ze(),this.mutatedKeys=Ze(),this.eu=s_(e),this.tu=new Xa(this.eu)}get nu(){return this.Ya}ru(e,i){const a=i?i.iu:new W0,l=i?i.tu:this.tu;let d=i?i.mutatedKeys:this.mutatedKeys,f=l,y=!1;const b=this.query.limitType==="F"&&l.size===this.query.limit?l.last():null,_=this.query.limitType==="L"&&l.size===this.query.limit?l.first():null;if(e.inorderTraversal(((x,A)=>{const N=l.get(x),U=Hc(this.query,A)?A:null,ne=!!N&&this.mutatedKeys.has(N.key),re=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let F=!1;N&&U?N.data.isEqual(U.data)?ne!==re&&(a.track({type:3,doc:U}),F=!0):this.su(N,U)||(a.track({type:2,doc:U}),F=!0,(b&&this.eu(U,b)>0||_&&this.eu(U,_)<0)&&(y=!0)):!N&&U?(a.track({type:0,doc:U}),F=!0):N&&!U&&(a.track({type:1,doc:N}),F=!0,(b||_)&&(y=!0)),F&&(U?(f=f.add(U),d=re?d.add(x):d.delete(x)):(f=f.delete(x),d=d.delete(x)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const x=this.query.limitType==="F"?f.last():f.first();f=f.delete(x.key),d=d.delete(x.key),a.track({type:1,doc:x})}return{tu:f,iu:a,Cs:y,mutatedKeys:d}}su(e,i){return e.hasLocalMutations&&i.hasCommittedMutations&&!i.hasLocalMutations}applyChanges(e,i,a,l){const d=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((x,A)=>(function(U,ne){const re=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Rt:F})}};return re(U)-re(ne)})(x.type,A.type)||this.eu(x.doc,A.doc))),this.ou(a),l=l??!1;const y=i&&!l?this._u():[],b=this.Xa.size===0&&this.current&&!l?1:0,_=b!==this.Za;return this.Za=b,f.length!==0||_?{snapshot:new ro(this.query,e.tu,d,f,e.mutatedKeys,b===0,_,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((i=>this.Ya=this.Ya.add(i))),e.modifiedDocuments.forEach((i=>{})),e.removedDocuments.forEach((i=>this.Ya=this.Ya.delete(i))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ze(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Xa=this.Xa.add(a.key))}));const i=[];return e.forEach((a=>{this.Xa.has(a)||i.push(new B_(a))})),this.Xa.forEach((a=>{e.has(a)||i.push(new U_(a))})),i}cu(e){this.Ya=e.Qs,this.Xa=Ze();const i=this.ru(e.documents);return this.applyChanges(i,!0)}lu(){return ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const om="SyncEngine";class s2{constructor(e,i,a){this.query=e,this.targetId=i,this.view=a}}class a2{constructor(e){this.key=e,this.hu=!1}}class o2{constructor(e,i,a,l,d,f){this.localStore=e,this.remoteStore=i,this.eventManager=a,this.sharedClientState=l,this.currentUser=d,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new Ws((y=>r_(y)),Gc),this.Iu=new Map,this.Eu=new Set,this.du=new Rt(Ie.comparator),this.Au=new Map,this.Ru=new $f,this.Vu={},this.mu=new Map,this.fu=io.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function l2(r,e,i=!0){const a=Q_(r);let l;const d=a.Tu.get(e);return d?(a.sharedClientState.addLocalQueryTarget(d.targetId),l=d.view.lu()):l=await P_(a,e,i,!0),l}async function u2(r,e){const i=Q_(r);await P_(i,e,!0,!1)}async function P_(r,e,i,a){const l=await wS(r.localStore,Pi(e)),d=l.targetId,f=r.sharedClientState.addLocalQueryTarget(d,i);let y;return a&&(y=await c2(r,e,d,f==="current",l.resumeToken)),r.isPrimaryClient&&i&&V_(r.remoteStore,l),y}async function c2(r,e,i,a,l){r.pu=(A,N,U)=>(async function(re,F,pe,ie){let me=F.view.ru(pe);me.Cs&&(me=await F0(re.localStore,F.query,!1).then((({documents:I})=>F.view.ru(I,me))));const ve=ie&&ie.targetChanges.get(F.targetId),Se=ie&&ie.targetMismatches.get(F.targetId)!=null,Te=F.view.applyChanges(me,re.isPrimaryClient,ve,Se);return tv(re,F.targetId,Te.au),Te.snapshot})(r,A,N,U);const d=await F0(r.localStore,e,!0),f=new r2(e,d.Qs),y=f.ru(d.documents),b=Vl.createSynthesizedTargetChangeForCurrentChange(i,a&&r.onlineState!=="Offline",l),_=f.applyChanges(y,r.isPrimaryClient,b);tv(r,i,_.au);const x=new s2(e,i,f);return r.Tu.set(e,x),r.Iu.has(i)?r.Iu.get(i).push(e):r.Iu.set(i,[e]),_.snapshot}async function d2(r,e,i){const a=Le(r),l=a.Tu.get(e),d=a.Iu.get(l.targetId);if(d.length>1)return a.Iu.set(l.targetId,d.filter((f=>!Gc(f,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(l.targetId),a.sharedClientState.isActiveQueryTarget(l.targetId)||await Rf(a.localStore,l.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(l.targetId),i&&em(a.remoteStore,l.targetId),If(a,l.targetId)})).catch(oo)):(If(a,l.targetId),await Rf(a.localStore,l.targetId,!0))}async function h2(r,e){const i=Le(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);i.isPrimaryClient&&l.length===1&&(i.sharedClientState.removeLocalQueryTarget(a.targetId),em(i.remoteStore,a.targetId))}async function f2(r,e,i){const a=b2(r);try{const l=await(function(f,y){const b=Le(f),_=Tt.now(),x=y.reduce(((U,ne)=>U.add(ne.key)),Ze());let A,N;return b.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let ne=pr(),re=Ze();return b.Ns.getEntries(U,x).next((F=>{ne=F,ne.forEach(((pe,ie)=>{ie.isValidDocument()||(re=re.add(pe))}))})).next((()=>b.localDocuments.getOverlayedDocuments(U,ne))).next((F=>{A=F;const pe=[];for(const ie of y){const me=SA(ie,A.get(ie.key).overlayedDocument);me!=null&&pe.push(new Zs(ie.key,me,Xv(me.value.mapValue),fr.exists(!0)))}return b.mutationQueue.addMutationBatch(U,_,pe,y)})).next((F=>{N=F;const pe=F.applyToLocalDocumentSet(A,re);return b.documentOverlayCache.saveOverlays(U,F.batchId,pe)}))})).then((()=>({batchId:N.batchId,changes:o_(A)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(l.batchId),(function(f,y,b){let _=f.Vu[f.currentUser.toKey()];_||(_=new Rt(We)),_=_.insert(y,b),f.Vu[f.currentUser.toKey()]=_})(a,l.batchId,i),await jl(a,l.changes),await $c(a.remoteStore)}catch(l){const d=sm(l,"Failed to persist write");i.reject(d)}}async function q_(r,e){const i=Le(r);try{const a=await xS(i.localStore,e);e.targetChanges.forEach(((l,d)=>{const f=i.Au.get(d);f&&(ct(l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size<=1,22616),l.addedDocuments.size>0?f.hu=!0:l.modifiedDocuments.size>0?ct(f.hu,14607):l.removedDocuments.size>0&&(ct(f.hu,42227),f.hu=!1))})),await jl(i,a,e)}catch(a){await oo(a)}}function ev(r,e,i){const a=Le(r);if(a.isPrimaryClient&&i===0||!a.isPrimaryClient&&i===1){const l=[];a.Tu.forEach(((d,f)=>{const y=f.view.va(e);y.snapshot&&l.push(y.snapshot)})),(function(f,y){const b=Le(f);b.onlineState=y;let _=!1;b.queries.forEach(((x,A)=>{for(const N of A.Sa)N.va(y)&&(_=!0)})),_&&am(b)})(a.eventManager,e),l.length&&a.Pu.H_(l),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function m2(r,e,i){const a=Le(r);a.sharedClientState.updateQueryState(e,"rejected",i);const l=a.Au.get(e),d=l&&l.key;if(d){let f=new Rt(Ie.comparator);f=f.insert(d,gn.newNoDocument(d,ze.min()));const y=Ze().add(d),b=new Yc(ze.min(),new Map,new Rt(We),f,y);await q_(a,b),a.du=a.du.remove(d),a.Au.delete(e),lm(a)}else await Rf(a.localStore,e,!1).then((()=>If(a,e,i))).catch(oo)}async function g2(r,e){const i=Le(r),a=e.batch.batchId;try{const l=await TS(i.localStore,e);H_(i,a,null),G_(i,a),i.sharedClientState.updateMutationState(a,"acknowledged"),await jl(i,l)}catch(l){await oo(l)}}async function p2(r,e,i){const a=Le(r);try{const l=await(function(f,y){const b=Le(f);return b.persistence.runTransaction("Reject batch","readwrite-primary",(_=>{let x;return b.mutationQueue.lookupMutationBatch(_,y).next((A=>(ct(A!==null,37113),x=A.keys(),b.mutationQueue.removeMutationBatch(_,A)))).next((()=>b.mutationQueue.performConsistencyCheck(_))).next((()=>b.documentOverlayCache.removeOverlaysForBatchId(_,x,y))).next((()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,x))).next((()=>b.localDocuments.getDocuments(_,x)))}))})(a.localStore,e);H_(a,e,i),G_(a,e),a.sharedClientState.updateMutationState(e,"rejected",i),await jl(a,l)}catch(l){await oo(l)}}function G_(r,e){(r.mu.get(e)||[]).forEach((i=>{i.resolve()})),r.mu.delete(e)}function H_(r,e,i){const a=Le(r);let l=a.Vu[a.currentUser.toKey()];if(l){const d=l.get(e);d&&(i?d.reject(i):d.resolve(),l=l.remove(e)),a.Vu[a.currentUser.toKey()]=l}}function If(r,e,i=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),i&&r.Pu.yu(a,i);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((a=>{r.Ru.containsKey(a)||F_(r,a)}))}function F_(r,e){r.Eu.delete(e.path.canonicalString());const i=r.du.get(e);i!==null&&(em(r.remoteStore,i),r.du=r.du.remove(e),r.Au.delete(i),lm(r))}function tv(r,e,i){for(const a of i)a instanceof U_?(r.Ru.addReference(a.key,e),y2(r,a)):a instanceof B_?(xe(om,"Document no longer in limbo: "+a.key),r.Ru.removeReference(a.key,e),r.Ru.containsKey(a.key)||F_(r,a.key)):Oe(19791,{wu:a})}function y2(r,e){const i=e.key,a=i.path.canonicalString();r.du.get(i)||r.Eu.has(a)||(xe(om,"New document in limbo: "+i),r.Eu.add(a),lm(r))}function lm(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const i=new Ie(_t.fromString(e)),a=r.fu.next();r.Au.set(a,new a2(i)),r.du=r.du.insert(i,a),V_(r.remoteStore,new Jr(Pi(n_(i.path)),a,"TargetPurposeLimboResolution",Bc.ce))}}async function jl(r,e,i){const a=Le(r),l=[],d=[],f=[];a.Tu.isEmpty()||(a.Tu.forEach(((y,b)=>{f.push(a.pu(b,e,i).then((_=>{var x;if((_||i)&&a.isPrimaryClient){const A=_?!_.fromCache:(x=i==null?void 0:i.targetChanges.get(b.targetId))==null?void 0:x.current;a.sharedClientState.updateQueryState(b.targetId,A?"current":"not-current")}if(_){l.push(_);const A=Zf.As(b.targetId,_);d.push(A)}})))})),await Promise.all(f),a.Pu.H_(l),await(async function(b,_){const x=Le(b);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>te.forEach(_,(N=>te.forEach(N.Es,(U=>x.persistence.referenceDelegate.addReference(A,N.targetId,U))).next((()=>te.forEach(N.ds,(U=>x.persistence.referenceDelegate.removeReference(A,N.targetId,U)))))))))}catch(A){if(!lo(A))throw A;xe(Jf,"Failed to update sequence numbers: "+A)}for(const A of _){const N=A.targetId;if(!A.fromCache){const U=x.Ms.get(N),ne=U.snapshotVersion,re=U.withLastLimboFreeSnapshotVersion(ne);x.Ms=x.Ms.insert(N,re)}}})(a.localStore,d))}async function v2(r,e){const i=Le(r);if(!i.currentUser.isEqual(e)){xe(om,"User change. New user:",e.toKey());const a=await D_(i.localStore,e);i.currentUser=e,(function(d,f){d.mu.forEach((y=>{y.forEach((b=>{b.reject(new be(ee.CANCELLED,f))}))})),d.mu.clear()})(i,"'waitForPendingWrites' promise is rejected due to a user change."),i.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await jl(i,a.Ls)}}function _2(r,e){const i=Le(r),a=i.Au.get(e);if(a&&a.hu)return Ze().add(a.key);{let l=Ze();const d=i.Iu.get(e);if(!d)return l;for(const f of d){const y=i.Tu.get(f);l=l.unionWith(y.view.nu)}return l}}function Q_(r){const e=Le(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=q_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=m2.bind(null,e),e.Pu.H_=t2.bind(null,e.eventManager),e.Pu.yu=n2.bind(null,e.eventManager),e}function b2(r){const e=Le(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=g2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p2.bind(null,e),e}class Oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,i){return null}Mu(e,i){return null}vu(e){return ES(this.persistence,new vS,e.initialUser,this.serializer)}Cu(e){return new R_(Wf.mi,this.serializer)}Du(e){return new RS}async terminate(){var e,i;(e=this.gcScheduler)==null||e.stop(),(i=this.indexBackfillerScheduler)==null||i.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oc.provider={build:()=>new Oc};class E2 extends Oc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,i){ct(this.persistence.referenceDelegate instanceof Mc,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new iS(a,e.asyncQueue,i)}Cu(e){const i=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new R_((a=>Mc.mi(a,i)),this.serializer)}}class Mf{async initialize(e,i){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(i),this.remoteStore=this.createRemoteStore(i),this.eventManager=this.createEventManager(i),this.syncEngine=this.createSyncEngine(i,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>ev(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=v2.bind(null,this.syncEngine),await $S(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new ZS})()}createDatastore(e){const i=Kc(e.databaseInfo.databaseId),a=(function(d){return new VS(d)})(e.databaseInfo);return(function(d,f,y,b){return new kS(d,f,y,b)})(e.authCredentials,e.appCheckCredentials,a,i)}createRemoteStore(e){return(function(a,l,d,f,y){return new US(a,l,d,f,y)})(this.localStore,this.datastore,e.asyncQueue,(i=>ev(this.syncEngine,i,0)),(function(){return K0.v()?new K0:new DS})())}createSyncEngine(e,i){return(function(l,d,f,y,b,_,x){const A=new o2(l,d,f,y,b,_);return x&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,i)}async terminate(){var e,i;await(async function(l){const d=Le(l);xe(Xs,"RemoteStore shutting down."),d.Ea.add(5),await Ol(d),d.Aa.shutdown(),d.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(i=this.eventManager)==null||i.terminate()}}Mf.provider={build:()=>new Mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,i){setTimeout((()=>{this.muted||e(i)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class x2{constructor(e,i,a,l,d){this.authCredentials=e,this.appCheckCredentials=i,this.asyncQueue=a,this.databaseInfo=l,this.user=mn.UNAUTHENTICATED,this.clientId=Bf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=d,this.authCredentials.start(a,(async f=>{xe(cs,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(a,(f=>(xe(cs,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new is;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(i){const a=sm(i,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function cf(r,e){r.asyncQueue.verifyOperationInProgress(),xe(cs,"Initializing OfflineComponentProvider");const i=r.configuration;await e.initialize(i);let a=i.initialUser;r.setCredentialChangeListener((async l=>{a.isEqual(l)||(await D_(e.localStore,l),a=l)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function nv(r,e){r.asyncQueue.verifyOperationInProgress();const i=await A2(r);xe(cs,"Initializing OnlineComponentProvider"),await e.initialize(i,r.configuration),r.setCredentialChangeListener((a=>$0(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,l)=>$0(e.remoteStore,l))),r._onlineComponents=e}async function A2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){xe(cs,"Using user provided OfflineComponentProvider");try{await cf(r,r._uninitializedComponentsProvider._offline)}catch(e){const i=e;if(!(function(l){return l.name==="FirebaseError"?l.code===ee.FAILED_PRECONDITION||l.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||l.code===22||l.code===20||l.code===11})(i))throw i;Ja("Error using user provided cache. Falling back to memory cache: "+i),await cf(r,new Oc)}}else xe(cs,"Using default OfflineComponentProvider"),await cf(r,new E2(void 0));return r._offlineComponents}async function Y_(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(xe(cs,"Using user provided OnlineComponentProvider"),await nv(r,r._uninitializedComponentsProvider._online)):(xe(cs,"Using default OnlineComponentProvider"),await nv(r,new Mf))),r._onlineComponents}function S2(r){return Y_(r).then((e=>e.syncEngine))}async function w2(r){const e=await Y_(r),i=e.eventManager;return i.onListen=l2.bind(null,e.syncEngine),i.onUnlisten=d2.bind(null,e.syncEngine),i.onFirstRemoteStoreListen=u2.bind(null,e.syncEngine),i.onLastRemoteStoreUnlisten=h2.bind(null,e.syncEngine),i}function C2(r,e,i={}){const a=new is;return r.asyncQueue.enqueueAndForget((async()=>(function(d,f,y,b,_){const x=new T2({next:N=>{x.Nu(),f.enqueueAndForget((()=>e2(d,A))),N.fromCache&&b.source==="server"?_.reject(new be(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(N)},error:N=>_.reject(N)}),A=new i2(y,x,{includeMetadataChanges:!0,qa:!0});return JS(d,A)})(await w2(r),r.asyncQueue,e,i,a))),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iv=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="firestore.googleapis.com",rv=!0;class sv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=X_,this.ssl=rv}else this.host=e.host,this.ssl=e.ssl??rv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=C_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<tS)throw new be(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=K_(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new be(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new be(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new be(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,l){return a.timeoutSeconds===l.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wc{constructor(e,i,a,l){this._authCredentials=e,this._appCheckCredentials=i,this._databaseId=a,this._app=l,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new Cx;switch(a.type){case"firstParty":return new Ix(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new be(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(i){const a=iv.get(i);a&&(xe("ComponentProvider","Removing Datastore"),iv.delete(i),a.terminate())})(this),Promise.resolve()}}function R2(r,e,i,a={}){var _;r=Ac(r,Wc);const l=kf(e),d=r._getSettings(),f={...d,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${i}`;l&&(eT(`https://${y}`),rT("Firestore",!0)),d.host!==X_&&d.host!==y&&Ja("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const b={...d,host:y,ssl:l,emulatorOptions:a};if(!Ec(b,f)&&(r._setSettings(b),a.mockUserToken)){let x,A;if(typeof a.mockUserToken=="string")x=a.mockUserToken,A=mn.MOCK_USER;else{x=tT(a.mockUserToken,(_=r._app)==null?void 0:_.options.projectId);const N=a.mockUserToken.sub||a.mockUserToken.user_id;if(!N)throw new be(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new mn(N)}r._authCredentials=new Rx(new kv(x,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,i,a){this.converter=i,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class en{constructor(e,i,a){this.converter=i,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new en(this.firestore,e,this._key)}toJSON(){return{type:en._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,i,a){if(Il(i,en._jsonSchema))return new en(e,a||null,new Ie(_t.fromString(i.referencePath)))}}en._jsonSchemaVersion="firestore/documentReference/1.0",en._jsonSchema={type:Ft("string",en._jsonSchemaVersion),referencePath:Ft("string")};class rs extends hs{constructor(e,i,a){super(e,i,n_(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new en(this.firestore,null,new Ie(e))}withConverter(e){return new rs(this.firestore,e,this._path)}}function jc(r,e,...i){if(r=Za(r),Lv("collection","path",e),r instanceof Wc){const a=_t.fromString(e,...i);return v0(a),new rs(r,null,a)}{if(!(r instanceof en||r instanceof rs))throw new be(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(_t.fromString(e,...i));return v0(a),new rs(r.firestore,null,a)}}function D2(r,e,...i){if(r=Za(r),arguments.length===1&&(e=Bf.newId()),Lv("doc","path",e),r instanceof Wc){const a=_t.fromString(e,...i);return y0(a),new en(r,null,new Ie(a))}{if(!(r instanceof en||r instanceof rs))throw new be(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(_t.fromString(e,...i));return y0(a),new en(r.firestore,r instanceof rs?r.converter:null,new Ie(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const av="AsyncQueue";class ov{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new I_(this,"async_queue_retry"),this._c=()=>{const a=uf();a&&xe(av,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const i=uf();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const i=uf();i&&typeof i.removeEventListener=="function"&&i.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const i=new is;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(i.resolve,i.reject),i.promise))).then((()=>i.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!lo(e))throw e;xe(av,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const i=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",lv(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=i,i}enqueueAfterDelay(e,i,a){this.uc(),this.oc.indexOf(e)>-1&&(i=0);const l=rm.createAndSchedule(this,e,i,a,(d=>this.hc(d)));return this.tc.push(l),l}uc(){this.nc&&Oe(47125,{Pc:lv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const i of this.tc)if(i.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((i,a)=>i.targetTimeMs-a.targetTimeMs));for(const i of this.tc)if(i.skipDelay(),e!=="all"&&i.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const i=this.tc.indexOf(e);this.tc.splice(i,1)}}function lv(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class um extends Wc{constructor(e,i,a,l){super(e,i,a,l),this.type="firestore",this._queue=new ov,this._persistenceKey=(l==null?void 0:l.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ov(e),this._firestoreClient=void 0,await e}}}function N2(r,e){const i=typeof r=="object"?r:mx(),a=typeof r=="string"?r:wc,l=ux(i,"firestore").getImmediate({identifier:a});if(!l._initialized){const d=ZE("firestore");d&&R2(l,...d)}return l}function $_(r){if(r._terminated)throw new be(ee.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||I2(r),r._firestoreClient}function I2(r){var a,l,d;const e=r._freezeSettings(),i=(function(y,b,_,x){return new Xx(y,b,_,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,K_(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)})(r._databaseId,((a=r._app)==null?void 0:a.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((d=e.localCache)!=null&&d._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new x2(r._authCredentials,r._appCheckCredentials,r._queue,i,r._componentsProvider&&(function(y){const b=y==null?void 0:y._online.build();return{_offline:y==null?void 0:y._offline.build(b),_online:b}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new si(dn.fromBase64String(e))}catch(i){throw new be(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+i)}}static fromUint8Array(e){return new si(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:si._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Il(e,si._jsonSchema))return si.fromBase64String(e.bytes)}}si._jsonSchemaVersion="firestore/bytes/1.0",si._jsonSchema={type:Ft("string",si._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(...e){for(let i=0;i<e.length;++i)if(e[i].length===0)throw new be(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,i){if(!isFinite(e)||e<-90||e>90)throw new be(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(i)||i<-180||i>180)throw new be(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+i);this._lat=e,this._long=i}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Gi._jsonSchemaVersion}}static fromJSON(e){if(Il(e,Gi._jsonSchema))return new Gi(e.latitude,e.longitude)}}Gi._jsonSchemaVersion="firestore/geoPoint/1.0",Gi._jsonSchema={type:Ft("string",Gi._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this._values=(e||[]).map((i=>i))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,l){if(a.length!==l.length)return!1;for(let d=0;d<a.length;++d)if(a[d]!==l[d])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Hi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Il(e,Hi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((i=>typeof i=="number")))return new Hi(e.vectorValues);throw new be(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Hi._jsonSchemaVersion="firestore/vectorValue/1.0",Hi._jsonSchema={type:Ft("string",Hi._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=/^__.*__$/;class V2{constructor(e,i,a){this.data=e,this.fieldMask=i,this.fieldTransforms=a}toMutation(e,i){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,i,this.fieldTransforms):new Ml(e,this.data,i,this.fieldTransforms)}}function W_(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{Ac:r})}}class hm{constructor(e,i,a,l,d,f){this.settings=e,this.databaseId=i,this.serializer=a,this.ignoreUndefinedProperties=l,d===void 0&&this.Rc(),this.fieldTransforms=d||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var l;const i=(l=this.path)==null?void 0:l.child(e),a=this.Vc({path:i,fc:!1});return a.gc(e),a}yc(e){var l;const i=(l=this.path)==null?void 0:l.child(e),a=this.Vc({path:i,fc:!1});return a.Rc(),a}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((i=>e.isPrefixOf(i)))!==void 0||this.fieldTransforms.find((i=>e.isPrefixOf(i.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(W_(this.Ac)&&M2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class O2{constructor(e,i,a){this.databaseId=e,this.ignoreUndefinedProperties=i,this.serializer=a||Kc(e)}Cc(e,i,a,l=!1){return new hm({Ac:e,methodName:i,Dc:a,path:cn.emptyPath(),fc:!1,bc:l},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Z_(r){const e=r._freezeSettings(),i=Kc(r._databaseId);return new O2(r._databaseId,!!e.ignoreUndefinedProperties,i)}function j2(r,e,i,a,l,d={}){const f=r.Cc(d.merge||d.mergeFields?2:0,e,i,l);t1("Data must be an object, but it was:",f,a);const y=J_(a,f);let b,_;if(d.merge)b=new pi(f.fieldMask),_=f.fieldTransforms;else if(d.mergeFields){const x=[];for(const A of d.mergeFields){const N=k2(e,A,i);if(!f.contains(N))throw new be(ee.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);U2(x,N)||x.push(N)}b=new pi(x),_=f.fieldTransforms.filter((A=>b.covers(A.field)))}else b=null,_=f.fieldTransforms;return new V2(new ri(y),b,_)}class fm extends dm{_toFieldTransform(e){return new EA(e.path,new Rl)}isEqual(e){return e instanceof fm}}function z2(r,e,i,a=!1){return mm(i,r.Cc(a?4:3,e))}function mm(r,e){if(e1(r=Za(r)))return t1("Unsupported field value:",e,r),J_(r,e);if(r instanceof dm)return(function(a,l){if(!W_(l.Ac))throw l.Sc(`${a._methodName}() can only be used with update() and set()`);if(!l.path)throw l.Sc(`${a._methodName}() is not currently supported inside arrays`);const d=a._toFieldTransform(l);d&&l.fieldTransforms.push(d)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(a,l){const d=[];let f=0;for(const y of a){let b=mm(y,l.wc(f));b==null&&(b={nullValue:"NULL_VALUE"}),d.push(b),f++}return{arrayValue:{values:d}}})(r,e)}return(function(a,l){if((a=Za(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return vA(l.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const d=Tt.fromDate(a);return{timestampValue:Ic(l.serializer,d)}}if(a instanceof Tt){const d=new Tt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Ic(l.serializer,d)}}if(a instanceof Gi)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof si)return{bytesValue:b_(l.serializer,a._byteString)};if(a instanceof en){const d=l.databaseId,f=a.firestore._databaseId;if(!f.isEqual(d))throw l.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Xf(a.firestore._databaseId||l.databaseId,a._key.path)}}if(a instanceof Hi)return(function(f,y){return{mapValue:{fields:{[Yv]:{stringValue:Kv},[Cc]:{arrayValue:{values:f.toArray().map((_=>{if(typeof _!="number")throw y.Sc("VectorValues must only contain numeric values.");return Qf(y.serializer,_)}))}}}}}})(a,l);throw l.Sc(`Unsupported field value: ${Uc(a)}`)})(r,e)}function J_(r,e){const i={};return Pv(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$s(r,((a,l)=>{const d=mm(l,e.mc(a));d!=null&&(i[a]=d)})),{mapValue:{fields:i}}}function e1(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Tt||r instanceof Gi||r instanceof si||r instanceof en||r instanceof dm||r instanceof Hi)}function t1(r,e,i){if(!e1(i)||!Uv(i)){const a=Uc(i);throw a==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+a)}}function k2(r,e,i){if((e=Za(e))instanceof cm)return e._internalPath;if(typeof e=="string")return n1(r,e);throw zc("Field path arguments must be of type string or ",r,!1,void 0,i)}const L2=new RegExp("[~\\*/\\[\\]]");function n1(r,e,i){if(e.search(L2)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,i);try{return new cm(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,i)}}function zc(r,e,i,a,l){const d=a&&!a.isEmpty(),f=l!==void 0;let y=`Function ${e}() called with invalid data`;i&&(y+=" (via `toFirestore()`)"),y+=". ";let b="";return(d||f)&&(b+=" (found",d&&(b+=` in field ${a}`),f&&(b+=` in document ${l}`),b+=")"),new be(ee.INVALID_ARGUMENT,y+r+b)}function U2(r,e){return r.some((i=>i.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e,i,a,l,d){this._firestore=e,this._userDataWriter=i,this._key=a,this._document=l,this._converter=d}get id(){return this._key.path.lastSegment()}get ref(){return new en(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const i=this._document.data.field(gm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i)}}}class B2 extends i1{data(){return super.data()}}function gm(r,e){return typeof e=="string"?n1(r,e):e instanceof cm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new be(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class ym extends pm{}function r1(r,e,...i){let a=[];e instanceof pm&&a.push(e),a=a.concat(i),(function(d){const f=d.filter((b=>b instanceof _m)).length,y=d.filter((b=>b instanceof vm)).length;if(f>1||f>0&&y>0)throw new be(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const l of a)r=l._apply(r);return r}class vm extends ym{constructor(e,i,a){super(),this._field=e,this._op=i,this._value=a,this.type="where"}static _create(e,i,a){return new vm(e,i,a)}_apply(e){const i=this._parse(e);return o1(e._query,i),new hs(e.firestore,e.converter,xf(e._query,i))}_parse(e){const i=Z_(e.firestore);return(function(d,f,y,b,_,x,A){let N;if(_.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new be(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){cv(A,x);const ne=[];for(const re of A)ne.push(uv(b,d,re));N={arrayValue:{values:ne}}}else N=uv(b,d,A)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||cv(A,x),N=z2(y,f,A,x==="in"||x==="not-in");return Ht.create(_,x,N)})(e._query,"where",i,e.firestore._databaseId,this._field,this._op,this._value)}}class _m extends pm{constructor(e,i){super(),this.type=e,this._queryConstraints=i}static _create(e,i){return new _m(e,i)}_parse(e){const i=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return i.length===1?i[0]:yi.create(i,this._getOperator())}_apply(e){const i=this._parse(e);return i.getFilters().length===0?e:((function(l,d){let f=l;const y=d.getFlattenedFilters();for(const b of y)o1(f,b),f=xf(f,b)})(e._query,i),new hs(e.firestore,e.converter,xf(e._query,i)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class bm extends ym{constructor(e,i){super(),this._field=e,this._direction=i,this.type="orderBy"}static _create(e,i){return new bm(e,i)}_apply(e){const i=(function(l,d,f){if(l.startAt!==null)throw new be(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(l.endAt!==null)throw new be(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cl(d,f)})(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,(function(l,d){const f=l.explicitOrderBy.concat([d]);return new uo(l.path,l.collectionGroup,f,l.filters.slice(),l.limit,l.limitType,l.startAt,l.endAt)})(e._query,i))}}function s1(r,e="asc"){const i=e,a=gm("orderBy",r);return bm._create(a,i)}class Em extends ym{constructor(e,i,a){super(),this.type=e,this._limit=i,this._limitType=a}static _create(e,i,a){return new Em(e,i,a)}_apply(e){return new hs(e.firestore,e.converter,Dc(e._query,this._limit,this._limitType))}}function a1(r){return Lx("limit",r),Em._create("limit",r,"F")}function uv(r,e,i){if(typeof(i=Za(i))=="string"){if(i==="")throw new be(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!i_(e)&&i.indexOf("/")!==-1)throw new be(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${i}' contains a '/' character.`);const a=e.path.child(_t.fromString(i));if(!Ie.isDocumentKey(a))throw new be(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return w0(r,new Ie(a))}if(i instanceof en)return w0(r,i._key);throw new be(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(i)}.`)}function cv(r,e){if(!Array.isArray(r)||r.length===0)throw new be(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o1(r,e){const i=(function(l,d){for(const f of l)for(const y of f.getFlattenedFilters())if(d.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(l){switch(l){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(i!==null)throw i===e.op?new be(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${i.toString()}' filters.`)}class q2{convertValue(e,i="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,i);case 5:return e.stringValue;case 6:return this.convertBytes(os(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,i);case 11:return this.convertObject(e.mapValue,i);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,i){return this.convertObjectMap(e.fields,i)}convertObjectMap(e,i="none"){const a={};return $s(e,((l,d)=>{a[l]=this.convertValue(d,i)})),a}convertVectorValue(e){var a,l,d;const i=(d=(l=(a=e.fields)==null?void 0:a[Cc].arrayValue)==null?void 0:l.values)==null?void 0:d.map((f=>zt(f.doubleValue)));return new Hi(i)}convertGeoPoint(e){return new Gi(zt(e.latitude),zt(e.longitude))}convertArray(e,i){return(e.values||[]).map((a=>this.convertValue(a,i)))}convertServerTimestamp(e,i){switch(i){case"previous":const a=qc(e);return a==null?null:this.convertValue(a,i);case"estimate":return this.convertTimestamp(Al(e));default:return null}}convertTimestamp(e){const i=as(e);return new Tt(i.seconds,i.nanos)}convertDocumentKey(e,i){const a=_t.fromString(e);ct(w_(a),9688,{name:e});const l=new Sl(a.get(1),a.get(3)),d=new Ie(a.popFirst(5));return l.isEqual(i)||gr(`Document ${d} contains a document reference within a different database (${l.projectId}/${l.database}) which is not supported. It will be treated as a reference in the current database (${i.projectId}/${i.database}) instead.`),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G2(r,e,i){let a;return a=r?r.toFirestore(e):e,a}class uc{constructor(e,i){this.hasPendingWrites=e,this.fromCache=i}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $a extends i1{constructor(e,i,a,l,d,f){super(e,i,a,l,f),this._firestore=e,this._firestoreImpl=e,this.metadata=d}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const i=new gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(i,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,i={}){if(this._document){const a=this._document.data.field(gm("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,i.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,i={};return i.type=$a._jsonSchemaVersion,i.bundle="",i.bundleSource="DocumentSnapshot",i.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?i:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),i.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),i)}}$a._jsonSchemaVersion="firestore/documentSnapshot/1.0",$a._jsonSchema={type:Ft("string",$a._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class gc extends $a{data(e={}){return super.data(e)}}class Wa{constructor(e,i,a,l){this._firestore=e,this._userDataWriter=i,this._snapshot=l,this.metadata=new uc(l.hasPendingWrites,l.fromCache),this.query=a}get docs(){const e=[];return this.forEach((i=>e.push(i))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,i){this._snapshot.docs.forEach((a=>{e.call(i,new gc(this._firestore,this._userDataWriter,a.key,a,new uc(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const i=!!e.includeMetadataChanges;if(i&&this._snapshot.excludesMetadataChanges)throw new be(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===i||(this._cachedChanges=(function(l,d){if(l._snapshot.oldDocs.isEmpty()){let f=0;return l._snapshot.docChanges.map((y=>{const b=new gc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new uc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);return y.doc,{type:"added",doc:b,oldIndex:-1,newIndex:f++}}))}{let f=l._snapshot.oldDocs;return l._snapshot.docChanges.filter((y=>d||y.type!==3)).map((y=>{const b=new gc(l._firestore,l._userDataWriter,y.doc.key,y.doc,new uc(l._snapshot.mutatedKeys.has(y.doc.key),l._snapshot.fromCache),l.query.converter);let _=-1,x=-1;return y.type!==0&&(_=f.indexOf(y.doc.key),f=f.delete(y.doc.key)),y.type!==1&&(f=f.add(y.doc),x=f.indexOf(y.doc.key)),{type:H2(y.type),doc:b,oldIndex:_,newIndex:x}}))}})(this,i),this._cachedChangesIncludeMetadataChanges=i),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const i=[],a=[],l=[];return this.docs.forEach((d=>{d._document!==null&&(i.push(d._document),a.push(this._userDataWriter.convertObjectMap(d._document.data.value.mapValue.fields,"previous")),l.push(d.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H2(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:r})}}Wa._jsonSchemaVersion="firestore/querySnapshot/1.0",Wa._jsonSchema={type:Ft("string",Wa._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class F2 extends q2{constructor(e){super(),this.firestore=e}convertBytes(e){return new si(e)}convertReference(e){const i=this.convertDocumentKey(e,this.firestore._databaseId);return new en(this.firestore,null,i)}}function l1(r){r=Ac(r,hs);const e=Ac(r.firestore,um),i=$_(e),a=new F2(e);return P2(r._query),C2(i,r._query).then((l=>new Wa(e,a,r,l)))}function dv(r,e){const i=Ac(r.firestore,um),a=D2(r),l=G2(r.converter,e);return Q2(i,[j2(Z_(r.firestore),"addDoc",a._key,l,r.converter!==null,{}).toMutation(a._key,fr.exists(!1))]).then((()=>a))}function Q2(r,e){return(function(a,l){const d=new is;return a.asyncQueue.enqueueAndForget((async()=>f2(await S2(a),l,d))),d.promise})($_(r),e)}function hv(){return new fm("serverTimestamp")}(function(e,i=!0){(function(l){ao=l})(fx),xc(new El("firestore",((a,{instanceIdentifier:l,options:d})=>{const f=a.getProvider("app").getImmediate(),y=new um(new Dx(a.getProvider("auth-internal")),new Mx(f,a.getProvider("app-check-internal")),(function(_,x){if(!Object.prototype.hasOwnProperty.apply(_.options,["projectId"]))throw new be(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sl(_.options.projectId,x)})(f,l),f);return d={useFetchStreams:i,...d},y._setSettings(d),y}),"PUBLIC").setMultipleInstances(!0)),Ka(f0,m0,e),Ka(f0,m0,"esm2020")})();const Y2={apiKey:"AIzaSyA1Dw5M2Zk8bpTCjlU2Tuifvx0ZI3IeRv0",authDomain:"kingdomclicker-156dc.firebaseapp.com",projectId:"kingdomclicker-156dc",storageBucket:"kingdomclicker-156dc.firebasestorage.app",messagingSenderId:"496461589742",appId:"1:496461589742:web:e6413dfa2d1bbabd3ad7ff"},K2=Cv(Y2),kc=N2(K2);function X2(){return`#${Math.floor(Math.random()*99999).toString().padStart(5,"0")}`}function $2(){const r=new Date,e=r.getDay(),i=r.getDate()-e+(e===0?-6:1);return new Date(r.setDate(i))}async function W2(r){try{const e={...r,period:"alltime"},i={...r,period:"weekly"},a=await dv(jc(kc,"leaderboard_alltime"),{...e,gold:e.gold.toString(),renown:e.renown.toString(),timestamp:hv()}),l=await dv(jc(kc,"leaderboard_weekly"),{...i,gold:i.gold.toString(),renown:i.renown.toString(),timestamp:hv()});return{allTimeId:a.id,weeklyId:l.id}}catch(e){throw console.error("Error submitting to leaderboard:",e),e}}async function Z2(r=100){try{const e=r1(jc(kc,"leaderboard_alltime"),s1("gold","desc"),a1(r));return(await l1(e)).docs.map(a=>{const l=a.data();return{id:a.id,...l,gold:new Mn(l.gold),renown:new Mn(l.renown),timestamp:l.timestamp}})}catch(e){throw console.error("Error fetching all-time leaderboard:",e),e}}async function J2(r=100){try{const e=$2(),i=r1(jc(kc,"leaderboard_weekly"),s1("gold","desc"),a1(r));return(await l1(i)).docs.map(l=>{const d=l.data();return{id:l.id,...d,gold:new Mn(d.gold),renown:new Mn(d.renown),timestamp:d.timestamp}}).filter(l=>{var f,y;return(((y=(f=l.timestamp)==null?void 0:f.toDate)==null?void 0:y.call(f))||new Date(l.timestamp))>=e})}catch(e){throw console.error("Error fetching weekly leaderboard:",e),e}}const ew=({isOpen:r,onClose:e,onConfirm:i,gameState:a})=>{const[l,d]=_e.useState(""),[f,y]=_e.useState(!1);if(!r)return null;const b=async()=>{if(l.trim().length<3){alert("Ruler name must contain at least 3 characters!");return}if(l.trim().length>20){alert("Ruler name must not exceed 20 characters!");return}y(!0);try{const x={id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,rulerName:l.trim(),rulerId:X2(),lastLeaderboardView:0,lastLeaderboardSubmit:0,hasChosenName:!0};i(x),e()}catch(_){console.error("Error creating ruler profile:",_),alert("An error occurred while creating profile. Please try again.")}finally{y(!1)}};return p.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:p.jsxs("div",{style:{backgroundColor:"#fdf6e3",border:"4px solid #8d6e63",borderRadius:"8px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center",fontFamily:"Georgia, serif"},children:[p.jsx("h2",{style:{color:"#3e2723",marginBottom:"16px"},children:" Royal Coronation! "}),p.jsxs("p",{style:{color:"#5d4037",marginBottom:"24px",lineHeight:"1.5"},children:["Congratulations! Your kingdom has reached ",p.jsx("strong",{children:tw(a.gold)})," gold!",p.jsx("br",{}),"It's time to choose a name for your ruler and enter the history books!"]}),p.jsxs("div",{style:{marginBottom:"24px"},children:[p.jsx("label",{style:{display:"block",color:"#3e2723",marginBottom:"8px",fontWeight:"bold"},children:"Ruler Name:"}),p.jsx("input",{type:"text",value:l,onChange:_=>d(_.target.value),placeholder:"Enter your name...",maxLength:20,inputMode:"text",autoComplete:"off",autoCorrect:"off",spellCheck:"false",style:{width:"100%",padding:"12px",border:"2px solid #a1887f",borderRadius:"4px",fontSize:"16px",fontFamily:"Georgia, serif",backgroundColor:"#fff",color:"#3e2723"},onKeyPress:_=>_.key==="Enter"&&b()}),p.jsxs("div",{style:{fontSize:"12px",color:"#8d6e63",marginTop:"4px",textAlign:"left"},children:[l.length,"/20 characters"]})]}),p.jsx("div",{style:{backgroundColor:"#fff3e0",border:"2px solid #bf9000",borderRadius:"4px",padding:"12px",marginBottom:"24px"},children:p.jsx("p",{style:{color:"#bf9000",margin:0,fontSize:"14px",fontWeight:"bold"},children:" Important: You'll be able to join the leaderboard and compete with players from around the world!"})}),p.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[p.jsx("button",{type:"button",onClick:b,disabled:f||l.trim().length<3,style:{padding:"12px 24px",backgroundColor:f||l.trim().length<3?"#cccccc":"#2e7d32",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:f||l.trim().length<3?"not-allowed":"pointer",fontFamily:"Georgia, serif"},children:f?"Creating profile...":"Ascend the Throne"}),p.jsx("button",{type:"button",onClick:e,style:{padding:"12px 24px",backgroundColor:"#c62828",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",cursor:"pointer",fontFamily:"Georgia, serif",transition:"background-color 0.2s"},onMouseOver:_=>{_.currentTarget.style.backgroundColor="#d32f2f"},onMouseOut:_=>{_.currentTarget.style.backgroundColor="#c62828"},children:"Later"})]})]})})};function tw(r){return r.lt(1e3)?r.toFixed(0):r.lt(1e6)?r.toNumber().toLocaleString():r.toExponential(2)}const nw=({isOpen:r,onClose:e,playerProfile:i,onOpenRulerNameModal:a,gameState:l})=>{const[d,f]=_e.useState([]),[y,b]=_e.useState([]),[_,x]=_e.useState("alltime"),[A,N]=_e.useState(!1),[U,ne]=_e.useState(null),[re,F]=_e.useState(0),[pe,ie]=_e.useState(0),me=()=>{const w=localStorage.getItem("leaderboardCache");if(w){const{data:O,timestamp:V}=JSON.parse(w),z=Date.now(),D=3600*1e3;if(z-V<D)return O}return null},ve=w=>{const O={data:w,timestamp:Date.now()};localStorage.setItem("leaderboardCache",JSON.stringify(O)),ie(Date.now())};_e.useEffect(()=>{r&&Se()},[r]);const Se=()=>{const w=me();if(w){f(w.allTime),b(w.weekly),ie(JSON.parse(localStorage.getItem("leaderboardCache")).timestamp);return}Te()},Te=async()=>{N(!0),ne(null);try{const[w,O]=await Promise.all([Z2(50),J2(50)]);f(w),b(O),ve({allTime:w,weekly:O})}catch(w){console.error("Error loading leaderboard:",w),ne("Failed to load leaderboard. Please try again later.")}finally{N(!1)}},I=w=>{switch(w){case 1:return"";case 2:return"";case 3:return"";default:return`#${w}`}},R=_==="alltime"?d:y;return r?p.jsx("div",{className:"modal-overlay",children:p.jsxs("div",{className:"modal-content",style:{maxWidth:"800px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[p.jsx("h2",{children:" Leaderboard "}),p.jsx("button",{className:"btn",onClick:e,children:"Close"})]}),i?p.jsxs(p.Fragment,{children:[pe>0&&p.jsx("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"16px",textAlign:"center",fontSize:"12px"},children:p.jsxs("span",{style:{color:"var(--gold-color)"},children:[" Data updated ",Math.floor((Date.now()-pe)/6e4)," minutes ago"]})}),p.jsxs("div",{style:{display:"flex",marginBottom:"16px",borderBottom:"2px solid var(--border-color)"},children:[p.jsx("button",{onClick:()=>x("alltime"),className:_==="alltime"?"tab-btn active":"tab-btn",children:"All Time"}),p.jsx("button",{onClick:()=>x("weekly"),className:_==="weekly"?"tab-btn active":"tab-btn",children:"This Week"})]}),A?p.jsx("div",{style:{textAlign:"center",padding:"40px"},children:p.jsx("div",{style:{fontSize:"18px",color:"var(--text-secondary)"},children:"Loading leaderboard..."})}):U?p.jsx("div",{style:{backgroundColor:"rgba(198, 40, 40, 0.1)",border:"2px solid var(--danger-color)",borderRadius:"4px",padding:"20px",textAlign:"center"},children:p.jsx("p",{style:{color:"var(--danger-color)",margin:0},children:U})}):p.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"2px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--panel-bg)"},children:p.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[p.jsx("thead",{style:{backgroundColor:"var(--accent-color)",color:"white",position:"sticky",top:0},children:p.jsxs("tr",{children:[p.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Rank"}),p.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Ruler"}),p.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Gold"}),p.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Renown"}),p.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Buildings"})]})}),p.jsx("tbody",{children:R.map((w,O)=>p.jsxs("tr",{style:{backgroundColor:(i==null?void 0:i.rulerId)===w.rulerId?"rgba(191, 144, 0, 0.1)":O%2===0?"rgba(0, 0, 0, 0.02)":"transparent",borderBottom:"1px solid var(--border-color)"},children:[p.jsx("td",{style:{padding:"10px",fontWeight:"bold",color:"var(--text-color)"},children:I(O+1)}),p.jsx("td",{style:{padding:"10px",color:"var(--text-color)"},children:p.jsxs("div",{children:[p.jsx("strong",{children:w.rulerName}),p.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:w.rulerId})]})}),p.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--gold-color)",fontWeight:"bold"},children:fv(w.gold)}),p.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:fv(w.renown)}),p.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:w.buildings})]},w.id))})]})}),p.jsx("div",{style:{marginTop:"16px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:" Leaderboard updates automatically every hour. Data is cached for performance."})]}):p.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"20px",textAlign:"center"},children:[p.jsx("h3",{style:{color:"var(--gold-color)",margin:"0 0 10px 0"},children:" View Only Mode"}),p.jsxs("p",{style:{color:"var(--text-secondary)",margin:"0 0 15px 0",lineHeight:"1.5"},children:["You can view the leaderboard, but you need to choose a ruler name to participate in rankings.",p.jsx("br",{}),p.jsx("strong",{children:"Reach 10M gold to unlock ruler name selection."}),p.jsx("br",{}),p.jsx("small",{children:"Leaderboard data updates every hour for all players."})]}),a&&l&&l.gold&&l.gold.gte(1e7)&&p.jsx("button",{className:"btn",onClick:()=>{e(),a()},style:{backgroundColor:"var(--accent-color)",padding:"10px 20px",fontSize:"14px"},children:" Choose Ruler Name"})]})]})}):null};function fv(r){return r.lt(1e3)?r.toFixed(0):r.lt(1e6)?r.toNumber().toLocaleString():r.toExponential(2)}const Zr={density:"normal",fontSize:"medium",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,lastBuyAmount:m(1),layout:{left:m(1),center:m(1),right:m(1)},borderWidth:m(4),customColors:{enabled:!1,bg:"#e8dcc5",panel:"#fdf6e3",text:"#3e2723",secondaryText:"#5d4037",accent:"#8d6e63",accentHover:"#6d4c41",gold:"#bf9000",border:"#a1887f",success:"#2e7d32",danger:"#c62828"}},Gs={gold:m(0),totalGold:m(0),startTime:m(Date.now()),lastSaveTime:m(Date.now()),buildings:{},upgrades:[],achievements:[],renown:m(0),soldiers:m(0),eliteUnits:{},artifacts:[],advisors:[],advisorLevels:{},intermediateGoods:{},wonders:{},activeTradeRoutes:[],weather:{current:"clear",timeLeft:m(120)},activeDecrees:{},decreeCooldowns:{},conquest:{active:!1,crusadeId:null,startTime:m(0),soldiersSent:m(0)},event:null,theme:"default",numberFormat:"standard",idleModeEnabled:!0,interface:Zr,stats:{totalClicks:m(0),dragonsKilled:m(0),tavernGamesPlayed:m(0)},playerProfile:null},_l=r=>{if(r==null||typeof r=="string"||typeof r=="number"||typeof r=="boolean")return r;if(Array.isArray(r))return r.map(_l);if(typeof r=="object"&&r.toString&&typeof r.toString=="function"&&(r.hasOwnProperty("mantissa")||r.hasOwnProperty("exponent")))return r.toString();if(typeof r=="object"){const e={};for(const i in r)r.hasOwnProperty(i)&&(e[i]=_l(r[i]));return e}return r},iw=()=>{const[r,e]=_e.useState(()=>{var k,X,oe,ge,ce,le,Re;const P=localStorage.getItem("kingdom_save");if(P)try{const se=JSON.parse(P),Ue=se.interface||{},xt={...Zr,...Ue,lastBuyAmount:m(Ue.lastBuyAmount??1),layout:{left:m(((k=Ue.layout)==null?void 0:k.left)??Zr.layout.left),center:m(((X=Ue.layout)==null?void 0:X.center)??Zr.layout.center),right:m(((oe=Ue.layout)==null?void 0:oe.right)??Zr.layout.right)},borderWidth:m(Ue.borderWidth??Zr.borderWidth),customColors:{...Zr.customColors,...Ue.customColors||{}}};return{...Gs,...se,renown:m(se.renown||0),gold:m(se.gold||0),totalGold:m(se.totalGold||0),startTime:m(se.startTime||Date.now()),lastSaveTime:m(se.lastSaveTime||Date.now()),soldiers:m(se.soldiers||0),buildings:Object.keys(se.buildings||{}).reduce((De,Qe)=>(De[Qe]=m(se.buildings[Qe]),De),{}),stats:{...Gs.stats,...se.stats||{},totalClicks:m(((ge=se.stats)==null?void 0:ge.totalClicks)||0),dragonsKilled:m(((ce=se.stats)==null?void 0:ce.dragonsKilled)||0),tavernGamesPlayed:m(((le=se.stats)==null?void 0:le.tavernGamesPlayed)||0)},eliteUnits:Object.keys(se.eliteUnits||{}).reduce((De,Qe)=>(De[Qe]=m(se.eliteUnits[Qe]),De),{}),advisors:se.advisors||[],advisorLevels:Object.keys(se.advisorLevels||{}).reduce((De,Qe)=>(De[Qe]=m(se.advisorLevels[Qe]),De),{}),intermediateGoods:Object.keys(se.intermediateGoods||{}).reduce((De,Qe)=>{const ut=se.intermediateGoods[Qe];return De[Qe]={level:m(ut.level||0),lastClickTime:m(ut.lastClickTime||Date.now())},De},{}),wonders:Object.keys(se.wonders||{}).reduce((De,Qe)=>(De[Qe]=m(se.wonders[Qe]),De),{}),activeTradeRoutes:(se.activeTradeRoutes||[]).map(De=>({id:De.id,routeId:De.routeId,startTime:m(Number(De.startTime)||0),duration:m(Number(De.duration)||0),goldInvested:m(De.goldInvested||0),soldiersSent:m(De.soldiersSent||0),eliteSent:Object.keys(De.eliteSent||{}).reduce((Qe,ut)=>(Qe[ut]=m(De.eliteSent[ut]||0),Qe),{})})),weather:se.weather?{...se.weather,timeLeft:m(Number(se.weather.timeLeft)||120)}:Gs.weather,conquest:{...Gs.conquest,...se.conquest||{},startTime:m(Number((Re=se.conquest)==null?void 0:Re.startTime)||Date.now())},activeDecrees:Object.keys(se.activeDecrees||{}).reduce((De,Qe)=>(De[Qe]=m(se.activeDecrees[Qe]),De),{}),decreeCooldowns:Object.keys(se.decreeCooldowns||{}).reduce((De,Qe)=>(De[Qe]=m(se.decreeCooldowns[Qe]),De),{}),theme:se.theme||"default",numberFormat:se.numberFormat||"standard",idleModeEnabled:se.idleModeEnabled!==void 0?se.idleModeEnabled:!0,interface:xt,playerProfile:se.playerProfile?{...se.playerProfile,lastLeaderboardSubmit:se.playerProfile.lastLeaderboardSubmit||0}:null}}catch(se){console.error("Save load failed",se)}return Gs}),i=_e.useRef(r);_e.useEffect(()=>{i.current=r},[r]);const[a,l]=_e.useState(!1);_e.useEffect(()=>{let P;const k=()=>{l(!1),clearTimeout(P),r.idleModeEnabled&&(P=setTimeout(()=>{l(!0)},2e4))};k();const X=["mousemove","mousedown","keydown","touchstart","scroll"];return X.forEach(oe=>window.addEventListener(oe,k)),()=>{clearTimeout(P),X.forEach(oe=>window.removeEventListener(oe,k))}},[r.idleModeEnabled]),_e.useEffect(()=>{var ce;const P=document.documentElement,k=r.interface||Zr;if((ce=k.customColors)!=null&&ce.enabled){const le=k.customColors;P.style.setProperty("--bg-color",le.bg),P.style.setProperty("--panel-bg",le.panel),P.style.setProperty("--text-color",le.text),P.style.setProperty("--text-secondary",le.secondaryText||"#5d4037"),P.style.setProperty("--text-on-accent","#ffffff"),P.style.setProperty("--accent-color",le.accent),P.style.setProperty("--accent-hover",le.accentHover||le.accent),P.style.setProperty("--gold-color",le.gold||"#bf9000"),P.style.setProperty("--border-color",le.border),P.style.setProperty("--success-color",le.success||"#2e7d32"),P.style.setProperty("--danger-color",le.danger||"#c62828"),P.style.setProperty("--bg-image","none")}else{const le=r.theme||"default",Re=df[le]||df.default;Object.entries(Re.colors).forEach(([se,Ue])=>{P.style.setProperty(se,Ue)})}const X={small:"14px",medium:"16px",large:"18px"};P.style.setProperty("--base-font-size",X[k.fontSize]);const oe={compact:"8px",normal:"12px",spacious:"20px"},ge={compact:"6px",normal:"12px",spacious:"16px"};P.style.setProperty("--panel-padding",oe[k.density]),P.style.setProperty("--gap-size",ge[k.density]),P.style.setProperty("--custom-border-width",`${k.borderWidth}px`),P.style.setProperty("--col-left",String(k.layout.left)),P.style.setProperty("--col-center",String(k.layout.center)),P.style.setProperty("--col-right",String(k.layout.right)),k.reduceMotion?document.body.classList.add("no-motion"):document.body.classList.remove("no-motion")},[r.theme,r.interface]);const[d,f]=_e.useState(!1);_e.useEffect(()=>{var P;r.gold.gte(m(1e7))&&!((P=r.playerProfile)!=null&&P.hasChosenName)&&!d&&Y(!0)},[r.gold,r.playerProfile,d]);const[y,b]=_e.useState(null),[_,x]=_e.useState([]),[A,N]=_e.useState("buildings"),[U,ne]=_e.useState("army"),[re,F]=_e.useState(!1),[pe,ie]=_e.useState(!1),[me,ve]=_e.useState(!1),[Se,Te]=_e.useState(!1),[I,R]=_e.useState(!1),[w,O]=_e.useState(!1),[V,z]=_e.useState(!1),[D,He]=_e.useState(!1),[st,Y]=_e.useState(!1),[de,we]=_e.useState(!1),ue=(P,k="info")=>{const X=Date.now().toString()+Math.random();x(oe=>[...oe,{id:X,message:P,type:k}]),setTimeout(()=>{x(oe=>oe.filter(ge=>ge.id!==X))},3e3)};_e.useEffect(()=>{const P=k=>k.preventDefault();return document.addEventListener("contextmenu",P),()=>document.removeEventListener("contextmenu",P)},[]),_e.useEffect(()=>{var k;const P=Date.now();if(r.lastSaveTime&&m(P).minus(r.lastSaveTime).gt(m(6e4))){const X=m(P).minus(r.lastSaveTime).dividedBy(m(1e3)),oe=Fe(r),ge=(((k=r.wonders)==null?void 0:k.void_gate)||m(0)).gte(m(3)),ce=m(ge?1:.5),le=oe.times(X).times(ce).floor();le.gt(m(0))&&(ue(`While you were away, you earned ${ye(le,r.numberFormat)} gold! ${ge?"(100% Efficiency)":""}`,"success"),e(Re=>({...Re,gold:Re.gold.plus(le),totalGold:Re.totalGold.plus(le)})))}},[]),_e.useEffect(()=>{const P=setInterval(()=>{e(k=>{const X={...k,lastSaveTime:m(Date.now())},oe=_l(X);return localStorage.setItem("kingdom_save",JSON.stringify(oe)),X})},3e4);return()=>clearInterval(P)},[]),_e.useEffect(()=>{const P=()=>{const X=i.current,oe=_l(X);localStorage.setItem("kingdom_save",JSON.stringify(oe))};window.addEventListener("beforeunload",P);const k=()=>{document.visibilityState==="hidden"&&P()};return document.addEventListener("visibilitychange",k),()=>{window.removeEventListener("beforeunload",P),document.removeEventListener("visibilitychange",k)}},[]),_e.useRef(0),_e.useEffect(()=>{if(r.advisors.includes("treasurer")){const P=r.advisorLevels.treasurer||m(1),k=Math.max(1,5-P.toNumber()+1),X=setInterval(()=>{Ee(!0)},k*1e3);return()=>clearInterval(X)}},[r.advisors,r.advisorLevels]),_e.useEffect(()=>{const P=setInterval(()=>{if(!r.event){r.advisors.includes("alchemist");const k=r.advisorLevels.alchemist||m(1),X=.05,oe=Wr("alchemist",k),ge=X*oe.toNumber();if(Math.random()<ge){const ce=["dragon","merchant","jester"],le=ce[Math.floor(Math.random()*ce.length)],Re={id:Date.now().toString(),type:le,expiresAt:m(Date.now()).plus(m(le==="dragon"?1e4:3e4)),hp:le==="dragon"?m(10):void 0,maxHp:le==="dragon"?m(10):void 0,reward:m(0)};e(se=>({...se,event:Re}))}}},1e4);return()=>clearInterval(P)},[r.event,r.advisors,r.advisorLevels]);const Fe=P=>{var ge,ce;let k=m(0);const X=((ge=P.weather)==null?void 0:ge.current)||"clear";Ys.forEach(le=>{const Re=P.buildings[le.id]||m(0);let se=le.baseProduction;X==="sunny"?(le.id==="peasant"||le.id==="field")&&(se=se.times(m(1.2))):X==="rainy"?(le.id==="silver_mine"||le.id==="alchemist")&&(se=se.times(m(1.2))):X==="stormy"?(le.id==="blacksmith"&&(se=se.times(m(1.3))),le.id==="field"&&(se=se.times(m(.8)))):X==="windy"&&le.id==="market"&&(se=se.times(m(1.15))),k=k.plus(Re.times(se))});let oe=m(1);if(Bi.forEach(le=>{if(P.upgrades.includes(le.id)&&(le.type==="global"&&le.multiplier&&(oe=oe.times(le.multiplier)),le.type==="building"&&le.multiplier&&le.targetId)){const Re=Ys.find(se=>se.id===le.targetId);if(Re){const se=P.buildings[le.targetId]||m(0);k=k.plus(se.times(Re.baseProduction).times(le.multiplier.minus(m(1))))}}}),P.upgrades.includes("army_synergy")){const le=P.soldiers.dividedBy(m(1e3)).times(m(.01));oe=oe.times(m(1).plus(le))}if(P.upgrades.includes("achievement_synergy")){const le=m(P.achievements.length).times(m(.05));oe=oe.times(m(1).plus(le))}if(P.upgrades.includes("click_synergy")){const le=P.stats.totalClicks.times(m(1e-4));oe=oe.times(m(1).plus(le))}if(P.advisors.includes("cosmic_mage")){const le=P.advisorLevels.cosmic_mage||m(0),Re=P.advisors.includes("cosmic_mage")?Wr("cosmic_mage",le):m(0),se=m(1).plus(Re);oe=oe.times(se)}return(((ce=P.wonders)==null?void 0:ce.sky_citadel)||m(0)).gte(m(3))&&(oe=oe.times(m(100))),P.artifacts.forEach(le=>{const Re=Lc.find(se=>se.id===le);Re&&(oe=oe.times(Re.globalMultiplier))}),oe=oe.times(m(1).plus(P.renown.times(m(.1)))),(P.activeDecrees.royal_feast||m(0)).gt(m(Date.now()))&&(oe=oe.times(m(2))),k=k.times(oe),k},C=Fe(r),$=_e.useRef(C);$.current=C,_e.useEffect(()=>{const P=setInterval(()=>{e(k=>{const X=Date.now(),oe=$.current.times(m(ef)).dividedBy(m(1e3));let ge=k.totalGold.plus(oe),ce=k.gold.plus(oe),le={...k.weather};const Re=m(ef/1e3);if(le.timeLeft=le.timeLeft.minus(Re),le.timeLeft.lte(m(0))){const nt=["clear","sunny","rainy","stormy","windy"],Qt=nt[Math.floor(Math.random()*nt.length)],Xt=m(Math.floor(Math.random()*120)+60);le={current:Qt,timeLeft:Xt}}let se=k.event;se&&se.expiresAt&&m(se.expiresAt).lt(m(X))&&(se=null);let Ue={...k.intermediateGoods},xt=m(0);if(xt.gt(0)){const nt=yr(k),Qt=xt.times(nt);ce=ce.plus(Qt),ge=ge.plus(Qt)}let De={...k.conquest},Qe=[...k.artifacts],ut=k.soldiers;if(De.active&&De.crusadeId){const nt=vc.find(Qt=>Qt.id===De.crusadeId);if(nt){const Qt=r.advisorLevels.warmaster||m(0),Xt=r.advisors.includes("warmaster")?Wr("warmaster",Qt):m(0);let Vn=m(1).minus(Xt);const vs=Xt.times(m(2));k.weather.current==="windy"&&(Vn=Vn.times(m(.8)));const _i=m(nt.duration).times(m(Vn));if(m((X-m(De.startTime).toNumber())/1e3).gte(_i)){k.advisors.includes("warmaster");const bi=nt.baseRisk.minus(vs),Tn=Math.random();if(Tn<bi.toNumber()){const nn=(De.soldiersSent||nt.soldierCost).times(m(.5)).floor();ut=ut.plus(nn),ue(`Crusade Failed! Our army retreats. ${ye(nn,r.numberFormat)} soldiers returned.`,"error")}else if(Tn>.9){Qe.includes(nt.rewardArtifactId)||Qe.push(nt.rewardArtifactId);const nn=$.current.times(m(300));ce=ce.plus(nn),ue(`CRITICAL VICTORY! Found ${nt.name} Artifact and ${ye(nn.floor(),r.numberFormat)} Gold!`,"success")}else Qe.includes(nt.rewardArtifactId)?ue(`Victory! Crusade ${nt.name} complete (Artifact already owned).`,"info"):(Qe.push(nt.rewardArtifactId),ue(`Victory! Retrieved Artifact from ${nt.name}`,"success"));De={active:!1,crusadeId:null,startTime:m(0),soldiersSent:m(0)}}}}let pn=[...k.activeTradeRoutes||[]];pn.length,pn=pn.filter(nt=>{var Ki,bi;const Qt=_c.find(Tn=>Tn.id===nt.routeId);if(!Qt)return!1;const Xt=(((Ki=k.wonders)==null?void 0:Ki.great_pyramid)||m(0)).gte(3),Vn=Xt?.5:1,vs=m(nt.duration).times(m(Vn));if(m((X-m(nt.startTime).toNumber())/1e3).gte(vs)){const Tn=m(nt.soldiersSent).plus(m(((bi=nt.eliteSent)==null?void 0:bi.knight)||0).times(m(50))),nn=m(Math.max(100,m(nt.goldInvested).dividedBy(m(100)).toNumber())),na=m(Math.min(.9,Tn.dividedBy(nn).toNumber()));let vn=Qt.risk.times(m(1).minus(na));if(Xt&&(vn=vn.times(m(.5))),Math.random()>vn.toNumber()){const At=m(nt.goldInvested).times(Qt.rewardMultiplier);ce=ce.plus(At),ge=ge.plus(At),ue(`Caravan returned from ${Qt.name}! Profit: +${ye(At,k.numberFormat)} Gold`,"success")}else ue(`Caravan to ${Qt.name} was raided! Investment lost.`,"error");return!1}return!0});const En=[...k.achievements];let yn=null;return yc.forEach(nt=>{En.includes(nt.id)||nt.condition({...k,totalGold:ge,gold:ce},$.current)&&(En.push(nt.id),yn=nt)}),yn&&(b(yn),setTimeout(()=>b(null),3e3)),{...k,gold:ce,totalGold:ge,achievements:En,event:se,conquest:De,artifacts:Qe,soldiers:ut,activeTradeRoutes:pn,weather:le,intermediateGoods:Ue,advisorLevels:k.advisorLevels}})},ef);return()=>clearInterval(P)},[]);const fe=_e.useRef(r.artifacts);_e.useEffect(()=>{fe.current=r.artifacts},[r.artifacts]);const Ee=(P=!1)=>{let k=m(1);if(Bi.filter(X=>X.type==="click"&&i.current.upgrades.includes(X.id)).forEach(X=>{X.multiplier&&(k=k.times(X.multiplier))}),(i.current.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(k=k.times(m(5))),k=k.times(m(1).plus(i.current.renown.times(m(.1)))),i.current.godMode){const oe=Fe(i.current).times(m(6e3));k=k.plus(oe)}e(X=>({...X,gold:X.gold.plus(k),totalGold:X.totalGold.plus(k),stats:{...X.stats,totalClicks:P?X.stats.totalClicks:X.stats.totalClicks.plus(m(1))}}))},[Ve,je]=_e.useState(""),[Ge,Ct]=_e.useState(null),[lt,ai]=_e.useState(null);_e.useEffect(()=>{const P=k=>{if(k.key.length===1&&/[a-zA-Z]/.test(k.key)){k.preventDefault(),Ge||Ct(Date.now());const X=Ve+k.key.toLowerCase();if(je(X),console.log("Secret code input:",X),X==="godon"||X==="godoff"){const oe=Date.now(),ge=oe-(Ge||oe);console.log("Code matched:",X,"Time elapsed:",ge),ge<=7e3&&(X==="godon"?(ue(" GOD MODE ACTIVATED! Each click gives +6000 seconds of income!","success"),e(ce=>({...ce,...ce.godMode?{}:{godMode:!0}}))):X==="godoff"&&(ue(" GOD MODE DEACTIVATED! Normal clicks restored.","info"),e(ce=>{const le={...ce};return delete le.godMode,le}))),je(""),Ct(null),lt&&(clearTimeout(lt),ai(null))}}};return window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P),lt&&clearTimeout(lt)}},[Ve,Ge,lt]),_e.useEffect(()=>{if(Ge){const P=setTimeout(()=>{je(""),Ct(null),ai(null)},7e3);return ai(P),()=>{clearTimeout(P)}}},[Ge]);const yr=P=>{let k=m(1);if(Bi.filter(X=>X.type==="click"&&P.upgrades.includes(X.id)).forEach(X=>{X.multiplier&&(k=k.times(X.multiplier))}),(P.activeDecrees.call_to_arms||m(0)).gt(m(Date.now()))&&(k=k.times(m(5))),k=k.times(m(1).plus(P.renown.times(m(.1)))),P.godMode){const oe=Fe(P).times(m(6e3));k=k.plus(oe)}return k},vr=(P,k)=>{const X=Ys.find(se=>se.id===P);if(!X||k<=0)return;const oe=r.buildings[P]||m(0),ge=r.advisorLevels.guildmaster||m(0),ce=r.advisors.includes("guildmaster")?Wr("guildmaster",ge):m(0),le=m(1).minus(ce),Re=Ya(X.baseCost,oe,m(k)).times(le).floor();r.gold.gte(Re)&&e(se=>({...se,gold:se.gold.minus(Re),buildings:{...se.buildings,[P]:(se.buildings[P]||m(0)).plus(m(k))}}))},_r=P=>{const k=Bi.find(X=>X.id===P);k&&(r.upgrades.includes(P)||(k.currency==="renown"?r.renown.gte(k.cost)?(e(X=>({...X,renown:X.renown.minus(k.cost),upgrades:[...X.upgrades,P]})),ue(`Legacy Unlocked: ${k.name}`,"success")):ue(`Not enough Renown! Need ${ye(k.cost,r.numberFormat)}`,"error"):r.gold.gte(k.cost)&&e(X=>({...X,gold:X.gold.minus(k.cost),upgrades:[...X.upgrades,P]}))))},Gn=P=>{const k=ii.times(m(P));r.gold.gte(k)&&e(X=>({...X,gold:X.gold.minus(k),soldiers:X.soldiers.plus(k.dividedBy(ii))}))},fs=(P,k)=>{const X=pc.find(ce=>ce.id===P);if(!X)return;const oe=X.goldCost.times(m(k)),ge=X.soldierCost.times(m(k));r.gold.gte(oe)&&r.soldiers.gte(ge)&&(e(ce=>({...ce,gold:ce.gold.minus(oe),soldiers:ce.soldiers.minus(ge),eliteUnits:{...ce.eliteUnits,[P]:(ce.eliteUnits[P]||m(0)).plus(m(k))}})),ue(`Trained ${k} ${X.name}!`,"success"))},Qi=P=>{const k=yv.find(ge=>ge.id===P);if(!k)return;const X=r.advisors.includes(P),oe=r.advisorLevels[P]||m(0);if(!X)r.renown.gte(k.cost)?(e(ge=>({...ge,renown:ge.renown.minus(k.cost),advisors:[...ge.advisors,P],advisorLevels:{...ge.advisorLevels,[P]:m(1)}})),ue(`Hired ${k.name}!`,"success")):ue(`Not enough Renown! Need ${ye(k.cost,r.numberFormat)}`,"error");else{const ge=vv(k,oe);r.renown.gte(ge)?(e(ce=>({...ce,renown:ce.renown.minus(ge),advisorLevels:{...ce.advisorLevels,[P]:oe.plus(m(1))}})),ue(`Upgraded ${k.name} to Level ${oe.plus(m(1))}!`,"success")):ue(`Not enough Renown! Need ${ye(ge,r.numberFormat)}`,"error")}},ms=P=>{const k=pv.find(Ue=>Ue.id===P);if(!k)return;const X=Date.now(),oe=r.advisorLevels.chronomancer||m(0),ge=r.advisorLevels.time_keeper||m(0),ce=r.advisors.includes("chronomancer")?Wr("chronomancer",oe):m(0),le=r.advisors.includes("time_keeper")?Wr("time_keeper",ge):m(0),Re=ce.plus(le),se=k.cooldown.times(m(1).minus(Re));if(!(r.decreeCooldowns[P]||m(0)).gt(m(X))&&!(r.activeDecrees[P]||m(0)).gt(m(X))){if(k.unlockCondition&&!k.unlockCondition(r)){ue("Requirement not met!","error");return}k.effectType==="instant_gold"?(e(Ue=>({...Ue,gold:Ue.gold.plus($.current.times(k.value)),totalGold:Ue.totalGold.plus($.current.times(k.value)),decreeCooldowns:{...Ue.decreeCooldowns,[P]:m(X).plus(se.times(m(1e3)))}})),ue(`Decree Enacted: ${k.name}`,"success")):k.effectType==="add_soldiers"?(e(Ue=>({...Ue,soldiers:Ue.soldiers.plus(k.value),decreeCooldowns:{...Ue.decreeCooldowns,[P]:m(X).plus(se.times(m(1e3)))}})),ue(`Decree Enacted: Recruited ${k.value} Soldiers`,"success")):(e(Ue=>({...Ue,activeDecrees:{...Ue.activeDecrees,[P]:m(X).plus(k.duration.times(m(1e3)))},decreeCooldowns:{...Ue.decreeCooldowns,[P]:m(X).plus(k.duration.plus(k.cooldown).times(m(1e3)))}})),ue(`Decree Enacted: ${k.name}`,"success"))}},gs=P=>{if(P.type==="merchant"){const k=$.current.times(m(10));e(X=>({...X,gold:X.gold.plus(k),totalGold:X.totalGold.plus(k),event:null})),ue(`The merchant gifted you ${ye(k.floor(),r.numberFormat)} gold!`,"success")}else if(P.type==="jester"){const k=r.gold.times(m(.1)),X=Math.random()>.5;e(oe=>({...oe,gold:X?oe.gold.plus(k):oe.gold.minus(k),totalGold:X?oe.totalGold.plus(k):oe.totalGold,event:null})),X?ue(`Jester pays out! +${ye(k.floor(),r.numberFormat)}`,"success"):ue(`Jester tricked you! -${ye(k.floor(),r.numberFormat)}`,"warning")}else if(P.type==="dragon"){let k=!1;e(X=>{if(!X.event||X.event.type!=="dragon")return X;const oe=(X.event.hp||m(1)).minus(m(1));if(oe.lte(0)){const ge=$.current.times(m(30));return k=!0,{...X,gold:X.gold.plus(ge),totalGold:X.totalGold.plus(ge),event:null,stats:{...X.stats,dragonsKilled:X.stats.dragonsKilled.plus(m(1))}}}return{...X,event:{...X.event,hp:oe}}}),k&&ue("Dragon Slain! +Treasury Boost","success")}},Dt=(P,k,X,oe)=>{const ge=_c.find(se=>se.id===P);if(!ge)return;const ce=m(k),le=m(X);if(r.gold.lt(ce)){ue("Not enough gold!","error");return}if(r.soldiers.lt(le)){ue("Not enough soldiers!","error");return}let Re=!0;if(Object.entries(oe).forEach(([se,Ue])=>{(r.eliteUnits[se]||m(0)).lt(m(Ue))&&(Re=!1)}),!Re){ue("Not enough elite units!","error");return}e(se=>{const Ue={...se.eliteUnits};return Object.entries(oe).forEach(([xt,De])=>{Ue[xt]=(Ue[xt]||m(0)).minus(m(De))}),{...se,gold:se.gold.minus(ce),soldiers:se.soldiers.minus(le),eliteUnits:Ue,activeTradeRoutes:[...se.activeTradeRoutes||[],{id:Date.now().toString(),routeId:P,startTime:m(Date.now()),duration:m(ge.baseDuration),goldInvested:ce,soldiersSent:le,eliteSent:Object.fromEntries(Object.entries(oe).map(([xt,De])=>[xt,m(De)]))}]}}),ue("Caravan Dispatched!","success")},Mt=P=>{const k=_v.find(ce=>ce.id===P);if(!k)return;const X=r.wonders[P]||m(0);if(X.gte(m(k.stages.length)))return;const oe=k.stages[X].cost;let ge=!0;for(const ce of oe)if(ce.type==="gold"&&r.gold.lt(m(ce.amount))&&(ge=!1),ce.type==="soldiers"&&r.soldiers.lt(m(ce.amount))&&(ge=!1),ce.type==="renown"&&r.renown.lt(m(ce.amount))&&(ge=!1),["knight","paladin","void_sentinel"].includes(ce.type)){const le=ce.type;(r.eliteUnits[le]||m(0)).lt(m(ce.amount))&&(ge=!1)}if(!ge){ue("Resources insufficient for construction!","error");return}e(ce=>{let le=ce.gold,Re=ce.soldiers,se=ce.renown,Ue={...ce.eliteUnits};for(const xt of oe)if(xt.type==="gold"&&(le=le.minus(m(xt.amount))),xt.type==="soldiers"&&(Re=Re.minus(m(xt.amount))),xt.type==="renown"&&(se=se.minus(m(xt.amount))),["knight","paladin","void_sentinel"].includes(xt.type)){const De=xt.type;Ue[De]=(Ue[De]||m(0)).minus(m(xt.amount))}return{...ce,gold:le,soldiers:Re,renown:se,eliteUnits:Ue,wonders:{...ce.wonders,[P]:X.plus(m(1))}}}),ue("Wonder Stage Complete!","success")},vi=P=>{const k=vc.find(X=>X.id===P);if(k){if(k.requiredUnits){for(const[X,oe]of Object.entries(k.requiredUnits))if((r.eliteUnits[X]||m(0)).lt(oe)){ue("Missing elite units required for this mission.","error");return}}r.soldiers.gte(k.soldierCost)&&(e(X=>({...X,soldiers:X.soldiers.minus(k.soldierCost),conquest:{active:!0,crusadeId:P,startTime:m(Date.now()),soldiersSent:k.soldierCost}})),ue(`Crusade Started: ${k.name}`,"info"))}},ea=()=>{const P=r.advisorLevels.void_scholar||m(0),k=r.advisors.includes("void_scholar")?Wr("void_scholar",P):m(0),X=m(1).plus(k),oe=r.gold.dividedBy(m(1e9)).floor().times(X),ge=m(1e4).minus(r.renown).min(oe);ge.lte(0)||(e({...Gs,renown:r.renown.plus(ge),achievements:r.achievements,artifacts:r.artifacts,advisors:r.advisors,advisorLevels:r.advisorLevels,wonders:r.wonders,startTime:m(Date.now()),lastSaveTime:m(Date.now()),theme:r.theme,idleModeEnabled:r.idleModeEnabled,interface:r.interface}),ve(!1),ue("Abdication Successful. Long live the new King!","success"))},ta=()=>{localStorage.removeItem("kingdom_save"),e({...Gs,startTime:m(Date.now())}),Te(!1),ue("Game Reset","warning")},tn=()=>{const k=_l(r);localStorage.setItem("kingdom_save",JSON.stringify(k)),ue("Game Saved","info")},Yi=P=>{e(k=>({...k,playerProfile:P})),localStorage.setItem(`playerProfile_${P.id}`,JSON.stringify(P)),ue(`Welcome, ${P.rulerName} ${P.rulerId}!`,"success"),f(!1)},ps=async()=>{var oe;if(!((oe=r.playerProfile)!=null&&oe.hasChosenName)){ue("Choose your ruler name first!","warning");return}const P=Date.now(),k=r.playerProfile.lastLeaderboardSubmit||0,X=3600*1e3;if(k>0&&P-k<X){const ge=X-(P-k),ce=Math.floor(ge/(1e3*60)),le=Math.floor(ge%(1e3*60)/1e3);ue(`Please wait ${ce}:${le.toString().padStart(2,"0")} before submitting to leaderboard again.`,"warning");return}try{await W2({rulerName:r.playerProfile.rulerName,rulerId:r.playerProfile.rulerId,gold:r.gold,renown:r.renown,buildings:Object.keys(r.buildings).length,achievements:r.achievements.length,period:"alltime"});const ge={...r.playerProfile,lastLeaderboardSubmit:P};e(ce=>({...ce,playerProfile:ge})),localStorage.setItem(`playerProfile_${r.playerProfile.id}`,JSON.stringify(ge)),ue("Your achievements have been submitted to leaderboard!","success"),ea()}catch(ge){console.error("Error submitting to leaderboard:",ge),ue("Failed to submit to leaderboard, but prestige will continue.","warning"),ea()}},ys=P=>{e(k=>({...k,interface:{...k.interface,lastBuyAmount:P}}))},oi=P=>({flex:P==="left"?"var(--col-left)":"var(--col-right)",display:"flex",flexDirection:"column",borderRight:P==="left"?"var(--custom-border-width) double var(--border-color)":"none",borderLeft:P==="right"?"var(--custom-border-width) double var(--border-color)":"none",background:"var(--panel-bg)",minWidth:0,transition:"transform 0.8s ease-in-out",transform:a&&r.idleModeEnabled?P==="left"?"translateX(-120%)":"translateX(120%)":"translateX(0)",zIndex:10});return p.jsxs("div",{style:{display:"flex",height:"100vh",width:"100vw",backgroundColor:"var(--bg-color)",overflow:"hidden",position:"relative"},children:[p.jsx(UE,{toasts:_}),p.jsx(BE,{}),a&&r.idleModeEnabled&&p.jsx(PE,{gameState:r}),p.jsxs("div",{style:oi("left"),children:[p.jsxs("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:[p.jsx("button",{className:`tab-btn ${A==="buildings"?"active":""}`,onClick:()=>N("buildings"),children:"Estates"}),p.jsx("button",{className:`tab-btn ${A==="upgrades"?"active":""}`,onClick:()=>N("upgrades"),children:"Upgrades"}),p.jsx("button",{className:`tab-btn ${A==="decrees"?"active":""}`,onClick:()=>N("decrees"),children:"Decrees"})]}),p.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:[A==="buildings"&&p.jsx(AE,{gameState:r,onBuyBuilding:vr,onSetBuyAmount:ys}),A==="upgrades"&&p.jsx(xE,{gameState:r,onBuyUpgrade:_r}),A==="decrees"&&p.jsx(SE,{gameState:r,onActivateDecree:ms})]})]}),p.jsx("div",{style:{flex:"var(--col-center)",display:"flex",flexDirection:"column",position:"relative",borderRight:a&&r.idleModeEnabled?"none":"var(--custom-border-width) double var(--border-color)",minWidth:0,zIndex:5,transition:"border 0.8s"},children:p.jsx(CE,{gameState:r,gps:C,onClick:()=>Ee(!1),onEventInteract:gs,onOpenConquest:()=>{(r.buildings.castle||m(0)).gt(0)?F(!0):ue("You need a Castle to lead your army!","warning")},onOpenTavern:()=>ie(!0),onOpenPrestige:()=>ve(!0),onOpenSettings:()=>Te(!0),onOpenCouncil:()=>O(!0),onOpenStatistics:()=>z(!0),onOpenLeaderboard:()=>we(!0),onOpenEmpire:()=>{(r.buildings.castle||m(0)).gt(0)?He(!0):ue("You need a Castle to manage an Empire!","warning")},isIdle:a&&r.idleModeEnabled})}),p.jsxs("div",{style:oi("right"),children:[p.jsxs("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:[p.jsx("button",{className:`tab-btn ${U==="army"?"active":""}`,onClick:()=>ne("army"),children:"Army"}),p.jsx("button",{className:`tab-btn ${U==="achievements"?"active":""}`,onClick:()=>ne("achievements"),children:"Achievements"})]}),p.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:[U==="army"&&p.jsx(wE,{gameState:r,onTrainSoldier:Gn,onTrainElite:fs}),U==="achievements"&&p.jsx(RE,{gameState:r})]})]}),!(a&&r.idleModeEnabled)&&y&&p.jsxs("div",{className:"achievement-popup",children:[p.jsx("div",{style:{fontSize:"2rem"},children:y.icon}),p.jsxs("div",{children:[p.jsx("div",{style:{fontWeight:"bold",color:"var(--text-color)"},children:"Achievement Unlocked!"}),p.jsx("div",{style:{color:"var(--accent-color)"},children:y.name})]})]}),re&&p.jsx(DE,{gameState:r,onStartCrusade:vi,onClose:()=>F(!1)}),D&&p.jsx(zE,{gameState:r,onInvestTrade:Dt,onBuildWonder:Mt,onClose:()=>He(!1)}),pe&&p.jsx(NE,{gameState:r,onGamble:(P,k)=>{const X=m(P);e(oe=>({...oe,gold:k?oe.gold.plus(X):oe.gold.minus(X),stats:{...oe.stats,tavernGamesPlayed:oe.stats.tavernGamesPlayed.plus(m(1))}}))},onClose:()=>ie(!1)}),me&&p.jsx(IE,{gameState:r,onPrestige:ps,onClose:()=>ve(!1)}),Se&&p.jsx(ME,{gameState:r,onClose:()=>Te(!1),onHardReset:ta,onSave:tn,onOpenChangelog:()=>R(!0),onSetTheme:P=>e(k=>({...k,theme:P})),onSetNumberFormat:P=>e(k=>({...k,numberFormat:P})),onToggleIdleMode:()=>e(P=>({...P,idleModeEnabled:!P.idleModeEnabled})),onUpdateInterface:P=>e(k=>({...k,interface:{...k.interface,...P}}))}),V&&p.jsx(jE,{gameState:r,currentGps:C,onClose:()=>z(!1)}),I&&p.jsx(VE,{onClose:()=>R(!1)}),w&&p.jsx(OE,{gameState:r,onHireAdvisor:Qi,onClose:()=>O(!1)}),st&&p.jsx(ew,{isOpen:st,onClose:()=>{Y(!1),f(!0)},onConfirm:Yi,gameState:r}),de&&p.jsx(nw,{isOpen:de,onClose:()=>we(!1),playerProfile:r.playerProfile,gameState:r,onOpenRulerNameModal:()=>Y(!0)})]})},u1=document.getElementById("root");if(!u1)throw new Error("Could not find root element to mount to");const rw=$b.createRoot(u1);rw.render(p.jsx(mv.StrictMode,{children:p.jsx(iw,{})}));
