var L=Object.defineProperty,N=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var z=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var E=(e,t,r)=>t in e?L(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,R=(e,t)=>{for(var r in t||(t={}))$.call(t,r)&&E(e,r,t[r]);if(z)for(var r of z(t))F.call(t,r)&&E(e,r,t[r]);return e},_=(e,t)=>N(e,A(t));import{r as m,j as o}from"./vendor-react-CUeQczFW.js";import"./vendor-DdgGw12P.js";import{t as n,f as h,h as P,g as I,B as G,P as M}from"./core-BR814W9x.js";const J=({gameState:e,building:t,x:r,y:i,visible:s,onHide:l})=>{const a=m.useRef(null),[c,x]=m.useState({x:0,y:0});if(m.useEffect(()=>{if(!s||!a.current)return;const d=a.current.getBoundingClientRect();let u=r+15,b=i-d.height/2;const g=10;u+d.width>window.innerWidth-g&&(u=Math.max(g,r-d.width-15)),b<g&&(b=g),b+d.height>window.innerHeight-g&&(b=Math.max(g,window.innerHeight-d.height-g)),x({x:u,y:b})},[s,r,i]),!s||!t)return null;const p=e.buildings[t.id]||n(0);if(!(e.totalGold.gte(t.baseCost)||p.gt(n(0))))return o.jsxs("div",{ref:a,className:"advanced-tooltip",style:{position:"fixed",left:`${c.x}px`,top:`${c.y}px`,background:"var(--panel-bg)",color:"var(--text-color)",padding:"12px",borderRadius:"2px",border:"4px double var(--accent-color)",fontSize:"15px",lineHeight:"1.4",width:"240px",minWidth:"240px",zIndex:1e4,boxShadow:"var(--shadow)",pointerEvents:"none",transition:"all 0.15s ease"},onMouseLeave:l,children:[o.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"8px",color:"var(--accent-color)",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid var(--accent-color)",paddingBottom:"6px"},children:[o.jsx("span",{style:{fontSize:"20px"},children:"â“"}),o.jsx("span",{children:"???"})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05))",borderRadius:"6px",border:"1px solid rgba(33, 150, 243, 0.3)",marginBottom:"6px"},children:[o.jsx("span",{style:{color:"rgba(33, 150, 243, 0.9)",fontWeight:"bold",fontSize:"13px"},children:"Count"}),o.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???"})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.05))",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)",marginBottom:"6px"},children:[o.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold",fontSize:"13px"},children:"Production"}),o.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???/s"})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05))",borderRadius:"6px",border:"1px solid rgba(255, 152, 0, 0.3)"},children:[o.jsx("span",{style:{color:"#ff9800",fontWeight:"bold",fontSize:"13px"},children:"Income Share"}),o.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???%"})]})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(141, 110, 99, 0.05))",borderRadius:"6px",border:"1px solid var(--accent-color)",marginBottom:"6px"},children:[o.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"13px"},children:"Next Building"}),o.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"14px"},children:"??? gold"})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.05))",borderRadius:"6px",border:"1px solid rgba(156, 39, 176, 0.3)"},children:[o.jsx("span",{style:{color:"#9c27b0",fontWeight:"bold",fontSize:"13px"},children:"Each Produces"}),o.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:"???/s"})]})]}),o.jsx("div",{style:{padding:"6px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",borderTop:"1px solid var(--border-color)",fontSize:"11px",color:"var(--text-secondary)",fontStyle:"italic",textAlign:"center"},children:"???"})]});const j=e.buildings[t.id]||n(0),v=S(e,t),B=v.times(j),k=O(e),T=k.gt(0)?B.div(k).times(100):n(0),y=H(t.baseCost,j);return(y.gt(0)?v.div(y):n(0)).gt(0)?y.div(v):n(0),o.jsxs("div",{ref:a,className:"advanced-tooltip",style:{position:"fixed",left:`${c.x}px`,top:`${c.y}px`,background:"var(--panel-bg)",color:"var(--text-color)",padding:"12px",borderRadius:"2px",border:"4px double var(--accent-color)",fontSize:"15px",lineHeight:"1.4",width:"240px",minWidth:"240px",zIndex:1e4,boxShadow:"var(--shadow)",pointerEvents:"none",transition:"all 0.15s ease"},onMouseLeave:l,children:[o.jsxs("div",{style:{fontWeight:"bold",fontSize:"16px",marginBottom:"8px",color:"var(--accent-color)",display:"flex",alignItems:"center",gap:"8px",borderBottom:"1px solid var(--accent-color)",paddingBottom:"6px"},children:[o.jsx("span",{style:{fontSize:"20px"},children:t.icon}),o.jsx("span",{children:t.name})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(33, 150, 243, 0.1), rgba(33, 150, 243, 0.05))",borderRadius:"6px",border:"1px solid rgba(33, 150, 243, 0.3)",marginBottom:"6px"},children:[o.jsx("span",{style:{color:"rgba(33, 150, 243, 0.9)",fontWeight:"bold",fontSize:"13px"},children:"Count"}),o.jsx("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:h(j,e.numberFormat)})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.05))",borderRadius:"6px",border:"1px solid rgba(76, 175, 80, 0.3)",marginBottom:"6px"},children:[o.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold",fontSize:"13px"},children:"Production"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[h(B,e.numberFormat),"/s"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 152, 0, 0.05))",borderRadius:"6px",border:"1px solid rgba(255, 152, 0, 0.3)"},children:[o.jsx("span",{style:{color:"#ff9800",fontWeight:"bold",fontSize:"13px"},children:"Income Share"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[h(T,e.numberFormat),"%"]})]})]}),o.jsxs("div",{style:{marginBottom:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(141, 110, 99, 0.1), rgba(141, 110, 99, 0.05))",borderRadius:"6px",border:"1px solid var(--accent-color)",marginBottom:"6px"},children:[o.jsx("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"13px"},children:"Next Building"}),o.jsxs("span",{style:{color:"var(--accent-color)",fontWeight:"bold",fontSize:"14px"},children:[h(y,e.numberFormat)," gold"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"6px 10px",background:"linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.05))",borderRadius:"6px",border:"1px solid rgba(156, 39, 176, 0.3)"},children:[o.jsx("span",{style:{color:"#9c27b0",fontWeight:"bold",fontSize:"13px"},children:"Each Produces"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold",fontSize:"14px"},children:[h(v,e.numberFormat),"/s"]})]})]}),o.jsx("div",{style:{padding:"6px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",borderTop:"1px solid var(--border-color)",fontSize:"11px",color:"var(--text-secondary)",fontStyle:"italic",textAlign:"center"},children:t.description}),o.jsxs("div",{style:{padding:"6px",background:"rgba(0, 0, 0, 0.05)",borderRadius:"6px",borderTop:"1px solid var(--border-color)",marginTop:"8px"},children:[o.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"6px",color:"var(--text-secondary)",textAlign:"center"},children:"BONUS BREAKDOWN"}),e.achievements.length>0&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 193, 7, 0.05))",borderRadius:"4px",border:"1px solid rgba(255, 193, 7, 0.3)",marginBottom:"3px",fontSize:"11px"},children:[o.jsx("span",{style:{color:"#ffc107",fontWeight:"bold"},children:"ðŸ† Achievements"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold"},children:["+",e.achievements.length*2,"%"]})]}),w(e.totalRenownEarned).gt(n(1))&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"linear-gradient(135deg, rgba(156, 39, 176, 0.1), rgba(156, 39, 176, 0.05))",borderRadius:"4px",border:"1px solid rgba(156, 39, 176, 0.3)",marginBottom:"3px",fontSize:"11px"},children:[o.jsx("span",{style:{color:"#9c27b0",fontWeight:"bold"},children:"ðŸ‘‘ Prestige"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold"},children:["+",w(e.totalRenownEarned).minus(n(1)).times(n(100)).floor().toString(),"%"]})]}),(()=>{let f=0;e.nationalProjects&&Object.values(e.nationalProjects).forEach(u=>{f+=u.level||0});const d=f*M*100;return d>0?o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(76, 175, 80, 0.05))",borderRadius:"4px",border:"1px solid rgba(76, 175, 80, 0.3)",marginBottom:"3px",fontSize:"11px"},children:[o.jsx("span",{style:{color:"var(--success-color)",fontWeight:"bold"},children:"ðŸ—ï¸ Projects"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold"},children:["+",d.toFixed(0),"%"]})]}):null})(),P(e.totalGold)&&(()=>{const f=e.infiniteTowerLevel||0,d=I(f).minus(n(1)).times(n(100)).toNumber();return d>0?o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"linear-gradient(135deg, rgba(103, 58, 183, 0.1), rgba(103, 58, 183, 0.05))",borderRadius:"4px",border:"1px solid rgba(103, 58, 183, 0.3)",marginBottom:"3px",fontSize:"11px"},children:[o.jsx("span",{style:{color:"#673ab7",fontWeight:"bold"},children:"ðŸ—ï¸ Tower"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold"},children:["+",d.toFixed(0),"%"]})]}):null})(),e.globalIncomeMultiplier&&e.globalIncomeMultiplier>1&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 8px",background:"linear-gradient(135deg, rgba(233, 30, 99, 0.1), rgba(233, 30, 99, 0.05))",borderRadius:"4px",border:"1px solid rgba(233, 30, 99, 0.3)",marginBottom:"3px",fontSize:"11px"},children:[o.jsx("span",{style:{color:"#e91e63",fontWeight:"bold"},children:"ðŸ’ Blessing"}),o.jsxs("span",{style:{color:"var(--text-color)",fontWeight:"bold"},children:["+",((e.globalIncomeMultiplier-1)*100).toFixed(1),"%"]})]})]})]})};function S(e,t){var x;let r=t.baseProduction;const i=((x=e.weather)==null?void 0:x.current)||"clear";i==="sunny"&&(t.id==="peasant"||t.id==="field"||t.id==="stable"||t.id==="cathedral")?r=r.times(n(1.2)):i==="rainy"&&(t.id==="silver_mine"||t.id==="alchemist"||t.id==="market"||t.id==="tavern")?r=r.times(n(1.2)):i==="stormy"?((t.id==="blacksmith"||t.id==="void_portal")&&(r=r.times(n(1.3))),(t.id==="field"||t.id==="stable")&&(r=r.times(n(.8)))):i==="windy"&&(t.id==="market"||t.id==="castle"||t.id==="time_chamber")&&(r=r.times(n(1.15)));const s=w(e.totalRenownEarned);s.gt(n(1))&&(r=r.times(s));let l=0;e.nationalProjects&&Object.values(e.nationalProjects).forEach(p=>{l+=p.level||0});const a=1+l*M;r=r.times(n(a));const c=1+e.achievements.length*.02;if(r=r.times(n(c)),e.globalIncomeMultiplier&&(r=r.times(n(e.globalIncomeMultiplier))),P(e.totalGold)){const p=e.infiniteTowerLevel||0,W=I(p);r=r.times(W)}return r}function w(e){const t=e.toNumber();if(t<=0)return n(1);let r=n(1);if(t<=100)r=n(1+t*.02);else if(t<=1e3)r=n(3).plus(n(t-100).times(n(.01)));else if(t<=1e4)r=n(4).plus(n(t-1e3).times(n(.005)));else if(t<=1e5)r=n(4.5).plus(n(t-1e4).times(n(.001)));else{const i=n(5.5),s=n(t-1e5).times(n(1e-6)),l=n(5).times(Math.log10(t));r=i.plus(s).plus(l)}return r}function O(e){let t=n(0);return G.forEach(r=>{const i=e.buildings[r.id]||n(0);if(i.gt(0)){const s=S(e,r);t=t.plus(s.times(i))}}),t}function H(e,t){return e.times(n(1.15).pow(t)).floor()}const C={general:{bonus:"+2% income per achievement",flavor:"Every achievement brings glory to your kingdom."},buildings:{bonus:"+2% income per achievement",flavor:"Buildings are the foundation of your kingdom's economy."},clicks:{bonus:"+2% income per achievement",flavor:"Every click brings your kingdom closer to greatness."},gold:{bonus:"+2% income per achievement",flavor:"Wealth is power, and your treasury grows ever stronger."},renown:{bonus:"+2% income per achievement",flavor:"Legends are forged through sacrifice and rebirth."},dragons:{bonus:"+2% income per achievement",flavor:"Ancient dragons guard immense treasures and power."},tavern:{bonus:"+2% income per achievement",flavor:"Fortune favors the bold in games of chance."},tower:{bonus:"+2% income per achievement",flavor:"The Infinite Tower reaches beyond the bounds of reality."},dark_matter:{bonus:"+2% income per achievement",flavor:"Dark matter holds the secrets of the universe itself."},total_buildings:{bonus:"+2% income per achievement",flavor:"A vast kingdom requires countless structures to thrive."},progress:{bonus:"+2% income per achievement",flavor:"Progress is the mark of a true ruler."},secret:{bonus:"+2% income per achievement",flavor:"Hidden achievements await those who dare to explore."}};function U(e){return e.startsWith("build_")?"buildings":e.startsWith("clicks_")?"clicks":e.startsWith("gold_")?"gold":e.startsWith("renown_")?"renown":e.startsWith("dragons_")?"dragons":e.startsWith("tavern_")?"tavern":e.startsWith("tower_")?"tower":e.startsWith("dark_matter_")?"dark_matter":e.startsWith("total_builds")?"total_buildings":["speed_1m","speed_1b","prestige_master","cinematic_idle"].includes(e)?"progress":["click_master","idle_master","developer_wife_blessing"].includes(e)?"secret":"general"}function K(e,t,r=!1){if(r)return"ðŸ”’ Ð—Ð°ÐºÑ€Ñ‹Ñ‚Ð¾";const i=U(e.id),s=C[i]||C.general;if(!t)return"ðŸ”’ ???";let l=`ðŸ† ${e.name}
`;return l+=`${e.description}

`,e.requirement?l+=`ðŸ“‹ Requirement: ${e.requirement}
`:l+=`ðŸ“‹ Requirement: ${e.description}
`,l+=`ðŸ’Ž Bonus: ${s.bonus}
`,e.flavor?l+=`
ðŸ’­ ${e.flavor}`:l+=`
ðŸ’­ ${s.flavor}`,l}const Q=({toasts:e})=>o.jsx("div",{className:"toast-container",children:e.map(t=>o.jsxs("div",{className:`toast ${t.type}`,children:[t.type==="success"&&"âœ…",t.type==="warning"&&"âš ï¸",t.type==="info"&&"â„¹ï¸",t.type==="error"&&"âŒ",o.jsx("span",{children:t.message})]},t.id))}),Z=()=>{const[e,t]=m.useState(null);if(m.useEffect(()=>{const i=a=>{const x=a.target.closest("[data-tooltip]");if(x){const p=x.getAttribute("data-tooltip");p&&t({text:p,x:a.clientX,y:a.clientY})}else t(null)},s=a=>{e&&t(c=>c?_(R({},c),{x:a.clientX,y:a.clientY}):null)},l=()=>{t(null)};return document.addEventListener("mouseover",i),document.addEventListener("mousemove",s),document.addEventListener("mouseout",l),()=>{document.removeEventListener("mouseover",i),document.removeEventListener("mousemove",s),document.removeEventListener("mouseout",l)}},[e]),!e)return null;const r={left:e.x+15,top:e.y+15};return e.x+250>window.innerWidth&&(r.left=e.x-260),e.y+100>window.innerHeight&&(r.top=e.y-50),o.jsx("div",{className:"game-tooltip",style:r,children:e.text.split(`
`).map((i,s)=>o.jsx("div",{style:{marginBottom:s===e.text.split(`
`).length-1?0:"4px"},children:i},s))})};export{J as A,Z as G,Q as T,w as a,K as g};
