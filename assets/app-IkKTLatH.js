import{r as dt,g as ct}from"./vendor-B--z-fyW.js";import{T as fe}from"./types-DtGgvffh.js";import{g as de,A as ut,O as mt,C as xt}from"./ui-Bed58PKh.js";import{t as o,f as S,T as be,B as le,W as ht,A as _e,N as gt,g as He,M as ve,P as Ye,a as Je,b as Ve,c as je,d as we,e as Xe,h as Ce,i as Se,j as Ae,U as pt,S as De}from"./constants-DvQBoasu.js";import{i as ft,g as yt,d as Ie,s as ze,a as We,q as qe,c as Ke,o as Ze,l as Qe,b as et,e as oe}from"./game-Cwc6eCQa.js";import{I as bt,B as Fe,M as Oe,A as Ge}from"./components-DV6_csbq.js";var ye={exports:{}},me={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ue;function vt(){if(Ue)return me;Ue=1;var t=Symbol.for("react.transitional.element"),l=Symbol.for("react.fragment");function g(C,m,c){var b=null;if(c!==void 0&&(b=""+c),m.key!==void 0&&(b=""+m.key),"key"in m){c={};for(var v in m)v!=="key"&&(c[v]=m[v])}else c=m;return m=c.ref,{$$typeof:t,type:C,key:b,ref:m!==void 0?m:null,props:c}}return me.Fragment=l,me.jsx=g,me.jsxs=g,me}var $e;function jt(){return $e||($e=1,ye.exports=vt()),ye.exports}var e=jt(),x=dt();const wt=ct(x),Ct=({gameState:t,onGamble:l,onClose:g})=>{const[C,m]=x.useState("coin"),[c,b]=x.useState(10),[v,k]=x.useState(""),[j,G]=x.useState(null),a=()=>{if(t.gold.lt(o(c))){k("Not enough gold!");return}const E=Math.random()>.5;l(c,E),k(E?`Heads! You DOUBLED your money! (+${S(c,t.numberFormat)} Profit)`:`Tails... You lost ${S(c,t.numberFormat)} gold.`),G(null)},W=()=>{if(t.gold.lt(o(c))){k("Not enough gold!");return}const E=Math.floor(Math.random()*6)+1,T=Math.floor(Math.random()*6)+1,R=E+T;G(R);let L=0;if(R===7)k(`Rolled ${R}. A draw! Gold returned.`),l(0,!0);else if(R>7){R>=10?L=2:L=1.5;const O=Math.floor(c*L);l(O,!0),k(`Rolled ${R}! You won ${S(O,t.numberFormat)} gold!`)}else l(c,!1),k(`Rolled ${R}. You lost ${S(c,t.numberFormat)} gold.`)};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{minHeight:"450px"},children:[e.jsx("h2",{style:{borderBottom:"none"},children:"üç∫ The Rusty Tankard"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px",justifyContent:"center"},children:[e.jsx("button",{className:"btn ",style:{opacity:C==="coin"?1:.6},onClick:()=>m("coin"),children:"Coin Flip"}),e.jsx("button",{className:"btn ",style:{opacity:C==="dice"?1:.6},onClick:()=>m("dice"),children:"High Dice"})]}),e.jsxs("div",{style:{background:"var(--panel-bg)",padding:"20px",borderRadius:"8px",border:"var(--custom-border-width) solid var(--border-color)"},children:[C==="coin"?e.jsxs("div",{style:{textAlign:"left",background:"var(--bg-color)",padding:"10px",borderRadius:"4px",color:"var(--text-color)"},children:[e.jsx("strong",{children:"Rules:"}),e.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",color:"var(--text-color)"},children:[e.jsx("li",{children:"50% Chance to Win."}),e.jsxs("li",{children:["Win: ",e.jsx("strong",{children:"+100% Profit"})," (Doubles your money)."]}),e.jsx("li",{children:"Lose: Lost the bet."})]})]}):e.jsxs("div",{style:{textAlign:"left",background:"var(--bg-color)",padding:"10px",borderRadius:"4px",color:"var(--text-color)"},children:[e.jsx("strong",{children:"Dice Rules (Roll 2-12):"}),e.jsxs("ul",{style:{margin:"5px 0",paddingLeft:"20px",color:"var(--text-color)"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"7:"})," Draw (Bet returned)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"8-9:"})," Win +50% Profit (1.5x)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"10-12:"})," Win +100% Profit (2x)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"2-6:"})," Loss"]})]})]}),e.jsxs("div",{style:{margin:"20px 0",color:"var(--text-color)"},children:[e.jsx("label",{style:{color:"var(--text-color)"},children:"Bet Amount: "}),e.jsx("input",{type:"number",value:c,onChange:E=>b(Math.max(1,parseInt(E.target.value)||0)),style:{padding:"8px",width:"120px",fontSize:"1rem",border:"var(--custom-border-width) solid var(--border-color)",backgroundColor:"var(--panel-bg)",color:"var(--text-color)"}})]}),C==="dice"&&j!==null&&e.jsxs("div",{style:{fontSize:"3rem",margin:"10px",color:"var(--text-color)"},children:["üé≤ ",j]}),e.jsx("button",{className:"btn",style:{fontSize:"1.2rem",padding:"10px 30px"},onClick:C==="coin"?a:W,children:C==="coin"?"Flip Coin":"Roll Dice"}),v&&e.jsx("div",{style:{marginTop:"15px",fontWeight:"bold",fontSize:"1.1rem",color:v.includes("won")||v.includes("DOUBLED")||v.includes("draw")?"var(--success-color)":"var(--danger-color)"},children:v})]}),e.jsx("div",{style:{marginTop:"30px"},children:e.jsx("button",{className:"btn",onClick:g,children:"Leave Tavern"})})]})})},St=({gameState:t,onPrestige:l,onClose:g})=>{var O;const m=o(1e12),c=t.totalGold;let b=o(0),v=!1,k=m.minus(c);if(c.gte(m)){const N=c.dividedBy(m);b=o(Math.floor(Math.pow(N.toNumber(),.33))).times(1).minus(t.renown),b.lt(0)&&(b=o(0)),v=b.gt(0)}const j=t.renown.plus(b),G=m.times(Math.pow(Math.floor(j.dividedBy(1).toNumber()+1),1/.33)),a=G.minus(c),E=de(t.renown).minus(o(1)).times(o(100)),R=de(t.renown.plus(b)).minus(o(1)).times(o(100)),L=Object.values(t.nationalProjects||{}).some(N=>N.active);return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{border:"4px solid #673ab7"},children:[e.jsx("h2",{style:{color:"#673ab7"},children:"üëë Abdication"}),e.jsx("p",{children:"Are you ready to pass the crown to your heir?"}),!((O=t.playerProfile)!=null&&O.hasChosenName)&&e.jsxs("div",{style:{background:"rgba(255, 235, 59, 0.1)",border:"1px solid #ffc107",padding:"10px",borderRadius:"4px",marginBottom:"15px",fontSize:"0.9rem"},children:["üí° ",e.jsx("strong",{children:"Tip:"})," You can abdicate without choosing a ruler name. Choose a name only if you want to appear in the leaderboard."]}),e.jsxs("div",{style:{textAlign:"left",margin:"20px 0",background:"rgba(243, 229, 245, 0.5)",padding:"15px",borderRadius:"4px"},children:[e.jsx("div",{children:e.jsx("strong",{children:"You will lose:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"All Gold & Treasury"}),e.jsx("li",{children:"All Estates (Buildings)"}),e.jsx("li",{children:"Workforce (Laborers & Specialists)"}),e.jsx("li",{children:"Royal Scepter Levels"}),e.jsxs("li",{children:[e.jsx("strong",{children:"Unfinished National Projects"})," (Progress & Resources)"]})]}),e.jsx("div",{children:e.jsx("strong",{children:"You will keep:"})}),e.jsxs("ul",{children:[e.jsx("li",{children:"Achievements"}),e.jsxs("li",{children:["Current Renown (",S(t.renown,t.numberFormat),")"]}),e.jsx("li",{children:"Completed National Project Levels"}),e.jsx("li",{children:"Lifetime Stats & Leaderboard Rank"})]})]}),L&&e.jsx("div",{style:{marginBottom:"20px",padding:"10px",background:"rgba(255, 0, 0, 0.1)",border:"1px solid red",borderRadius:"4px",color:"#d32f2f",fontSize:"0.9rem",fontWeight:"bold",textAlign:"center"},children:"‚ö†Ô∏è WARNING: You have a National Project under construction! Abdication will cancel the construction. All progress and resources invested in the pending level will be lost."}),e.jsxs("div",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:[e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Current Renown: ",S(t.renown,t.numberFormat)]}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:["Total Gold Earned: ",S(c,t.numberFormat)]}),e.jsx("hr",{style:{margin:"15px 0",borderTop:"1px dashed #ccc",borderBottom:"none"}}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Current Bonus:"})," +",E.toNumber().toFixed(1),"%"]}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Renown Gain:"})," ",S(b,t.numberFormat)]}),e.jsxs("div",{style:{marginBottom:"5px",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[e.jsx("strong",{children:"Total After:"})," ",S(t.renown.plus(b),t.numberFormat)," (+",R.toNumber().toFixed(1),"% bonus)"]}),e.jsxs("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",marginTop:"10px",background:"rgba(0,0,0,0.05)",padding:"5px",borderRadius:"4px"},children:[e.jsxs("div",{children:["Next Renown at: ",e.jsx("strong",{children:S(G,t.numberFormat)})," Lifetime Gold"]}),e.jsxs("div",{style:{color:a.gt(0)?"#cc0000":"var(--success-color)",fontWeight:"bold"},children:["(Need ",S(a.gt(0)?a:o(0),t.numberFormat)," more)"]})]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx("button",{className:"btn",style:{background:"#666"},onClick:g,children:"Cancel"}),e.jsx("button",{className:"btn",style:{background:"#673ab7"},onClick:l,disabled:!v,children:v?"Abdicate":c.lt(m)?`Need ${S(k,t.numberFormat)} more Gold`:"Prestige Unavailable"})]})]})})},kt=({gameState:t,onClose:l,onHardReset:g,onSave:C,onOpenChangelog:m,onSetTheme:c,onSetNumberFormat:b,onToggleIdleMode:v,onUpdateInterface:k})=>{var Z,Q,te,ne;const[j,G]=wt.useState(!1),a=t.interface||{density:"normal",fontSize:"medium",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,crownAnimations:!0,layout:{left:o(1),center:o(1),right:o(1)},borderWidth:o(4),customColors:{enabled:!1,bg:"",panel:"",text:"",accent:"",border:"",secondaryText:"",accentHover:"",gold:"",success:"",danger:""}},W=(Z=a.layout.left)!=null&&Z.toNumber?a.layout.left.toNumber():Number(a.layout.left),E=(Q=a.layout.center)!=null&&Q.toNumber?a.layout.center.toNumber():Number(a.layout.center),T=(te=a.layout.right)!=null&&te.toNumber?a.layout.right.toNumber():Number(a.layout.right),R=(ne=a.borderWidth)!=null&&ne.toNumber?a.borderWidth.toNumber():Number(a.borderWidth),L=a.customColors||{},O=String(L.bg||""),N=String(L.panel||""),I=String(L.text||""),B=String(L.secondaryText||""),F=String(L.accent||""),J=String(L.accentHover||""),K=String(L.gold||""),X=String(L.border||""),V=String(L.success||""),_=String(L.danger||""),U=()=>{j?g():G(!0)},f=(u,z)=>{k({layout:{...a.layout,[u]:o(z)}})},h=(u,z)=>{k({customColors:{...a.customColors,[u]:z}})},D={display:"flex",gap:"5px",flexWrap:"wrap",justifyContent:"center"},A={marginBottom:"8px",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",background:"rgba(0,0,0,0.03)",borderRadius:"4px"},q={width:"100%",marginBottom:"5px"};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"‚öôÔ∏è Royal Settings"}),t.playerProfile&&e.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"20px",textAlign:"center"},children:[e.jsxs("div",{style:{color:"var(--gold-color)",fontSize:"16px",fontWeight:"bold"},children:["üëë Your Ruler: ",t.playerProfile.rulerName," ",t.playerProfile.rulerId]}),e.jsx("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"5px"},children:"Registered in Leaderboard System"})]}),e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",maxHeight:"60vh",overflowY:"auto",paddingRight:"5px"},children:[e.jsx("h3",{style:{marginBottom:"10px"},children:"Layout Configuration"}),e.jsxs("div",{style:{marginBottom:"15px",background:"rgba(0,0,0,0.03)",padding:"10px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Column Widths (Ratio)"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"0.8rem"},children:"Left"}),e.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:W,onChange:u=>f("left",parseFloat(u.target.value)),style:q}),e.jsx("span",{style:{fontSize:"0.8rem"},children:W})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"0.8rem"},children:"Center"}),e.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:E,onChange:u=>f("center",parseFloat(u.target.value)),style:q}),e.jsx("span",{style:{fontSize:"0.8rem"},children:E})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"auto 1fr auto",gap:"10px",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"0.8rem"},children:"Right"}),e.jsx("input",{type:"range",min:"1",max:"5",step:"0.5",value:T,onChange:u=>f("right",parseFloat(u.target.value)),style:q}),e.jsx("span",{style:{fontSize:"0.8rem"},children:T})]})]}),e.jsx("h3",{style:{marginBottom:"10px"},children:"Design Studio"}),e.jsxs("div",{style:A,children:[e.jsx("div",{children:e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Border Thickness"})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("input",{type:"range",min:"1",max:"10",value:R,onChange:u=>k({borderWidth:o(parseInt(u.target.value))})}),e.jsxs("span",{children:[R,"px"]})]})]}),e.jsxs("div",{style:A,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Enable Custom Colors"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Override theme colors."})]}),e.jsx("input",{type:"checkbox",checked:a.customColors.enabled,onChange:u=>h("enabled",u.target.checked),style:{transform:"scale(1.5)"}})]}),a.customColors.enabled&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"15px"},children:[e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Background",e.jsx("input",{type:"color",value:O,onChange:u=>h("bg",u.target.value),style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Panels",e.jsx("input",{type:"color",value:N,onChange:u=>h("panel",u.target.value),style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Borders",e.jsx("input",{type:"color",value:X,onChange:u=>h("border",u.target.value),style:{width:"100%"}})]}),e.jsx("div",{style:{gridColumn:"1 / -1",height:"1px",background:"#ccc",margin:"5px 0"}}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Primary Text",e.jsx("input",{type:"color",value:I,onChange:u=>h("text",u.target.value),style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Secondary Text",e.jsx("input",{type:"color",value:B,onChange:u=>h("secondaryText",u.target.value),style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Gold/Value",e.jsx("input",{type:"color",value:K,onChange:u=>h("gold",u.target.value),style:{width:"100%"}})]}),e.jsx("div",{style:{gridColumn:"1 / -1",height:"1px",background:"#ccc",margin:"5px 0"}}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Accent/Buttons",e.jsx("input",{type:"color",value:F,onChange:u=>h("accent",u.target.value),style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Button Hover",e.jsx("input",{type:"color",value:J,onChange:u=>h("accentHover",u.target.value),style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Success/Green",e.jsx("input",{type:"color",value:V,onChange:u=>h("success",u.target.value),style:{width:"100%"}})]}),e.jsxs("label",{style:{display:"flex",flexDirection:"column",fontSize:"0.8rem"},children:["Danger/Red",e.jsx("input",{type:"color",value:_,onChange:u=>h("danger",u.target.value),style:{width:"100%"}})]})]}),e.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),e.jsxs("div",{style:{marginBottom:"15px",opacity:a.customColors.enabled?.5:1,pointerEvents:a.customColors.enabled?"none":"auto"},children:[e.jsxs("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:["Preset Themes ",a.customColors.enabled&&"(Disabled)"]}),e.jsx("div",{style:D,children:Object.values(be).map(u=>e.jsx("button",{className:"btn",style:{background:t.theme===u.id?"var(--accent-color)":"var(--panel-bg)",color:t.theme===u.id?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",padding:"5px 10px"},onClick:()=>c(u.id),children:u.name},u.id))})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Font Size"}),e.jsx("div",{style:D,children:["small","medium","large"].map(u=>e.jsx("button",{className:"btn",style:{background:a.fontSize===u?"var(--accent-color)":"var(--panel-bg)",color:a.fontSize===u?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",textTransform:"capitalize"},onClick:()=>k({fontSize:u}),children:u},u))})]}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Layout Density"}),e.jsx("div",{style:D,children:["compact","normal","spacious"].map(u=>e.jsx("button",{className:"btn",style:{background:a.density===u?"var(--accent-color)":"var(--panel-bg)",color:a.density===u?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",textTransform:"capitalize"},onClick:()=>k({density:u}),children:u},u))})]}),e.jsx("div",{style:{borderTop:"1px dashed #ccc",margin:"15px 0"}}),e.jsxs("div",{style:A,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Cinematic Idle Mode"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show landscape when inactive."})]}),e.jsx("button",{className:"btn",style:{background:t.idleModeEnabled?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:v,children:t.idleModeEnabled?"ON":"OFF"})]}),e.jsxs("div",{style:A,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Click Text"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show floating numbers on click."})]}),e.jsx("button",{className:"btn",style:{background:a.showFloatingText?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>k({showFloatingText:!a.showFloatingText}),children:a.showFloatingText?"ON":"OFF"})]}),e.jsxs("div",{style:A,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Weather Widget"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show weather info in top left."})]}),e.jsx("button",{className:"btn",style:{background:a.showWeatherWidget?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>k({showWeatherWidget:!a.showWeatherWidget}),children:a.showWeatherWidget?"ON":"OFF"})]}),e.jsxs("div",{style:A,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Crown Animations"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Show crown effects and animations."})]}),e.jsx("button",{className:"btn",style:{background:a.crownAnimations?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>k({crownAnimations:!a.crownAnimations}),children:a.crownAnimations?"ON":"OFF"})]}),e.jsxs("div",{style:A,children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem"},children:"Reduce Motion"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)"},children:"Disable animations."})]}),e.jsx("button",{className:"btn",style:{background:a.reduceMotion?"var(--success-color)":"#9e9e9e",minWidth:"60px"},onClick:()=>k({reduceMotion:!a.reduceMotion}),children:a.reduceMotion?"ON":"OFF"})]}),e.jsxs("div",{style:{marginTop:"15px"},children:[e.jsx("div",{style:{fontSize:"0.9rem",marginBottom:"5px",fontWeight:"bold"},children:"Number Format"}),e.jsx("div",{style:D,children:["standard","scientific","plain"].map(u=>e.jsx("button",{className:"btn",style:{background:t.numberFormat===u?"var(--accent-color)":"var(--panel-bg)",color:t.numberFormat===u?"var(--text-on-accent)":"var(--text-color)",border:"1px solid var(--border-color)",fontSize:"0.8rem",flex:"1 1 auto",padding:"5px 10px",textTransform:"capitalize"},onClick:()=>b(u),children:u},u))})]})]}),e.jsxs("div",{style:{borderTop:"2px solid #ccc",paddingTop:"15px",marginTop:"15px"},children:[e.jsx("h3",{children:"System"}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[e.jsx("button",{className:"btn",onClick:C,children:"Force Save"}),e.jsx("button",{className:"btn",style:{background:"#0288d1"},onClick:m,children:"Update Logs"}),e.jsx("button",{className:"btn",style:{backgroundColor:j?"red":"#d32f2f"},onClick:U,children:j?"CONFIRM WIPE?":"Hard Reset"})]}),j&&e.jsx("div",{style:{color:"red",fontSize:"0.8rem",marginTop:"5px"},children:"Warning: This will delete all progress permanently!"})]}),e.jsx("button",{className:"btn",style:{marginTop:"20px",background:"#5d4037",width:"100%"},onClick:l,children:"Return to Game"}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)",marginTop:"10px"},children:"v2.3.0 - Kingdom Clicker"})]})})},Tt=({gameState:t,currentGps:l,onClose:g})=>{var O,N;const C=Object.values(t.buildings).reduce((I,B)=>I.plus(B),o(0)),m=t.achievements.length,c=_e.length;let b="None",v="None",k=-1,j=o(0);le.forEach((I,B)=>{const F=t.buildings[I.id]||o(0);F.gt(o(0))&&B>k&&(k=B,b=I.name),F.gt(j)&&(j=F,v=I.name)});const a=(()=>{let I=o(1);return I=I.times(de(t.renown)),I})(),[W,E]=x.useState("");x.useEffect(()=>{const I=()=>{const F=o(Date.now()).minus(t.startTime),J=F.dividedBy(o(1e3)),K=J.minus(J.dividedBy(o(60)).floor().times(o(60))).floor(),X=F.dividedBy(o(6e4)),V=X.minus(X.dividedBy(o(60)).floor().times(o(60))).floor(),_=F.dividedBy(o(36e5)),U=_.minus(_.dividedBy(o(24)).floor().times(o(24))).floor(),f=F.dividedBy(o(864e5)).floor();let h="";f.gt(o(0))&&(h+=`${f.toString()}d `),U.gt(o(0))&&(h+=`${U.toString()}h `),h+=`${V.toString()}m ${K.toString()}s`,E(h)};I();const B=setInterval(I,1e3);return()=>clearInterval(B)},[t.startTime]);const T={display:"flex",justifyContent:"space-between",padding:"8px 0",borderBottom:"1px dashed rgba(0,0,0,0.1)",fontSize:"0.9rem"},R={fontSize:"1rem",color:"var(--accent-color)",marginTop:"15px",borderBottom:"2px solid var(--border-color)",paddingBottom:"2px",marginBottom:"5px"},L=(O=t.weather)!=null&&O.current&&((N=ht[t.weather.current])==null?void 0:N.name)||"Unknown";return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"500px",maxHeight:"90vh",display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsx("h2",{style:{flexShrink:0},children:"üìä Royal Records"}),e.jsxs("div",{style:{textAlign:"left",marginBottom:"20px",overflowY:"auto",paddingRight:"10px",flex:1,minHeight:0},children:[e.jsx("h3",{style:R,children:"‚ö° Current Status"}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Gold Per Second:"}),e.jsxs("strong",{style:{color:"var(--success-color)"},children:[S(l,t.numberFormat)," / sec"]})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Click Power:"}),e.jsxs("strong",{style:{color:"var(--success-color)"},children:[S(a,t.numberFormat)," / click"]})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Current Weather:"}),e.jsx("strong",{children:L})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Renown Bonus:"}),e.jsxs("strong",{style:{color:"#673ab7"},children:["+",de(t.renown).minus(o(1)).times(o(100)).toNumber().toString(),"%"]})]}),e.jsx("h3",{style:R,children:"‚è≥ Time & Legacy"}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Time Played:"}),e.jsx("strong",{children:W})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Kingdom Founded:"}),e.jsx("span",{children:new Date(t.startTime.toNumber()).toLocaleDateString()})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Total Renown:"}),e.jsx("strong",{children:S(t.renown,t.numberFormat)})]}),e.jsx("h3",{style:R,children:"üí∞ Economy Summary"}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Current Gold:"}),e.jsx("strong",{children:S(t.gold,t.numberFormat)})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Lifetime Gold:"}),e.jsx("strong",{children:S(t.totalGold,t.numberFormat)})]}),e.jsx("h3",{style:R,children:"üè∞ Dominion"}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Total Buildings:"}),e.jsx("strong",{children:S(C,t.numberFormat)})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Highest Tech Building:"}),e.jsx("strong",{children:b})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Most Numerous:"}),e.jsxs("strong",{children:[v," (",S(j,t.numberFormat),")"]})]}),e.jsx("h3",{style:R,children:"‚öîÔ∏è Workforce & Court"}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Total Workforce:"}),e.jsxs("strong",{children:[S(t.soldiers,t.numberFormat)," Laborers"]})]}),e.jsx("h3",{style:R,children:"üìà Player Stats"}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Manual Clicks:"}),e.jsx("span",{children:S(t.stats.totalClicks,t.numberFormat)})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Dragons Slain:"}),e.jsx("span",{children:S(t.stats.dragonsKilled,t.numberFormat)})]}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Tavern Games:"}),e.jsx("span",{children:S(t.stats.tavernGamesPlayed,t.numberFormat)})]}),e.jsx("h3",{style:R,children:"üéñÔ∏è Completion"}),e.jsxs("div",{style:T,children:[e.jsx("span",{children:"Achievements:"}),e.jsxs("span",{children:[m," / ",c," (",Math.floor(m/c*100),"%)"]})]}),e.jsx("h3",{style:R,children:"üèÜ Achievements"}),e.jsx(ut,{gameState:t})]}),e.jsx("button",{className:"btn",style:{background:"#5d4037",width:"100%",flexShrink:0},onClick:g,children:"Close Records"})]})})},Nt=[0,10,25,50,100,150,200,250,300,350,400,450,500,550,550,600],Pt=({gameState:t,onStartProject:l,onUpgradeClickPower:g,onUpgradeOffline:C,onClose:m})=>{const[c,b]=x.useState("infrastructure");if(!(t.buildings.field||o(0)).gt(0))return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"üèóÔ∏è National Projects"}),e.jsxs("div",{style:{padding:"20px",color:"var(--text-secondary)"},children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"üîí"}),e.jsx("p",{children:"You must establish a functioning economy before launching national projects."}),e.jsx("p",{style:{fontWeight:"bold",color:"var(--accent-color)"},children:"Requirement: Build a Wheat Field."})]}),e.jsx("button",{className:"btn",onClick:m,children:"Close"})]})});const j=()=>e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px"},children:gt.map(a=>{var A,q,Z,Q;const W=t.buildings[a.id]||o(0);if(W.lt(10))return null;const E=t.nationalProjects[a.id]||{level:0,active:!1,startTime:0,endTime:0},T=E.level,R=T>=ve,L=E.active,O=T+1,N=He(a.id,O),I=Xe(O),B=Nt[O]||0,F=W.gte(B),J=t.gold.gte(N.gold),K=t.soldiers.gte(N.laborers),X=!N.carpenter.gt(0)||((A=t.eliteUnits.carpenter)==null?void 0:A.gte(N.carpenter)),V=!N.mason.gt(0)||((q=t.eliteUnits.mason)==null?void 0:q.gte(N.mason)),_=!N.architect.gt(0)||((Z=t.eliteUnits.architect)==null?void 0:Z.gte(N.architect)),U=J&&K&&X&&V&&_&&F;let f=0,h=0;if(L){const te=Date.now(),ne=E.endTime-E.startTime,u=te-E.startTime;f=Math.min(100,u/ne*100),h=Math.max(0,Math.ceil((E.endTime-te)/1e3))}const D=((Q=le.find(te=>te.id===a.id))==null?void 0:Q.name)||"Building";return e.jsxs("div",{style:{border:"2px solid var(--border-color)",borderRadius:"8px",background:L?"#fff8e1":"var(--bg-color)",overflow:"hidden",position:"relative"},children:[e.jsxs("div",{style:{padding:"10px",background:L?"var(--gold-color)":"rgba(0,0,0,0.05)",color:L?"#fff":"var(--text-color)",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:a.name.replace(" Infrastructure","")}),e.jsxs("span",{children:["Lvl ",T," / ",ve]})]}),e.jsxs("div",{style:{padding:"15px"},children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"10px",fontStyle:"italic"},children:a.description}),e.jsxs("div",{style:{marginBottom:"10px",fontSize:"0.9rem",color:"var(--success-color)",fontWeight:"bold"},children:["Current Bonus: +",(T*Ye*100).toFixed(0),"% Global"]}),L?e.jsxs("div",{children:[e.jsx("div",{style:{width:"100%",height:"10px",background:"#ccc",borderRadius:"5px",overflow:"hidden",marginBottom:"5px"},children:e.jsx("div",{style:{width:`${f}%`,height:"100%",background:"var(--success-color)",transition:"width 1s linear"}})}),e.jsxs("div",{style:{textAlign:"center",fontSize:"0.8rem"},children:["Under Construction... ",Math.floor(h/3600),"h ",Math.floor(h%3600/60),"m"]})]}):R?e.jsx("div",{style:{textAlign:"center",padding:"10px",color:"var(--gold-color)",fontWeight:"bold",border:"1px solid var(--gold-color)",borderRadius:"4px",background:"rgba(255, 215, 0, 0.1)"},children:"MAXIMUM LEVEL REACHED"}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.85rem",marginBottom:"10px",background:"rgba(255,255,255,0.5)",padding:"5px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"Next Level Requirements:"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"5px"},children:[e.jsxs("span",{style:{color:J?"green":"red"},children:["üí∞ ",S(N.gold)," Gold"]}),e.jsxs("span",{style:{color:K?"green":"red"},children:["üë∑ ",S(N.laborers)," Laborers"]}),N.carpenter.gt(0)&&e.jsxs("span",{style:{color:X?"green":"red"},children:["ü™ö ",S(N.carpenter)," Carpenters"]}),N.mason.gt(0)&&e.jsxs("span",{style:{color:V?"green":"red"},children:["üß± ",S(N.mason)," Masons"]}),N.architect.gt(0)&&e.jsxs("span",{style:{color:_?"green":"red"},children:["üìê ",S(N.architect)," Architects"]}),e.jsxs("span",{style:{color:F?"green":"red"},children:["üè† ",S(o(B))," ",D,"s"]})]}),e.jsxs("div",{style:{marginTop:"5px",fontSize:"0.8rem"},children:["‚è≥ Duration: ",Math.floor(I/3600),"h ",Math.floor(I%3600/60),"m"]})]}),e.jsx("button",{className:"btn",style:{width:"100%",background:U?"var(--accent-color)":"var(--border-color)",cursor:U?"pointer":"not-allowed"},disabled:!U,onClick:()=>l(a.id),children:"Start Project (Units Consumed)"})]})]})]},a.id)})}),G=()=>{const a=t.clickUpgradeLevel||0,W=a>=je,E=a+1,T=Je(E),R=t.gold.gte(T),L=o(2).pow(Math.min(a,15)),O=Ce(a),N=O>0?`${S(L)} + ${(O*100).toFixed(1)}% of GPS`:S(L),I=o(2).pow(Math.min(E,15)),B=Ce(E),F=B>0?`${S(I)} + ${(B*100).toFixed(1)}% of GPS`:S(I),J=t.offlineUpgradeLevel||0,K=J>=we,X=J+1,V=Ve(X),_=t.renown.gte(V),{efficiency:U,duration:f}=Se(J),{efficiency:h,duration:D}=Se(X),A=q=>{const Z=Math.floor(q/3600),Q=Math.floor(q%3600/60);return Z>0?`${Z}h ${Q}m`:`${Q}m`};return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"15px"},children:[e.jsxs("div",{style:{border:"2px solid var(--border-color)",borderRadius:"8px",background:"var(--bg-color)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px",background:"rgba(0,0,0,0.05)",color:"var(--text-color)",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"üëë Royal Scepter"}),e.jsxs("span",{children:["Lvl ",a," / ",je]})]}),e.jsxs("div",{style:{padding:"15px"},children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"10px",fontStyle:"italic"},children:"Enhance your royal authority to increase click power."}),e.jsxs("div",{style:{marginBottom:"10px",fontSize:"0.9rem",color:"var(--success-color)",fontWeight:"bold"},children:["Current Power: ",N]}),W?e.jsx("div",{style:{textAlign:"center",padding:"10px",color:"var(--gold-color)",fontWeight:"bold",border:"1px solid var(--gold-color)",borderRadius:"4px",background:"rgba(255, 215, 0, 0.1)"},children:"MAXIMUM LEVEL REACHED"}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.85rem",marginBottom:"10px",background:"rgba(255,255,255,0.5)",padding:"5px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"Next Level:"}),e.jsxs("div",{style:{marginBottom:"5px"},children:["Power: ",F]}),e.jsxs("div",{style:{color:R?"green":"red",fontWeight:"bold"},children:["üí∞ ",S(T)," Gold"]})]}),e.jsx("button",{className:"btn",style:{width:"100%",background:R?"var(--accent-color)":"var(--border-color)",cursor:R?"pointer":"not-allowed"},disabled:!R,onClick:g,children:"Upgrade Scepter"})]})]})]}),e.jsxs("div",{style:{border:"2px solid var(--border-color)",borderRadius:"8px",background:"var(--bg-color)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"10px",background:"rgba(0,0,0,0.05)",color:"var(--text-color)",fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"üí§ Offline Production"}),e.jsxs("span",{children:["Lvl ",J," / ",we]})]}),e.jsxs("div",{style:{padding:"15px"},children:[e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginBottom:"10px",fontStyle:"italic"},children:"Improve the efficiency of your kingdom while you are away."}),e.jsxs("div",{style:{marginBottom:"10px",fontSize:"0.9rem",color:"var(--success-color)",fontWeight:"bold"},children:["Current: ",(U*100).toFixed(0),"% for ",A(f)]}),K?e.jsx("div",{style:{textAlign:"center",padding:"10px",color:"var(--gold-color)",fontWeight:"bold",border:"1px solid var(--gold-color)",borderRadius:"4px",background:"rgba(255, 215, 0, 0.1)"},children:"MAXIMUM LEVEL REACHED"}):e.jsxs("div",{children:[e.jsxs("div",{style:{fontSize:"0.85rem",marginBottom:"10px",background:"rgba(255,255,255,0.5)",padding:"5px",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px"},children:"Next Level:"}),e.jsxs("div",{style:{marginBottom:"5px"},children:["Effect: ",(h*100).toFixed(0),"% for ",A(D)]}),e.jsxs("div",{style:{color:_?"#673ab7":"red",fontWeight:"bold"},children:["üëë ",S(V)," Renown"]})]}),e.jsx("button",{className:"btn",style:{width:"100%",background:_?"#673ab7":"var(--border-color)",cursor:_?"pointer":"not-allowed"},disabled:!_,onClick:C,children:"Upgrade Passive Income"})]})]})]})]})};return e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"1000px",width:"95%",height:"85vh",display:"flex",flexDirection:"column",padding:"0"},children:[e.jsxs("div",{style:{padding:"20px",background:"var(--accent-color)",color:"var(--text-on-accent)"},children:[e.jsx("h2",{style:{margin:0,border:"none",color:"var(--gold-color)"},children:"üèõÔ∏è National Projects"}),e.jsx("p",{style:{margin:"5px 0 0 0",fontSize:"0.9rem",opacity:.9},children:"Invest resources to permanently improve your kingdom's power. All improvements persist through prestige."})]}),e.jsxs("div",{style:{display:"flex",background:"var(--bg-color)",borderBottom:"2px solid var(--border-color)",padding:"0 20px"},children:[e.jsx("button",{className:"btn",style:{background:c==="infrastructure"?"var(--accent-color)":"transparent",border:"none",borderBottom:c==="infrastructure"?"3px solid var(--gold-color)":"3px solid transparent",borderRadius:"0",padding:"15px 20px",margin:"0",fontWeight:"bold",color:c==="infrastructure"?"var(--text-on-accent)":"var(--text-color)"},onClick:()=>b("infrastructure"),children:"üèóÔ∏è Infrastructure"}),e.jsx("button",{className:"btn",style:{background:c==="royalScepter"?"var(--accent-color)":"transparent",border:"none",borderBottom:c==="royalScepter"?"3px solid var(--gold-color)":"3px solid transparent",borderRadius:"0",padding:"15px 20px",margin:"0",fontWeight:"bold",color:c==="royalScepter"?"var(--text-on-accent)":"var(--text-color)"},onClick:()=>b("royalScepter"),children:"üëë Royal Scepter"})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"20px",background:"var(--panel-bg)"},children:[c==="infrastructure"&&j(),c==="royalScepter"&&G()]}),e.jsx("div",{style:{padding:"15px",borderTop:"1px solid var(--border-color)",textAlign:"right",background:"var(--bg-color)"},children:e.jsx("button",{className:"btn",onClick:m,children:"Return to Kingdom"})})]})})},Et=({toasts:t})=>e.jsx("div",{className:"toast-container",children:t.map(l=>e.jsxs("div",{className:`toast ${l.type}`,children:[l.type==="success"&&"‚úÖ",l.type==="warning"&&"‚ö†Ô∏è",l.type==="info"&&"‚ÑπÔ∏è",l.type==="error"&&"‚ùå",e.jsx("span",{children:l.message})]},l.id))}),Rt=()=>{const[t,l]=x.useState(null);if(x.useEffect(()=>{const C=b=>{const k=b.target.closest("[data-tooltip]");if(k){const j=k.getAttribute("data-tooltip");j&&l({text:j,x:b.clientX,y:b.clientY})}else l(null)},m=b=>{t&&l(v=>v?{...v,x:b.clientX,y:b.clientY}:null)},c=()=>{l(null)};return document.addEventListener("mouseover",C),document.addEventListener("mousemove",m),document.addEventListener("mouseout",c),()=>{document.removeEventListener("mouseover",C),document.removeEventListener("mousemove",m),document.removeEventListener("mouseout",c)}},[t]),!t)return null;const g={left:t.x+15,top:t.y+15};return t.x+250>window.innerWidth&&(g.left=t.x-260),t.y+100>window.innerHeight&&(g.top=t.y-50),e.jsx("div",{className:"game-tooltip",style:g,children:t.text.split(`
`).map((C,m)=>e.jsx("div",{style:{marginBottom:m===t.text.split(`
`).length-1?0:"4px"},children:C},m))})},Lt={apiKey:"AIzaSyA1Dw5M2Zk8bpTCjlU2Tuifvx0ZI3IeRv0",authDomain:"kingdomclicker-156dc.firebaseapp.com",projectId:"kingdomclicker-156dc",storageBucket:"kingdomclicker-156dc.firebasestorage.app",messagingSenderId:"496461589742",appId:"1:496461589742:web:e6413dfa2d1bbabd3ad7ff"},Bt=ft(Lt),he=yt(Bt);function Mt(){return`#${Math.floor(Math.random()*99999).toString().padStart(5,"0")}`}function At(){const t=new Date,l=t.getDay(),g=t.getDate()-l+(l===0?-6:1);return new Date(t.setDate(g))}async function Dt(t){try{console.log("üöÄ –ù–∞—á–∏–Ω–∞—é –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥:",{rulerName:t.rulerName,rulerId:t.rulerId,gold:t.gold.toString(),renown:t.renown.toString(),buildings:t.buildings,achievements:t.achievements});const l={...t,period:"alltime"},g={...t,period:"weekly"};console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ leaderboard_alltime...");const C=Ie(he,"leaderboard_alltime",t.rulerId);await ze(C,{...l,gold:Number(l.gold.toString()),renown:Number(l.renown.toString()),timestamp:We()}),console.log("‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ leaderboard_alltime, ID:",t.rulerId),console.log("üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ leaderboard_weekly...");const m=Ie(he,"leaderboard_weekly",t.rulerId);return await ze(m,{...g,gold:Number(g.gold.toString()),renown:Number(g.renown.toString()),timestamp:We()}),console.log("‚úÖ –£—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ leaderboard_weekly, ID:",t.rulerId),console.log("üéâ –î–∞–Ω–Ω—ã–µ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã!"),{allTimeId:t.rulerId,weeklyId:t.rulerId}}catch(l){throw console.error("‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ –ª–∏–¥–µ—Ä–±–æ—Ä–¥:"),console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:",l),l instanceof Error&&(console.error("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏:",l.message),console.error("–°—Ç–µ–∫ –æ—à–∏–±–∫–∏:",l.stack)),"code"in l&&(console.error("–ö–æ–¥ –æ—à–∏–±–∫–∏ Firebase:",l.code),console.error("–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:",l.customData)),l}}async function It(t=100){try{console.log("üîç –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö all-time –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞...");const l=qe(Ke(he,"leaderboard_alltime"),Ze("gold","desc"),Qe(t));console.log("üì° –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ Firestore...");const g=await et(l);console.log("üìä –ü–æ–ª—É—á–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:",g.docs.length);const C=g.docs.map(m=>{const c=m.data();return{id:m.id,...c,gold:c.gold instanceof oe?c.gold:new oe(c.gold),renown:c.renown instanceof oe?c.renown:new oe(c.renown),timestamp:c.timestamp}});return console.log("‚úÖ All-time –ª–∏–¥–µ—Ä–±–æ—Ä–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø–∏—Å–µ–π:",C.length),C}catch(l){throw console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ all-time –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞:"),console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:",l),l instanceof Error&&(console.error("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏:",l.message),console.error("–°—Ç–µ–∫ –æ—à–∏–±–∫–∏:",l.stack)),"code"in l&&console.error("–ö–æ–¥ –æ—à–∏–±–∫–∏ Firebase:",l.code),l}}async function zt(t=100){try{console.log("üîç –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö weekly –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞...");const l=At();console.log("üìÖ –ù–∞—á–∞–ª–æ –Ω–µ–¥–µ–ª–∏:",l.toISOString());const g=qe(Ke(he,"leaderboard_weekly"),Ze("gold","desc"),Qe(t));console.log("üì° –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∫ Firestore...");const C=await et(g);console.log("üìä –ü–æ–ª—É—á–µ–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –¥–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:",C.docs.length);const c=C.docs.map(b=>{const v=b.data();return{id:b.id,...v,gold:v.gold instanceof oe?v.gold:new oe(v.gold),renown:v.renown instanceof oe?v.renown:new oe(v.renown),timestamp:v.timestamp}}).filter(b=>{var j,G;const v=((G=(j=b.timestamp)==null?void 0:j.toDate)==null?void 0:G.call(j))||new Date(b.timestamp),k=v>=l;return k||console.log("üóëÔ∏è –ó–∞–ø–∏—Å—å –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–∞ (—Å—Ç–∞—Ä–∞—è –¥–∞—Ç–∞):",v.toISOString()),k});return console.log("‚úÖ Weekly –ª–∏–¥–µ—Ä–±–æ—Ä–¥ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω, –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:",c.length),c}catch(l){throw console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ weekly –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞:"),console.error("–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:",l),l instanceof Error&&(console.error("–°–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏:",l.message),console.error("–°—Ç–µ–∫ –æ—à–∏–±–∫–∏:",l.stack)),"code"in l&&console.error("–ö–æ–¥ –æ—à–∏–±–∫–∏ Firebase:",l.code),l}}const Wt=({isOpen:t,onClose:l,onConfirm:g,gameState:C})=>{const[m,c]=x.useState(""),[b,v]=x.useState(!1);if(!t)return null;const k=async()=>{if(m.trim().length<3){alert("Ruler name must contain at least 3 characters!");return}if(m.trim().length>20){alert("Ruler name must not exceed 20 characters!");return}v(!0);try{const G={id:`player_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,rulerName:m.trim(),rulerId:Mt(),lastLeaderboardView:0,lastLeaderboardSubmit:0,hasChosenName:!0};g(G),l()}catch{alert("An error occurred while creating profile. Please try again.")}finally{v(!1)}};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:e.jsxs("div",{style:{backgroundColor:"#fdf6e3",border:"4px solid #8d6e63",borderRadius:"8px",padding:"32px",maxWidth:"500px",width:"90%",textAlign:"center",fontFamily:"Georgia, serif"},children:[e.jsx("h2",{style:{color:"#3e2723",marginBottom:"16px"},children:"üëë Royal Coronation! üëë"}),e.jsxs("p",{style:{color:"#5d4037",marginBottom:"24px",lineHeight:"1.5"},children:["Congratulations! Your kingdom has reached ",e.jsx("strong",{children:Ft(C.gold)})," gold!",e.jsx("br",{}),"It's time to choose a name for your ruler and enter the history books!"]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",color:"#3e2723",marginBottom:"8px",fontWeight:"bold"},children:"Ruler Name:"}),e.jsx("input",{type:"text",value:m,onChange:j=>c(j.target.value),placeholder:"Enter your name...",maxLength:20,style:{width:"100%",padding:"12px",border:"2px solid #a1887f",borderRadius:"4px",fontSize:"16px",fontFamily:"Arial, sans-serif",backgroundColor:"#fff",color:"#3e2723"},onKeyPress:j=>j.key==="Enter"&&k()}),e.jsxs("div",{style:{fontSize:"12px",color:"#8d6e63",marginTop:"4px",textAlign:"left"},children:[m.length,"/20 characters"]})]}),e.jsx("div",{style:{backgroundColor:"#fff3e0",border:"2px solid #bf9000",borderRadius:"4px",padding:"12px",marginBottom:"24px"},children:e.jsx("p",{style:{color:"#bf9000",margin:0,fontSize:"14px",fontWeight:"bold"},children:"‚ö†Ô∏è Important: You'll be able to join the leaderboard and compete with players from around the world!"})}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"center"},children:[e.jsx("button",{type:"button",onClick:k,disabled:b||m.trim().length<3,style:{padding:"12px 24px",backgroundColor:b||m.trim().length<3?"#cccccc":"#2e7d32",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",fontWeight:"bold",cursor:b||m.trim().length<3?"not-allowed":"pointer",fontFamily:"Georgia, serif"},children:b?"Creating profile...":"Ascend the Throne"}),e.jsx("button",{type:"button",onClick:l,style:{padding:"12px 24px",backgroundColor:"#c62828",color:"white",border:"none",borderRadius:"4px",fontSize:"16px",cursor:"pointer",fontFamily:"Georgia, serif",transition:"background-color 0.2s"},onMouseOver:j=>{j.currentTarget.style.backgroundColor="#d32f2f"},onMouseOut:j=>{j.currentTarget.style.backgroundColor="#c62828"},children:"Later"})]})]})})};function Ft(t){return t.lt(1e3)?t.toFixed(0):t.lt(1e6)?t.toNumber().toLocaleString():t.toExponential(2)}const Ot=({isOpen:t,onClose:l,playerProfile:g,onOpenRulerNameModal:C,gameState:m})=>{const[c,b]=x.useState([]),[v,k]=x.useState([]),[j,G]=x.useState("alltime"),[a,W]=x.useState(!1),[E,T]=x.useState(null),[R,L]=x.useState(0),[O,N]=x.useState(0),I=()=>{const f=localStorage.getItem("leaderboardCache");if(f)try{const{data:h,timestamp:D}=JSON.parse(f),A=Date.now(),q=3600*1e3;if(A-D<q&&h&&h.allTime&&h.weekly)return h}catch(h){console.error("Cache parse error:",h)}return null},B=f=>{const h={data:f,timestamp:Date.now()};localStorage.setItem("leaderboardCache",JSON.stringify(h)),N(Date.now())},F=()=>{const f=localStorage.getItem("leaderboardCache");if(f){const{timestamp:h}=JSON.parse(f),D=Date.now(),A=3600*1e3;return D-h<A}return!1};x.useEffect(()=>{if(t){if(F())try{const f=I();if(f){b(f.allTime),k(f.weekly);const h=JSON.parse(localStorage.getItem("leaderboardCache"));N(h.timestamp);return}}catch(f){console.error("Cache read error:",f)}J()}},[t]);const J=async()=>{W(!0),T(null);try{const f=new Promise((A,q)=>setTimeout(()=>q(new Error("Loading timeout")),1e4)),[h,D]=await Promise.all([Promise.race([It(50),f]),Promise.race([zt(50),f])]);b(h),k(D),B({allTime:h,weekly:D}),console.log("Leaderboard data loaded successfully!")}catch(f){console.error("Error loading leaderboard:",f),T("Failed to load leaderboard. Please check your internet connection and try again.")}finally{W(!1)}},K=f=>{switch(f){case 1:return"ü•á";case 2:return"ü•à";case 3:return"ü•â";default:return`#${f}`}},X=()=>g?(j==="alltime"?c:v).findIndex(h=>h.rulerId===g.rulerId)+1:-1,V=()=>{const f=j==="alltime"?c:v;if(f.length>0){let h=0;if(f.forEach(D=>{if(D.timestamp){let A=0;typeof D.timestamp=="object"&&D.timestamp.toDate?A=D.timestamp.toDate().getTime():typeof D.timestamp=="number"?A=D.timestamp:typeof D.timestamp=="string"&&(A=new Date(D.timestamp).getTime()),A>h&&(h=A)}}),h>0)return h}return O},_=j==="alltime"?c:v,U=_.length>0;return t?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",style:{maxWidth:"800px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsx("h2",{children:"üèÜ Leaderboard üèÜ"}),e.jsx("button",{className:"btn",onClick:l,children:"Close"})]}),!g&&e.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"15px",marginBottom:"16px",textAlign:"center"},children:[e.jsx("h4",{style:{color:"var(--gold-color)",margin:"0 0 8px 0",fontSize:"14px"},children:"üëÅ View Only Mode"}),e.jsxs("p",{style:{color:"var(--text-secondary)",margin:"0",fontSize:"12px",lineHeight:"1.4"},children:[e.jsx("strong",{children:"Anyone can view leaderboard!"})," Choose a name at 10M gold to participate."]}),C&&m&&m.gold&&m.gold.gte(1e7)&&e.jsx("button",{className:"btn",onClick:()=>{l(),C()},style:{backgroundColor:"var(--accent-color)",padding:"6px 12px",fontSize:"12px",marginTop:"8px"},children:"üëë Choose Ruler Name"})]}),U&&e.jsx("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"16px",textAlign:"center",fontSize:"12px"},children:e.jsxs("span",{style:{color:"var(--gold-color)"},children:["üìä Data updated ",Math.floor((Date.now()-V())/6e4)," minutes ago"]})}),a&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--text-secondary)"},children:"Loading leaderboard data..."}),E&&e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"var(--danger-color)"},children:E}),g&&U&&e.jsxs("div",{style:{backgroundColor:"rgba(191, 144, 0, 0.1)",border:"2px solid var(--gold-color)",borderRadius:"4px",padding:"12px",marginBottom:"16px",textAlign:"center"},children:[e.jsxs("div",{style:{color:"var(--gold-color)",fontSize:"14px",fontWeight:"bold"},children:["üëë You are playing as: ",g.rulerName," ",g.rulerId]}),_.length>0&&e.jsxs("div",{style:{color:"var(--text-secondary)",fontSize:"12px",marginTop:"5px"},children:["Your Rank: ",X()>0?`#${X()}`:"Not ranked yet"," in ",j==="alltime"?"All Time":"Weekly"]})]}),U&&e.jsxs("div",{style:{display:"flex",marginBottom:"16px",borderBottom:"2px solid var(--border-color)"},children:[e.jsx("button",{onClick:()=>G("alltime"),className:j==="alltime"?"tab-btn active":"tab-btn",children:"All Time"}),e.jsx("button",{onClick:()=>G("weekly"),className:j==="weekly"?"tab-btn active":"tab-btn",children:"This Week"})]}),U&&!a&&!E&&e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",border:"2px solid var(--border-color)",borderRadius:"4px",backgroundColor:"var(--panel-bg)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{style:{backgroundColor:"var(--accent-color)",color:"white",position:"sticky",top:0},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Rank"}),e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Ruler"}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Gold"}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Renown"}),e.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Buildings"})]})}),e.jsx("tbody",{children:_.map((f,h)=>e.jsxs("tr",{style:{backgroundColor:(g==null?void 0:g.rulerId)===f.rulerId?"rgba(191, 144, 0, 0.1)":h%2===0?"rgba(0, 0, 0, 0.02)":"transparent",borderBottom:"1px solid var(--border-color)"},children:[e.jsx("td",{style:{padding:"10px",fontWeight:"bold",color:"var(--text-color)"},children:K(h+1)}),e.jsx("td",{style:{padding:"10px",color:"var(--text-color)"},children:e.jsxs("div",{children:[e.jsx("strong",{children:f.rulerName}),e.jsx("div",{style:{fontSize:"12px",color:"var(--text-secondary)"},children:f.rulerId})]})}),e.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--gold-color)",fontWeight:"bold"},children:S(f.gold,"standard")}),e.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:S(f.renown,"standard")}),e.jsx("td",{style:{padding:"10px",textAlign:"right",color:"var(--text-secondary)"},children:f.buildings})]},f.id))})]})}),e.jsx("div",{style:{marginTop:"16px",fontSize:"12px",color:"var(--text-secondary)",textAlign:"center"},children:"üí° Leaderboard updates automatically every hour. Data is cached for performance."})]})}):null},re={density:"normal",fontSize:"medium",showFloatingText:!0,showWeatherWidget:!0,reduceMotion:!1,crownAnimations:!0,lastBuyAmount:o(1),layout:{left:o(1),center:o(1),right:o(1)},borderWidth:o(4),customColors:{enabled:!1,bg:"#e8dcc5",panel:"#fdf6e3",text:"#3e2723",secondaryText:"#5d4037",accent:"#8d6e63",accentHover:"#6d4c41",gold:"#bf9000",border:"#a1887f",success:"#2e7d32",danger:"#c62828"}},ae={gold:o(0),totalGold:o(0),startTime:o(Date.now()),lastSaveTime:o(Date.now()),buildings:{},achievements:[],renown:o(0),prestigeCount:0,soldiers:o(0),eliteUnits:{},nationalProjects:{},clickUpgradeLevel:0,offlineUpgradeLevel:0,weather:{current:"clear",timeLeft:o(120)},event:null,theme:"default",numberFormat:"standard",idleModeEnabled:!0,interface:re,stats:{totalClicks:o(0),dragonsKilled:o(0),tavernGamesPlayed:o(0)},playerProfile:null},xe=t=>{if(t==null||typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;if(Array.isArray(t))return t.map(xe);if(typeof t=="object"&&t.toString&&typeof t.toString=="function"&&(t.hasOwnProperty("mantissa")||t.hasOwnProperty("exponent")))return t.toString();if(typeof t=="object"){const l={};for(const g in t)t.hasOwnProperty(g)&&(l[g]=xe(t[g]));return l}return t},Jt=()=>{var Me;const[t,l]=x.useState(()=>{var n,s,d,y,w,p;const r=localStorage.getItem("kingdom_save");if(r)try{const i=JSON.parse(r),P=i.interface||{},M={...re,...P,lastBuyAmount:o(P.lastBuyAmount??1),crownAnimations:P.crownAnimations??!0,layout:{left:o(((n=P.layout)==null?void 0:n.left)??re.layout.left),center:o(((s=P.layout)==null?void 0:s.center)??re.layout.center),right:o(((d=P.layout)==null?void 0:d.right)??re.layout.right)},borderWidth:o(P.borderWidth??re.borderWidth),customColors:{...re.customColors,...P.customColors||{}}};return{...ae,...i,renown:o(i.renown||0),prestigeCount:i.prestigeCount||0,gold:o(i.gold||0),totalGold:o(i.totalGold||0),startTime:o(i.startTime||Date.now()),lastSaveTime:o(i.lastSaveTime||Date.now()),soldiers:o(i.soldiers||0),buildings:Object.keys(i.buildings||{}).reduce((H,$)=>(H[$]=o(i.buildings[$]),H),{}),stats:{...ae.stats,...i.stats||{},totalClicks:o(((y=i.stats)==null?void 0:y.totalClicks)||0),dragonsKilled:o(((w=i.stats)==null?void 0:w.dragonsKilled)||0),tavernGamesPlayed:o(((p=i.stats)==null?void 0:p.tavernGamesPlayed)||0)},eliteUnits:Object.keys(i.eliteUnits||{}).reduce((H,$)=>(H[$]=o(i.eliteUnits[$]),H),{}),nationalProjects:i.nationalProjects||{},clickUpgradeLevel:i.clickUpgradeLevel||0,offlineUpgradeLevel:i.offlineUpgradeLevel||0,weather:i.weather?{...i.weather,timeLeft:o(Number(i.weather.timeLeft)||120)}:ae.weather,theme:i.theme||"default",numberFormat:i.numberFormat||"standard",idleModeEnabled:i.idleModeEnabled!==void 0?i.idleModeEnabled:!0,interface:M,playerProfile:i.playerProfile?{...i.playerProfile,lastLeaderboardSubmit:i.playerProfile.lastLeaderboardSubmit||0}:null}}catch(i){console.error("Save load failed",i)}return ae}),g=x.useRef(t);x.useEffect(()=>{g.current=t},[t]);const C=x.useRef("");x.useEffect(()=>{const r=n=>{C.current=(C.current+n.key).slice(-20);const s=C.current.toLowerCase();s.endsWith("godon")?(l(d=>({...d,godMode:!0})),z("God Mode Enabled: +99999s per click","success"),C.current=""):s.endsWith("godoff")&&(l(d=>({...d,godMode:!1})),z("God Mode Disabled","info"),C.current="")};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[]);const[m,c]=x.useState(!1);x.useEffect(()=>{let r;const n=()=>{c(!1),clearTimeout(r),t.idleModeEnabled&&(r=setTimeout(()=>{c(!0)},2e4))};n();const s=["mousemove","mousedown","keydown","touchstart","scroll"];return s.forEach(d=>window.addEventListener(d,n)),()=>{clearTimeout(r),s.forEach(d=>window.removeEventListener(d,n))}},[t.idleModeEnabled]),x.useEffect(()=>{t.event&&c(!1)},[t.event]),x.useEffect(()=>{const r=S(t.gold);document.title=`Gold: ${r} - Kingdom Clicker`},[t.gold]),x.useEffect(()=>{var w;const r=document.documentElement,n=t.interface||re;if((w=n.customColors)!=null&&w.enabled){const p=n.customColors;r.style.setProperty("--bg-color",p.bg),r.style.setProperty("--panel-bg",p.panel),r.style.setProperty("--text-color",p.text),r.style.setProperty("--text-secondary",p.secondaryText||"#5d4037"),r.style.setProperty("--text-on-accent","#ffffff"),r.style.setProperty("--accent-color",p.accent),r.style.setProperty("--accent-hover",p.accentHover||p.accent),r.style.setProperty("--gold-color",p.gold||"#bf9000"),r.style.setProperty("--border-color",p.border),r.style.setProperty("--success-color",p.success||"#2e7d32"),r.style.setProperty("--danger-color",p.danger||"#c62828"),r.style.setProperty("--bg-image","none")}else{const p=t.theme||"default",i=be[p]||be.default;i&&Object.entries(i.colors).forEach(([P,M])=>{r.style.setProperty(P,M)})}const s={small:"14px",medium:"16px",large:"18px"};r.style.setProperty("--base-font-size",s[n.fontSize]);const d={compact:"8px",normal:"12px",spacious:"20px"},y={compact:"6px",normal:"12px",spacious:"16px"};r.style.setProperty("--panel-padding",d[n.density]),r.style.setProperty("--gap-size",y[n.density]),r.style.setProperty("--custom-border-width",`${n.borderWidth}px`),r.style.setProperty("--col-left",String(n.layout.left)),r.style.setProperty("--col-center",String(n.layout.center)),r.style.setProperty("--col-right",String(n.layout.right)),n.reduceMotion?document.body.classList.add("no-motion"):document.body.classList.remove("no-motion")},[t.theme,t.interface]);const[b,v]=x.useState(!1);x.useEffect(()=>{var r;t.gold.gte(o(1e7))&&!((r=t.playerProfile)!=null&&r.hasChosenName)&&!b&&te(!0)},[t.gold,t.playerProfile,b]);const[k,j]=x.useState(null),[G,a]=x.useState([]),[W,E]=x.useState(null),[T,R]=x.useState("buildings"),[L,O]=x.useState("army"),[N,I]=x.useState(!1),[B,F]=x.useState("throne");x.useEffect(()=>{const r=()=>{I(window.innerWidth<768)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const[J,K]=x.useState(!1),[X,V]=x.useState(!1),[_,U]=x.useState(!1),[f,h]=x.useState(!1),[D,A]=x.useState(!1),[q,Z]=x.useState(!1),[Q,te]=x.useState(!1),[ne,u]=x.useState(!1),z=(r,n="info")=>{const s=Date.now().toString()+Math.random();a(d=>[...d,{id:s,message:r,type:n}]),setTimeout(()=>{a(d=>d.filter(y=>y.id!==s))},3e3)};x.useEffect(()=>{const r=Date.now();if(t.lastSaveTime&&o(r).minus(t.lastSaveTime).gt(o(6e4))){const n=o(r).minus(t.lastSaveTime).dividedBy(o(1e3)),{efficiency:s,duration:d}=Se(t.offlineUpgradeLevel||0),y=o(d),w=oe.min(n,y),i=ge(t).times(o(s)).times(w).floor(),P=[];let M={...t.nationalProjects},H=!1;Object.keys(M).forEach($=>{var ee;const Y=M[$];if(Y.active&&Y.endTime&&r>=Y.endTime){M[$]={...Y,active:!1,level:Y.level+1,startTime:0,endTime:0};const se=(ee=le.find(pe=>pe.id===$))==null?void 0:ee.name;se&&P.push(`${se} Infrastructure (Lvl ${Y.level+1})`),H=!0}}),(i.gt(o(0))||P.length>0)&&(E({gained:i,effectiveTime:w,totalTime:n,efficiency:s,completedProjects:P}),l($=>({...$,gold:$.gold.plus(i),totalGold:$.totalGold.plus(i),nationalProjects:H?M:$.nationalProjects})))}},[]),x.useEffect(()=>{const r=setInterval(()=>{Date.now()%3e4<1e3&&l(n=>{const s={...n,lastSaveTime:o(Date.now())},d=xe(s);return localStorage.setItem("kingdom_save",JSON.stringify(d)),s})},1e3);return()=>clearInterval(r)},[]),x.useEffect(()=>{const r=()=>{const s=g.current,d=xe(s);localStorage.setItem("kingdom_save",JSON.stringify(d))};window.addEventListener("beforeunload",r);const n=()=>{document.visibilityState==="hidden"&&r()};return document.addEventListener("visibilitychange",n),()=>{window.removeEventListener("beforeunload",r),document.removeEventListener("visibilitychange",n)}},[]),x.useEffect(()=>{var n;if(!((n=t.playerProfile)!=null&&n.hasChosenName))return;const r=setInterval(()=>{var p;const s=g.current,d=Date.now(),y=((p=s.playerProfile)==null?void 0:p.lastLeaderboardSubmit)||0,w=3600*1e3;d-y>=w&&Dt({rulerName:s.playerProfile.rulerName,rulerId:s.playerProfile.rulerId,gold:s.gold,renown:s.renown,buildings:Object.keys(s.buildings).length,achievements:s.achievements.length,period:"alltime"}).then(()=>{l(i=>({...i,playerProfile:{...i.playerProfile,lastLeaderboardSubmit:Date.now()}})),z("Leaderboard data submitted successfully!","success")}).catch(i=>{console.error("Auto leaderboard submission failed:",i)})},6e4);return()=>clearInterval(r)},[(Me=t.playerProfile)==null?void 0:Me.hasChosenName]),x.useEffect(()=>{const r=setInterval(()=>{if(!t.event&&Math.random()<.3){const d=["dragon","merchant","jester"],y=d[Math.floor(Math.random()*d.length)],w=y==="dragon"?6e5:3e4,p={id:Date.now().toString(),type:y,expiresAt:o(Date.now()).plus(o(w)),hp:y==="dragon"?o(10):void 0,maxHp:y==="dragon"?o(10):void 0,reward:o(0),startTime:y==="dragon"?Date.now():void 0};l(i=>({...i,event:p}))}},1e4);return()=>clearInterval(r)},[t.event]);const ge=r=>{var p;let n=o(0);const s=((p=r.weather)==null?void 0:p.current)||"clear";le.forEach(i=>{const P=r.buildings[i.id]||o(0);let M=i.baseProduction;s==="sunny"?(i.id==="peasant"||i.id==="field"||i.id==="stable"||i.id==="cathedral")&&(M=M.times(o(1.2))):s==="rainy"?(i.id==="silver_mine"||i.id==="alchemist"||i.id==="market"||i.id==="tavern")&&(M=M.times(o(1.2))):s==="stormy"?((i.id==="blacksmith"||i.id==="void_portal")&&(M=M.times(o(1.3))),(i.id==="field"||i.id==="stable")&&(M=M.times(o(.8)))):s==="windy"&&(i.id==="market"||i.id==="castle"||i.id==="time_chamber")&&(M=M.times(o(1.15))),n=n.plus(P.times(M))});let d=0;r.nationalProjects&&Object.values(r.nationalProjects).forEach(i=>{d+=i.level||0});let y=o(1);const w=o(1).plus(o(d*Ye));if(y=y.times(w),y=y.times(de(r.renown).plus(o(r.achievements.length*.02))),r.event&&r.event.type==="dragon"&&r.event.startTime){const i=Math.floor((Date.now()-r.event.startTime)/1e3),M=1-Math.min(99,i)/100;y=y.times(o(M))}return n=n.times(y),n},ce=ge(t),ue=x.useRef(ce);ue.current=ce,x.useEffect(()=>{const r=setInterval(()=>{l(n=>{const s=Date.now(),d=ue.current.times(o(fe)).dividedBy(o(1e3));let y=n.totalGold.plus(d),w=n.gold.plus(d),p={...n.weather};const i=o(fe/1e3);if(p.timeLeft=p.timeLeft.minus(i),p.timeLeft.lte(o(0))){const Y=["clear","sunny","rainy","stormy","windy"],ee=Y[Math.floor(Math.random()*Y.length)],se=o(Math.floor(Math.random()*120)+60);p={current:ee,timeLeft:se}}let P=n.event;P&&P.expiresAt&&o(P.expiresAt).lt(o(s))&&(P=null);let M={...n.nationalProjects||{}};Object.keys(M).forEach(Y=>{var se;const ee=M[Y];ee.active&&ee.endTime&&s>=ee.endTime&&(M[Y]={...ee,active:!1,level:ee.level+1,startTime:0,endTime:0},z(`Project Completed: ${(se=le.find(pe=>pe.id===Y))==null?void 0:se.name} Infrastructure Level ${ee.level+1}!`,"success"))});const H=[...n.achievements];let $=null;return _e.forEach(Y=>{H.includes(Y.id)||Y.condition({...n,totalGold:y,gold:w},ue.current)&&(H.push(Y.id),$=Y)}),$&&(j($),setTimeout(()=>j(null),3e3)),{...n,gold:w,totalGold:y,achievements:H,event:P,soldiers:n.soldiers,weather:p,nationalProjects:M}})},fe);return()=>clearInterval(r)},[]);const ie=(r="light")=>{if("vibrate"in navigator&&N)switch(r){case"light":navigator.vibrate(10);break;case"medium":navigator.vibrate(20);break;case"heavy":navigator.vibrate([30,10,30]);break}},ke=(r=!1)=>{r||ie("light");const n=tt(g.current);l(s=>({...s,gold:s.gold.plus(n),totalGold:s.totalGold.plus(n),stats:{...s.stats,totalClicks:r?s.stats.totalClicks:s.stats.totalClicks.plus(o(1))}}))},tt=r=>{const n=de(r.renown),s=o(1),d=r.clickUpgradeLevel||0,y=Math.min(d,15),w=o(2).pow(y),p=s.times(w),i=ge(r),P=Ce(d),M=i.times(P);let H=p.plus(M);if(H=H.times(n),r.godMode){const $=i.times(o(99999));H=H.plus($)}return H},ot=()=>{const r=t.clickUpgradeLevel||0;if(r>=je){z("Maximum Royal Scepter level reached!","warning");return}const n=Je(r+1);if(t.gold.lt(n)){z("Not enough gold!","error");return}l(s=>({...s,gold:s.gold.minus(n),clickUpgradeLevel:s.clickUpgradeLevel+1})),z(`Royal Scepter upgraded to level ${r+1}!`,"success")},rt=()=>{const r=t.offlineUpgradeLevel||0;if(r>=we){z("Maximum Passive Income level reached!","warning");return}const n=Ve(r+1);if(t.renown.lt(n)){z("Not enough Renown!","error");return}l(s=>({...s,renown:s.renown.minus(n),offlineUpgradeLevel:s.offlineUpgradeLevel+1})),z(`Passive Income upgraded to level ${r+1}!`,"success")},Te=(r,n)=>{const s=le.find(w=>w.id===r);if(!s||n<=0)return;const d=t.buildings[r]||o(0),y=Ae(s.baseCost,d,o(n)).floor();t.gold.gte(y)&&(ie("medium"),l(w=>({...w,gold:w.gold.minus(y),buildings:{...w.buildings,[r]:(w.buildings[r]||o(0)).plus(o(n))}})))},Ne=(r,n)=>{const s=le.find(p=>p.id===r);if(!s||n<=0)return;const d=t.buildings[r]||o(0),y=o(Math.min(n,d.toNumber()));if(y.lte(o(0)))return;const w=Ae(s.baseCost,d.minus(y),y).times(o(.25)).floor();l(p=>({...p,gold:p.gold.plus(w),buildings:{...p.buildings,[r]:d.minus(y)}}))},Pe=r=>{const n=De.times(o(r));t.gold.gte(n)&&l(s=>({...s,gold:s.gold.minus(n),soldiers:s.soldiers.plus(n.dividedBy(De))}))},Ee=(r,n)=>{const s=pt.find(w=>w.id===r);if(!s)return;const d=s.goldCost.times(o(n)),y=s.soldierCost.times(o(n));t.gold.gte(d)&&t.soldiers.gte(y)&&l(w=>({...w,gold:w.gold.minus(d),soldiers:w.soldiers.minus(y),eliteUnits:{...w.eliteUnits,[r]:(w.eliteUnits[r]||o(0)).plus(o(n))}}))},Re=r=>{if(r.type==="merchant"){const n=ue.current.times(o(10));l(s=>({...s,gold:s.gold.plus(n),totalGold:s.totalGold.plus(n),event:null})),z(`The merchant gifted you ${S(n.floor(),t.numberFormat)} gold!`,"success")}else if(r.type==="jester"){const n=t.gold.times(o(.1)),s=Math.random()>.5;l(d=>({...d,gold:s?d.gold.plus(n):d.gold.minus(n),totalGold:s?d.totalGold.plus(n):d.totalGold,event:null})),s?z(`Jester pays out! +${S(n.floor(),t.numberFormat)}`,"success"):z(`Jester tricked you! -${S(n.floor(),t.numberFormat)}`,"warning")}else if(r.type==="dragon"){let n=!1;l(s=>{if(!s.event||s.event.type!=="dragon")return s;const d=(s.event.hp||o(1)).minus(o(1));if(d.lte(0)){const y=ue.current.times(o(30));return n=!0,{...s,gold:s.gold.plus(y),totalGold:s.totalGold.plus(y),event:null,stats:{...s.stats,dragonsKilled:s.stats.dragonsKilled.plus(o(1))}}}return{...s,event:{...s.event,hp:d}}}),n&&z("Dragon Slain! +Treasury Boost","success")}},nt=()=>{const r=o(1),n=o(1e12),s=t.totalGold;if(s.lt(n))return;const d=s.dividedBy(n),w=o(Math.floor(Math.pow(d.toNumber(),.33))).times(r).minus(t.renown);if(w.lte(0))return;const p={...t.nationalProjects};Object.keys(p).forEach(i=>{p[i].active&&(p[i]={...p[i],active:!1,startTime:0,endTime:0})}),l({...ae,renown:t.renown.plus(w),prestigeCount:t.prestigeCount+1,totalGold:t.totalGold,achievements:t.achievements,nationalProjects:p,offlineUpgradeLevel:t.offlineUpgradeLevel,playerProfile:t.playerProfile,startTime:o(Date.now()),lastSaveTime:o(Date.now()),theme:t.theme,idleModeEnabled:t.idleModeEnabled,interface:t.interface}),V(!1),z("Abdication Successful. Long live the new King!","success")},st=()=>{localStorage.removeItem("kingdom_save"),l({...ae,startTime:o(Date.now())}),U(!1),z("Game Reset","warning")},lt=()=>{const n=xe(t);localStorage.setItem("kingdom_save",JSON.stringify(n)),z("Game Saved","info")},it=r=>{l(n=>({...n,playerProfile:r})),localStorage.setItem(`playerProfile_${r.id}`,JSON.stringify(r)),z(`Welcome, ${r.rulerName} ${r.rulerId}!`,"success"),v(!1)},at=async()=>{nt()},Le=r=>{l(n=>({...n,interface:{...n.interface,lastBuyAmount:r}}))},Be=r=>({flex:r==="left"?"var(--col-left)":"var(--col-right)",display:"flex",flexDirection:"column",borderRight:r==="left"?"var(--custom-border-width) double var(--border-color)":"none",borderLeft:r==="right"?"var(--custom-border-width) double var(--border-color)":"none",background:"var(--panel-bg)",minWidth:0,transition:"transform 0.8s ease-in-out",transform:m&&t.idleModeEnabled?r==="left"?"translateX(-120%)":"translateX(120%)":"translateX(0)",zIndex:10});return e.jsxs("div",{style:{display:"flex",height:"100dvh",width:"100vw",backgroundColor:"var(--bg-color)",overflow:"hidden",position:"relative",flexDirection:N?"column":"row"},children:[e.jsx(Et,{toasts:G}),e.jsx(Rt,{}),m&&t.idleModeEnabled&&e.jsx(bt,{gameState:t}),!N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:Be("left"),children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:e.jsx("button",{className:`tab-btn ${T==="buildings"?"active":""}`,onClick:()=>R("buildings"),children:"Estates"})}),e.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:T==="buildings"&&e.jsx(Fe,{gameState:t,onBuyBuilding:Te,onSellBuilding:Ne,onSetBuyAmount:Le})})]}),e.jsx("div",{style:{flex:"var(--col-center)",display:"flex",flexDirection:"column",position:"relative",borderRight:m&&t.idleModeEnabled?"none":"var(--custom-border-width) double var(--border-color)",minWidth:0,zIndex:5,transition:"border 0.8s"},children:e.jsx(Oe,{gameState:t,gps:ce,onClick:()=>ke(!1),onEventInteract:Re,onOpenTavern:()=>K(!0),onOpenPrestige:()=>V(!0),onOpenSettings:()=>U(!0),onOpenStatistics:()=>A(!0),onOpenLeaderboard:()=>{u(!0)},onOpenEmpire:()=>Z(!0),isIdle:m&&t.idleModeEnabled})}),e.jsxs("div",{style:Be("right"),children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)"},children:e.jsx("button",{className:`tab-btn ${L==="army"?"active":""}`,onClick:()=>O("army"),children:"Workforce"})}),e.jsx("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden"},children:L==="army"&&e.jsx(Ge,{gameState:t,onTrainSoldier:Pe,onTrainElite:Ee})})]})]}),N&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden",position:"relative",minHeight:0,height:"100%"},children:[B==="buildings"&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",height:"100%",minHeight:0},children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)",flexShrink:0},children:e.jsx("button",{className:"tab-btn active",onClick:()=>{},children:"Estates"})}),e.jsx("div",{className:"scrollable-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",minHeight:0,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:e.jsx(Fe,{gameState:t,onBuyBuilding:Te,onSellBuilding:Ne,onSetBuyAmount:Le})})]}),B==="throne"&&e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsx(Oe,{gameState:t,gps:ce,onClick:()=>ke(!1),onEventInteract:Re,onOpenTavern:()=>K(!0),onOpenPrestige:()=>V(!0),onOpenSettings:()=>U(!0),onOpenStatistics:()=>A(!0),onOpenLeaderboard:()=>u(!0),onOpenEmpire:()=>Z(!0),isIdle:m&&t.idleModeEnabled})}),B==="army"&&e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",height:"100%",minHeight:0},children:[e.jsx("div",{style:{display:"flex",borderBottom:"var(--custom-border-width) solid var(--border-color)",flexShrink:0},children:e.jsx("button",{className:"tab-btn active",children:"Workforce"})}),e.jsx("div",{className:"scrollable-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",minHeight:0,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:e.jsx(Ge,{gameState:t,onTrainSoldier:Pe,onTrainElite:Ee})})]}),B==="empire"&&e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0,height:"100%"},children:e.jsx("div",{className:"scrollable-content",style:{flex:1,overflowY:"auto",overflowX:"hidden",minHeight:0,WebkitOverflowScrolling:"touch",touchAction:"pan-y"},children:e.jsxs("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:[e.jsx("h3",{children:"üèóÔ∏è National Projects"}),e.jsx("p",{children:"Construct massive infrastructure to boost global production."}),e.jsx("button",{className:"btn",onClick:()=>Z(!0),style:{margin:"10px",padding:"15px 20px",fontSize:"16px"},children:"üèóÔ∏è Manage Projects"})]})})})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",height:"60px",backgroundColor:"var(--panel-bg)",borderTop:"var(--custom-border-width) solid var(--border-color)",flexShrink:0},children:[e.jsxs("button",{className:`mobile-nav-btn ${B==="buildings"?"active":""}`,onClick:()=>{ie("light"),F("buildings")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:B==="buildings"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üèòÔ∏è"}),e.jsx("div",{children:"Estates"})]}),e.jsxs("button",{className:`mobile-nav-btn ${B==="throne"?"active":""}`,onClick:()=>{ie("light"),F("throne")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:B==="throne"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üëë"}),e.jsx("div",{children:"Throne"})]}),e.jsxs("button",{className:`mobile-nav-btn ${B==="army"?"active":""}`,onClick:()=>{ie("light"),F("army")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:B==="army"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üë∑"}),e.jsx("div",{children:"Workforce"})]}),e.jsxs("button",{className:`mobile-nav-btn ${B==="empire"?"active":""}`,onClick:()=>{ie("light"),F("empire")},style:{flex:1,height:"100%",border:"none",backgroundColor:"transparent",fontSize:"12px",color:B==="empire"?"var(--accent-color)":"var(--text-color)",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"4px",cursor:"pointer"},children:[e.jsx("div",{style:{fontSize:"20px"},children:"üèóÔ∏è"}),e.jsx("div",{children:"Projects"})]})]})]}),!(m&&t.idleModeEnabled)&&k&&e.jsxs("div",{className:"achievement-popup",children:[e.jsx("div",{style:{fontSize:"2rem"},children:k.icon}),e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",color:"var(--text-color)"},children:"Achievement Unlocked!"}),e.jsx("div",{style:{color:"var(--accent-color)"},children:k.name})]})]}),W&&e.jsx(mt,{gained:W.gained,effectiveTime:W.effectiveTime,totalTime:W.totalTime,efficiency:W.efficiency,completedProjects:W.completedProjects,numberFormat:t.numberFormat,onClose:()=>E(null)}),q&&e.jsx(Pt,{gameState:t,onClose:()=>Z(!1),onStartProject:r=>{var y,w,p,i;const n=((y=t.nationalProjects[r])==null?void 0:y.level)||0;if(n>=ve)return;const s=He(r,n+1);if(t.gold.lt(s.gold)||t.soldiers.lt(s.laborers)||(w=t.eliteUnits.carpenter)!=null&&w.lt(s.carpenter||0)||(p=t.eliteUnits.mason)!=null&&p.lt(s.mason||0)||(i=t.eliteUnits.architect)!=null&&i.lt(s.architect||0))return;const d=Xe(n+1);l(P=>({...P,gold:P.gold.minus(s.gold),soldiers:P.soldiers.minus(s.laborers),eliteUnits:{...P.eliteUnits,carpenter:(P.eliteUnits.carpenter||o(0)).minus(s.carpenter||0),mason:(P.eliteUnits.mason||o(0)).minus(s.mason||0),architect:(P.eliteUnits.architect||o(0)).minus(s.architect||0)},nationalProjects:{...P.nationalProjects,[r]:{level:n,active:!0,startTime:Date.now(),endTime:Date.now()+d*1e3}}})),z("Construction started!","info")},onUpgradeClickPower:ot,onUpgradeOffline:rt}),J&&e.jsx(Ct,{gameState:t,onGamble:(r,n)=>{const s=o(r);l(d=>({...d,gold:n?d.gold.plus(s):d.gold.minus(s),stats:{...d.stats,tavernGamesPlayed:d.stats.tavernGamesPlayed.plus(o(1))}}))},onClose:()=>K(!1)}),X&&e.jsx(St,{gameState:t,onPrestige:at,onClose:()=>V(!1)}),_&&e.jsx(kt,{gameState:t,onClose:()=>U(!1),onHardReset:st,onSave:lt,onOpenChangelog:()=>h(!0),onSetTheme:r=>l(n=>({...n,theme:r})),onSetNumberFormat:r=>l(n=>({...n,numberFormat:r})),onToggleIdleMode:()=>l(r=>({...r,idleModeEnabled:!r.idleModeEnabled})),onUpdateInterface:r=>l(n=>({...n,interface:{...n.interface,...r}}))}),D&&e.jsx(Tt,{gameState:t,currentGps:ce,onClose:()=>A(!1)}),f&&e.jsx(xt,{onClose:()=>h(!1)}),Q&&e.jsx(Wt,{isOpen:Q,onClose:()=>{te(!1),v(!0)},onConfirm:it,gameState:t}),ne&&e.jsx(Ot,{isOpen:ne,onClose:()=>u(!1),playerProfile:t.playerProfile})]})};export{Jt as A,wt as R,e as j,x as r};
