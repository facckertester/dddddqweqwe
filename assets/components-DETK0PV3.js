import{r as B,j as e}from"./app-CuDb7JLo.js";import{t as r,B as Z,h as X,f as a,j as ee,k as oe,U as _,D as ne,S as C,i as ie,e as se,W as le}from"./constants-5vHi3EcM.js";import{b as ce,g as Q}from"./ui-DrtX7wzg.js";const Y=(t,w=!1,x=!1,b=!1)=>({display:"flex",alignItems:"center",padding:"var(--panel-padding)",background:x?"rgba(0,0,0,0.05)":w?"rgba(46, 125, 50, 0.1)":b?"#f3e5f5":"var(--panel-bg)",border:"1px solid",borderColor:x?"rgba(0,0,0,0.2)":b?"#7b1fa2":t?"var(--accent-color)":"rgba(0,0,0,0.1)",borderRadius:"2px",cursor:t&&!x?"pointer":"default",opacity:t&&!x||w?1:.7,transition:"all 0.2s",boxShadow:t&&!x?"2px 2px 0 rgba(0,0,0,0.1)":"none",position:"relative",userSelect:"none",marginBottom:"var(--gap-size)",filter:x?"grayscale(1)":"none"}),H={display:"flex",flexDirection:"column",gap:"var(--gap-size)",height:"100%",overflowY:"auto",padding:"var(--panel-padding)"},xe=({gameState:t,onBuyUpgrade:w})=>{const[x,b]=B.useState(!1),o=_.filter(n=>{const s=t.upgrades||[];return!(Array.isArray(s)&&s.includes(n.id)||n.type==="building"&&n.targetId&&(t.buildings[n.targetId]||r(0)).lt(r(1))||n.triggerId&&(t.buildings[n.triggerId]||r(0)).lt(n.triggerCount||r(0))||n.currency==="renown"&&t.renown.lt(n.cost.times(r(.1))))}),y=_.filter(n=>{const s=t.upgrades||[];return Array.isArray(s)&&s.includes(n.id)}),d=x?y:o,u=[...d].sort((n,s)=>n.currency==="renown"&&s.currency!=="renown"?-1:n.currency!=="renown"&&s.currency==="renown"?1:n.cost.cmp(s.cost));return e.jsxs("div",{style:H,children:[e.jsxs("div",{style:{display:"flex",marginBottom:"15px",gap:"8px",justifyContent:"center",padding:"10px",background:"rgba(141, 110, 99, 0.1)",borderRadius:"4px",border:"1px solid var(--accent-color)"},children:[e.jsxs("button",{style:{padding:"10px 20px",border:"2px solid var(--accent-color)",background:x?"var(--panel-bg)":"var(--accent-color)",color:x?"var(--text-color)":"var(--button-text)",borderRadius:"2px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.2s ease"},onClick:()=>b(!1),children:["Available (",o.length,")"]}),e.jsxs("button",{style:{padding:"10px 20px",border:"2px solid var(--accent-color)",background:x?"var(--accent-color)":"var(--panel-bg)",color:x?"var(--button-text)":"var(--text-color)",borderRadius:"2px",cursor:"pointer",fontSize:"1rem",fontWeight:"bold",transition:"all 0.2s ease"},onClick:()=>b(!0),children:["Purchased (",y.length,")"]})]}),d.length===0?e.jsxs("div",{style:{justifyContent:"center",alignItems:"center",color:"var(--text-secondary)",textAlign:"center"},children:[e.jsx("div",{children:x?"No purchased upgrades yet.":"No upgrades available yet."}),e.jsx("div",{style:{fontSize:"0.8rem",marginTop:"5px"},children:x?"Purchase upgrades to see them here.":"Build more structures to unlock new technologies!"})]}):u.map((n,s)=>{const p=n.currency==="renown",m=t.upgrades&&t.upgrades.includes(n.id),l=p?t.renown.gte(n.cost):t.gold.gte(n.cost);return e.jsxs("div",{style:Y(l,m,!1,p),onClick:()=>!m&&l&&w(n.id),"data-tooltip":`${n.name}: ${n.description}`,children:[e.jsx("div",{style:{fontSize:"1.4rem",marginRight:"15px",width:"30px",textAlign:"center"},children:""}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold",color:p?"var(--accent-color)":"var(--text-color)",fontSize:"0.9rem"},children:n.name}),e.jsx("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:n.description})]}),e.jsx("div",{style:{textAlign:"right",fontWeight:"bold",color:m?"var(--success-color)":l?"var(--accent-color)":"var(--text-secondary)",fontSize:"0.8rem"},children:m?"Purchased":`${a(n.cost,t.numberFormat)} ${p?"":"G"}`})]},`${n.id}-${s}`)})]})},ue=({gameState:t,onBuyBuilding:w,onSellBuilding:x,onSetBuyAmount:b})=>{var M;const[o,y]=B.useState({visible:!1,x:0,y:0,building:null}),d=t.advisors.includes("guildmaster"),u=d?r(.9):r(1),n=((M=t.interface)==null?void 0:M.lastBuyAmount)||r(1),[s,p]=B.useState(!1),[m,l]=B.useState(1);B.useEffect(()=>{const i=f=>{f.ctrlKey?l(10):f.shiftKey?l(100):l(1)},k=f=>i(f),c=f=>i(f);return window.addEventListener("keydown",k),window.addEventListener("keyup",c),()=>{window.removeEventListener("keydown",k),window.removeEventListener("keyup",c)}},[]);const K=(i,k)=>{const c=i.currentTarget.getBoundingClientRect();y({visible:!0,x:c.right,y:c.top+c.height/2,building:k})},L=()=>{y({visible:!1,x:0,y:0,building:null})},N=(i,k)=>{var $;let c=k;const f=(($=t.weather)==null?void 0:$.current)||"clear";f==="sunny"&&(i==="peasant"||i==="field")?c=c.times(r(1.2)):f==="rainy"&&(i==="silver_mine"||i==="alchemist")?c=c.times(r(1.2)):f==="stormy"?(i==="blacksmith"&&(c=c.times(r(1.3))),i==="field"&&(c=c.times(r(.8)))):f==="windy"&&i==="market"&&(c=c.times(r(1.15)));let A=r(0);_.forEach(j=>{t.upgrades.includes(j.id)&&j.type==="building"&&j.targetId===i&&j.multiplier&&(A=A.plus(k.times(j.multiplier.minus(r(1)))))});let P=c.plus(A),h=r(1);_.forEach(j=>{t.upgrades.includes(j.id)&&j.type==="global"&&j.multiplier&&(h=h.times(j.multiplier))}),t.artifacts.forEach(j=>{const g=se.find(R=>R.id===j);g&&(h=h.times(g.globalMultiplier))});const E=Q(t.renown);return h=h.times(E),(t.activeDecrees.royal_feast||r(0)).gt(r(Date.now()))&&(h=h.times(r(2))),i==="astral_rift"&&(t.upgrades.includes("void_harvesting")&&(h=h.times(r(10))),t.upgrades.includes("singularity")&&(h=h.times(r(5)))),P.times(h)};return e.jsxs("div",{style:H,children:[e.jsx("div",{style:{display:"flex",gap:"5px",marginBottom:"10px",justifyContent:"center"},children:[r(1),r(10),r(100),r(500),r(1e3),r(-1)].map(i=>e.jsx("button",{onClick:()=>b(i),style:{padding:"5px 10px",border:"1px solid var(--accent-color)",background:n.equals(i)?"var(--accent-color)":"var(--panel-bg)",color:n.equals(i)?"var(--text-on-accent)":"var(--text-color)",cursor:"pointer",fontWeight:"bold",fontSize:"0.8rem"},children:i.equals(r(-1))?"Max":`${i.toString()}`},`amount-${i.toString()}`))}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",textAlign:"center"},children:"Hold Ctrl: x10 â€¢ Hold Shift: x100"}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"10px",justifyContent:"center"},children:[e.jsx("button",{className:"btn",style:{background:s?"var(--panel-bg)":"var(--accent-color)",color:s?"var(--text-color)":"var(--text-on-accent)",border:"1px solid var(--accent-color)",padding:"5px 15px",fontSize:"0.8rem"},onClick:()=>p(!1),children:"ğŸ›’ Buy Mode"}),e.jsx("button",{className:"btn",style:{background:s?"#e65100":"var(--panel-bg)",color:s?"var(--text-on-accent)":"var(--text-color)",border:"1px solid #e65100",padding:"5px 15px",fontSize:"0.8rem"},onClick:()=>p(!0),children:"ğŸ’° Sell Mode (25%)"})]}),e.jsxs("h3",{style:{fontSize:"1rem",color:"var(--text-secondary)",fontWeight:"bold",borderBottom:"1px solid var(--border-color)",paddingBottom:"5px"},children:["Estates ",d&&e.jsx("span",{style:{color:"var(--success-color)",fontSize:"0.8rem"},children:"(Guildmaster Discount Active)"})]}),Z.map((i,k)=>{if(k>0){const g=Z[k-1].id,R=t.buildings[g]||r(0),F=t.buildings[i.id]||r(0);if(["quantum_computer","multiverse_nexus","dyson_sphere","matter_replicator","architect_quill"].includes(i.id)){if(t.prestigeCount<3&&F.eq(r(0)))return null}else if(i.id==="astral_rift"){if(R.lt(r(100))&&F.eq(r(0)))return null}else if(k>Z.findIndex(I=>I.id==="astral_rift")){if(R.lt(r(20))&&F.eq(r(0)))return null}else if(R.lt(r(10))&&F.eq(r(0)))return null}const c=t.buildings[i.id]||r(0);if(s){if(c.eq(r(0)))return null;let g;n.equals(r(-1))?g=c:(g=n.times(m),g.gt(c)&&(g=c));const R=X(i.baseCost,c.minus(g),g).times(r(.25)).floor();return N(i.id,i.baseProduction),`${a(g,t.numberFormat)}${i.name}${a(R,t.numberFormat)}`,e.jsxs("div",{style:Y(!0,!1,!1,!1),onClick:()=>x(i.id,g.toNumber()),onMouseEnter:F=>K(F,i),onMouseLeave:L,children:[e.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:i.icon}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:i.name}),e.jsx("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--accent-color)"},children:a(c,t.numberFormat)})]})}),e.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[e.jsxs("div",{style:{color:"var(--accent-color)",fontWeight:"bold"},children:["+",a(R,t.numberFormat)]}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["for ",a(g,t.numberFormat)]})]})]},i.id)}let f=r(0),A=r(0);n.equals(r(-1))?(f=ee(i.baseCost,c,t.gold.div(u)),f.eq(r(0))?(f=r(1),A=oe(i.baseCost,c).times(u).floor()):A=X(i.baseCost,c,f).times(u).floor()):(f=n,A=X(i.baseCost,c,f).times(u).floor());const P=t.gold.gte(A),h=n.equals(r(-1))&&ee(i.baseCost,c,t.gold.div(u)).eq(r(0));N(i.id,i.baseProduction);let E=f,$=A,j=P;return n.equals(r(-1))||(E=f.times(m),$=X(i.baseCost,c,E).times(u).floor(),j=t.gold.gte($)),e.jsxs("div",{style:Y(j&&!h),onClick:()=>{if(!(j&&!h))return;const g=n.equals(r(-1))?f:E;w(i.id,g.toNumber())},onMouseEnter:g=>K(g,i),onMouseLeave:L,children:[e.jsx("div",{style:{fontSize:"2rem",marginRight:"15px",width:"40px",textAlign:"center"},children:i.icon}),e.jsx("div",{style:{flex:1},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",color:"var(--text-color)"},children:i.name}),e.jsx("span",{style:{fontSize:"1.4rem",fontWeight:"bold",color:"var(--accent-color)"},children:a(c,t.numberFormat)})]})}),e.jsxs("div",{style:{marginLeft:"12px",minWidth:"70px",textAlign:"right"},children:[e.jsx("div",{style:{color:j&&!h?"var(--gold-color)":"var(--text-secondary)",fontWeight:"bold"},children:a(n.equals(r(-1))?A:$,t.numberFormat)}),!n.equals(r(-1))&&e.jsxs("div",{style:{fontSize:"0.7rem",color:"var(--text-secondary)"},children:["for ",a(E,t.numberFormat)]})]})]},i.id)}),e.jsx(ce,{gameState:t,building:o.building,x:o.x,y:o.y,visible:o.visible,onHide:L})]})},fe=({gameState:t,onActivateDecree:w})=>{const[x,b]=B.useState(Date.now());return B.useEffect(()=>{const o=setInterval(()=>b(Date.now()),1e3);return()=>clearInterval(o)},[]),e.jsxs("div",{style:H,children:[e.jsx("div",{style:{marginBottom:"10px",fontSize:"0.9rem",fontStyle:"italic",color:"var(--text-secondary)"},children:"Issue Royal Decrees to boost your kingdom."}),ne.map(o=>{const y=r(x),d=t.activeDecrees[o.id]||r(0),u=t.decreeCooldowns[o.id]||r(0),n=o.unlockCondition?!o.unlockCondition(t):!1,s=d.gt(y),p=u.gt(y),m=!s&&!p&&!n;let l="Ready";return n?l="LOCKED":s?l="Active: "+d.minus(y).dividedBy(r(1e3)).ceil().toString()+"s":p&&(l="Wait: "+u.minus(y).dividedBy(r(1e3)).ceil().toString()+"s"),e.jsxs("div",{style:Y(m,s,n),onClick:()=>m&&w(o.id),"data-tooltip":n?`LOCKED: ${o.unlockDescription}`:`${o.name}: ${o.description}`,children:[e.jsx("div",{style:{fontSize:"1.8rem",marginRight:"15px"},children:n?"":o.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"bold",color:n?"var(--text-secondary)":"var(--text-color)"},children:o.name}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:o.description}),n&&e.jsxs("div",{style:{fontSize:"0.85rem",color:t.theme==="royal_dawn"?"#555555":"#ffffff",marginTop:"2px",fontWeight:"bold"},children:["Requirement: ",o.unlockDescription]})]}),e.jsx("div",{style:{textAlign:"right",fontWeight:"bold",color:m?"var(--success-color)":s?"blue":n?"var(--text-secondary)":"var(--danger-color)",minWidth:"80px"},children:l})]},o.id)})]})},he=({gameState:t,onTrainSoldier:w,onTrainElite:x})=>{const b=(t.buildings.castle||r(0)).gt(r(0)),[o,y]=B.useState(1);return B.useEffect(()=>{const d=s=>{s.ctrlKey?y(10):s.shiftKey?y(100):y(1)},u=s=>d(s),n=s=>d(s);return window.addEventListener("keydown",u),window.addEventListener("keyup",n),()=>{window.removeEventListener("keydown",u),window.removeEventListener("keyup",n)}},[]),e.jsxs("div",{style:H,children:[e.jsxs("div",{style:{padding:"15px",background:"var(--panel-bg)",borderRadius:"4px",marginBottom:"10px",border:"1px solid var(--border-color)"},children:[e.jsx("div",{style:{fontSize:"1.2rem",fontWeight:"bold",marginBottom:"5px",color:"var(--text-color)"},children:" Royal Army"}),e.jsx("div",{style:{fontSize:"2rem",color:"var(--text-color)"},children:a(t.soldiers,t.numberFormat)}),e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"Basic Soldiers Ready"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px",marginBottom:"20px"},children:[e.jsxs("button",{className:"btn",disabled:t.gold.lt(C.times(r(1*o))),onClick:()=>{w(1*o)},"data-tooltip":`Train 1 soldier - Cost: ${a(C.times(r(1*o)),t.numberFormat)} Gold`,children:["Train ",o>1?`${1*o}`:"1"," (",a(C.times(r(1*o)),t.numberFormat)," G)"]}),e.jsxs("button",{className:"btn",disabled:t.gold.lt(C.times(r(10*o))),onClick:()=>{w(10*o)},"data-tooltip":`Train 10 soldiers - Cost: ${a(C.times(r(10*o)),t.numberFormat)} Gold`,children:["Train ",o>1?`${10*o}`:"10"," (",a(C.times(r(10*o)),t.numberFormat)," G)"]}),e.jsxs("button",{className:"btn",disabled:t.gold.lt(C.times(r(100*o))),onClick:()=>{w(100*o)},"data-tooltip":`Train 1M soldiers - Cost: ${a(C.times(r(100*o)),t.numberFormat)} Gold`,children:["Train ",o>1?`${100*o}`:"100"," (",a(C.times(r(100*o)),t.numberFormat)," G)"]}),e.jsxs("button",{className:"btn",disabled:t.gold.lt(C.times(r(1e3*o))),onClick:()=>{w(1e3*o)},"data-tooltip":`Train 1M soldiers - Cost: ${a(C.times(r(1e3*o)),t.numberFormat)} Gold`,children:["Train ",o>1?`${1e3*o/1e3}K`:"1K"," (",a(C.times(r(1e3*o)),t.numberFormat)," G)"]}),e.jsxs("button",{className:"btn",disabled:t.gold.lt(C.times(r(1e6*o))),onClick:()=>{w(1e6*o)},"data-tooltip":`Train 10M soldiers - Cost: ${a(C.times(r(1e6*o)),t.numberFormat)} Gold`,children:["Train ",o>1?`${1e6*o/1e6}M`:"1M"," (",a(C.times(r(1e6*o)),t.numberFormat)," G)"]})]}),e.jsxs("div",{style:{borderTop:"2px solid var(--border-color)",paddingTop:"15px"},children:[e.jsxs("h3",{style:{fontSize:"1rem",color:"var(--accent-color)",fontWeight:"bold",marginBottom:"10px"},children:["Royal Academy ",e.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"normal",color:"var(--text-secondary)"},children:"(Convert Soldiers)"})]}),ie.map(d=>{const u=t.eliteUnits[d.id]||r(0),n=r(o),s=d.goldCost.times(n),p=d.soldierCost.times(n),m=t.gold.gte(s)&&t.soldiers.gte(p);return e.jsxs("div",{style:{marginBottom:"10px",padding:"10px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px"},"data-tooltip":"",children:[e.jsx("div",{style:{fontSize:"2rem"},children:d.icon}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{style:{fontWeight:"bold",color:"var(--text-color)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("span",{children:[d.name," ",e.jsxs("span",{style:{color:"var(--text-secondary)"},children:["x",a(u,t.numberFormat)]})]}),e.jsxs("button",{className:"btn",style:{padding:"5px 10px",fontSize:"0.8rem"},disabled:!m,onClick:()=>x(d.id,o),onMouseEnter:l=>{m||(l.currentTarget.style.cursor="not-allowed")},onMouseLeave:l=>{l.currentTarget.style.cursor="pointer"},"data-tooltip":"",children:["Train ",o>1?`x${o}`:""]})]}),e.jsx("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"4px"},children:d.description}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginTop:"2px"},children:["Requires ",a(s,t.numberFormat)," Gold and ",a(p,t.numberFormat)," Soldiers"]})]})]},d.id)})]}),e.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"var(--panel-bg)",border:"1px solid var(--border-color)",borderRadius:"4px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"5px",color:b?"var(--success-color)":"var(--danger-color)"},children:b?"âœ… Orders Received":"âš ï¸ Requirements Missing"}),e.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)"},children:b?"Send your army on Crusades via the 'Conquest' menu. Elite units are required for high-level dimensions.":"You have soldiers, but no headquarters! You must build a **Castle** to command your troops."})]})]})},ye=({gameState:t,gps:w,onClick:x,onEventInteract:b,onOpenConquest:o,onOpenTavern:y,onOpenPrestige:d,onOpenSettings:u,onOpenCouncil:n,onOpenStatistics:s,onOpenLeaderboard:p,onOpenEmpire:m,isIdle:l})=>{var R,F,J,I;const[K,L]=B.useState([]),N=B.useRef(null),M=B.useRef(null),[i,k]=B.useState({}),c=t.interface||{showFloatingText:!0,showWeatherWidget:!0,crownAnimations:!0},f=v=>{if(!M.current||l||!c.crownAnimations)return;const T=M.current.getBoundingClientRect(),G=T.left+T.width/2,S=T.top+T.height/2,O=(v.clientX-G)*.15,z=(v.clientY-S)*.15,q=(v.clientX-G)*.25,U=(v.clientY-S)*.25;k({transform:`translate(${O}px, ${z}px) scale(1.02)`,transition:"transform 0.1s cubic-bezier(0.4, 0, 0.2, 1)"}),M.current&&(M.current.style.setProperty("--crown-x",`${q}px`),M.current.style.setProperty("--crown-y",`${U}px`))},A=()=>{k({transform:"translate(0, 0) scale(1)",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}),M.current&&(M.current.style.setProperty("--crown-x","0px"),M.current.style.setProperty("--crown-y","0px"))},P=v=>{var G,S,O;const T=(G=N.current)==null?void 0:G.getBoundingClientRect();if(T){const z=document.createElement("div");z.className="ripple";const q=Math.max(T.width,T.height),U=v.clientX-T.left-q/2,D=v.clientY-T.top-q/2;z.style.width=z.style.height=q+"px",z.style.left=U+"px",z.style.top=D+"px",(S=N.current)==null||S.appendChild(z),setTimeout(()=>z.remove(),600)}if(c.showFloatingText){const z=(O=N.current)==null?void 0:O.getBoundingClientRect();if(z){const q=v.clientX-z.left+(Math.random()*40-20),U=v.clientY-z.top+(Math.random()*40-20);let D=r(1);_.filter(W=>W.type==="click"&&t.upgrades.includes(W.id)).forEach(W=>{W.multiplier&&(D=D.times(W.multiplier))}),(t.activeDecrees.call_to_arms||r(0)).gt(r(Date.now()))&&(D=D.times(r(5))),D=D.times(Q(t.renown));const te="+"+a(D,t.numberFormat),V={id:Date.now(),x:q,y:U,val:te};L(W=>[...W,V]),setTimeout(()=>{L(W=>W.filter(re=>re.id!==V.id))},1e3)}}x(v)},h=le[((R=t.weather)==null?void 0:R.current)||"clear"],E={transition:"all 0.8s ease-in-out"},$=l?{position:"fixed",bottom:"120px",right:"30px",transform:"scale(0.8)",transformOrigin:"bottom right",textAlign:"right",zIndex:100,...E}:{transform:"scale(1)",marginBottom:"3rem",zIndex:10,textAlign:"center",...E},j=l?{width:"80px",height:"80px",fontSize:"2rem",position:"fixed",bottom:"30px",right:"30px",borderRadius:"50%",zIndex:100,...E}:{width:"260px",height:"260px",fontSize:"6rem",borderRadius:"50%",position:"relative",zIndex:5,...E},g={opacity:l?0:1,transition:"opacity 0.5s ease-in-out",pointerEvents:l?"none":"auto"};return e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--panel-padding)",height:"100%",overflow:"hidden"},children:[c.showWeatherWidget&&e.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:20,background:h.color,padding:"8px 12px",borderRadius:"20px",border:"2px solid rgba(0,0,0,0.1)",boxShadow:"2px 2px 5px rgba(0,0,0,0.1)",display:"flex",alignItems:"center",gap:"8px",cursor:"help",...g},"data-tooltip":`${h.name}: ${h.description}`,children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:h.icon}),e.jsxs("div",{style:{textAlign:"left",lineHeight:"1.1"},children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"0.9rem",color:"#222"},children:h.name}),e.jsxs("div",{style:{fontSize:"0.7rem",color:"#444"},children:[r(Number(((F=t.weather)==null?void 0:F.timeLeft)||0)).ceil().toString(),"s remaining"]})]})]}),e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:20,display:"flex",gap:"5px",...g},children:[e.jsx("button",{onClick:p,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.8,color:"var(--text-color)",transition:"all 0.2s ease"},title:"Leaderboard (Available for all players)",onMouseEnter:v=>{v.currentTarget.style.opacity="1",v.currentTarget.style.transform="scale(1.1)"},onMouseLeave:v=>{v.currentTarget.style.opacity="0.8",v.currentTarget.style.transform="scale(1)"},children:"ğŸ†"}),e.jsx("button",{onClick:s,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Statistics",children:"ğŸ“Š"}),e.jsx("button",{onClick:u,style:{background:"transparent",border:"none",fontSize:"1.5rem",cursor:"pointer",opacity:.7,color:"var(--text-color)"},title:"Kingdom Settings",children:"âš™ï¸"})]}),e.jsxs("div",{style:$,children:[e.jsx("div",{style:{fontSize:"1rem",color:l?"var(--text-color)":"var(--text-secondary)",marginBottom:"5px",textTransform:"uppercase",letterSpacing:"2px",textShadow:l?"1px 1px 2px #000":"none"},children:"Royal Treasury"}),e.jsx("div",{style:{fontSize:"3rem",fontFamily:"var(--font-main)",color:"var(--text-color)",textShadow:l?"2px 2px 4px #000":"2px 2px 0px rgba(255, 215, 0, 0.4)"},children:a(t.gold,t.numberFormat)}),e.jsxs("div",{style:{marginTop:"5px",fontSize:"1.1rem",color:l?"#90ee90":"var(--success-color)",fontStyle:"italic",textShadow:l?"1px 1px 2px #000":"none"},children:["+",a(w,t.numberFormat)," gold / sec"]}),e.jsxs("div",{style:{marginTop:"15px",padding:"5px 15px",background:l?"rgba(0,0,0,0.5)":"rgba(103, 58, 183, 0.1)",border:"1px solid rgba(103, 58, 183, 0.3)",borderRadius:"20px",display:"inline-block"},children:[e.jsxs("span",{style:{color:l?"#b39ddb":"#673ab7",fontWeight:"bold"},children:["ğŸ‘‘ Renown: ",a(t.renown,t.numberFormat)]}),!l&&e.jsxs("span",{style:{fontSize:"0.8rem",color:"#673ab7",marginLeft:"5px"},children:["(+",Q(t.renown).minus(r(1)).times(r(100)).floor().toString(),"% Bonus)"]})]})]}),e.jsxs("div",{style:{position:"relative",marginBottom:l?0:"3rem"},children:[e.jsx("div",{ref:M,className:"magnetic-container",style:i,onMouseMove:f,onMouseLeave:A,children:e.jsx("button",{ref:N,className:`main-button ${l?"idle":""} ${c.crownAnimations?"":"no-animations"}`,style:{...j,display:"flex",alignItems:"center",justifyContent:"center",outline:"none",color:"#5d4037",cursor:"pointer",overflow:"hidden"},onClick:P,children:e.jsx("span",{className:c.crownAnimations?"crown-icon":"",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",lineHeight:1,marginTop:"-10px"},children:"ğŸ‘‘"})})}),!l&&K.map(v=>e.jsx("div",{className:"floating-text",style:{left:v.x,top:v.y},children:v.val},v.id))]}),e.jsxs("div",{style:{display:"flex",gap:"10px",zIndex:10,flexWrap:"wrap",justifyContent:"center",...g},children:[(((J=t.buildings.castle)==null?void 0:J.gt(r(0)))||t.soldiers.gt(r(0)))&&e.jsx("button",{className:"btn",onClick:o,children:"ğŸ—ºï¸ Conquest"}),t.buildings.castle&&t.buildings.castle.gt(r(0))&&e.jsx("button",{className:"btn",style:{background:"var(--accent-color)",borderColor:"var(--gold-color)"},onClick:m,children:"ğŸ‘‘ Empire"}),((I=t.buildings.tavern)==null?void 0:I.gt(r(0)))&&e.jsx("button",{className:"btn",onClick:y,children:"ğŸº Tavern"}),(t.renown.gt(r(0))||t.gold.gt(r(1e5)))&&e.jsx("button",{className:"btn",style:{background:"var(--accent-color)"},onClick:n,children:"âš–ï¸ Council"}),(t.totalGold.gt(r(5e5))||t.renown.gt(r(0)))&&e.jsx("button",{className:"btn",style:{background:"var(--accent-color)"},onClick:d,children:"ğŸ‘‘ Legacy"})]}),!l&&t.event&&t.event.type==="dragon"&&e.jsx("div",{className:"dragon-event",onMouseDown:()=>b(t.event),style:{top:"20%"},children:"ğŸ‰"}),!l&&t.event&&t.event.type==="merchant"&&e.jsxs("div",{style:{position:"absolute",right:"20px",top:"100px",background:"#fff3e0",padding:"10px",border:"2px solid orange",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>b(t.event),children:[e.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ğŸ‘³"}),e.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Merchant"}),e.jsx("small",{style:{color:"#444"},children:"Click for gift"})]}),!l&&t.event&&t.event.type==="jester"&&e.jsxs("div",{style:{position:"absolute",left:"20px",top:"100px",background:"#fce4ec",padding:"10px",border:"2px solid pink",zIndex:100,cursor:"pointer",animation:"pop 0.5s",borderRadius:"8px",boxShadow:"2px 2px 5px rgba(0,0,0,0.2)"},onClick:()=>b(t.event),children:[e.jsx("div",{style:{fontSize:"1.5rem",textAlign:"center"},children:"ğŸ¤¡"}),e.jsx("div",{style:{fontWeight:"bold",color:"#000"},children:"Jester"}),e.jsx("small",{style:{color:"#444"},children:"Risk it all?"})]})]})},me=({gameState:t})=>{const{weather:w,buildings:x,totalGold:b}=t,o=l=>x[l]||0;let y="wilderness";o("palace")>0?y="empire":o("castle")>0||o("market")>0?y="city":(o("peasant")>20||o("field")>10||b>500)&&(y="hamlet");let d="",u="";switch(y){case"wilderness":d="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 60%, #556B2F 60%, #556B2F 100%)",u="ğŸŒ² ğŸŒ³ ğŸŒ² ğŸ¦Œ ğŸŒ² ğŸŒ¿";break;case"hamlet":d="linear-gradient(to bottom, #87CEEB 0%, #87CEEB 65%, #8B4513 65%, #228B22 80%)",u="ğŸ¡ ğŸŒ¾ ğŸ„ ğŸ¡ ğŸŒ¾ ğŸšœ";break;case"city":d="linear-gradient(to bottom, #B0C4DE 0%, #B0C4DE 60%, #696969 60%, #808080 100%)",u="ğŸ° ğŸ  âš’ï¸ ğŸ  âš–ï¸ ğŸ ";break;case"empire":d="linear-gradient(to bottom, #191970 0%, #4B0082 50%, #FFD700 100%)",u="ğŸ¯ ğŸ’‚ ğŸ›ï¸ ğŸ‰ ğŸ›ï¸ ğŸ’‚";break}const n=w.current;let s="none",p="",m=0;return n==="rainy"?(s="linear-gradient(to bottom, rgba(0,0,50,0.3), rgba(0,0,100,0.3))",p="ğŸŒ§ï¸ ğŸŒ§ï¸ ğŸŒ§ï¸ ğŸŒ§ï¸ ğŸŒ§ï¸",m=1):n==="stormy"?(s="linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(50,50,50,0.6))",p="âš¡ â›ˆï¸ âš¡ â›ˆï¸ âš¡",m=1):n==="sunny"?(s="radial-gradient(circle at top right, rgba(255,255,0,0.3), transparent)",p="â˜€ï¸",m=.6):n==="windy"&&(p="ğŸƒ ğŸƒ ğŸƒ",m=.8),e.jsxs("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:d,display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"center",paddingBottom:"20vh",zIndex:0,overflow:"hidden",transition:"background 2s ease"},children:[e.jsx("div",{style:{position:"absolute",top:"10%",width:"100%",textAlign:"center",fontSize:"5rem",opacity:m,animation:n==="windy"?"float 3s infinite ease-in-out":"none"},children:p}),s!=="none"&&e.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:s,pointerEvents:"none"}}),e.jsx("div",{style:{fontSize:"4rem",textAlign:"center",zIndex:1,textShadow:"0 4px 4px rgba(0,0,0,0.3)",whiteSpace:"nowrap"},children:u}),e.jsx("div",{style:{marginTop:"20px",fontSize:"1.5rem",color:"#fff",textShadow:"2px 2px 4px #000",fontStyle:"italic",zIndex:2,background:"rgba(0,0,0,0.5)",padding:"5px 15px",borderRadius:"15px"},children:"The Kingdom sleeps..."}),e.jsx("style",{children:`
            @keyframes float {
                0% { transform: translateX(0px); }
                50% { transform: translateX(20px); }
                100% { transform: translateX(0px); }
            }
        `})]})};export{he as A,ue as B,fe as D,me as I,ye as M,xe as U};
